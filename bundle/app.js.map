{
  "version": 3,
  "sources": ["../../plangs2/node_modules/preact/src/constants.js", "../../plangs2/node_modules/preact/src/util.js", "../../plangs2/node_modules/preact/src/options.js", "../../plangs2/node_modules/preact/src/create-element.js", "../../plangs2/node_modules/preact/src/component.js", "../../plangs2/node_modules/preact/src/diff/props.js", "../../plangs2/node_modules/preact/src/create-context.js", "../../plangs2/node_modules/preact/src/diff/children.js", "../../plangs2/node_modules/preact/src/diff/index.js", "../../plangs2/node_modules/preact/src/render.js", "../../plangs2/node_modules/preact/src/clone-element.js", "../../plangs2/node_modules/preact/src/diff/catch-error.js", "../../plangs2/node_modules/preact/devtools/src/devtools.js", "../../plangs2/node_modules/preact/devtools/src/index.js", "../../plangs2/node_modules/preact/debug/src/check-props.js", "../../plangs2/node_modules/preact/debug/src/component-stack.js", "../../plangs2/node_modules/preact/debug/src/debug.js", "../../plangs2/node_modules/preact/debug/src/constants.js", "../../plangs2/node_modules/preact/debug/src/util.js", "../../plangs2/node_modules/preact/debug/src/index.js", "../../plangs2/packages/server/src/elements.ts", "../../plangs2/packages/frontend/src/auxiliar/dom.ts", "../../plangs2/packages/frontend/src/auxiliar/events.ts", "../../plangs2/packages/frontend/src/auxiliar/styles.ts", "../../plangs2/node_modules/preact/hooks/src/index.js", "../../plangs2/packages/frontend/src/auxiliar/dispatchable.ts", "../../plangs2/node_modules/preact/jsx-runtime/src/utils.js", "../../plangs2/node_modules/preact/src/constants.js", "../../plangs2/node_modules/preact/jsx-runtime/src/index.js", "../../plangs2/packages/frontend/src/auxiliar/icons.tsx", "../../plangs2/packages/auxiliar/src/map2.ts", "../../plangs2/packages/auxiliar/src/filters.ts", "../../plangs2/packages/auxiliar/src/value.ts", "../../plangs2/node_modules/rison2/src/token.ts", "../../plangs2/node_modules/rison2/src/lexer.ts", "../../plangs2/node_modules/rison2/src/parser.ts", "../../plangs2/node_modules/rison2/src/stringifier.ts", "../../plangs2/node_modules/rison2/src/rison.ts", "../../plangs2/node_modules/rison2/src/escaped.ts", "../../plangs2/node_modules/rison2/src/index.ts", "../../plangs2/packages/plangs/src/util.ts", "../../plangs2/packages/frontend/src/auxiliar/utils.ts", "../../plangs2/packages/frontend/src/auxiliar/fragment.ts", "../../plangs2/packages/frontend/src/auxiliar/storage.ts", "../../plangs2/packages/frontend/src/components/facets/main/grid.ts", "../../plangs2/packages/auxiliar/src/array.ts", "../../plangs2/packages/auxiliar/src/iter_tap.ts", "../../plangs2/packages/auxiliar/src/graph.ts", "../../plangs2/packages/auxiliar/src/map_tap.ts", "../../plangs2/packages/plangs/src/facets/plangs.ts", "../../plangs2/packages/plangs/src/index.ts", "../../plangs2/packages/frontend/src/components/facets/misc/facet-bool.tsx", "../../plangs2/packages/frontend/src/components/facets/misc/facet-group.tsx", "../../plangs2/packages/frontend/src/components/facets/misc/facet-text.tsx", "../../plangs2/packages/frontend/src/components/icon-button/state.tsx", "../../plangs2/packages/frontend/src/components/icon-button/icon-button.tsx", "../../plangs2/packages/frontend/src/components/facets/multisel/state.ts", "../../plangs2/packages/frontend/src/components/facets/multisel/facet-multi.tsx", "../../plangs2/packages/frontend/src/components/facets/table/entries.ts", "../../plangs2/packages/frontend/src/components/facets/table/header.tsx", "../../plangs2/packages/frontend/src/components/facets/table/state.ts", "../../plangs2/packages/frontend/src/components/facets/table/facet-table.tsx", "../../plangs2/packages/frontend/src/components/facets/main/types.ts", "../../plangs2/packages/frontend/src/components/facets/main/plangs.tsx", "../../plangs2/packages/frontend/src/components/facets/main/state.ts", "../../plangs2/packages/frontend/src/components/facets/main/facets-main.tsx", "../../plangs2/packages/frontend/src/components/facets/main/index.tsx", "../../plangs2/packages/frontend/src/components/icon-button/index.tsx", "../../plangs2/packages/frontend/src/app/pl.ts", "../../plangs2/packages/frontend/src/components/misc/pill.tsx", "../../plangs2/packages/frontend/src/components/pl-info/pl-info.tsx", "../../plangs2/packages/frontend/src/components/pl-info/index.tsx", "../../plangs2/packages/frontend/src/app/index.tsx"],
  "sourcesContent": ["/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 16;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 17;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {preact.ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == null && options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor == undefined;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {Component} a\n * @param {Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c;\n\trerenderQueue.sort(depthSort);\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile ((c = rerenderQueue.shift())) {\n\t\tif (c._dirty) {\n\t\t\tlet renderQueueLength = rerenderQueue.length;\n\t\t\trenderComponent(c);\n\t\t\tif (rerenderQueue.length > renderQueueLength) {\n\t\t\t\t// When i.e. rerendering a provider additional new items can be injected, we want to\n\t\t\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t\t\t// single pass\n\t\t\t\trerenderQueue.sort(depthSort);\n\t\t\t}\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value == null ? '' : value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture =\n\t\t\tname !== (name = name.replace(/(PointerCapture)$|Capture$/i, '$1'));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (\n\t\t\tname.toLowerCase() in dom ||\n\t\t\tname === 'onFocusOut' ||\n\t\t\tname === 'onFocusIn'\n\t\t)\n\t\t\tname = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == 'http://www.w3.org/2000/svg') {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != null && (value !== false || name[4] === '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == null) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n", "import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\t/** @type {FunctionComponent} */\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\t/** @type {FunctionComponent} */\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\t/** @type {Component[] | null} */\n\t\t\t\tlet subs = [];\n\t\t\t\tlet ctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\t\tsubs = null;\n\t\t\t\t};\n\n\t\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\tsubs.some(c => {\n\t\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tif (subs) {\n\t\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType =\n\t\tcontext);\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR, INSERT_VNODE, MATCHED } from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\tnewParentVNode._nextDom = oldDom;\n\tconstructNewChildrenArray(newParentVNode, renderResult, oldChildren);\n\toldDom = newParentVNode._nextDom;\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (\n\t\t\tchildVNode == null ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index === -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, null, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == null && newDom != null) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tif (\n\t\t\tchildVNode._flags & INSERT_VNODE ||\n\t\t\toldVNode._children === childVNode._children\n\t\t) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom);\n\t\t} else if (\n\t\t\ttypeof childVNode.type == 'function' &&\n\t\t\tchildVNode._nextDom !== undefined\n\t\t) {\n\t\t\t// Since Fragments or components that return Fragment like VNodes can\n\t\t\t// contain multiple DOM nodes as the same level, continue the diff from\n\t\t\t// the sibling of last DOM child of this child VNode\n\t\t\toldDom = childVNode._nextDom;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because it\n\t\t// is only used by `diffChildren` to determine where to resume the diff\n\t\t// after diffing Components and Fragments. Once we store it the nextDOM\n\t\t// local var, we can clean up the property. Also prevents us hanging on to\n\t\t// DOM nodes that may have been unmounted.\n\t\tchildVNode._nextDom = undefined;\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\t// TODO: With new child diffing algo, consider alt ways to diff Fragments.\n\t// Such as dropping oldDom and moving fragments in place\n\t//\n\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t// _nextDom property to the nextSibling of its last child DOM node.\n\t//\n\t// `oldDom` contains the correct value here because if the last child\n\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t// node's nextSibling.\n\tnewParentVNode._nextDom = oldDom;\n\tnewParentVNode._dom = firstChildDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(newParentVNode, renderResult, oldChildren) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tconst newChildrenLength = renderResult.length;\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == null ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode.constructor === undefined && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : null,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\n\t\t// Handle unmounting null placeholders, i.e. VNode => null in unkeyed children\n\t\tif (childVNode == null) {\n\t\t\toldVNode = oldChildren[skewedIndex];\n\t\t\tif (\n\t\t\t\toldVNode &&\n\t\t\t\toldVNode.key == null &&\n\t\t\t\toldVNode._dom &&\n\t\t\t\t(oldVNode._flags & MATCHED) === 0\n\t\t\t) {\n\t\t\t\tif (oldVNode._dom == newParentVNode._nextDom) {\n\t\t\t\t\tnewParentVNode._nextDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode, false);\n\n\t\t\t\t// Explicitly nullify this position in oldChildren instead of just\n\t\t\t\t// setting `_match=true` to prevent other routines (e.g.\n\t\t\t\t// `findMatchingIndex` or `getDomSibling`) from thinking VNodes or DOM\n\t\t\t\t// nodes in this position are still available to be used in diffing when\n\t\t\t\t// they have actually already been unmounted. For example, by only\n\t\t\t\t// setting `_match=true` here, the unmounting loop later would attempt\n\t\t\t\t// to unmount this VNode again seeing `_match==true`.  Further,\n\t\t\t\t// getDomSibling doesn't know about _match and so would incorrectly\n\t\t\t\t// assume DOM nodes in this subtree are mounted and usable.\n\t\t\t\toldChildren[skewedIndex] = null;\n\t\t\t\tremainingOldChildren--;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\tconst matchingIndex = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t);\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tchildVNode._index = matchingIndex;\n\n\t\toldVNode = null;\n\t\tif (matchingIndex !== -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original === null\n\t\tconst isMounting = oldVNode == null || oldVNode._original === null;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\tskew--;\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex !== skewedIndex) {\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else if (matchingIndex > skewedIndex) {\n\t\t\t\t// Our matched DOM-node is further in the list of children than\n\t\t\t\t// where it's at now.\n\n\t\t\t\t// When the remaining old children is bigger than the new-children\n\t\t\t\t// minus our skewed index we know we are dealing with a shrinking list\n\t\t\t\t// we have to increase our skew with the matchedIndex - the skewed index\n\t\t\t\tif (remainingOldChildren > newChildrenLength - skewedIndex) {\n\t\t\t\t\tskew += matchingIndex - skewedIndex;\n\t\t\t\t} else {\n\t\t\t\t\t// If we have matched all the children just decrease the skew\n\t\t\t\t\tskew--;\n\t\t\t\t}\n\t\t\t} else if (matchingIndex < skewedIndex) {\n\t\t\t\tif (matchingIndex == skewedIndex - skew) {\n\t\t\t\t\tskew -= matchingIndex - skewedIndex;\n\t\t\t\t} else {\n\t\t\t\t\t// When our new position is in front of our old position than we increase the skew\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t// match the new skew index (i + new skew)\n\t\t\tif (matchingIndex !== i + skew) {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != null && (oldVNode._flags & MATCHED) === 0) {\n\t\t\t\tif (oldVNode._dom == newParentVNode._nextDom) {\n\t\t\t\t\tnewParentVNode._nextDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (oldDom && parentVNode.type && !parentDom.contains(oldDom)) {\n\t\t\toldDom = getDomSibling(parentVNode);\n\t\t}\n\t\tparentDom.insertBefore(parentVNode._dom, oldDom || null);\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != null && oldDom.nodeType === 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet x = skewedIndex - 1;\n\tlet y = skewedIndex + 1;\n\tlet oldVNode = oldChildren[skewedIndex];\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\tlet shouldSearch =\n\t\tremainingOldChildren >\n\t\t(oldVNode != null && (oldVNode._flags & MATCHED) === 0 ? 1 : 0);\n\n\tif (\n\t\toldVNode === null ||\n\t\t(oldVNode &&\n\t\t\tkey == oldVNode.key &&\n\t\t\ttype === oldVNode.type &&\n\t\t\t(oldVNode._flags & MATCHED) === 0)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tif (x >= 0) {\n\t\t\t\toldVNode = oldChildren[x];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) === 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn x;\n\t\t\t\t}\n\t\t\t\tx--;\n\t\t\t}\n\n\t\t\tif (y < oldChildren.length) {\n\t\t\t\toldVNode = oldChildren[y];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) === 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn y;\n\t\t\t\t}\n\t\t\t\ty++;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import {\n\tEMPTY_OBJ,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tRESET_MODE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!c._force &&\n\t\t\t\t\t((c.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\t\tnewVNode._original === oldVNode._original)\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.forEach(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = null;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t: MODE_HYDRATE;\n\n\t\t\t\twhile (oldDom && oldDom.nodeType === 8 && oldDom.nextSibling) {\n\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t}\n\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == null &&\n\t\tnewVNode._original === oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\tnewVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\troot._nextDom = undefined;\n\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType === 'svg') namespace = 'http://www.w3.org/2000/svg';\n\telse if (nodeType === 'math')\n\t\tnamespace = 'http://www.w3.org/1998/Math/MathML';\n\telse if (!namespace) namespace = 'http://www.w3.org/1999/xhtml';\n\n\tif (excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value === !!nodeType &&\n\t\t\t\t(nodeType ? value.localName === nodeType : value.nodeType === 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType === null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != null) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (i !== 'key' && !(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, null, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\ti !== 'key' &&\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html !== oldHtml.__html &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType === 'foreignObject'\n\t\t\t\t\t? 'http://www.w3.org/1999/xhtml'\n\t\t\t\t\t: namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (\n\t\t\t\tinputValue !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType === 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType === 'option' && inputValue !== oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked !== undefined && checked !== dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != null) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) {\n\t\t\tapplyRef(r, null, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove && vnode._dom != null) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._component = vnode._parent = vnode._dom = vnode._nextDom = undefined;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {ComponentChild} vnode The virtual node to render\n * @param {PreactElement} parentDom The DOM element to render into\n * @param {PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? null\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: null,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {ComponentChild} vnode The virtual node to render\n * @param {PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === undefined && defaultProps !== undefined) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tnull\n\t);\n}\n", "/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {VNode} [oldVNode]\n * @param {ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {Component} */\n\tlet component,\n\t\t/** @type {ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "import { Component, Fragment, options } from 'preact';\n\nexport function initDevTools() {\n\tconst globalVar =\n\t\ttypeof globalThis !== 'undefined'\n\t\t\t? globalThis\n\t\t\t: typeof window !== 'undefined'\n\t\t\t\t? window\n\t\t\t\t: undefined;\n\n\tif (\n\t\tglobalVar !== null &&\n\t\tglobalVar !== undefined &&\n\t\tglobalVar.__PREACT_DEVTOOLS__\n\t) {\n\t\tglobalVar.__PREACT_DEVTOOLS__.attachPreact('10.23.2', options, {\n\t\t\tFragment,\n\t\t\tComponent\n\t\t});\n\t}\n}\n", "import { options } from 'preact';\nimport { initDevTools } from './devtools';\n\ninitDevTools();\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, name: string) => T}\n */\nexport function addHookName(value, name) {\n\tif (options._addHookName) {\n\t\toptions._addHookName(name);\n\t}\n\treturn value;\n}\n", "const ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nlet loggedTypeFailures = {};\n\n/**\n * Reset the history of which prop type warnings have been logged.\n */\nexport function resetPropWarnings() {\n\tloggedTypeFailures = {};\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * Adapted from https://github.com/facebook/prop-types/blob/master/checkPropTypes.js\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n */\nexport function checkPropTypes(\n\ttypeSpecs,\n\tvalues,\n\tlocation,\n\tcomponentName,\n\tgetStack\n) {\n\tObject.keys(typeSpecs).forEach(typeSpecName => {\n\t\tlet error;\n\t\ttry {\n\t\t\terror = typeSpecs[typeSpecName](\n\t\t\t\tvalues,\n\t\t\t\ttypeSpecName,\n\t\t\t\tcomponentName,\n\t\t\t\tlocation,\n\t\t\t\tnull,\n\t\t\t\tReactPropTypesSecret\n\t\t\t);\n\t\t} catch (e) {\n\t\t\terror = e;\n\t\t}\n\t\tif (error && !(error.message in loggedTypeFailures)) {\n\t\t\tloggedTypeFailures[error.message] = true;\n\t\t\tconsole.error(\n\t\t\t\t`Failed ${location} type: ${error.message}${\n\t\t\t\t\t(getStack && `\\n${getStack()}`) || ''\n\t\t\t\t}`\n\t\t\t);\n\t\t}\n\t});\n}\n", "import { options, Fragment } from 'preact';\n\n/**\n * Get human readable name of the component/dom node\n * @param {import('./internal').VNode} vnode\n * @param {import('./internal').VNode} vnode\n * @returns {string}\n */\nexport function getDisplayName(vnode) {\n\tif (vnode.type === Fragment) {\n\t\treturn 'Fragment';\n\t} else if (typeof vnode.type == 'function') {\n\t\treturn vnode.type.displayName || vnode.type.name;\n\t} else if (typeof vnode.type == 'string') {\n\t\treturn vnode.type;\n\t}\n\n\treturn '#text';\n}\n\n/**\n * Used to keep track of the currently rendered `vnode` and print it\n * in debug messages.\n */\nlet renderStack = [];\n\n/**\n * Keep track of the current owners. An owner describes a component\n * which was responsible to render a specific `vnode`. This exclude\n * children that are passed via `props.children`, because they belong\n * to the parent owner.\n *\n * ```jsx\n * const Foo = props => <div>{props.children}</div> // div's owner is Foo\n * const Bar = props => {\n *   return (\n *     <Foo><span /></Foo> // Foo's owner is Bar, span's owner is Bar\n *   )\n * }\n * ```\n *\n * Note: A `vnode` may be hoisted to the root scope due to compiler\n * optimiztions. In these cases the `_owner` will be different.\n */\nlet ownerStack = [];\n\n/**\n * Get the currently rendered `vnode`\n * @returns {import('./internal').VNode | null}\n */\nexport function getCurrentVNode() {\n\treturn renderStack.length > 0 ? renderStack[renderStack.length - 1] : null;\n}\n\n/**\n * If the user doesn't have `@babel/plugin-transform-react-jsx-source`\n * somewhere in his tool chain we can't print the filename and source\n * location of a component. In that case we just omit that, but we'll\n * print a helpful message to the console, notifying the user of it.\n */\nlet showJsxSourcePluginWarning = true;\n\n/**\n * Check if a `vnode` is a possible owner.\n * @param {import('./internal').VNode} vnode\n */\nfunction isPossibleOwner(vnode) {\n\treturn typeof vnode.type == 'function' && vnode.type != Fragment;\n}\n\n/**\n * Return the component stack that was captured up to this point.\n * @param {import('./internal').VNode} vnode\n * @returns {string}\n */\nexport function getOwnerStack(vnode) {\n\tconst stack = [vnode];\n\tlet next = vnode;\n\twhile (next._owner != null) {\n\t\tstack.push(next._owner);\n\t\tnext = next._owner;\n\t}\n\n\treturn stack.reduce((acc, owner) => {\n\t\tacc += `  in ${getDisplayName(owner)}`;\n\n\t\tconst source = owner.__source;\n\t\tif (source) {\n\t\t\tacc += ` (at ${source.fileName}:${source.lineNumber})`;\n\t\t} else if (showJsxSourcePluginWarning) {\n\t\t\tconsole.warn(\n\t\t\t\t'Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.'\n\t\t\t);\n\t\t}\n\t\tshowJsxSourcePluginWarning = false;\n\n\t\treturn (acc += '\\n');\n\t}, '');\n}\n\n/**\n * Setup code to capture the component trace while rendering. Note that\n * we cannot simply traverse `vnode._parent` upwards, because we have some\n * debug messages for `this.setState` where the `vnode` is `undefined`.\n */\nexport function setupComponentStack() {\n\tlet oldDiff = options._diff;\n\tlet oldDiffed = options.diffed;\n\tlet oldRoot = options._root;\n\tlet oldVNode = options.vnode;\n\tlet oldRender = options._render;\n\n\toptions.diffed = vnode => {\n\t\tif (isPossibleOwner(vnode)) {\n\t\t\townerStack.pop();\n\t\t}\n\t\trenderStack.pop();\n\t\tif (oldDiffed) oldDiffed(vnode);\n\t};\n\n\toptions._diff = vnode => {\n\t\tif (isPossibleOwner(vnode)) {\n\t\t\trenderStack.push(vnode);\n\t\t}\n\t\tif (oldDiff) oldDiff(vnode);\n\t};\n\n\toptions._root = (vnode, parent) => {\n\t\townerStack = [];\n\t\tif (oldRoot) oldRoot(vnode, parent);\n\t};\n\n\toptions.vnode = vnode => {\n\t\tvnode._owner =\n\t\t\townerStack.length > 0 ? ownerStack[ownerStack.length - 1] : null;\n\t\tif (oldVNode) oldVNode(vnode);\n\t};\n\n\toptions._render = vnode => {\n\t\tif (isPossibleOwner(vnode)) {\n\t\t\townerStack.push(vnode);\n\t\t}\n\n\t\tif (oldRender) oldRender(vnode);\n\t};\n}\n", "import { checkPropTypes } from './check-props';\nimport { options, Component } from 'preact';\nimport {\n\tELEMENT_NODE,\n\tDOCUMENT_NODE,\n\tDOCUMENT_FRAGMENT_NODE\n} from './constants';\nimport {\n\tgetOwnerStack,\n\tsetupComponentStack,\n\tgetCurrentVNode,\n\tgetDisplayName\n} from './component-stack';\nimport { assign, isNaN } from './util';\n\nconst isWeakMapSupported = typeof WeakMap == 'function';\n\n/**\n * @param {import('./internal').VNode} vnode\n * @returns {Array<string>}\n */\nfunction getDomChildren(vnode) {\n\tlet domChildren = [];\n\n\tif (!vnode._children) return domChildren;\n\n\tvnode._children.forEach(child => {\n\t\tif (child && typeof child.type === 'function') {\n\t\t\tdomChildren.push.apply(domChildren, getDomChildren(child));\n\t\t} else if (child && typeof child.type === 'string') {\n\t\t\tdomChildren.push(child.type);\n\t\t}\n\t});\n\n\treturn domChildren;\n}\n\n/**\n * @param {import('./internal').VNode} parent\n * @returns {string}\n */\nfunction getClosestDomNodeParentName(parent) {\n\tif (!parent) return '';\n\tif (typeof parent.type == 'function') {\n\t\tif (parent._parent == null) {\n\t\t\tif (parent._dom != null && parent._dom.parentNode != null) {\n\t\t\t\treturn parent._dom.parentNode.localName;\n\t\t\t}\n\t\t\treturn '';\n\t\t}\n\t\treturn getClosestDomNodeParentName(parent._parent);\n\t}\n\treturn /** @type {string} */ (parent.type);\n}\n\nexport function initDebug() {\n\tsetupComponentStack();\n\n\tlet hooksAllowed = false;\n\n\t/* eslint-disable no-console */\n\tlet oldBeforeDiff = options._diff;\n\tlet oldDiffed = options.diffed;\n\tlet oldVnode = options.vnode;\n\tlet oldRender = options._render;\n\tlet oldCatchError = options._catchError;\n\tlet oldRoot = options._root;\n\tlet oldHook = options._hook;\n\tconst warnedComponents = !isWeakMapSupported\n\t\t? null\n\t\t: {\n\t\t\t\tuseEffect: new WeakMap(),\n\t\t\t\tuseLayoutEffect: new WeakMap(),\n\t\t\t\tlazyPropTypes: new WeakMap()\n\t\t\t};\n\tconst deprecations = [];\n\n\toptions._catchError = (error, vnode, oldVNode, errorInfo) => {\n\t\tlet component = vnode && vnode._component;\n\t\tif (component && typeof error.then == 'function') {\n\t\t\tconst promise = error;\n\t\t\terror = new Error(\n\t\t\t\t`Missing Suspense. The throwing component was: ${getDisplayName(vnode)}`\n\t\t\t);\n\n\t\t\tlet parent = vnode;\n\t\t\tfor (; parent; parent = parent._parent) {\n\t\t\t\tif (parent._component && parent._component._childDidSuspend) {\n\t\t\t\t\terror = promise;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// We haven't recovered and we know at this point that there is no\n\t\t\t// Suspense component higher up in the tree\n\t\t\tif (error instanceof Error) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\terrorInfo = errorInfo || {};\n\t\t\terrorInfo.componentStack = getOwnerStack(vnode);\n\t\t\toldCatchError(error, vnode, oldVNode, errorInfo);\n\n\t\t\t// when an error was handled by an ErrorBoundary we will nonetheless emit an error\n\t\t\t// event on the window object. This is to make up for react compatibility in dev mode\n\t\t\t// and thus make the Next.js dev overlay work.\n\t\t\tif (typeof error.then != 'function') {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\toptions._root = (vnode, parentNode) => {\n\t\tif (!parentNode) {\n\t\t\tthrow new Error(\n\t\t\t\t'Undefined parent passed to render(), this is the second argument.\\n' +\n\t\t\t\t\t'Check if the element is available in the DOM/has the correct id.'\n\t\t\t);\n\t\t}\n\n\t\tlet isValid;\n\t\tswitch (parentNode.nodeType) {\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\tcase DOCUMENT_NODE:\n\t\t\t\tisValid = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tisValid = false;\n\t\t}\n\n\t\tif (!isValid) {\n\t\t\tlet componentName = getDisplayName(vnode);\n\t\t\tthrow new Error(\n\t\t\t\t`Expected a valid HTML node as a second argument to render.\tReceived ${parentNode} instead: render(<${componentName} />, ${parentNode});`\n\t\t\t);\n\t\t}\n\n\t\tif (oldRoot) oldRoot(vnode, parentNode);\n\t};\n\n\toptions._diff = vnode => {\n\t\tlet { type } = vnode;\n\n\t\thooksAllowed = true;\n\n\t\tif (type === undefined) {\n\t\t\tthrow new Error(\n\t\t\t\t'Undefined component passed to createElement()\\n\\n' +\n\t\t\t\t\t'You likely forgot to export your component or might have mixed up default and named imports' +\n\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t);\n\t\t} else if (type != null && typeof type == 'object') {\n\t\t\tif (type._children !== undefined && type._dom !== undefined) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Invalid type passed to createElement(): ${type}\\n\\n` +\n\t\t\t\t\t\t'Did you accidentally pass a JSX literal as JSX twice?\\n\\n' +\n\t\t\t\t\t\t`  let My${getDisplayName(vnode)} = ${serializeVNode(type)};\\n` +\n\t\t\t\t\t\t`  let vnode = <My${getDisplayName(vnode)} />;\\n\\n` +\n\t\t\t\t\t\t'This usually happens when you export a JSX literal and not the component.' +\n\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthrow new Error(\n\t\t\t\t'Invalid type passed to createElement(): ' +\n\t\t\t\t\t(Array.isArray(type) ? 'array' : type)\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\tvnode.ref !== undefined &&\n\t\t\ttypeof vnode.ref != 'function' &&\n\t\t\ttypeof vnode.ref != 'object' &&\n\t\t\t!('$$typeof' in vnode) // allow string refs when preact-compat is installed\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t`Component's \"ref\" property should be a function, or an object created ` +\n\t\t\t\t\t`by createRef(), but got [${typeof vnode.ref}] instead\\n` +\n\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t);\n\t\t}\n\n\t\tif (typeof vnode.type == 'string') {\n\t\t\tfor (const key in vnode.props) {\n\t\t\t\tif (\n\t\t\t\t\tkey[0] === 'o' &&\n\t\t\t\t\tkey[1] === 'n' &&\n\t\t\t\t\ttypeof vnode.props[key] != 'function' &&\n\t\t\t\t\tvnode.props[key] != null\n\t\t\t\t) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`Component's \"${key}\" property should be a function, ` +\n\t\t\t\t\t\t\t`but got [${typeof vnode.props[key]}] instead\\n` +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Check prop-types if available\n\t\tif (typeof vnode.type == 'function' && vnode.type.propTypes) {\n\t\t\tif (\n\t\t\t\tvnode.type.displayName === 'Lazy' &&\n\t\t\t\twarnedComponents &&\n\t\t\t\t!warnedComponents.lazyPropTypes.has(vnode.type)\n\t\t\t) {\n\t\t\t\tconst m =\n\t\t\t\t\t'PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ';\n\t\t\t\ttry {\n\t\t\t\t\tconst lazyVNode = vnode.type();\n\t\t\t\t\twarnedComponents.lazyPropTypes.set(vnode.type, true);\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\tm + `Component wrapped in lazy() is ${getDisplayName(lazyVNode)}`\n\t\t\t\t\t);\n\t\t\t\t} catch (promise) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\tm + \"We will log the wrapped component's name once it is loaded.\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet values = vnode.props;\n\t\t\tif (vnode.type._forwarded) {\n\t\t\t\tvalues = assign({}, values);\n\t\t\t\tdelete values.ref;\n\t\t\t}\n\n\t\t\tcheckPropTypes(\n\t\t\t\tvnode.type.propTypes,\n\t\t\t\tvalues,\n\t\t\t\t'prop',\n\t\t\t\tgetDisplayName(vnode),\n\t\t\t\t() => getOwnerStack(vnode)\n\t\t\t);\n\t\t}\n\n\t\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n\t};\n\n\tlet renderCount = 0;\n\tlet currentComponent;\n\toptions._render = vnode => {\n\t\tif (oldRender) {\n\t\t\toldRender(vnode);\n\t\t}\n\t\thooksAllowed = true;\n\n\t\tconst nextComponent = vnode._component;\n\t\tif (nextComponent === currentComponent) {\n\t\t\trenderCount++;\n\t\t} else {\n\t\t\trenderCount = 1;\n\t\t}\n\n\t\tif (renderCount >= 25) {\n\t\t\tthrow new Error(\n\t\t\t\t`Too many re-renders. This is limited to prevent an infinite loop ` +\n\t\t\t\t\t`which may lock up your browser. The component causing this is: ${getDisplayName(\n\t\t\t\t\t\tvnode\n\t\t\t\t\t)}`\n\t\t\t);\n\t\t}\n\n\t\tcurrentComponent = nextComponent;\n\t};\n\n\toptions._hook = (comp, index, type) => {\n\t\tif (!comp || !hooksAllowed) {\n\t\t\tthrow new Error('Hook can only be invoked from render methods.');\n\t\t}\n\n\t\tif (oldHook) oldHook(comp, index, type);\n\t};\n\n\t// Ideally we'd want to print a warning once per component, but we\n\t// don't have access to the vnode that triggered it here. As a\n\t// compromise and to avoid flooding the console with warnings we\n\t// print each deprecation warning only once.\n\tconst warn = (property, message) => ({\n\t\tget() {\n\t\t\tconst key = 'get' + property + message;\n\t\t\tif (deprecations && deprecations.indexOf(key) < 0) {\n\t\t\t\tdeprecations.push(key);\n\t\t\t\tconsole.warn(`getting vnode.${property} is deprecated, ${message}`);\n\t\t\t}\n\t\t},\n\t\tset() {\n\t\t\tconst key = 'set' + property + message;\n\t\t\tif (deprecations && deprecations.indexOf(key) < 0) {\n\t\t\t\tdeprecations.push(key);\n\t\t\t\tconsole.warn(`setting vnode.${property} is not allowed, ${message}`);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst deprecatedAttributes = {\n\t\tnodeName: warn('nodeName', 'use vnode.type'),\n\t\tattributes: warn('attributes', 'use vnode.props'),\n\t\tchildren: warn('children', 'use vnode.props.children')\n\t};\n\n\tconst deprecatedProto = Object.create({}, deprecatedAttributes);\n\n\toptions.vnode = vnode => {\n\t\tconst props = vnode.props;\n\t\tif (\n\t\t\tvnode.type !== null &&\n\t\t\tprops != null &&\n\t\t\t('__source' in props || '__self' in props)\n\t\t) {\n\t\t\tconst newProps = (vnode.props = {});\n\t\t\tfor (let i in props) {\n\t\t\t\tconst v = props[i];\n\t\t\t\tif (i === '__source') vnode.__source = v;\n\t\t\t\telse if (i === '__self') vnode.__self = v;\n\t\t\t\telse newProps[i] = v;\n\t\t\t}\n\t\t}\n\n\t\t// eslint-disable-next-line\n\t\tvnode.__proto__ = deprecatedProto;\n\t\tif (oldVnode) oldVnode(vnode);\n\t};\n\n\toptions.diffed = vnode => {\n\t\tconst { type, _parent: parent } = vnode;\n\t\t// Check if the user passed plain objects as children. Note that we cannot\n\t\t// move this check into `options.vnode` because components can receive\n\t\t// children in any shape they want (e.g.\n\t\t// `<MyJSONFormatter>{{ foo: 123, bar: \"abc\" }}</MyJSONFormatter>`).\n\t\t// Putting this check in `options.diffed` ensures that\n\t\t// `vnode._children` is set and that we only validate the children\n\t\t// that were actually rendered.\n\t\tif (vnode._children) {\n\t\t\tvnode._children.forEach(child => {\n\t\t\t\tif (typeof child === 'object' && child && child.type === undefined) {\n\t\t\t\t\tconst keys = Object.keys(child).join(',');\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`Objects are not valid as a child. Encountered an object with the keys {${keys}}.` +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (vnode._component === currentComponent) {\n\t\t\trenderCount = 0;\n\t\t}\n\n\t\tif (\n\t\t\ttypeof type === 'string' &&\n\t\t\t(isTableElement(type) ||\n\t\t\t\ttype === 'p' ||\n\t\t\t\ttype === 'a' ||\n\t\t\t\ttype === 'button')\n\t\t) {\n\t\t\t// Avoid false positives when Preact only partially rendered the\n\t\t\t// HTML tree. Whilst we attempt to include the outer DOM in our\n\t\t\t// validation, this wouldn't work on the server for\n\t\t\t// `preact-render-to-string`. There we'd otherwise flood the terminal\n\t\t\t// with false positives, which we'd like to avoid.\n\t\t\tlet domParentName = getClosestDomNodeParentName(parent);\n\t\t\tif (domParentName !== '' && isTableElement(type)) {\n\t\t\t\tif (\n\t\t\t\t\ttype === 'table' &&\n\t\t\t\t\t// Tables can be nested inside each other if it's inside a cell.\n\t\t\t\t\t// See https://developer.mozilla.org/en-US/docs/Learn/HTML/Tables/Advanced#nesting_tables\n\t\t\t\t\tdomParentName !== 'td' &&\n\t\t\t\t\tisTableElement(domParentName)\n\t\t\t\t) {\n\t\t\t\t\tconsole.log(domParentName, parent._dom);\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Improper nesting of table. Your <table> should not have a table-node parent.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t} else if (\n\t\t\t\t\t(type === 'thead' || type === 'tfoot' || type === 'tbody') &&\n\t\t\t\t\tdomParentName !== 'table'\n\t\t\t\t) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t} else if (\n\t\t\t\t\ttype === 'tr' &&\n\t\t\t\t\tdomParentName !== 'thead' &&\n\t\t\t\t\tdomParentName !== 'tfoot' &&\n\t\t\t\t\tdomParentName !== 'tbody'\n\t\t\t\t) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot> parent.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t} else if (type === 'td' && domParentName !== 'tr') {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Improper nesting of table. Your <td> should have a <tr> parent.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t} else if (type === 'th' && domParentName !== 'tr') {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Improper nesting of table. Your <th> should have a <tr>.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else if (type === 'p') {\n\t\t\t\tlet illegalDomChildrenTypes = getDomChildren(vnode).filter(childType =>\n\t\t\t\t\tILLEGAL_PARAGRAPH_CHILD_ELEMENTS.test(childType)\n\t\t\t\t);\n\t\t\t\tif (illegalDomChildrenTypes.length) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Improper nesting of paragraph. Your <p> should not have ' +\n\t\t\t\t\t\t\tillegalDomChildrenTypes.join(', ') +\n\t\t\t\t\t\t\t'as child-elements.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else if (type === 'a' || type === 'button') {\n\t\t\t\tif (getDomChildren(vnode).indexOf(type) !== -1) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t`Improper nesting of interactive content. Your <${type}>` +\n\t\t\t\t\t\t\t` should not have other ${type === 'a' ? 'anchor' : 'button'}` +\n\t\t\t\t\t\t\t' tags as child-elements.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\thooksAllowed = false;\n\n\t\tif (oldDiffed) oldDiffed(vnode);\n\n\t\tif (vnode._children != null) {\n\t\t\tconst keys = [];\n\t\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\t\tconst child = vnode._children[i];\n\t\t\t\tif (!child || child.key == null) continue;\n\n\t\t\t\tconst key = child.key;\n\t\t\t\tif (keys.indexOf(key) !== -1) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Following component has two or more children with the ' +\n\t\t\t\t\t\t\t`same key attribute: \"${key}\". This may cause glitches and misbehavior ` +\n\t\t\t\t\t\t\t'in rendering process. Component: \\n\\n' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\n\t\t\t\t\t// Break early to not spam the console\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tkeys.push(key);\n\t\t\t}\n\t\t}\n\n\t\tif (vnode._component != null && vnode._component.__hooks != null) {\n\t\t\t// Validate that none of the hooks in this component contain arguments that are NaN.\n\t\t\t// This is a common mistake that can be hard to debug, so we want to catch it early.\n\t\t\tconst hooks = vnode._component.__hooks._list;\n\t\t\tif (hooks) {\n\t\t\t\tfor (let i = 0; i < hooks.length; i += 1) {\n\t\t\t\t\tconst hook = hooks[i];\n\t\t\t\t\tif (hook._args) {\n\t\t\t\t\t\tfor (let j = 0; j < hook._args.length; j++) {\n\t\t\t\t\t\t\tconst arg = hook._args[j];\n\t\t\t\t\t\t\tif (isNaN(arg)) {\n\t\t\t\t\t\t\t\tconst componentName = getDisplayName(vnode);\n\t\t\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t\t\t`Invalid argument passed to hook. Hooks should not be called with NaN in the dependency array. Hook index ${i} in component ${componentName} was called with NaN.`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\nconst setState = Component.prototype.setState;\nComponent.prototype.setState = function (update, callback) {\n\tif (this._vnode == null) {\n\t\t// `this._vnode` will be `null` during componentWillMount. But it\n\t\t// is perfectly valid to call `setState` during cWM. So we\n\t\t// need an additional check to verify that we are dealing with a\n\t\t// call inside constructor.\n\t\tif (this.state == null) {\n\t\t\tconsole.warn(\n\t\t\t\t`Calling \"this.setState\" inside the constructor of a component is a ` +\n\t\t\t\t\t`no-op and might be a bug in your application. Instead, set ` +\n\t\t\t\t\t`\"this.state = {}\" directly.\\n\\n${getOwnerStack(getCurrentVNode())}`\n\t\t\t);\n\t\t}\n\t}\n\n\treturn setState.call(this, update, callback);\n};\n\nfunction isTableElement(type) {\n\treturn (\n\t\ttype === 'table' ||\n\t\ttype === 'tfoot' ||\n\t\ttype === 'tbody' ||\n\t\ttype === 'thead' ||\n\t\ttype === 'td' ||\n\t\ttype === 'tr' ||\n\t\ttype === 'th'\n\t);\n}\n\nconst ILLEGAL_PARAGRAPH_CHILD_ELEMENTS =\n\t/^(address|article|aside|blockquote|details|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|main|menu|nav|ol|p|pre|search|section|table|ul)$/;\n\nconst forceUpdate = Component.prototype.forceUpdate;\nComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode == null) {\n\t\tconsole.warn(\n\t\t\t`Calling \"this.forceUpdate\" inside the constructor of a component is a ` +\n\t\t\t\t`no-op and might be a bug in your application.\\n\\n${getOwnerStack(\n\t\t\t\t\tgetCurrentVNode()\n\t\t\t\t)}`\n\t\t);\n\t} else if (this._parentDom == null) {\n\t\tconsole.warn(\n\t\t\t`Can't call \"this.forceUpdate\" on an unmounted component. This is a no-op, ` +\n\t\t\t\t`but it indicates a memory leak in your application. To fix, cancel all ` +\n\t\t\t\t`subscriptions and asynchronous tasks in the componentWillUnmount method.` +\n\t\t\t\t`\\n\\n${getOwnerStack(this._vnode)}`\n\t\t);\n\t}\n\treturn forceUpdate.call(this, callback);\n};\n\n/**\n * Serialize a vnode tree to a string\n * @param {import('./internal').VNode} vnode\n * @returns {string}\n */\nexport function serializeVNode(vnode) {\n\tlet { props } = vnode;\n\tlet name = getDisplayName(vnode);\n\n\tlet attrs = '';\n\tfor (let prop in props) {\n\t\tif (props.hasOwnProperty(prop) && prop !== 'children') {\n\t\t\tlet value = props[prop];\n\n\t\t\t// If it is an object but doesn't have toString(), use Object.toString\n\t\t\tif (typeof value == 'function') {\n\t\t\t\tvalue = `function ${value.displayName || value.name}() {}`;\n\t\t\t}\n\n\t\t\tvalue =\n\t\t\t\tObject(value) === value && !value.toString\n\t\t\t\t\t? Object.prototype.toString.call(value)\n\t\t\t\t\t: value + '';\n\n\t\t\tattrs += ` ${prop}=${JSON.stringify(value)}`;\n\t\t}\n\t}\n\n\tlet children = props.children;\n\treturn `<${name}${attrs}${\n\t\tchildren && children.length ? '>..</' + name + '>' : ' />'\n\t}`;\n}\n", "export const ELEMENT_NODE = 1;\nexport const DOCUMENT_NODE = 9;\nexport const DOCUMENT_FRAGMENT_NODE = 11;\n", "/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\nexport function isNaN(value) {\n\treturn value !== value;\n}\n", "import { initDebug } from './debug';\nimport 'preact/devtools';\n\ninitDebug();\n\nexport { resetPropWarnings } from './check-props';\n", "/**\n * @file utilities to type check DOM \"id\" and \"class\" attributes.\n */\n\nexport const ID_KEYS = [\n  \"todo\",\n\n  \"mainNav\", // Main navigation bar, toggled by the hamburger icon.\n  \"plGrid\",\n  \"plInfo\",\n] as const;\n\nexport const CL_KEYS = [\n  \"todo\",\n\n  \"facetsMain\", // A Div wrapper for FacetsMain component.\n  \"iconButton\", // A Div wrapper for IconButton component.\n  \"navLink\",\n  \"pill\",\n  \"plThumb\",\n] as const;\n\nexport type IDKey = (typeof ID_KEYS)[number];\nexport type CLKey = (typeof CL_KEYS)[number];\n\nexport function cssID(key: IDKey): `id-${IDKey}` {\n  return `id-${key}`;\n}\n\nexport function cssClass(key: CLKey): `cl-${CLKey}` {\n  return `cl-${key}`;\n}\n", "import { type CLKey, type IDKey, cssClass, cssID } from \"@plangs/server/elements\";\n\n/**\n * Bun will attempt to load this code from the server even if it is not imported explicitly.\n * We need to define a valid document (even if it is undefined) to avoid errors.\n */\nconst doc = (typeof document === \"undefined\" ? undefined : document) as Document;\n\nexport const $ = doc?.querySelector.bind(doc);\nexport const $$ = doc?.querySelectorAll.bind(doc);\n\nexport const elem = <T extends HTMLElement>(key: IDKey) => $<T>(`#${cssID(key)}`) ?? undefined;\nexport const elems = <T extends HTMLElement>(key: CLKey) => $$<T>(`.${cssClass(key)}`);\n\n/** Return computed width and height of the element. */\nexport function size(el: HTMLElement): { width: number; height: number } {\n  try {\n    const style = getComputedStyle(el);\n    return { width: Number.parseInt(style.width), height: Number.parseInt(style.height) };\n  } catch (err) {\n    console.error(\"Error getting size\", el, err);\n  }\n  return { width: 0, height: 0 };\n}\n\n/** Call the same action on Enter or Click. */\nexport function onClickOnEnter(action: (ev: UIEvent) => void) {\n  return {\n    onClick: (ev: MouseEvent) => {\n      ev.stopPropagation();\n      action(ev);\n    },\n    onKeyDown: (ev: KeyboardEvent) => {\n      ev.stopPropagation();\n      if (ev.key === \"Enter\") {\n        ev.preventDefault();\n        action(ev);\n      }\n    },\n  };\n}\n\n/** Check if the min-width breakpoint applies right now.  */\nexport const minWidthBP = (size: string) => window.matchMedia(`(min-width: ${size})`).matches ?? false;\n", "export type Nil = null | undefined;\n\n/** Adds an event listener to the target, and returns a function to undo the listener. */\nexport function on<T>(target: EventTarget | Nil, type: string, listener: (ev: T) => void, opt?: AddEventListenerOptions): undefined | (() => void) {\n  if (!target) console.warn(\"missing target\", { type, listener, opt });\n  target?.addEventListener(type, listener as EventListener, opt);\n  if (target) return () => off(target, type, listener, opt);\n}\n\nexport function off<T>(target: EventTarget | Nil, type: string, listener: (ev: T) => void, opt?: AddEventListenerOptions): void {\n  if (!target) console.warn(\"missing target\", { type, listener, opt });\n  target?.removeEventListener(type, listener as EventListener, opt);\n}\n\nexport function send<T extends Event>(target: EventTarget | Nil, ev: T): boolean | undefined {\n  if (!target) console.warn(\"missing target\", ev);\n  return target?.dispatchEvent(ev);\n}\n\nexport function customEvent<T>(type: string, detail: T, options: CustomEventInit<T> = { bubbles: true, composed: true, cancelable: undefined }) {\n  return new CustomEvent(type, { detail, ...options });\n}\n\n/** Util to type cast and check an event handler. */\nexport function handler<T extends HTMLElement, Ev extends UIEvent = UIEvent>(action: (target: T, ev: Ev) => void) {\n  return (ev: Ev) => {\n    if (ev.target && \"tagName\" in ev.target) action(ev.target as T, ev);\n  };\n}\n", "/**\n * Some CSS styles we reuse across the app.\n */\n\nexport const BAR = \"bg-linear-to-b from-secondary to-background\";\nexport const BORDER = \"border-primary/85 border-dotted\";\nexport const HOVER = \"hover:bg-hiliteb hover:text-hilitef cursor-pointer\";\nexport const HOVER_LIST = [\"bg-hiliteb\", \"text-hilitef\"]; // for classList add/remove\nexport const HOVER_SVG = \"hover:stroke-1 hover:stroke-hiliteb\";\nexport const HOVER_SVG_GROUP = \"group-hover:stroke-1 group-hover:stroke-hiliteb\";\nexport const INPUT = \"bg-background text-foreground placeholder:text-foreground/50\";\nexport const PROSE = \"prose prose-green dark:prose-invert sm:prose-sm lg:prose-lg xl:prose-xl 2xl:prose-2xl max-w-[80ch] mx-auto\";\n\n/** Generate a stripped background image style. */\nexport function stripes(size = \"10px\", col1 = \"var(--color-stripes)\", col2 = \"var(--color-background)\") {\n  const grad = \"radial-gradient(transparent 0, var(--color-background) 75%) top left / 100% 100%\";\n  const rlg = `repeating-linear-gradient(45deg, ${col1} 0, ${col1} 1px, ${col2} 0, ${col2} 50%) top left / ${size} ${size}`;\n  return `background: ${grad}, ${rlg};`;\n}\n\n/** Collect tailwind classes. Adding a semicolon at the end or start of a class string filters that string out. */\nexport function tw(...classes: (string | undefined | boolean | string[])[]): string {\n  return classes\n    .flat(5) // Arbirtrary depth to flatten \uD83E\uDD37\u200D\u2642 (in practice we don't really use more than 1 level).\n    .filter(s => typeof s === \"string\" && !/^;|;$/.test(s))\n    .join(\" \");\n}\n\n/** Allow classList.toggle with more than one class. */\nexport function toggleClasses(element: HTMLElement | null | undefined, classes: string | string[], check: boolean) {\n  if (!element) return;\n  const all = Array.isArray(classes) ? classes : classes.split(\" \");\n  for (const c of all) element.classList.toggle(c, check);\n}\n\n/** Collect the classes from the classList of the element, and remove the given cssClasses. */\nexport function classesExcept(elem: Element, ...cssClasses: string[]): string {\n  return [...new Set(elem.classList).difference(new Set(cssClasses))].join(\" \");\n}\n", "import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = false;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn shouldUpdate || hookState._component.props !== p\n\t\t\t\t\t? prevScu\n\t\t\t\t\t\t? prevScu.call(this, p, s, c)\n\t\t\t\t\t\t: true\n\t\t\t\t\t: false;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tref(createHandle());\n\t\t\t\treturn () => ref(null);\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal.d').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n", "import type { RefObject } from \"preact\";\nimport { type Dispatch, useEffect, useRef, useState } from \"preact/hooks\";\n\nexport abstract class Dispatchable<T> {\n  dispatcher?: Dispatch<this>;\n\n  constructor(protected data: T) {}\n\n  clone(): this {\n    const Ctor = this.constructor as new (data: T) => this;\n    const clone = new Ctor(this.data);\n    clone.dispatcher = this.dispatcher;\n    return clone;\n  }\n\n  dispatch(): this {\n    this.dispatcher?.(this.clone());\n    return this;\n  }\n}\n\n/**\n * Setup a {@link Dispatchable} instance with a {@link useState} dispatcher.\n */\n// biome-ignore lint/suspicious/noExplicitAny: accept any kind of Dispatchable.\nexport function useDispatchable<T extends Dispatchable<any>>(factory: () => T): T {\n  const [state, dispatcher] = useState(factory);\n  state.dispatcher = dispatcher;\n  return state;\n}\n\n/**\n * Saves the state of the component on the HTML wrapper element of a preact component.\n * Returns a ref that should be attached to the root element of the component.\n */\nexport function useRootState<Container extends HTMLElement, T>(state: T): RefObject<Container | undefined> {\n  const ref = useRef<Container | undefined>();\n  useEffect(() => {\n    const root = ref.current?.parentElement as Container & { state?: T };\n    if (root && state) root.state = state;\n  }, [state]);\n  return ref as RefObject<Container | undefined>;\n}\n", "const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 16;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 17;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in normalizedProps) {\n\t\tnormalizedProps = {};\n\t\tfor (i in props) {\n\t\t\tif (i == 'ref') {\n\t\t\t\tref = props[i];\n\t\t\t} else {\n\t\t\t\tnormalizedProps[i] = props[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (typeof normalizedProps[i] === 'undefined') {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + str + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities(value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n", "// Thanks https://spectrum.adobe.com/page/icons/\n\nconst css = \"fill-current size-[1.5rem] sm:size-[1.75rem] lg:size-[2rem] xl:size-[2.25rem] 2xl:size-[2.5rem]\";\n\nexport const ABC = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Alphabetic</title>\n    <path\n      class=\"fill\"\n      d=\"M3.0805,8.3675,2.31,10.878c-.028.091-.0705.122-.154.122H.756c-.0845,0-.1125-.0455-.1-.15L3.5425,1.9285A2.51436,2.51436,0,0,0,3.669,1.107c0-.0615.028-.107.084-.107H5.7c.0705,0,.084.015.1.0915L9.0355,10.863c.0145.0915,0,.137-.084.137H7.381a.14051.14051,0,0,1-.1405-.0915L6.428,8.3675Zm2.9-1.6595c-.294-1.005-.9525-3.12-1.233-4.1855h-.014c-.224,1.02-.785,2.8-1.2045,4.1855Z\"\n    />\n    <path\n      class=\"fill\"\n      d=\"M9.613,17c-.0565,0-.1125-.015-.1125-.122v-1.02a.346.346,0,0,1,.042-.1825l4.861-7.032H9.711c-.0705,0-.1125-.0145-.1-.106l.21-1.4155C9.835,7.031,9.877,7,9.9465,7H16.463c.069,0,.084.031.084.0915v1.096a.3265.3265,0,0,1-.0705.213L11.7,15.3415h5.015c.069,0,.1.0455.069.137l-.2235,1.4c-.0135.091-.042.122-.126.122Z\"\n    />\n  </svg>\n);\n\nexport const RANKING = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Ranking</title>\n    <path\n      class=\"fill\"\n      d=\"M9,2a.497.497,0,0,0-.3735.168l-5.5,5A.48949.48949,0,0,0,3,7.497.5.5,0,0,0,3.497,8H14.5a.5.5,0,0,0,.5-.5V7.497a.48949.48949,0,0,0-.1275-.329l-5.5-5A.5.5,0,0,0,9,2Z\"\n    />\n    <path\n      class=\"fill\"\n      d=\"M9,16a.5.5,0,0,0,.3735-.168l5.5-5A.48949.48949,0,0,0,15,10.503.5.5,0,0,0,14.503,10H3.5a.5.5,0,0,0-.5.5v.003a.48949.48949,0,0,0,.1275.329l5.5,5A.497.497,0,0,0,9,16Z\"\n    />\n  </svg>\n);\n\nexport const FULLCIRCLE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Circle</title>\n    <circle class=\"fill\" cx=\"9\" cy=\"9\" r=\"8\" />\n  </svg>\n);\n\nexport const SUN = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Sun</title>\n    <path d=\"m9,5.05c2.18152,0,3.95,1.76848,3.95,3.95s-1.76848,3.95-3.95,3.95-3.95-1.76848-3.95-3.95,1.76848-3.95,3.95-3.95Zm-.9-4.8v2.5c0,.13807.11193.25.25.25h1.3c.13807,0,.25-.11193.25-.25V.25c0-.13807-.11193-.25-.25-.25h-1.3c-.13807,0-.25.11193-.25.25Zm0,15v2.5c0,.13807.11193.25.25.25h1.3c.13807,0,.25-.11193.25-.25v-2.5c0-.13807-.11193-.25-.25-.25h-1.3c-.13807,0-.25.11193-.25.25ZM0,8.35v1.3c0,.13807.11193.25.25.25h2.5c.13807,0,.25-.11193.25-.25v-1.3c0-.13807-.11193-.25-.25-.25H.25c-.13807,0-.25.11193-.25.25Zm15,0v1.3c0,.13807.11193.25.25.25h2.5c.13807,0,.25-.11193.25-.25v-1.3c0-.13807-.11193-.25-.25-.25h-2.5c-.13807,0-.25.11193-.25.25Zm-2.01021-4.23913l.91924.91924c.09763.09763.25592.09763.35355,0l1.76777-1.76777c.09763-.09763.09763-.25592,0-.35355l-.91924-.91924c-.09763-.09763-.25592-.09763-.35355,0l-1.76777,1.76777c-.09763.09763-.09763.25592,0,.35355ZM1.98978,15.11121l.91924.91924c.09763.09763.25592.09763.35355,0l1.76777-1.76777c.09763-.09763.09763-.25592,0-.35355l-.91924-.91924c-.09763-.09763-.25592-.09763-.35355,0l-1.76777,1.76777c-.09763.09763-.09763.25592,0,.35355Zm-.01031-11.8587l1.76777,1.76777c.09763.09763.25592.09763.35355,0l.91924-.91924c.09763-.09763.09763-.25592,0-.35355l-1.76777-1.76777c-.09763-.09763-.25592-.09763-.35355,0l-.91924.91924c-.09763.09763-.09763.25592,0,.35355Zm10.9902,10.99001l1.76777,1.76777c.09763.09763.25592.09763.35355,0l.91924-.91924c.09763-.09763.09763-.25592,0-.35355l-1.76777-1.76777c-.09763-.09763-.25592-.09763-.35355,0l-.91924.91924c-.09763.09763-.09763.25592,0,.35355Z\" />\n  </svg>\n);\n\nexport const MOON = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Moon</title>\n    <path d=\"M9,1a8,8,0,1,0,8,8A8,8,0,0,0,9,1Zm.5,14.982c-.165.0115-.332.018-.5.018A7,7,0,0,1,9,2c.168,0,.335.0065.5.018A11,11,0,0,0,9.5,15.982Z\" />\n  </svg>\n);\n\nexport const MENU = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Menu</title>\n    <rect height=\"2\" rx=\"0.5\" width=\"14\" x=\"2\" y=\"8\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"14\" x=\"2\" y=\"3\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"14\" x=\"2\" y=\"13\" />\n  </svg>\n);\n\nexport const CLOSE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Close</title>\n    <path d=\"M13.2425,3.343,9,7.586,4.7575,3.343a.5.5,0,0,0-.707,0L3.343,4.05a.5.5,0,0,0,0,.707L7.586,9,3.343,13.2425a.5.5,0,0,0,0,.707l.707.7075a.5.5,0,0,0,.707,0L9,10.414l4.2425,4.243a.5.5,0,0,0,.707,0l.7075-.707a.5.5,0,0,0,0-.707L10.414,9l4.243-4.2425a.5.5,0,0,0,0-.707L13.95,3.343a.5.5,0,0,0-.70711-.00039Z\" />\n  </svg>\n);\n\nexport const FILTER = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Filter</title>\n    <path d=\"M15.473,1H1.527a.5.5,0,0,0-.3935.8085L7,9.2945V16.95a.496.496,0,0,0,.84.412l1.9905-2.0765A.60949.60949,0,0,0,10,14.864V9.2945l5.8665-7.486A.5.5,0,0,0,15.473,1Z\" />\n  </svg>\n);\n\nexport const FILTER_EDIT = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Filter Edit</title>\n    <path d=\"M17.8925,10.8605,16.14,9.1075A.36952.36952,0,0,0,15.8765,9H15.865a.41651.41651,0,0,0-.282.1235l-5.411,5.411a.304.304,0,0,0-.0765.128l-1.0135,3c-.0345.1145.1395.2585.238.2585a.15858.15858,0,0,0,.0185,0c.084-.0195,2.5615-.882,3-1.014a.3.3,0,0,0,.126-.0755l5.412-5.4145A.41749.41749,0,0,0,18,11.15.37152.37152,0,0,0,17.8925,10.8605Zm-5.8,5.4815c-.657.1975-1.65.6145-2.215.784l.78-2.2155Z\" />\n    <path d=\"M15.473,1H1.527a.5.5,0,0,0-.3935.8085L7,9.2945V15a.496.496,0,0,0,.84.4125L9.83,13.336a.61.61,0,0,0,.17-.4225V9.2945l5.8665-7.486A.5.5,0,0,0,15.473,1Z\" />\n  </svg>\n);\n\nexport const FILTER_CLOSE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Filter Close</title>\n    <path d=\"M13.5,9.05a4.45,4.45,0,1,0,4.45,4.45A4.45,4.45,0,0,0,13.5,9.05Zm2.913,6.1335a.25.25,0,0,1,0,.3535l-.876.876a.25.25,0,0,1-.3535,0L13.5,14.7295,11.8165,16.413a.25.25,0,0,1-.3535,0l-.876-.876a.25.25,0,0,1,0-.3535L12.2705,13.5,10.587,11.8165a.25.25,0,0,1,0-.3535l.876-.876a.25.25,0,0,1,.3535,0L13.5,12.2705l1.6835-1.6835a.25.25,0,0,1,.3535,0l.876.876a.25.25,0,0,1,0,.3535L14.7295,13.5Z\" />\n    <path d=\"M7.4,13.5A6.573,6.573,0,0,1,9,9.2945c1.0415-1.347,5.8665-7.486,5.8665-7.486A.5.5,0,0,0,14.473,1H.527a.5.5,0,0,0-.3935.8085L6,9.2945V16.95a.496.496,0,0,0,.84.4125L8.009,16.143A6.06548,6.06548,0,0,1,7.4,13.5Z\" />\n  </svg>\n);\n\nexport const BOOLEAN = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Boolean</title>\n    <path d=\"M12,4.25a4.75,4.75,0,0,1,0,9.5H6a4.75,4.75,0,0,1,0-9.5ZM12,3H6A6,6,0,0,0,6,15h6A6,6,0,0,0,12,3Zm0,3A3,3,0,1,1,9,9,3,3,0,0,1,12,6Z\" />\n  </svg>\n);\n\nexport const DELETE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Delete</title>\n    <path d=\"M15.75,3H12V2a1,1,0,0,0-1-1H6A1,1,0,0,0,5,2V3H1.25A.25.25,0,0,0,1,3.25v.5A.25.25,0,0,0,1.25,4h1L3.4565,16.55a.5.5,0,0,0,.5.45H13.046a.5.5,0,0,0,.5-.45L14.75,4h1A.25.25,0,0,0,16,3.75v-.5A.25.25,0,0,0,15.75,3ZM5.5325,14.5a.5.5,0,0,1-.53245-.46529L5,14.034l-.5355-8a.50112.50112,0,0,1,1-.067l.5355,8a.5.5,0,0,1-.46486.53283ZM9,14a.5.5,0,0,1-1,0V6A.5.5,0,0,1,9,6ZM11,3H6V2h5Zm1,11.034a.50112.50112,0,0,1-1-.067l.5355-8a.50112.50112,0,1,1,1,.067Z\" />\n  </svg>\n);\n\nexport const DESELECT = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Deselect</title>\n    <path d=\"m2,9h1v3h-1v-3Zm1,6v-1h-1v1.5555c0,.24549.19901.4445.4445.4445h1.5555v-1h-1Zm3,1h3v-1h-3v1Zm9-7h1v-3h-1v3Zm.5555-7h-1.5555v1h1v1h1v-1.5555c0-.24549-.19901-.4445-.4445-.4445Zm-6.5555,1h3v-1h-3v1ZM1.10295,1.97065l14.92632,14.92632c.15973.15973.41869.15972.57841,0l.28956-.28956c.15972-.15972.15973-.41869,0-.57841L1.97092,1.10268c-.15972-.15972-.41869-.15972-.57841,0l-.28956.28956c-.15972.15972-.15972.41869,0,.57841Zm14.89705,11.74835v-2.719h-1v1.719l1,1Zm-3.282,1.281h-1.718v1h2.718l-1-1ZM2,4.281v2.719h1v-1.719l-1-1Zm3.281-1.281h1.719v-1h-2.719l1,1Z\" />\n  </svg>\n);\n\nexport const LINKOUT = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Link Out</title>\n    <path d=\"M11.77,1.4265l1.6945,1.695-4.773,4.773a.25.25,0,0,0,0,.3535L9.75,9.3085a.25.25,0,0,0,.3535,0l4.773-4.773L16.571,6.23A.25.25,0,0,0,17,6.0535V1H11.9465a.25.25,0,0,0-.1765.4265Z\" />\n  </svg>\n);\n\nexport const SORT_DOWN = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Sort Down</title>\n    <rect id=\"Canvas\" fill=\"#ff13dc\" opacity=\"0\" width=\"18\" height=\"18\" />\n    <rect class=\"fill\" height=\"2\" rx=\"0.5\" width=\"6\" x=\"1\" y=\"12\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"8\" x=\"1\" y=\"8\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"10\" x=\"1\" y=\"4\" />\n    <path d=\"M16,12H14.9965V4.5a.494.494,0,0,0-.488-.5L14.503,4h-.496a.5.5,0,0,0-.5.5L13.5035,12H12.5a.25.25,0,0,0-.25.25.245.245,0,0,0,.0735.175l1.7685,2.0165a.25.25,0,0,0,.316,0l1.7685-2.0165a.245.245,0,0,0,.0735-.175A.25.25,0,0,0,16,12Z\" />\n  </svg>\n);\n\nexport const SORT_UP = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={css}>\n    <title>Sort Up</title>\n    <rect height=\"2\" rx=\"0.5\" width=\"6\" x=\"1\" y=\"4\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"8\" x=\"1\" y=\"8\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"10\" x=\"1\" y=\"12\" />\n    <path d=\"M15.99951,6H14.99634v7.5a.49378.49378,0,0,1-.49317.5h-.49633a.5.5,0,0,1-.5-.49951L13.50366,6H12.50049A.24984.24984,0,0,1,12.25,5.74823a.24439.24439,0,0,1,.07373-.175L14.0918,3.5564a.25007.25007,0,0,1,.3164,0l1.76807,2.01684a.24439.24439,0,0,1,.07373.175A.24984.24984,0,0,1,15.99951,6Z\" />\n  </svg>\n);\n", "/** Two dimensional Map. */\nexport class Map2<K1, K2, V> {\n  #map = new Map<K1, Map<K2, V>>();\n\n  has(k1: K1, k2: K2): boolean {\n    return this.#map.get(k1)?.has(k2) ?? false;\n  }\n\n  set(k1: K1, k2: K2, v: V): this {\n    let m2 = this.#map.get(k1);\n    if (!m2) {\n      m2 = new Map();\n      this.#map.set(k1, m2);\n    }\n    m2.set(k2, v);\n    return this;\n  }\n\n  getOrSet(k1: K1, k2: K2, whenMissing: () => V): V {\n    let v = this.get(k1, k2);\n    if (v === undefined) this.set(k1, k2, (v = whenMissing()));\n    return v;\n  }\n\n  delete(k1: K1, k2: K2): boolean {\n    return this.#map.get(k1)?.delete(k2) ?? false;\n  }\n\n  // Delete all keys [k1, *] from the map.\n  delete1(k1: K1): boolean {\n    const map = this.#map.get(k1);\n    if (map) {\n      this.#map.delete(k1);\n      return map.size > 0;\n    }\n    return false;\n  }\n\n  clear() {\n    this.#map.clear();\n  }\n\n  get(k1: K1, k2: K2): V | undefined {\n    return this.#map.get(k1)?.get(k2);\n  }\n\n  getMap(k1: K1): Map<K2, V> | undefined {\n    return this.#map.get(k1);\n  }\n\n  /** Get a consolidated map of all keys in the second dimension. */\n  getMap2(): Map<K2, V> {\n    const res = new Map<K2, V>();\n    for (const [_k1, map2] of this.#map) {\n      for (const [k2, v] of map2) res.set(k2, v);\n    }\n    return res;\n  }\n\n  get size(): number {\n    let size = 0;\n    for (const map of this.#map.values()) size += map.size;\n    return size;\n  }\n\n  get isEmpty(): boolean {\n    for (const map of this.#map.values()) if (map.size > 0) return false;\n    return true;\n  }\n\n  /** Returns the size of the second dimension for a given key in the first dimension. */\n  size2(k1: K1): number {\n    return this.#map.get(k1)?.size ?? 0;\n  }\n\n  /** Returns an iterator of the keys in the first dimension. */\n  keys(): IterableIterator<K1> {\n    return this.#map.keys().filter(k1 => (this.#map.get(k1)?.size ?? 0) > 0);\n  }\n\n  entries(): IterableIterator<[K1, Map<K2, V>]> {\n    return this.#map.entries().filter(([_k1, map2]) => map2.size > 0);\n  }\n\n  *flatEntries(): IterableIterator<[K1, K2, V]> {\n    for (const [k1, map2] of this.#map) {\n      for (const [k2, v] of map2) yield [k1, k2, v];\n    }\n  }\n\n  values(): V[] {\n    return [...this.#map.values()].flatMap(map => [...map.values()]);\n  }\n\n  /**\n   * NOTE: This will work best if the keys are strings, symbols or numbers.\n   * Otherwise JavaScript will convert them to strings, which may not be what you want.\n   */\n  toObject<T>(mapper: (val: V) => T): ToObject<T> {\n    const object: ToObject<T> = {};\n    for (const [k1, k2, v] of this.flatEntries() as IterableIterator<[AnyKey, AnyKey, V]>) {\n      (object[k1] = object[k1] ?? {})[k2] = mapper(v);\n    }\n    return object;\n  }\n\n  toString(): string {\n    const entries = [...this.flatEntries()].map(([k1, k2, v]) => `(${k1}, ${k2}) => ${v}`);\n    return `Map2(size: ${this.size})${entries.length > 0 ? ` { ${entries.join(\", \")} }` : \"\"}`;\n  }\n}\n\n// biome-ignore lint/suspicious/noExplicitAny: Any object key is valid.\ntype AnyKey = keyof any;\ntype ToObject<Map2V> = Record<AnyKey, Record<AnyKey, Map2V>>;\n", "import type { Value } from \"./value\";\n\nexport type Predicate<T> = (v: T) => boolean;\n\nexport type EncodedFilter<T> = { mode: \"all\" | \"any\"; values: T[] };\n\n/**\n * A filter that can match any or all of the elements against a predicate.\n */\nexport class Filter<T> implements Value<Filter<T>> {\n  constructor(\n    public mode: \"all\" | \"any\" = \"any\",\n    public readonly values: Set<T> = new Set(),\n  ) {}\n\n  get isEmpty(): boolean {\n    return this.values.size === 0;\n  }\n\n  add(value: T): this {\n    this.values.add(value);\n    return this;\n  }\n\n  delete(value: T): boolean {\n    return this.values.delete(value);\n  }\n\n  has(value: T): boolean {\n    return this.values.has(value);\n  }\n\n  clear() {\n    this.values.clear();\n  }\n\n  get size(): number {\n    return this.values.size;\n  }\n\n  matches(predicate: Predicate<T>): boolean {\n    return this.mode === \"all\" ? this.all(predicate) : this.any(predicate);\n  }\n\n  all(predicate: Predicate<T>): boolean {\n    for (const v of this.values) if (!predicate(v)) return false;\n    return true;\n  }\n\n  any(predicate: Predicate<T>): boolean {\n    for (const v of this.values) if (predicate(v)) return true;\n    return false;\n  }\n\n  get value() {\n    return this;\n  }\n\n  get isPresent(): boolean {\n    return !this.isEmpty;\n  }\n\n  equalTo(other?: Filter<T>): boolean {\n    if (!other) return false;\n\n    if (!(other instanceof Filter)) return false;\n    if (this.mode !== other.mode) return false;\n    if (this.values.size !== other.values.size) return false;\n    for (const v of this.values) if (!other.values.has(v)) return false;\n    return true;\n  }\n\n  clone(): this {\n    return new Filter(this.mode, new Set(this.values)) as this;\n  }\n\n  toJSON(): EncodedFilter<T> {\n    return { mode: this.mode, values: [...this.values] };\n  }\n\n  serializable() {\n    return this.isEmpty ? undefined : this.toJSON();\n  }\n\n  // biome-ignore lint/suspicious/noExplicitAny: we can't know for sure the type of the values here.\n  static isSerialized(val: unknown): val is { mode: \"all\" | \"any\"; values: any[] } {\n    return (\n      !!val && typeof val === \"object\" && \"mode\" in val && (val.mode === \"all\" || val.mode === \"any\") && \"values\" in val && Array.isArray(val.values)\n    );\n  }\n}\n\n// biome-ignore lint/suspicious/noExplicitAny: there's no _precise_ way to know the type of the values here.\nexport function isEncodedFilter(value: unknown): value is EncodedFilter<any> {\n  return typeof value === \"object\" && value !== null && value !== undefined && \"mode\" in value && \"values\" in value && Array.isArray(value.values);\n}\n", "import { Filter } from \"./filters\";\n\n/**\n * The objective of this interface is to simplify checking if a value is present (aka \"non blank\").\n * This avoids the need to sprinkle runtime type checks all over the place.\n *\n * This is useful in places were we don't want to serialize empty values,\n * if we want to check there are any present values on a form, etc.\n *\n * Also we want to avoid serializing values that are not \"present\".\n * This is because for things like URL encoding, we don't want to have a lot of keys pointing to blank values.\n */\nexport interface Value<T> {\n  // biome-ignore lint/suspicious/noExplicitAny: without a generic value type the wrappers are useless.\n  readonly value: any;\n\n  /**\n   * \"Presence\" implies that the value is not blank or empty:\n   * * null, undefined or empty string are considered \"blank\", and hence not present.\n   * * 0 is present, even though JavaScript considers it falsy.\n   * * Containers of any kind (Set, Map, Array) are present if they have at least one element.\n   */\n  get isPresent(): boolean;\n\n  /** Compare values. */\n  equalTo(other?: AnyValue): boolean;\n\n  /**\n   * This is meant to return something that can be easilty serialized.\n   * For instance if the value is a Set, it should return an array (since JSON doesn't support Sets).\n   * * The result should contain enough information to reconstruct the value.\n   * * Blank / non present values should be omitted.\n   */\n  // biome-ignore lint/suspicious/noExplicitAny: we want to be flexible here.\n  serializable(): any;\n}\n\n// biome-ignore lint/suspicious/noExplicitAny: Allow for flexibility in the type of the value.\nexport type AnyValue = Value<any>;\n\nexport abstract class ValBase<T> implements Value<T> {\n  constructor(readonly value: T) {}\n\n  get isNil(): boolean {\n    return this.value === undefined || this.value === null;\n  }\n\n  get isPresent(): boolean {\n    return !this.isNil;\n  }\n\n  abstract equalTo(other?: AnyValue): boolean;\n\n  // biome-ignore lint/suspicious/noExplicitAny: We can't be more specific here.\n  serializable(): any {\n    return this.isPresent ? this.value : undefined;\n  }\n}\n\nexport class ValNil extends ValBase<null | undefined> {\n  constructor(value: null | undefined = undefined) {\n    super(value);\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValNil;\n  }\n}\n\nexport class ValNumber extends ValBase<number> {\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValNumber && this.value === other.value;\n  }\n}\n\nexport class ValBool extends ValBase<boolean> {\n  override get isPresent(): boolean {\n    return !this.isNil && this.value === true;\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValBool && this.value === other.value;\n  }\n}\n\nexport class ValString extends ValBase<string> {\n  override get isPresent(): boolean {\n    return !this.isNil && this.value.length > 0 && !/^\\s*$/.test(this.value);\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValString && this.value === other.value;\n  }\n}\n\nexport class ValSet<T> extends ValBase<Set<T>> {\n  override get isPresent(): boolean {\n    return !this.isNil && this.value.size > 0;\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    if (!(other instanceof ValSet)) return false;\n    if (this.value === other.value) return true;\n    if (this.value.size !== other.value.size) return false;\n    for (const v of this.value) if (!other.value.has(v)) return false;\n    return true;\n  }\n\n  override serializable() {\n    return this.isPresent ? [\"Set\", [...this.value]] : undefined;\n  }\n\n  // biome-ignore lint/suspicious/noExplicitAny: we cannot know for sure the type of the values.\n  static isSerialized(val: unknown): val is [string, any[]] {\n    return Array.isArray(val) && val[0] === \"Set\" && Array.isArray(val[1]);\n  }\n}\n\nconst EMPTY_REGEX = /(?:)/;\n\nexport class ValRegExp extends ValBase<RegExp> {\n  override get isPresent(): boolean {\n    return !this.isNil && this.value.source !== EMPTY_REGEX.source;\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValRegExp && this.value.source === other.value.source;\n  }\n\n  override serializable() {\n    const { value } = this;\n    return this.isPresent ? (value.flags ? [\"RegExp\", value.source, value.flags] : [\"RegExp\", value.source]) : undefined;\n  }\n\n  static isSerialized(val: unknown): val is [string, string, string?] {\n    return Array.isArray(val) && val[0] === \"RegExp\" && typeof val[1] === \"string\" && (val[2] === undefined || typeof val[2] === \"string\");\n  }\n}\n\n/** Matches the serialized \"shape\" and returns a deserialized value, or undefined if it can't recognize the shape. */\nexport function deserializeValue(val: unknown): AnyValue | undefined {\n  if (val === undefined || val === null) return new ValNil(val);\n\n  switch (typeof val) {\n    case \"number\":\n      return new ValNumber(val);\n    case \"boolean\":\n      return new ValBool(val);\n    case \"string\":\n      return new ValString(val);\n  }\n\n  if (ValRegExp.isSerialized(val)) return new ValRegExp(new RegExp(val[1], val[2]));\n  if (ValSet.isSerialized(val)) return new ValSet(new Set(val[1]));\n  if (Filter.isSerialized(val)) return new Filter(val.mode, new Set(val.values));\n\n  console.log(\"Attempt to deserialize an unrecognized value shape:\", val);\n}\n", "export const NULL = '!n';\nexport const TRUE = '!t';\nexport const FALSE = '!f';\nexport const OBJECT_START = '(';\nexport const ARRAY_START = '!(';\nexport const OBJECT_ARRAY_END = ')';\nexport const COLON = ':';\nexport const COMMA = ',';\nexport const STRING = 'string';\nexport const NUMBER = 'number';\n\nexport type TokenKind =\n  | typeof NULL\n  | typeof TRUE\n  | typeof FALSE\n  | typeof OBJECT_START\n  | typeof ARRAY_START\n  | typeof OBJECT_ARRAY_END\n  | typeof COLON\n  | typeof COMMA\n  | typeof STRING\n  | typeof NUMBER;\n\nexport interface Token<T extends TokenKind = TokenKind> {\n  kind: T;\n  value: string;\n}\n", "import {\n  ARRAY_START,\n  COLON,\n  COMMA,\n  FALSE,\n  NULL,\n  NUMBER,\n  OBJECT_ARRAY_END,\n  OBJECT_START,\n  STRING,\n  Token,\n  TokenKind,\n  TRUE,\n} from './token';\n\ntype Rule<T extends TokenKind> = (\n  source: string,\n  pos: number,\n) => Token<T> | null;\n\nconst rules = {\n  quote: (): Rule<typeof STRING> => (source, pos) => {\n    if (!source.startsWith(\"'\", pos)) return null;\n\n    let i = pos;\n    while (true) {\n      if (source.length <= ++i) {\n        throw new SyntaxError(`Unexpected end of Rison input`);\n      }\n      switch (source[i]) {\n        case '!':\n          i++;\n          continue;\n        case \"'\":\n          return { kind: STRING, value: source.slice(pos, i + 1) };\n      }\n    }\n  },\n  string:\n    <T extends TokenKind>(kind: T): Rule<T> =>\n    (source, pos) =>\n      source.startsWith(kind, pos) ? { kind, value: kind } : null,\n  regexp:\n    <T extends TokenKind>(kind: T, reg: RegExp): Rule<T> =>\n    (source, pos) => {\n      const match = reg.exec(source.slice(pos));\n      return match ? { kind, value: match[0] } : null;\n    },\n};\n\nconst RULES: Rule<TokenKind>[] = [\n  rules.quote(),\n  rules.string(OBJECT_START),\n  rules.string(ARRAY_START),\n  rules.string(OBJECT_ARRAY_END),\n  rules.string(NULL),\n  rules.string(TRUE),\n  rules.string(FALSE),\n  rules.string(COLON),\n  rules.string(COMMA),\n  rules.regexp(STRING, /^[^0-9- '!:(),*@$][^ '!:(),*@$]*/),\n  rules.regexp(NUMBER, /^-?([1-9][0-9]*|[0-9])(\\.[0-9]+)?(e-?[0-9]+)?/),\n];\n\nexport class Lexer {\n  private pos = 0;\n\n  public constructor(private source: string) {}\n\n  public position(): number {\n    return this.pos;\n  }\n\n  public length(): number {\n    return this.source.length;\n  }\n\n  public nextToken(): Token<TokenKind> | null {\n    if (this.pos >= this.source.length) return null;\n\n    for (const rule of RULES) {\n      const token = rule(this.source, this.pos);\n      if (token !== null) {\n        this.pos += token.value.length;\n        return token;\n      }\n    }\n\n    throw new SyntaxError(\n      `Unexpected token ${this.source[this.pos]} in Rison at position ${\n        this.pos\n      }`,\n    );\n  }\n\n  public syntaxError(token: Token): SyntaxError {\n    const pos = this.pos - token.value.length;\n    return new SyntaxError(\n      `Unexpected token ${this.source[pos]} in Rison at position ${pos}`,\n    );\n  }\n}\n", "import { Lexer } from './lexer';\nimport {\n  ARRAY_START,\n  COLON,\n  COMMA,\n  FALSE,\n  NULL,\n  NUMBER,\n  OBJECT_ARRAY_END,\n  OBJECT_START,\n  STRING,\n  Token,\n  TokenKind,\n  TRUE,\n} from './token';\n\nexport class Parser {\n  public constructor(private readonly lexer: Lexer) {}\n\n  public readAsAny(): any {\n    const val = this.asAny(this.nextToken());\n    if (this.lexer.position() < this.lexer.length()) {\n      throw this.lexer.syntaxError(this.nextToken());\n    }\n    return val;\n  }\n\n  private asAny(token: Token): any {\n    switch (token.kind) {\n      case NULL:\n        return null;\n      case TRUE:\n        return true;\n      case FALSE:\n        return false;\n      case STRING:\n        return this.asString(token);\n      case NUMBER:\n        return Number(token.value);\n      case OBJECT_START:\n        return this.readAsObject();\n      case ARRAY_START:\n        return this.readAsArray();\n      default:\n        throw this.lexer.syntaxError(token);\n    }\n  }\n\n  private asString(token: Token): string {\n    return token.value[0] === \"'\"\n      ? token.value.replace(/!./g, (c) => c[1]).slice(1, -1)\n      : token.value;\n  }\n\n  private readAsObject(): Record<string, any> {\n    const obj: Record<string, any> = {};\n    let token = this.nextToken();\n    while (token.kind !== OBJECT_ARRAY_END) {\n      const key = this.asString(token);\n      this.expectToken(COLON);\n      const val = this.asAny(this.nextToken());\n      obj[key] = val;\n\n      token = this.nextToken();\n      if (token.kind === OBJECT_ARRAY_END) break;\n      if (token.kind !== COMMA) throw this.lexer.syntaxError(token);\n      token = this.nextToken();\n    }\n    return obj;\n  }\n\n  private readAsArray(): any[] {\n    const arr: any[] = [];\n    let token = this.nextToken();\n    while (token.kind !== OBJECT_ARRAY_END) {\n      arr.push(this.asAny(token));\n      token = this.nextToken();\n      if (token.kind === OBJECT_ARRAY_END) break;\n      if (token.kind !== COMMA) throw this.lexer.syntaxError(token);\n      token = this.nextToken();\n    }\n    return arr;\n  }\n\n  private expectToken<T extends TokenKind>(kind: T) {\n    const token = this.nextToken();\n    if (token.kind !== kind) throw this.lexer.syntaxError(token);\n  }\n\n  private nextToken(): Token {\n    const token = this.lexer.nextToken();\n    if (!token) throw new SyntaxError(`Unexpected end of Rison input`);\n    return token;\n  }\n}\n", "import {\n  ARRAY_START,\n  COLON,\n  COMMA,\n  FALSE,\n  NULL,\n  OBJECT_ARRAY_END,\n  OBJECT_START,\n  TRUE,\n} from './token';\n\nconst ID_REGEXP = /^[^0-9- '!:(),*@$][^ '!:(),*@$]*$/;\n\nexport class Stringifier {\n  public value(value: any): string | undefined {\n    if (value === undefined) return undefined;\n    if (value === null) return NULL;\n    switch (typeof value) {\n      case 'object':\n        return Array.isArray(value)\n          ? `${ARRAY_START}${this.array(value)}${OBJECT_ARRAY_END}`\n          : `${OBJECT_START}${this.object(value)}${OBJECT_ARRAY_END}`;\n      case 'boolean':\n        return this.boolean(value);\n      case 'number':\n        return this.number(value);\n      case 'string':\n        return this.string(value);\n      case 'bigint':\n        throw new TypeError('Do not known how to serialize a BigInt');\n      default:\n        return undefined;\n    }\n  }\n\n  public object(value: Record<string, any>): string {\n    return Object.entries(value).reduce<string>((prev, [key, value]) => {\n      const str = this.value(value);\n      if (str === undefined) return prev;\n\n      const pair = `${this.string(key)}${COLON}${str}`;\n      return prev.length > 0 ? `${prev}${COMMA}${pair}` : pair;\n    }, '');\n  }\n\n  public array(value: any[]): string {\n    return value.reduce((prev, value) => {\n      const str = this.value(value) || NULL;\n      return prev.length > 0 ? `${prev}${COMMA}${str}` : str;\n    }, '');\n  }\n\n  public boolean(value: boolean): string {\n    return value ? TRUE : FALSE;\n  }\n\n  public number(value: number): string {\n    return Number.isFinite(value) ? value.toString().replace('+', '') : NULL;\n  }\n\n  public string(value: string): string {\n    return ID_REGEXP.test(value)\n      ? value\n      : `'${value.replace(/[!']/g, (c) => `!${c}`)}'`;\n  }\n}\n", "import { Lexer } from './lexer';\nimport { Parser } from './parser';\nimport { Stringifier } from './stringifier';\n\nexport const RISON = {\n  parse: (text: string): any => {\n    const lexer = new Lexer(text);\n    const parser = new Parser(lexer);\n    return parser.readAsAny();\n  },\n  stringify: (value: any): string => {\n    const stringifier = new Stringifier();\n    return stringifier.value(value) as string;\n  },\n};\n\nexport const ORISON = {\n  parse: (text: string): any => {\n    const lexer = new Lexer(`(${text})`);\n    const parser = new Parser(lexer);\n    return parser.readAsAny();\n  },\n  stringify: (value: Record<string, any>): string => {\n    const stringifier = new Stringifier();\n    return stringifier.object(value);\n  },\n};\n\nexport const ARISON = {\n  parse: (text: string): any => {\n    const lexer = new Lexer(`!(${text})`);\n    const parser = new Parser(lexer);\n    return parser.readAsAny();\n  },\n  stringify: (value: any[]): string => {\n    const stringifier = new Stringifier();\n    return stringifier.array(value);\n  },\n};\n", "import * as rison from './rison';\n\nconst ESCAPE_NO_REQUIRED = /^[-A-Za-z0-9~!*()_.',:@$/]*$/;\n\n/**\n * this is like encodeURIComponent() but quotes fewer characters.\n *\n * See https://github.com/Nanonid/rison/blob/e64af6c096fd30950ec32cfd48526ca6ee21649d/js/rison.js#L107-L118\n *\n * This function is licensed under the MIT license found in the\n * https://github.com/Nanonid/rison/blob/e64af6c096fd30950ec32cfd48526ca6ee21649d/LICENSE.md.\n *\n * @param str\n */\nconst escape = (str: string): string => {\n  if (ESCAPE_NO_REQUIRED.test(str)) return str;\n\n  return encodeURIComponent(str)\n    .replace(/%2C/g, ',')\n    .replace(/%3A/g, ':')\n    .replace(/%40/g, '@')\n    .replace(/%24/g, '$')\n    .replace(/%2F/g, '/')\n    .replace(/%20/g, '+');\n};\n\nconst unescape = (str: string): string =>\n  decodeURIComponent(str.replace(/\\+/g, '%20'));\n\nconst RISON = {\n  parse: (text: string): any => rison.RISON.parse(unescape(text)),\n  stringify: (value: any): string => escape(rison.RISON.stringify(value)),\n};\n\nconst ORISON = {\n  parse: (text: string): any => rison.ORISON.parse(unescape(text)),\n  stringify: (value: Record<string, any>): string =>\n    escape(rison.ORISON.stringify(value)),\n};\n\nconst ARISON = {\n  parse: (text: string): any => rison.ARISON.parse(unescape(text)),\n  stringify: (value: any[]): string => escape(rison.ARISON.stringify(value)),\n};\n\nconst parse = RISON.parse;\nconst stringify = RISON.stringify;\n\nexport { RISON, ORISON, ARISON, parse, stringify, escape, unescape };\n", "import * as escaped from './escaped';\nimport { ARISON, ORISON, RISON } from './rison';\n\nconst parse = RISON.parse;\nconst stringify = RISON.stringify;\nconst escape = escaped.escape;\nconst unescape = escaped.unescape;\n\nexport { RISON, ORISON, ARISON, parse, stringify, escape, unescape, escaped };\n", "import type { StrDate } from \"./schema\";\n\ntype RegExpReplacer = { regExp: RegExp; replacer: typeof String.prototype.replaceAll };\n\n/** A RegExp replacement to simplity the paths on backtraces. */\nexport const SIMPLIFY_PATH = {\n  regExp: / \\(([^\\)]+)\\)/g,\n  replacer: (match: string) => ` (${match.split(\"/\").slice(-2).join(\"/\")})`,\n} as const;\n\n/**\n * Return a caller `line:no` for debugging.\n * @param match find the first line in the backtrace that contains this string.\n * @param dontMatch if given, the line in the backtrace must not contain this string.\n */\nexport function caller({ clean, match, dontMatch }: { clean?: RegExpReplacer; match?: RegExp; dontMatch?: RegExp } = {}): string[] {\n  // https://stackoverflow.com/a/3806596/855105\n  function getErrorObject(): Error {\n    try {\n      throw Error(\"\");\n    } catch (err) {\n      return err as Error;\n    }\n  }\n  let callers = (getErrorObject().stack ?? \"\").split(\"\\n\").slice(2);\n\n  if (clean) callers = callers.map(line => line.replaceAll(clean.regExp, clean.replacer).trim());\n  if (match) callers = callers.filter((line: string) => match.test(line));\n  if (dontMatch) callers = callers.filter((line: string) => !dontMatch.test(line));\n\n  return callers;\n}\n\nexport function parseDate(path: string): StrDate | undefined {\n  const match = path.match(/(\\d{4})\\D(\\d{1,2})\\D(\\d{1,2})/);\n  if (!match) return;\n  const [, year, month, day] = match;\n  const [y, m, d] = [Number.parseInt(year), Number.parseInt(month), Number.parseInt(day)];\n  if (y < 1900 || y > 2100 || m < 1 || m > 12 || d < 1 || d > 31) return;\n  const strDate: StrDate = `${y}-${`${m}`.padStart(2, \"0\")}-${`${d}`.padStart(2, \"0\")}`;\n  return strDate;\n}\n\n/** Extract the year from a StrDate. */\nexport function getStrDateYear(strDate?: StrDate): number | undefined {\n  if (!strDate) return undefined;\n  try {\n    const year = Number.parseInt(strDate?.slice(0, 4));\n    if (year >= 1900 && year <= 2100) return year;\n  } catch (e) {\n    return undefined;\n  }\n}\n", "import { h } from \"preact\";\n\nimport { caller } from \"@plangs/plangs/util\";\n\nexport const script = (src: string) => rawTag(\"script\", src);\nexport const style = (src: string) => rawTag(\"style\", src);\nexport const rawTag = (tag: \"script\" | \"style\", __html: string) => h(tag, { dangerouslySetInnerHTML: { __html } });\n\n// biome-ignore lint/suspicious/noExplicitAny: We want to debounce any function.\ntype AnyFunc = (...args: any[]) => any;\n\nexport function debounce<T extends AnyFunc>(callback: T, millies: number): (...args: Parameters<T>) => void {\n  let timeout: Timer | undefined;\n  return (...args: Parameters<AnyFunc>) => {\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => callback(...args), millies);\n  };\n}\n\n/** Tap aka \"Thrush combinator\" aka \"T combinator\". */\nexport const tap = <T, R>(item: T, action: (item: T) => R): R => action(item);\n\n/** Return callers of a function for debbuging. */\nexport function callers(): string {\n  const lines = caller({\n    dontMatch: /preact|[A-Z]@/,\n    clean: { regExp: new RegExp(`${window.location.href.split(\"#\")[0]}bundle/`, \"g\"), replacer: () => \"\" },\n  }).slice(1);\n\n  // JSON is more readable for this use case.\n  return JSON.stringify(lines, null, 2);\n}\n\n// https://stackoverflow.com/a/32108184\n// biome-ignore lint/suspicious/noExplicitAny: checks if _any_ object is empty.\nexport function isEmpty(obj: any) {\n  for (const prop in obj) {\n    if (Object.hasOwn(obj, prop)) return false;\n  }\n  return true;\n}\n", "import { RISON } from \"rison2\";\nimport { on } from \"./events\";\nimport { isEmpty } from \"./utils\";\n\n// Bun loads this code so we need to define a valid window (even if it is not defined).\nconst win = (typeof window === \"undefined\" ? undefined : window) as Window;\n\n/**\n * Returns the fragment (possible empty): the string after the first '#' of a URL or HREF.\n * Returns the input string if it has no '#' character.\n */\nexport function getFragment(fragmentOrURL: URL | Location | string | undefined = win.location): string {\n  if (!fragmentOrURL) return \"\";\n  if (fragmentOrURL instanceof URL || fragmentOrURL instanceof Location) return fragmentOrURL.hash.slice(1);\n  const hashIndex = fragmentOrURL.indexOf(\"#\");\n  return hashIndex !== -1 ? fragmentOrURL.slice(hashIndex + 1) : fragmentOrURL;\n}\n\n/**\n * All fragment updates should go to a single instance of this class to ensure we can distinguish\n * between user initiated and app initiated URL Fragment changes:\n *\n * * Use instance.pushState to change the fragment and only trigger a \"user change\" event.\n * * Use instance.update to change the fragment and trigger both a \"user change\" and a \"change\" event.\n */\nexport class FragmentTracker extends EventTarget {\n  #fragment: string = win.location.hash.slice(1);\n  #previous?: string;\n\n  /** Keep a reference so we can remove it if needed (with {@link destroy}). */\n  #boundedHandler?: (ev: HashChangeEvent) => void;\n\n  // biome-ignore lint/suspicious/noExplicitAny: Return of RISON.parse is any.\n  static deserialize(fragment = win.location.hash): any {\n    try {\n      const data = fragment.slice(fragment.indexOf(\"#\") + 1).trim();\n      if (data.length > 2 && data.startsWith(\"(\") && data.endsWith(\")\")) return RISON.parse(data);\n    } catch (e) {\n      console.warn(\"Failed to parse RISON:\", fragment, e);\n    }\n  }\n\n  // biome-ignore lint/suspicious/noExplicitAny: RISON.stringify can serialize any data.\n  static serialize(data: any): string | undefined {\n    try {\n      if (isEmpty(data)) return undefined;\n      return RISON.stringify(data);\n    } catch (e) {\n      console.error(\"Failed to serialize data\", e);\n    }\n  }\n\n  /** Call this to bind the tracker to the hashchange event of the window. */\n  bind(): this {\n    this.destroy();\n    this.#boundedHandler = this.#hashChangeHandler.bind(this);\n    win.addEventListener(\"hashchange\", this.#boundedHandler);\n    return this;\n  }\n\n  /** Remove the hashchange event listener off the window. */\n  destroy() {\n    if (this.#boundedHandler) {\n      win.removeEventListener(\"hashchange\", this.#boundedHandler);\n      this.#boundedHandler = undefined;\n    }\n  }\n\n  get fragment(): string {\n    return this.#fragment;\n  }\n\n  get previous(): string | undefined {\n    return this.#previous;\n  }\n\n  /**\n   * Handler for 'hashchange': this must come from user action (or 3rd party code :-/) since\n   * updates through this class use history.pushState, which doesn't trigger hashchange.\n   */\n  #hashChangeHandler({ newURL, oldURL }: HashChangeEvent) {\n    const newFragment = getFragment(newURL);\n    if (newFragment !== this.#fragment) {\n      this.#previous = getFragment(oldURL);\n      this.#fragment = newFragment;\n      this.dispatchEvent(this.#createEvent(FRAGMENT_USER_CHANGE));\n      this.dispatchEvent(this.#createEvent(FRAGMENT_CHANGE));\n    }\n  }\n\n  /**\n   * This method will use history.pushState, so it won't trigger a {@link FRAGMENT_USER_CHANGE}.\n   * https://developer.mozilla.org/en-US/docs/Web/API/History/pushState#description\n   */\n  pushState(fragmentOrURL: string | URL | undefined) {\n    const newFragment = getFragment(fragmentOrURL);\n    if (newFragment !== this.#fragment) {\n      this.#previous = this.#fragment;\n      this.#fragment = newFragment;\n      history.pushState(null, \"\", `#${newFragment}`);\n      this.dispatchEvent(this.#createEvent(FRAGMENT_CHANGE));\n    }\n  }\n\n  /**\n   * Updates fragment using window.location.hash,\n   * which will trigger both {@link FRAGMENT_USER_CHANGE} and {@link FRAGMENT_CHANGE}.\n   * Useful for programmatically simulating user navigation.\n   */\n  update(fragmentOrURL: string | URL): void {\n    win.location.hash = getFragment(fragmentOrURL);\n  }\n\n  onUserChange(callback: (ev: FragmentChangeEvent) => void): (() => void) | undefined {\n    return on(this, FRAGMENT_USER_CHANGE, callback);\n  }\n\n  #createEvent(type: FragmentEventType): FragmentChangeEvent {\n    return new FragmentChangeEvent(type, { fragment: this.#fragment, previous: this.#previous });\n  }\n}\n\nexport const FRAGMENT_CHANGE = \"fragmentchange\" as const;\nexport const FRAGMENT_USER_CHANGE = \"fragmentuserchange\" as const;\nexport type FragmentEventType = typeof FRAGMENT_CHANGE | typeof FRAGMENT_USER_CHANGE;\n\nexport interface FragmentChangeEventDetail {\n  fragment: string;\n  previous: string | undefined;\n}\n\nexport class FragmentChangeEvent extends CustomEvent<FragmentChangeEventDetail> {\n  constructor(\n    type: FragmentEventType,\n    detail: FragmentChangeEventDetail,\n    options: CustomEventInit<FragmentChangeEventDetail> = { bubbles: true, cancelable: undefined, composed: true },\n  ) {\n    super(type, { ...options, detail });\n  }\n\n  get fragment(): string {\n    return this.detail.fragment;\n  }\n\n  get previous(): string | undefined {\n    return this.detail.previous;\n  }\n\n  /** Attempt to deserialize RISON data. */\n  // biome-ignore lint/suspicious/noExplicitAny: RISON data can be anything.\n  get deserFrag(): any {\n    return FragmentTracker.deserialize(this.detail.fragment);\n  }\n\n  /** Attempt to deserialize RISON data. */\n  // biome-ignore lint/suspicious/noExplicitAny: RISON data can be anything.\n  get deserPrev(): any {\n    const { previous } = this.detail;\n    return previous ? FragmentTracker.deserialize(previous) : undefined;\n  }\n}\n", "import type { TAB } from \"@plangs/server/components/layout\";\n\nexport const storageKey = (tab: TAB, key: \"inputs\" | \"lastGroup\") => `${tab}-${key}`;\n\n// biome-ignore lint/suspicious/noExplicitAny: JSON can serialize any data.\nexport function updateLocalStorage(tab: TAB, key: \"inputs\" | \"lastGroup\", data: any): void {\n  localStorage.setItem(storageKey(tab, key), JSON.stringify(data));\n}\n\n// biome-ignore lint/suspicious/noExplicitAny: JSON can deserialize any data.\nexport function loadLocalStorage(tab: TAB, key: \"inputs\" | \"lastGroup\"): any {\n  const json = localStorage.getItem(storageKey(tab, key));\n  if (!json) return undefined;\n  try {\n    return JSON.parse(json);\n  } catch (e) {\n    console.warn(\"Failed to parse localStorage filters.\", json);\n    localStorage.removeItem(storageKey(tab, key));\n  }\n}\n", "import { elems, minWidthBP } from \"@plangs/frontend/auxiliar/dom\";\nimport { debounce } from \"@plangs/frontend/auxiliar/utils\";\nimport type { NPlang } from \"@plangs/plangs\";\n\n/** A static thumbnail grid will be render server side, we just need to show or hide each element.  */\nexport function doUpdateThumbns(nodeKeys: Set<string>) {\n  for (const div of elems(\"plThumb\")) {\n    const plKey = div.dataset.nodeKey as NPlang[\"key\"];\n    const visible = nodeKeys.has(plKey);\n    div.classList.toggle(\"hidden\", !visible);\n  }\n  adjustGrid();\n}\n\nexport const updateThumbns = debounce(doUpdateThumbns, 30);\n\nconst CSS_COLS_KEY = \"grid-template-columns\";\n\n/** Adjusts the number of columns in the grid to stop the gap from growing too large. */\nfunction doAdjustGrid() {\n  // const grid = ... // TODO: query the grid container.\n  const widthRow = 0; // size(grid).width;\n  const widthThumb = 0; // TODO: query the first visible thumbnail's width.\n  const visibleThumbs = 0; // TODO: query the number of visible thumbnails.\n  const numCols = Math.min(Math.floor(widthRow / widthThumb), visibleThumbs);\n  const maxCols = Math.floor(widthRow / (5 * 16));\n\n  if (numCols < maxCols && visibleThumbs < maxCols && minWidthBP(\"48rem\")) {\n    // grid.style.setProperty(CSS_COLS_KEY, `repeat(${maxCols}, minmax(8rem, 0fr))`);\n  } else {\n    // grid.style.removeProperty(CSS_COLS_KEY);\n  }\n}\n\n// TODO: register this on start.\n// window.addEventListener(\"resize\", debouncedUpdatePlangs);\nexport const adjustGrid = debounce(doAdjustGrid, 30);\n", "/** Insert elements in the array if they are not already present. */\nexport function arrayMerge<T>(\n  target: T[],\n  newData: T[],\n  similar: (l1: T, l2: T) => boolean = (l1, l2) => l1 === l2,\n  onDuplicate?: (prevElem: T, newElem: T) => void,\n) {\n  for (const newElem of newData) {\n    const prevElem = target.find((elem: T) => similar(elem, newElem));\n    if (prevElem) {\n      onDuplicate?.(prevElem, newElem);\n    } else {\n      target.push(newElem);\n    }\n  }\n}\n\n/** Delete in-place the given indexes of an array. Sorts the array in descending order to delete the proper elements. */\nexport function arrayDelete<T>(array: T[], indexes: Set<number>) {\n  // Delete indexes starting with the last one to avoid shifting elements.\n  for (const idx of [...indexes].sort((a, b) => b - a)) array.splice(idx, 1);\n}\n\n/** In place removal of array elements. */\nexport function removeIf<T>(array: T[], predicate: (value: T) => boolean, onRemove?: (value: T) => void): T[] {\n  for (let i = array.length - 1; i >= 0; i--) {\n    if (predicate(array[i])) {\n      onRemove?.(array[i]);\n      array.splice(i, 1);\n    }\n  }\n  return array;\n}\n", "/**\n * Wrapper to work with potentially empty or undefined iterables.\n */\nexport class IterTap<T> implements Iterable<T> {\n  readonly array: T[] | undefined;\n\n  constructor(iterable: Iterable<T> | undefined) {\n    this.array = Array.isArray(iterable) ? iterable : iterable ? [...iterable] : undefined;\n  }\n\n  filter(callback: (value: T, index: number, array: T[]) => boolean) {\n    return this.array ? this.array.filter(callback) : [];\n  }\n\n  map<R>(callback: (value: T, index: number, array: T[]) => R): IterTap<R> {\n    return new IterTap(this.array ? this.array.map(callback) : []);\n  }\n\n  reduce<R>(callback: (previousValue: R, currentValue: T, currentIndex: number, array: T[]) => R, init: R) {\n    return this.array ? this.array.reduce<R>(callback, init) : init;\n  }\n\n  sort(cmp?: (a: T, b: T) => number): T[] {\n    return this.array ? [...this.array].sort(cmp) : [];\n  }\n\n  join(str: string): string {\n    return this.array ? this.array.join(str) : \"\";\n  }\n\n  includes(val: T): boolean {\n    return this.array ? this.array.includes(val) : false;\n  }\n\n  some(predicate: (value: T, index: number, array: T[]) => boolean): boolean {\n    return this.array ? this.array.some(predicate) : false;\n  }\n\n  find(predicate: (value: T, index?: number, obj?: T[]) => boolean): T | undefined {\n    return this.array?.find(predicate);\n  }\n\n  tap<R>(callback: (array: T[]) => R): R | undefined {\n    if (this.array && this.array.length > 0) return callback(this.array);\n  }\n\n  get isEmpty(): boolean {\n    return this.array ? this.array.length === 0 : true;\n  }\n\n  get size(): number {\n    return this.array ? this.array.length : 0;\n  }\n\n  /** Return all non-null and non-undefined values (if strings, returns the ones with length > 0). */\n  get existing(): NonNullable<T>[] {\n    return this.filter(v => v !== undefined && v !== null && (typeof v !== \"string\" || v.length > 0)) as NonNullable<T>[];\n  }\n\n  get reverse(): IterTap<T> {\n    return new IterTap(this.array ? [...this.array].reverse() : undefined);\n  }\n\n  get first(): T | undefined {\n    return this.array && this.array.length > 0 ? this.array[0] : undefined;\n  }\n\n  get last(): T | undefined {\n    return this.array && this.array.length > 0 ? this.array[this.array.length - 1] : undefined;\n  }\n\n  [Symbol.iterator](): Iterator<T> {\n    return this.array ? this.array[Symbol.iterator]() : [].values();\n  }\n}\n", "/**\n * Simple single-edge directed graph data structure.\n */\n\nimport { IterTap } from \"./iter_tap\";\nimport { Map2 } from \"./map2\";\n\n// biome-ignore lint/suspicious/noExplicitAny: we use any for the generic types... sory biome.\ntype Any = any;\n\n/** A type to express empty object. */\nexport type NO_DATA = Record<string, never>;\n\n/** Graph Node. */\nexport abstract class Node<T_Graph, T_Key extends string, T_Data> {\n  /** Sometimes it is useful to know the kind of node. */\n  abstract readonly kind: string;\n\n  readonly data: Partial<T_Data> = {};\n\n  constructor(\n    readonly graph: T_Graph,\n    readonly key: T_Key,\n  ) {}\n\n  /** Shallow merge data. */\n  merge(data: Partial<T_Data>): this {\n    Object.assign(this.data, data);\n    return this;\n  }\n\n  /** The key without the node kind prefix. */\n  get plainKey(): string {\n    return this.key.replace(/^[a-z]+\\+/, \"\");\n  }\n\n  /** The first letter of the key, or \"_\" if it starts with a non-letter. */\n  get keyPrefix(): string {\n    const pk = this.plainKey;\n    return /^[a-z]/i.test(pk) ? pk[0].toLowerCase() : \"_\";\n  }\n\n  toString(): string {\n    return this.key;\n  }\n}\n\n/** Graph Edge. */\nexport abstract class Edge<T_Graph, T_From extends Node<T_Graph, Any, Any>, T_To extends Node<T_Graph, Any, Any>, T_Data> {\n  /** Used to construct a key for the edge. */\n  abstract readonly kind: string;\n\n  readonly data: Partial<T_Data> = {};\n\n  constructor(\n    readonly graph: T_Graph,\n    readonly from: T_From[\"key\"],\n    readonly to: T_To[\"key\"],\n  ) {}\n\n  /** Shallow merge data. */\n  merge(data: Partial<T_Data>): this {\n    Object.assign(this.data, data);\n    return this;\n  }\n\n  get key(): string {\n    return `${this.kind}~${this.from}~${this.to}`;\n  }\n\n  abstract get nodeFrom(): T_From | undefined;\n  abstract get nodeTo(): T_To | undefined;\n\n  toString(): string {\n    return `${this.from} -[${this.kind}]-> ${this.to}`;\n  }\n}\n\n/** Graph Node Map. */\nexport class NodeMap<T_Graph, T_Node extends Node<T_Graph, Any, Any>> implements Iterable<[T_Node[\"key\"], T_Node]> {\n  readonly #map = new Map<T_Node[\"key\"], T_Node>();\n\n  constructor(private readonly factory: (key: T_Node[\"key\"]) => T_Node) {}\n\n  get(key: T_Node[\"key\"] | undefined): T_Node | undefined {\n    return key ? this.#map.get(key) : undefined;\n  }\n\n  get size(): number {\n    return this.#map.size;\n  }\n\n  keys(): IterableIterator<T_Node[\"key\"]> {\n    return this.#map.keys();\n  }\n\n  set(key: T_Node[\"key\"], data: T_Node[\"data\"] = {}): T_Node {\n    let n = this.#map.get(key);\n    if (n === undefined) {\n      n = this.factory(key);\n      this.#map.set(key, n);\n    }\n    return n.merge(data);\n  }\n\n  has(key: T_Node[\"key\"]): boolean {\n    return this.#map.has(key);\n  }\n\n  get values(): IterTap<T_Node> {\n    return new IterTap(this.#map.values());\n  }\n\n  *findAll(predicate: (node: T_Node) => boolean): Generator<T_Node> {\n    for (const node of this.#map.values()) if (predicate(node)) yield node;\n  }\n\n  [Symbol.iterator](n?: number): IterableIterator<[T_Node[\"key\"], T_Node]> {\n    return this.#map[Symbol.iterator]();\n  }\n\n  batch(maxEntries?: number, start = 0): [T_Node[\"key\"], T_Node][] {\n    return Array.from(this.#map).slice(start, maxEntries);\n  }\n\n  toString(): string {\n    return `NodeMap(size: ${this.size})`;\n  }\n}\n\n/** Stores edges by the compound keys (from, to) and (to, from). */\nexport class EdgeMap<T_Graph, T_Edge extends Edge<T_Graph, Any, Any, Any>> {\n  readonly adjFrom = new Map2<T_Edge[\"from\"], T_Edge[\"to\"], T_Edge>();\n  readonly adjTo = new Map2<T_Edge[\"to\"], T_Edge[\"from\"], T_Edge>();\n\n  constructor(private readonly factory: (from: T_Edge[\"from\"], to: T_Edge[\"to\"]) => T_Edge) {}\n\n  connect(from: T_Edge[\"from\"], to: T_Edge[\"to\"]): T_Edge {\n    let edge = this.adjFrom.get(from, to);\n    if (edge) return edge;\n    edge = this.factory(from, to);\n    this.adjFrom.set(from, to, edge);\n    this.adjTo.set(to, from, edge);\n    return edge;\n  }\n\n  get(from: T_Edge[\"from\"], to: T_Edge[\"to\"]): T_Edge | undefined {\n    return this.adjFrom.get(from, to);\n  }\n\n  set(from: T_Edge[\"from\"], to: T_Edge[\"to\"], data: T_Edge[\"data\"]): T_Edge {\n    return this.connect(from, to).merge(data);\n  }\n\n  delete(from: T_Edge[\"from\"], to: T_Edge[\"to\"]): boolean {\n    const f = this.adjFrom.delete(from, to);\n    const t = this.adjTo.delete(to, from);\n    return f || t;\n  }\n\n  /** Get all edges. Uses the adjFrom map, but both maps should have the same values. */\n  get values() {\n    return this.adjFrom.values();\n  }\n\n  get size(): number {\n    return this.adjFrom.size;\n  }\n\n  toString(): string {\n    return `EdgeMap(size: ${this.size})`;\n  }\n}\n\ntype SerializedGraph<N extends string, E extends string> = {\n  /**\n   * Example: { \"node-a\" : { \"node-a+1\" : data1, \"node-a+2\" : data2, ... } }\n   */\n  nodes: Partial<Record<N, Record<`${N}+${string}`, Any>>>;\n\n  /**\n   * Example: { \"edge-a\" : { \"node-a+1\" : { \"node-b+1\" : data1, \"node-b+2\": data2 }, \"node-a+2\" : ... } }\n   */\n  edges: Partial<Record<E, Record<`${N}+${string}`, Record<`${N}+${string}`, Any>>>>;\n};\n\n/** Base Graph class with the ability to de/serialize registered node and edge maps. */\nexport abstract class BaseGraph<N extends string, E extends string, G> {\n  abstract readonly nodes: Record<N, NodeMap<G, Any>>;\n  abstract readonly edges: Record<E, EdgeMap<G, Any>>;\n\n  get nodeEntries() {\n    return Object.entries(this.nodes) as [N, NodeMap<G, Any>][];\n  }\n\n  get edgeEntries() {\n    return Object.entries(this.edges) as [E, EdgeMap<G, Any>][];\n  }\n\n  get nodeCount(): number {\n    return this.nodeEntries.reduce((acc, [_, map]) => acc + map.size, 0);\n  }\n\n  get edgeCount(): number {\n    return this.edgeEntries.reduce((acc, [_, map]) => acc + map.adjFrom.size, 0);\n  }\n\n  toJSON(): SerializedGraph<N, E> {\n    const data: SerializedGraph<N, E> = { nodes: {}, edges: {} };\n\n    type NK = `${N}+${string}`;\n\n    for (const [name, nodeMap] of this.nodeEntries) {\n      const m = {} as Record<NK, Any>;\n      for (const [key, { data }] of nodeMap) m[key as NK] = data;\n      data.nodes[name] = m;\n    }\n\n    for (const [name, edgeMap] of this.edgeEntries) {\n      const m = {} as Record<NK, Record<NK, Any>>;\n      for (const edge of edgeMap.adjFrom.values()) {\n        const fromMap = (m[edge.from as NK] ??= {} as Record<NK, Any>);\n        fromMap[edge.to as NK] = edge.data;\n      }\n      data.edges[name] = m;\n    }\n\n    return data;\n  }\n\n  loadJSON(data: SerializedGraph<N, E>): this {\n    for (const [name, nodes] of Object.entries(data.nodes)) {\n      const nodeMap = this.nodes[name as N];\n\n      if (!nodes) console.warn(`Data has no nodes for type \"${name}\"`);\n      if (!nodeMap) console.warn(`Graph has no node map for type \"${name}\"`);\n      if (!nodes || !nodeMap) continue;\n\n      for (const [key, nodeData] of Object.entries(nodes)) {\n        nodeMap.set(key).merge(nodeData);\n      }\n    }\n\n    for (const [name, edges] of Object.entries(data.edges)) {\n      const edgeMap = this.edges[name as E];\n\n      if (!edges) console.warn(`Data has no edges for type \"${name}\"`);\n      if (!edgeMap) console.warn(`Graph has no edge map for type \"${name}\"`);\n      if (!edges || !edgeMap) continue;\n\n      for (const [from, tos] of Object.entries(edges)) {\n        for (const [to, edgeData] of Object.entries(tos)) {\n          edgeMap.connect(from, to).merge(edgeData);\n        }\n      }\n    }\n\n    return this;\n  }\n}\n", "import { IterTap } from \"./iter_tap\";\n\n/**\n * Wrapper to work with potentially empty or undefined maps.\n */\nexport class MapTap<K, V> implements Iterable<[K, V]> {\n  constructor(readonly map?: Map<K, V>) {}\n\n  get size(): number {\n    return this.map ? this.map.size : 0;\n  }\n\n  has(val: K): boolean {\n    return this.map ? this.map.has(val) : false;\n  }\n\n  tap<R>(callback: (tap: this) => R): R | undefined {\n    if (this.map && this.map.size > 0) return callback(this);\n  }\n\n  get keys(): IterTap<K> {\n    return new IterTap(this.map?.keys());\n  }\n\n  get values(): IterTap<V> {\n    return new IterTap(this.map?.values());\n  }\n\n  get entries(): IterTap<[K, V]> {\n    return new IterTap(this.map?.entries());\n  }\n\n  [Symbol.iterator](): Iterator<[K, V]> {\n    return (this.map ?? new Map())[Symbol.iterator]();\n  }\n}\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport type { AnyValue, ValBool, ValNumber, ValRegExp, Value } from \"@plangs/auxiliar/value\";\nimport type { NLicense, NParadigm, NPlang, NPlatform, NTag, NTsys } from \"@plangs/plangs\";\n\ntype Pred<T extends Value<AnyValue>> = (pl: NPlang, value: T) => boolean;\n\n/**\n * Predicates to use to filter programming languages.\n */\nexport const PLANG_FACET_PREDICATES = {\n  compilesTo: (({ relCompilesTo }, flt) => flt.matches(key => relCompilesTo.has(key))) as Pred<Filter<NPlang[\"key\"]>>,\n  createdRecently: ((pl, year) => pl.createdRecently(year.value)) as Pred<ValNumber>,\n  creationYear: ((pl, flt) => flt.matches(year => pl.year === year)) as Pred<Filter<number>>,\n  dialectOf: (({ relDialectOf }, flt) => flt.matches(key => relDialectOf.has(key))) as Pred<Filter<NPlang[\"key\"]>>,\n  extensions: (({ extensions }, flt) => flt.matches(key => extensions.includes(key))) as Pred<Filter<string>>,\n  isPopular: ((pl, val) => val.value === pl.isPopular) as Pred<ValBool>,\n  hasLogo: ((pl, val) => val.value === pl.images.some(img => img.kind === \"logo\")) as Pred<ValBool>,\n  hasWikipedia: ((pl, val) => val.value === !!pl.data.extWikipediaPath) as Pred<ValBool>,\n  implements: (({ relImplements }, flt) => flt.matches(key => relImplements.has(key))) as Pred<Filter<NPlang[\"key\"]>>,\n  influenced: (({ relInfluenced }, flt) => flt.matches(key => relInfluenced.has(key))) as Pred<Filter<NPlang[\"key\"]>>,\n  influencedBy: (({ relInfluencedBy }, flt) => flt.matches(key => relInfluencedBy.has(key))) as Pred<Filter<NPlang[\"key\"]>>,\n  isTranspiler: ((pl, val) => val.value === pl.isTranspiler) as Pred<ValBool>,\n  licenses: (({ relLicenses }, flt) => flt.matches(key => relLicenses.has(key))) as Pred<Filter<NLicense[\"key\"]>>,\n  paradigms: (({ relParadigms }, flt) => flt.matches(key => relParadigms.has(key))) as Pred<Filter<NParadigm[\"key\"]>>,\n  plangName: ((pl, regexp) => regexp.value.test(pl.name)) as Pred<ValRegExp>,\n  platforms: (({ relPlatforms }, flt) => flt.matches(key => relPlatforms.has(key))) as Pred<Filter<NPlatform[\"key\"]>>,\n  releasedRecently: ((pl, year) => pl.releasedRecently(year.value)) as Pred<ValNumber>,\n  tags: (({ relTags }, flt) => flt.matches(key => relTags.has(key))) as Pred<Filter<NTag[\"key\"]>>,\n  typeSystems: (({ relTsys }, flt) => flt.matches(key => relTsys.has(key))) as Pred<Filter<NTsys[\"key\"]>>,\n  writtenIn: (({ relWrittenIn }, flt) => flt.matches(key => relWrittenIn.has(key))) as Pred<Filter<NPlang[\"key\"]>>,\n} as const;\n\nexport type PlangFacetKey = keyof typeof PLANG_FACET_PREDICATES;\n\nexport function plangMatches(pl: NPlang, values: Map<PlangFacetKey, AnyValue>): boolean {\n  for (const [key, value] of values) {\n    const pred = PLANG_FACET_PREDICATES[key] as Pred<AnyValue>;\n    if (!pred) console.error(`No predicate found for key: ${key}`);\n    if (pred && value.isPresent && !pred(pl, value)) return false;\n  }\n  return true;\n}\n", "import { arrayMerge } from \"@plangs/auxiliar/array\";\nimport { BaseGraph, Edge, EdgeMap, Node, NodeMap } from \"@plangs/auxiliar/graph\";\nimport { IterTap } from \"@plangs/auxiliar/iter_tap\";\nimport { MapTap } from \"@plangs/auxiliar/map_tap\";\nimport type { AnyValue } from \"@plangs/auxiliar/value\";\n\nimport { type PlangFacetKey, plangMatches } from \"./facets/plangs\";\n\nimport type { CommonEdgeData, CommonNodeData, E, Image, N, NLicenseData, NPlangData, NPostData, Release, StrDate } from \"./schema\";\nimport { getStrDateYear } from \"./util\";\nexport type { E, N } from \"./schema\";\n\n/** Alias for better readability. */\nexport type G = PlangsGraph;\n\nexport type AnyNode = NBase<N, CommonNodeData>;\n\nexport type AnyEdge = EBase<AnyNode, AnyNode, CommonEdgeData>;\n\nexport class PlangsGraph extends BaseGraph<N, E, G> {\n  #nodeMap = <TN extends AnyNode>(ctor: new (g: G, key: TN[\"key\"]) => TN) => new NodeMap<G, TN>(key => new ctor(this, key));\n  #edgeMap = <TE extends AnyEdge>(ctor: new (g: G, from: TE[\"from\"], to: TE[\"to\"]) => TE) =>\n    new EdgeMap<G, TE>((from, to) => new ctor(this, from, to));\n\n  override readonly nodes = {\n    app: this.#nodeMap(NApp),\n    post: this.#nodeMap(NPost),\n    bundle: this.#nodeMap(NBundle),\n    lib: this.#nodeMap(NLibrary),\n    license: this.#nodeMap(NLicense),\n    paradigm: this.#nodeMap(NParadigm),\n    pl: this.#nodeMap(NPlang),\n    plat: this.#nodeMap(NPlatform),\n    tag: this.#nodeMap(NTag),\n    tool: this.#nodeMap(NTool),\n    tsys: this.#nodeMap(NTsys),\n  } as const;\n\n  override readonly edges = {\n    app: this.#edgeMap(EApp),\n    bundle: this.#edgeMap(EBundle),\n    compilesTo: this.#edgeMap(ECompilesTo),\n    dialect: this.#edgeMap(EDialect),\n    impl: this.#edgeMap(EImpl),\n    influence: this.#edgeMap(EInfluence),\n    lib: this.#edgeMap(ELib),\n    license: this.#edgeMap(ELicense),\n    paradigm: this.#edgeMap(EParadigm),\n    plBundle: this.#edgeMap(EPlBundle),\n    plat: this.#edgeMap(EPlat),\n    post: this.#edgeMap(EPost),\n    tag: this.#edgeMap(ETag),\n    tool: this.#edgeMap(ETool),\n    tsys: this.#edgeMap(ETsys),\n    writtenIn: this.#edgeMap(EWrittenIn),\n  } as const;\n\n  /** Find all plangs that match the given filters. */\n  plangs(values: Map<PlangFacetKey, AnyValue>, limit = -1): Set<NPlang[\"key\"]> {\n    const keys = new Set<NPlang[\"key\"]>();\n    for (const pl of this.nodes.pl.values) {\n      if (limit >= 0 && keys.size >= limit) break;\n      if (plangMatches(pl, values)) keys.add(pl.key);\n    }\n    return keys;\n  }\n}\n\n/** Base type for data on all nodes. */\nexport abstract class NBase<Prefix extends N, Data extends CommonNodeData> extends Node<PlangsGraph, `${Prefix}+${string}`, Data> {\n  get name(): string {\n    return this.data.name ? this.data.name : this.plainKey;\n  }\n\n  get description(): string {\n    return this.data.description || this.name;\n  }\n\n  get urlHome(): string | undefined {\n    return this.data.extHomeURL;\n  }\n\n  get keywords(): IterTap<string> {\n    return new IterTap(this.data.keywords);\n  }\n\n  get keywordsRegexp(): RegExp | undefined {\n    const { keywords } = this.data;\n    if (!keywords) return undefined;\n    const lenient = keywords.map(k => k.replaceAll(/[- ]/g, \"\\\\s*.?\\\\s*\"));\n    return new RegExp(`\\\\b(${lenient.join(\"|\")})\\\\b`, \"i\");\n  }\n}\n\n/** A programming language Node. */\nexport class NPlang extends NBase<\"pl\", NPlangData> {\n  static readonly kind: N = \"pl\";\n  override kind = NPlang.kind;\n\n  get ranking(): number | undefined {\n    return this.data.languishRanking;\n  }\n\n  get href(): string {\n    return `/${this.plainKey}`;\n  }\n\n  get extensions(): IterTap<string> {\n    return new IterTap(this.data.extensions);\n  }\n\n  get images() {\n    return new IterTap(this.data.images);\n  }\n\n  /** Whether the language is considered popular by Github, or its Languish ranking is <= 25. */\n  get isPopular(): boolean {\n    const { githubPopular, languishRanking } = this.data;\n    return !!githubPopular || (typeof languishRanking === \"number\" && languishRanking <= 25);\n  }\n\n  get thumbUrl(): string | undefined {\n    return (this.images.find(({ kind }) => kind === \"logo\") ?? this.images.first)?.url;\n  }\n\n  get isTranspiler(): boolean {\n    return this.data.isTranspiler === true;\n  }\n\n  get releases(): IterTap<Release> {\n    return new IterTap(this.data.releases);\n  }\n\n  get lastRelease(): Release | undefined {\n    const rel = this.releases.sort((r1, r2) => r2.date?.localeCompare(r1.date ?? \"\") ?? 0);\n    if (rel.length === 0) return undefined;\n    return rel[0];\n  }\n\n  get lastReleaseYear(): number | undefined {\n    return getStrDateYear(this.lastRelease?.date);\n  }\n\n  get year(): number | undefined {\n    return this.data.year;\n  }\n\n  get urlRepository(): string | undefined {\n    return this.data.extRepositoryURL;\n  }\n\n  get urlGithub(): string | undefined {\n    return this.data.extGithubPath ? `https://github.com/${this.data.extGithubPath}` : undefined;\n  }\n\n  get urlWikipedia(): string | undefined {\n    return this.data.extWikipediaPath ? `https://github.com/${this.data.extGithubPath}` : undefined;\n  }\n\n  get urlReddit(): string | undefined {\n    return this.data.extRedditPath ? `https://reddit.com/${this.data.extRedditPath}` : undefined;\n  }\n\n  get urlStackov(): string | undefined {\n    return this.stackovTags ? `https://stackoverflow.com/questions/tagged/${this.stackovTags.join(\"+\")}` : undefined;\n  }\n\n  get stackovTags(): IterTap<string> {\n    return new IterTap(this.data.stackovTags);\n  }\n\n  releasedRecently(minYear: number): boolean {\n    const relYear = this.lastReleaseYear;\n    if (!relYear) return false;\n    return relYear >= minYear;\n  }\n\n  createdRecently(minYear: number): boolean {\n    if (!this.year) return false;\n    return this.year >= minYear;\n  }\n\n  addApps(others: NApp[\"key\"][]): this {\n    for (const other of others) this.graph.edges.app.connect(this.key, other);\n    return this;\n  }\n\n  addBundles(others: NBundle[\"key\"][]): this {\n    for (const other of others) this.graph.edges.plBundle.connect(this.key, other);\n    return this;\n  }\n\n  addExtensions(exts: string[]): this {\n    arrayMerge((this.data.extensions ??= []), exts);\n    return this;\n  }\n\n  addFilenames(filenames: string[]): this {\n    arrayMerge((this.data.filenames ??= []), filenames);\n    return this;\n  }\n\n  addImages(images: Image[]): this {\n    arrayMerge((this.data.images ??= []), images, (i1, i2) => i1.url === i2.url);\n    return this;\n  }\n\n  addReleases(releases: Release[]): this {\n    arrayMerge((this.data.releases ??= []), releases, (r1, r2) => r1.version === r2.version);\n    return this;\n  }\n\n  addCompilesTo(others: NPlang[\"key\"][]): this {\n    if (others.length > 0) this.data.isTranspiler = true;\n    for (const other of others) this.graph.edges.compilesTo.connect(this.key, other);\n    return this;\n  }\n\n  addDialectOf(others: NPlang[\"key\"][]): this {\n    for (const other of others) this.graph.edges.dialect.connect(this.key, other);\n    return this;\n  }\n\n  addImplements(others: NPlang[\"key\"][]): this {\n    for (const other of others) this.graph.edges.impl.connect(this.key, other);\n    return this;\n  }\n\n  addInfluencedBy(others: NPlang[\"key\"][]): this {\n    for (const other of others) this.graph.edges.influence.connect(this.key, other);\n    return this;\n  }\n\n  addLibs(others: NLibrary[\"key\"][]): this {\n    for (const other of others) this.graph.edges.lib.connect(this.key, other);\n    return this;\n  }\n\n  addLicenses(others: NLicense[\"key\"][]): this {\n    for (const other of others) this.graph.edges.license.connect(this.key, other);\n    return this;\n  }\n\n  addParadigms(others: NParadigm[\"key\"][]): this {\n    for (const otherkey of others) this.graph.edges.paradigm.connect(this.key, otherkey);\n    return this;\n  }\n\n  addPlatforms(others: NPlatform[\"key\"][]): this {\n    for (const other of others) this.graph.edges.plat.connect(this.key, other);\n    return this;\n  }\n\n  addPosts(others: NPost[\"key\"][]): this {\n    for (const other of others) this.graph.edges.post.connect(this.key, other);\n    return this;\n  }\n\n  addStackovTags(stackovTags: string[]): this {\n    arrayMerge((this.data.stackovTags ??= []), stackovTags);\n    return this;\n  }\n\n  addTags(others: NTag[\"key\"][]): this {\n    for (const other of others) this.graph.edges.tag.connect(this.key, other);\n    return this;\n  }\n\n  addTools(others: NTool[\"key\"][]): this {\n    for (const other of others) this.graph.edges.tool.connect(this.key, other);\n    return this;\n  }\n\n  addTypeSystems(others: NTsys[\"key\"][]): this {\n    for (const other of others) this.graph.edges.tsys.connect(this.key, other);\n    return this;\n  }\n\n  addWrittenIn(others: NPlang[\"key\"][]): this {\n    for (const other of others) this.graph.edges.writtenIn.connect(this.key, other);\n    return this;\n  }\n\n  /**\n   * Builds (non-recursively) a set of all languages that this language is related to, not including self.\n   * A language is related if it is compiled to, is a dialect of, or implements this language.\n   */\n  family(opt = { compilesTo: true, dialectOf: true, implements: true }): Set<NPlang> {\n    const set = new Set<NPlang>([]);\n    const addRel = (rel: MapTap<NPlang[\"key\"], AnyEdge>) => {\n      for (const pl of rel.values.map(e => e.nodeTo).existing) set.add(pl as NPlang);\n    };\n    if (opt.compilesTo) addRel(this.relCompilesTo);\n    if (opt.dialectOf) addRel(this.relDialectOf);\n    if (opt.implements) addRel(this.relImplements);\n    return set;\n  }\n\n  get relApps(): MapTap<NApp[\"key\"], EApp> {\n    return new MapTap(this.graph.edges.app.adjFrom.getMap(this.key));\n  }\n\n  get relCompilesTo(): MapTap<NPlang[\"key\"], EDialect> {\n    return new MapTap(this.graph.edges.compilesTo.adjFrom.getMap(this.key));\n  }\n\n  get relDialectOf(): MapTap<NPlang[\"key\"], EDialect> {\n    return new MapTap(this.graph.edges.dialect.adjFrom.getMap(this.key));\n  }\n\n  get relImplements(): MapTap<NPlang[\"key\"], EImpl> {\n    return new MapTap(this.graph.edges.impl.adjFrom.getMap(this.key));\n  }\n\n  get relInfluenced(): MapTap<NPlang[\"key\"], EImpl> {\n    return new MapTap(this.graph.edges.influence.adjTo.getMap(this.key));\n  }\n\n  get relInfluencedBy(): MapTap<NPlang[\"key\"], EImpl> {\n    return new MapTap(this.graph.edges.influence.adjFrom.getMap(this.key));\n  }\n\n  get relLibs(): MapTap<NLibrary[\"key\"], ELib> {\n    return new MapTap(this.graph.edges.lib.adjFrom.getMap(this.key));\n  }\n\n  get relLicenses(): MapTap<NLicense[\"key\"], ELicense> {\n    return new MapTap(this.graph.edges.license.adjFrom.getMap(this.key));\n  }\n\n  get relParadigms(): MapTap<NParadigm[\"key\"], EParadigm> {\n    return new MapTap(this.graph.edges.paradigm.adjFrom.getMap(this.key));\n  }\n\n  get relPlBundles(): MapTap<NBundle[\"key\"], EPlBundle> {\n    return new MapTap(this.graph.edges.plBundle.adjFrom.getMap(this.key));\n  }\n\n  get relPlatforms(): MapTap<NPlatform[\"key\"], EPlat> {\n    return new MapTap(this.graph.edges.plat.adjFrom.getMap(this.key));\n  }\n\n  get relTags(): MapTap<NTag[\"key\"], ETag> {\n    return new MapTap(this.graph.edges.tag.adjFrom.getMap(this.key));\n  }\n\n  get relTools(): MapTap<NTool[\"key\"], ETool> {\n    return new MapTap(this.graph.edges.tool.adjFrom.getMap(this.key));\n  }\n\n  get relTsys(): MapTap<NTsys[\"key\"], ETsys> {\n    return new MapTap(this.graph.edges.tsys.adjFrom.getMap(this.key));\n  }\n\n  get relWrittenIn(): MapTap<NPlang[\"key\"], EWrittenIn> {\n    return new MapTap(this.graph.edges.writtenIn.adjFrom.getMap(this.key));\n  }\n\n  get relPosts(): MapTap<NPost[\"key\"], EPost> {\n    return new MapTap(this.graph.edges.post.adjFrom.getMap(this.key));\n  }\n}\n\n/** A library Node, for software libraries or frameworks, like jQuery, Rails, etc. */\nexport class NLibrary extends NBase<\"lib\", CommonNodeData> {\n  static readonly kind: N = \"lib\";\n  override kind = NLibrary.kind;\n\n  addPls(others: NPlang[\"key\"][]): this {\n    for (const other of others) this.graph.edges.lib.connect(other, this.key);\n    return this;\n  }\n}\n\n/** A License Node, e.g., MIT, GPL, etc. */\nexport class NLicense extends NBase<\"license\", NLicenseData> {\n  static readonly kind: N = \"license\";\n  override kind: N = NLicense.kind;\n\n  get spdx(): string | undefined {\n    return this.data.spdx;\n  }\n\n  get isFSFLibre(): boolean {\n    return this.data.isFSFLibre === true;\n  }\n\n  get isOSIApproved(): boolean {\n    return this.data.isOSIApproved === true;\n  }\n}\n\n/** A Paradigm Node, e.g., Functional, Imperative, etc. */\nexport class NParadigm extends NBase<\"paradigm\", CommonNodeData> {\n  static readonly kind: N = \"paradigm\";\n  override kind: N = NParadigm.kind;\n}\n\n/** A Platform Node for operating systems or architectures, e.g., Linux, Windows, ARM etc. */\nexport class NPlatform extends NBase<\"plat\", CommonNodeData> {\n  static readonly kind: N = \"plat\" as const;\n  override kind = NPlatform.kind;\n}\n\n/** A generic tag. */\nexport class NTag extends NBase<\"tag\", CommonNodeData> {\n  static readonly kind: N = \"tag\";\n  override kind = NTag.kind;\n}\n\n/** A tool Node, e.g., Version Manager, Linter, Formatter,  etc. */\nexport class NTool extends NBase<\"tool\", CommonNodeData> {\n  static readonly kind: N = \"tool\";\n  override kind = NTool.kind;\n\n  addPls(others: NPlang[\"key\"][]): this {\n    for (const other of others) this.graph.edges.tool.connect(other, this.key);\n    return this;\n  }\n}\n\n/** A Type System Node, e.g., OOP, Duck, Dynamic, etc. */\nexport class NTsys extends NBase<\"tsys\", CommonNodeData> {\n  static readonly kind: N = \"tsys\";\n  override kind = NTsys.kind;\n}\n\n/** An app Node, for any sort of application. */\nexport class NApp extends NBase<\"app\", CommonNodeData> {\n  static readonly kind: N = \"app\";\n  override kind = NApp.kind;\n\n  addPls(others: NPlang[\"key\"][]): this {\n    for (const other of others) this.graph.edges.app.connect(other, this.key);\n    return this;\n  }\n}\n\n/** Bundle of tools. */\nexport class NBundle extends NBase<\"bundle\", CommonNodeData> {\n  static readonly kind: N = \"bundle\";\n  override kind = NBundle.kind;\n\n  addTools(others: `tool+${string}`[]): this {\n    for (const other of others) this.graph.edges.bundle.connect(this.key, other);\n    return this;\n  }\n\n  addPls(others: NPlang[\"key\"][]): this {\n    for (const other of others) this.graph.edges.plBundle.connect(other, this.key);\n    return this;\n  }\n\n  get relTools(): MapTap<NTool[\"key\"], EBundle> {\n    return new MapTap(this.graph.edges.bundle.adjFrom.getMap(this.key));\n  }\n\n  get relPls(): MapTap<NPlang[\"key\"], EPlBundle> {\n    return new MapTap(this.graph.edges.plBundle.adjTo.getMap(this.key));\n  }\n}\n\n/**\n * A blog post entry.\n * Repurposes the `websites` field to point to plangs blog posts.\n * The blog posts are scanned at build time and added to the graph.\n */\nexport class NPost extends NBase<\"post\", NPostData> {\n  static readonly kind: N = \"post\";\n  override kind = NPost.kind;\n\n  set path(path: string) {\n    this.data.path = path;\n  }\n\n  get author(): string | undefined {\n    return this.data.author;\n  }\n\n  get date(): StrDate | undefined {\n    return this.data.date;\n  }\n\n  get path(): string | undefined {\n    return this.data.path;\n  }\n\n  get title(): string | undefined {\n    return this.name;\n  }\n\n  get href(): string {\n    return `/blog/${this.plainKey}`;\n  }\n\n  addPls(others: `pl+${string}`[]) {\n    for (const other of others) this.graph.edges.post.connect(other, this.key);\n    return this;\n  }\n\n  get relPls(): MapTap<NPlang[\"key\"], EPost> {\n    return new MapTap(this.graph.edges.post.adjTo.getMap(this.key));\n  }\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Edge Types\n////////////////////////////////////////////////////////////////////////////////\n\n/** Base type for data on all edges. */\nexport abstract class EBase<T_From extends AnyNode, T_To extends AnyNode, T_Data extends CommonEdgeData> extends Edge<\n  PlangsGraph,\n  T_From,\n  T_To,\n  T_Data\n> {}\n\nexport class EApp extends EBase<NPlang, NApp, CommonEdgeData> {\n  override kind: E = \"app\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NApp | undefined {\n    return this.graph.nodes.app.get(this.to);\n  }\n}\n\n/** Edge from a tool to a bundle. */\nexport class EBundle extends EBase<NBundle, NTool, CommonEdgeData> {\n  override kind: E = \"bundle\";\n\n  get nodeFrom(): NBundle | undefined {\n    return this.graph.nodes.bundle.get(this.from);\n  }\n\n  get nodeTo(): NTool | undefined {\n    return this.graph.nodes.tool.get(this.to);\n  }\n}\n\nexport class ECompilesTo extends EBase<NPlang, NPlang, CommonEdgeData> {\n  override kind: E = \"compilesTo\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.to);\n  }\n}\n\nexport class EDialect extends EBase<NPlang, NPlang, CommonEdgeData> {\n  override kind: E = \"dialect\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.to);\n  }\n}\n\nexport class ELicense extends EBase<NPlang, NLicense, CommonEdgeData> {\n  override kind: E = \"license\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NLicense | undefined {\n    return this.graph.nodes.license.get(this.to);\n  }\n}\n\nexport class EImpl extends EBase<NPlang, NPlang, CommonEdgeData> {\n  override kind: E = \"impl\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.to);\n  }\n}\n\nexport class EInfluence extends EBase<NPlang, NPlang, CommonEdgeData> {\n  override kind: E = \"influence\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.to);\n  }\n}\n\nexport class EParadigm extends EBase<NPlang, NParadigm, CommonEdgeData> {\n  override kind: E = \"paradigm\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NParadigm | undefined {\n    return this.graph.nodes.paradigm.get(this.to);\n  }\n}\n\nexport class ETsys extends EBase<NPlang, NTsys, CommonEdgeData> {\n  override kind: E = \"tsys\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NTsys | undefined {\n    return this.graph.nodes.tsys.get(this.to);\n  }\n}\n\n/** Edge from a PLang to a Bundle. */\nexport class EPlBundle extends EBase<NPlang, NBundle, CommonEdgeData> {\n  override kind: E = \"plBundle\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NBundle | undefined {\n    return this.graph.nodes.bundle.get(this.to);\n  }\n}\n\nexport class EPlat extends EBase<NPlang, NPlatform, CommonEdgeData> {\n  override kind: E = \"plat\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NPlatform | undefined {\n    return this.graph.nodes.plat.get(this.to);\n  }\n}\n\nexport class EPost extends EBase<NPlang, NPost, CommonEdgeData> {\n  override kind: E = \"post\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NPost | undefined {\n    return this.graph.nodes.post.get(this.to);\n  }\n}\n\nexport class ELib extends EBase<NPlang, NLibrary, CommonEdgeData> {\n  override kind: E = \"lib\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NLibrary | undefined {\n    return this.graph.nodes.lib.get(this.to);\n  }\n}\n\nexport class ETag extends EBase<NPlang, NTag, CommonEdgeData> {\n  override kind: E = \"tag\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NTag | undefined {\n    return this.graph.nodes.tag.get(this.to);\n  }\n}\n\nexport class ETool extends EBase<NPlang, NTool, CommonEdgeData> {\n  override kind: E = \"tool\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NTool | undefined {\n    return this.graph.nodes.tool.get(this.to);\n  }\n}\n\nexport class EWrittenIn extends EBase<NPlang, NPlang, CommonEdgeData> {\n  override kind: E = \"writtenIn\";\n\n  get nodeFrom(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.from);\n  }\n\n  get nodeTo(): NPlang | undefined {\n    return this.graph.nodes.pl.get(this.to);\n  }\n}\n", "import type { Ref } from \"preact\";\nimport { useContext, useRef } from \"preact/hooks\";\n\nimport { type AnyValue, ValBool } from \"@plangs/auxiliar/value\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { handler } from \"@plangs/frontend/auxiliar/events\";\nimport { tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { FacetsMainContext } from \"@plangs/frontend/components/facets/main/facets-main\";\nimport type { AnyFacetsMainState } from \"@plangs/frontend/components/facets/main/state\";\n\nexport type FacetBoolMapper = (checked: boolean) => AnyValue;\n\nexport type FacetBoolProps<GroupKey, FacetKey> = {\n  groupKey: GroupKey;\n  facetKey: FacetKey;\n  label: string;\n  valueMapper?: FacetBoolMapper;\n};\n\nexport function FacetBool<GroupKey extends string, FacetKey extends string>({\n  groupKey,\n  facetKey,\n  label,\n  valueMapper = (checked: boolean) => new ValBool(checked),\n}: FacetBoolProps<GroupKey, FacetKey>) {\n  const input = useRef<HTMLInputElement>();\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n\n  const toggle = handler((checkbox: HTMLInputElement) => {\n    main.doSetValue(groupKey, facetKey, valueMapper(checkbox.checked));\n  });\n\n  return (\n    <label for={facetKey} class={tw(\"block\", \"px-2\")}>\n      <input\n        id={facetKey}\n        name={facetKey}\n        type=\"checkbox\"\n        class={tw(\"-mt-1\")}\n        placeholder={label}\n        {...onClickOnEnter(toggle)}\n        checked={!!main.values.get(groupKey, facetKey)?.isPresent}\n        ref={input as Ref<HTMLInputElement>}\n      />\n      <span class=\"ml-2\">{label}</span>\n    </label>\n  );\n}\n", "import type { ComponentChildren } from \"preact\";\nimport { useContext } from \"preact/hooks\";\n\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { DESELECT } from \"@plangs/frontend/auxiliar/icons\";\nimport { BAR, BORDER, HOVER_SVG_GROUP, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { FacetsMainContext } from \"@plangs/frontend/components/facets/main/facets-main\";\nimport type { AnyFacetsMainState } from \"@plangs/frontend/components/facets/main/state\";\n\nexport function FacetGroup<GroupKey extends string>({\n  label,\n  groupKey,\n  active,\n  children,\n}: { label: string; groupKey: GroupKey; active: boolean; children: ComponentChildren }) {\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n  const hasValues = main.groupHasValues(groupKey);\n  return (\n    <div class={tw(\"flex-1\", \"flex flex-col\", \"overflow-hidden\", !active && \"hidden\")}>\n      <header\n        class={tw(\n          \"sticky top-0 z-10\",\n          \"shrink-0\",\n          \"p-2\",\n          \"flex flex-row\",\n          \"items-center justify-between\",\n          \"truncate\",\n          \"text-primary\",\n          tw(BORDER, \"border-b-1\"),\n          BAR,\n        )}>\n        <span class=\"inline-block\">{label}</span>\n\n        <span\n          // biome-ignore lint/a11y/noNoninteractiveTabindex: we make it interactive.\n          tabIndex={0}\n          class={tw(\"group\", \"cursor-pointer\", hasValues ? \"text-foreground\" : \"text-foreground/50\")}\n          {...onClickOnEnter(() => {\n            main.doResetGroup(groupKey);\n          })}>\n          <div class=\"inline-flex flex-row items-center\">\n            <span class={tw(hasValues && \"group-hover:text-hiliteb\")}>Reset</span>\n            <span class={tw(hasValues && HOVER_SVG_GROUP, \"scale-50\")}>{DESELECT}</span>\n          </div>\n        </span>\n      </header>\n\n      <div class={tw(\"flex-1\", \"flex flex-col\", \"gap-4\", \"overflow-y-scroll\", \"relative\")}>{children}</div>\n    </div>\n  );\n}\n", "import { useContext } from \"preact/hooks\";\n\nimport { ValRegExp } from \"@plangs/auxiliar/value\";\nimport { handler } from \"@plangs/frontend/auxiliar/events\";\nimport { INPUT, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { FacetsMainContext } from \"@plangs/frontend/components/facets/main/facets-main\";\nimport type { AnyFacetsMainState } from \"@plangs/frontend/components/facets/main/state\";\n\nexport function FacetText<GroupKey extends string, FacetKey extends string>({\n  groupKey,\n  facetKey,\n  label,\n}: { groupKey: GroupKey; facetKey: FacetKey; label: string }) {\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n  const onInput = handler((input: HTMLInputElement) => {\n    // TODO maybe escape the input value to avoid malicious regexes.\n    main.doSetValue(groupKey, facetKey, new ValRegExp(new RegExp(`${input.value}`, \"i\")));\n  });\n  return (\n    <input\n      type=\"search\"\n      onInput={onInput}\n      placeholder={label}\n      class={tw(\"w-full\", INPUT)}\n      value={main.values.get(groupKey, facetKey)?.value?.source ?? \"\"}\n    />\n  );\n}\n", "import type { ComponentChild } from \"preact\";\n\nimport { Dispatchable, useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { elem, elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { ABC, BOOLEAN, CLOSE, DESELECT, FILTER_EDIT, MENU, MOON, RANKING, SUN } from \"@plangs/frontend/auxiliar/icons\";\nimport { tw } from \"@plangs/frontend/auxiliar/styles\";\n\nimport type { FacetsMainElement } from \"../facets/main\";\nimport type { IconButtonProps } from \"./icon-button\";\n\nexport type IconButtonState = ToggleLights | ToggleHamburguer | ToggleFacetsMenu | ToggleAllAny | ToggleClearFacets | ToggleGridOrder | undefined;\n\nexport function useIconButtonState({ action, disabled, initial }: IconButtonProps): IconButtonState {\n  if (action === \"lights\") return useDispatchable(() => ToggleLights.initial(disabled));\n  if (action === \"hamburger\") return useDispatchable(() => ToggleHamburguer.initial(disabled));\n  if (action === \"facets\") return useDispatchable(() => ToggleFacetsMenu.initial(disabled));\n  if (action === \"allAny\") return useDispatchable(() => ToggleAllAny.initial(initial, disabled));\n  if (action === \"clearFacets\") return useDispatchable(() => ToggleClearFacets.initial(disabled));\n  if (action === \"gridOrder\") return useDispatchable(() => ToggleGridOrder.initial(disabled));\n  console.error(`Unknown action: ${action}`);\n}\n\nabstract class IconButtonBaseState<T> extends Dispatchable<T & { disabled: boolean }> {\n  abstract doAction(): void;\n\n  /** Side effects handler, if any. */\n  abstract runEffects(): void;\n\n  abstract get icon(): ComponentChild;\n\n  get disabled(): boolean {\n    return this.data.disabled;\n  }\n\n  set disabled(value: boolean) {\n    this.data.disabled = value;\n  }\n\n  get value() {\n    const { disabled, ...data } = this.data;\n    return data;\n  }\n}\n\n/** State for a dark/ligh mode button */\nexport class ToggleLights extends IconButtonBaseState<{ mode: \"dark\" | \"light\" }> {\n  static initial(disabled = false) {\n    return new ToggleLights({ mode: localStorage.getItem(\"lightMode\") === \"dark\" ? \"dark\" : \"light\", disabled });\n  }\n\n  get isDark(): boolean {\n    return this.data.mode === \"dark\";\n  }\n\n  override get icon() {\n    return this.isDark ? SUN : MOON;\n  }\n\n  override doAction() {\n    this.data.mode = this.isDark ? \"light\" : \"dark\";\n  }\n\n  override runEffects() {\n    document.body.classList.toggle(\"dark\", this.isDark);\n    localStorage.setItem(\"lightMode\", this.data.mode);\n  }\n}\n\n/** State for a \"hamburguer\" menu. */\nexport class ToggleHamburguer extends IconButtonBaseState<{ mode: \"show\" | \"hide\" }> {\n  static initial(disabled = false) {\n    return new ToggleHamburguer({ mode: localStorage.getItem(\"hamburguer\") === \"show\" ? \"show\" : \"hide\", disabled });\n  }\n\n  get hide(): boolean {\n    return this.data.mode === \"hide\";\n  }\n\n  override get icon() {\n    return this.hide ? MENU : CLOSE;\n  }\n\n  override doAction() {\n    this.data.mode = this.hide ? \"show\" : \"hide\";\n  }\n\n  override runEffects() {\n    elem(\"mainNav\")?.classList.toggle(\"hidden\", this.hide);\n    localStorage.setItem(\"hamburguer\", this.data.mode);\n  }\n}\n\n/** State for the facets menu. */\nexport class ToggleFacetsMenu extends IconButtonBaseState<{ mode: \"show\" | \"hide\" }> {\n  static initial(disabled = false) {\n    return new ToggleFacetsMenu({ mode: localStorage.getItem(\"facets\") === \"show\" ? \"show\" : \"hide\", disabled });\n  }\n\n  get show(): boolean {\n    return this.data.mode === \"show\";\n  }\n\n  override get icon() {\n    return (\n      <span\n        class={tw(\n          \"inline-block\",\n          \"mt-[6px] scale-85\",\n          this.show && \"stroke-[1px] stroke-foreground/50\",\n          this.show ? \"text-hiliteb\" : \"text-primary\",\n          // fmt.\n        )}>\n        {FILTER_EDIT}\n      </span>\n    );\n  }\n\n  override doAction() {\n    this.data.mode = this.show ? \"hide\" : \"show\";\n  }\n\n  override runEffects() {\n    const fm = elems(\"facetsMain\");\n    if (fm.length > 0) fm[0].classList.toggle(\"hidden\", !this.show);\n    localStorage.setItem(\"facets\", this.data.mode);\n  }\n}\n\n/** State for toggling between \"and\" and \"all\" modes. */\nexport class ToggleAllAny extends IconButtonBaseState<{ mode: \"all\" | \"any\" }> {\n  static initial(initial: string | undefined, disabled = false) {\n    return new ToggleAllAny({ mode: initial === \"all\" ? \"all\" : \"any\", disabled });\n  }\n\n  get mode(): \"all\" | \"any\" {\n    return this.data.mode;\n  }\n\n  override get icon() {\n    const disabled = this.data.disabled;\n\n    const shadeAll = disabled || this.mode === \"any\";\n    const shadeAny = disabled || this.mode === \"all\";\n\n    return (\n      <span class={tw(\"flex flex-row gap-1\", \"items-center\")}>\n        <span class={tw(shadeAll && \"opacity-50\", !disabled && \"group-hover:text-hiliteb\")}>All of</span>\n        <span class={tw(\"inline-block\", \"mt-[1px]\", \"scale-85\", this.mode === \"all\" && \"rotate-180\")}>{BOOLEAN}</span>\n        <span class={tw(shadeAny && \"opacity-50\", !disabled && \"group-hover:text-hiliteb\")}>Any of</span>\n      </span>\n    );\n  }\n\n  override doAction() {\n    this.data.mode = this.mode === \"all\" ? \"any\" : \"all\";\n  }\n\n  override runEffects() {\n    // nada.\n  }\n}\n\n/** State for clearing any selection from the facets menu. */\nexport class ToggleClearFacets extends IconButtonBaseState<{ mode: \"clearFacets\" | \"\" }> {\n  static initial(disabled = false) {\n    return new ToggleClearFacets({ disabled, mode: \"\" });\n  }\n\n  override get icon() {\n    return this.data.mode === \"clearFacets\" ? DESELECT : null;\n  }\n\n  override doAction() {\n    this.data.mode = \"\";\n  }\n\n  doToggleMode(mode: \"clearFacets\" | \"\") {\n    this.data.mode = mode;\n    this.dispatch();\n  }\n\n  override runEffects() {\n    for (const el of elems<FacetsMainElement>(\"facetsMain\")) el.state?.doResetAll();\n  }\n}\n\n/** State for toggling order of thumbnails between ranking and alphabetical. */\nexport class ToggleGridOrder extends IconButtonBaseState<{ mode: \"alpha\" | \"ranking\" }> {\n  static initial(disabled = false) {\n    return new ToggleGridOrder({ disabled, mode: \"alpha\" });\n  }\n\n  get mode(): \"alpha\" | \"ranking\" {\n    return this.data.mode;\n  }\n\n  override get icon() {\n    return this.mode === \"alpha\" ? ABC : RANKING;\n  }\n\n  override doAction() {\n    this.data.mode = this.mode === \"alpha\" ? \"ranking\" : \"alpha\";\n  }\n\n  /** Reorder the grid on dispatch. */\n  override runEffects() {\n    const grid = elem(\"plGrid\");\n    if (!grid) return;\n    const thumbns = [...elems(\"plThumb\")].sort(CMP[this.mode]);\n    // If they are already in the parent element, re-appending just reorders the element.\n    for (const thumb of thumbns) {\n      // Don't hide for now.\n      // thumb.dataset.hideRanking = this.mode === \"ranking\" ? \"0\" : \"1\";\n      grid.appendChild(thumb);\n    }\n  }\n}\n\n// Ensure languages without a ranking are placed last.\nconst RANKED_LAST = Number.MAX_SAFE_INTEGER;\n\nconst getRank = (el: HTMLElement) => (el.dataset.nodeRanking ? Number.parseInt(el.dataset.nodeRanking, 10) : RANKED_LAST);\nconst getKey = (el: HTMLElement) => el.dataset.nodeKey ?? \"\";\n\n// Ordering criteria for the sort function.\nconst CMP = {\n  ranking: (elA: HTMLElement, elB: HTMLElement) => getRank(elA) - getRank(elB),\n  alpha: (elA: HTMLElement, elB: HTMLElement) => getKey(elA).localeCompare(getKey(elB)),\n} as const;\n", "import type { Ref } from \"preact\";\nimport { useEffect, useRef } from \"preact/hooks\";\n\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { customEvent, send } from \"@plangs/frontend/auxiliar/events\";\nimport { HOVER_SVG, tw } from \"@plangs/frontend/auxiliar/styles\";\n\nimport { useRootState } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { useIconButtonState } from \"./state\";\n\nexport type IconButtonProps = {\n  action: \"facets\" | \"clearFacets\" | \"hamburger\" | \"lights\" | \"allAny\" | \"gridOrder\";\n  class?: string;\n  disabled?: boolean;\n  initial?: string;\n};\n\nexport function IconButton({ action, disabled, initial, class: cssClass }: IconButtonProps) {\n  const state = useIconButtonState({ action, disabled, initial });\n  const self = useRootState(state);\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: state is not a dependency since it is a dispatchable.\n  useEffect(() => {\n    if (!state) return;\n\n    const newval = disabled === undefined ? false : disabled;\n    if (newval !== state.disabled) {\n      state.disabled = newval;\n      state.dispatch();\n    }\n  }, [disabled]);\n\n  const toggle = () => {\n    if (!state) return;\n\n    state.doAction();\n    state.runEffects();\n    state.dispatch();\n\n    send(self.current, customEvent(\"icon-button\", state.value));\n  };\n\n  return (\n    <div\n      ref={self as Ref<HTMLDivElement>}\n      tabIndex={disabled ? undefined : 0}\n      {...onClickOnEnter(toggle)}\n      class={tw(\"group\", \"cursor-pointer\", !disabled && HOVER_SVG, cssClass)}>\n      {state?.icon}\n    </div>\n  );\n}\n", "import { Filter } from \"@plangs/auxiliar/filters\";\nimport { Dispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport type { AnyFacetsMainState } from \"@plangs/frontend/components/facets/main/state\";\n\ntype Val = string | number | boolean;\n\n/** NOTE: we don't need to dispatch when calling actions of the main state. */\nexport class FacetMultiState<GroupKey extends string, FacetKey extends string> extends Dispatchable<{\n  groupKey: GroupKey;\n  facetKey: FacetKey;\n  main: AnyFacetsMainState;\n}> {\n  /** Actions */\n\n  doSetValue(val: Filter<Val>): \"changed\" | \"unchanged\" {\n    const { main, data } = this;\n    return main.doSetValue(data.groupKey, data.facetKey, val);\n  }\n\n  doAdd(val: Val): boolean {\n    if (!val) return false;\n    const { value } = this;\n    if (value.has(val)) return false;\n    value.add(val);\n    return this.doSetValue(value) === \"changed\";\n  }\n\n  doRemove(val: string | undefined): boolean {\n    if (!val) return false;\n    const { value } = this;\n    if (!value.has(val)) return false;\n    value.delete(val);\n    return this.doSetValue(value) === \"changed\";\n  }\n\n  doSetMode(mode: \"all\" | \"any\"): void {\n    const { value } = this;\n    if (value.mode === mode) return;\n    this.value.mode = mode === \"all\" ? \"all\" : \"any\";\n    this.doSetValue(value);\n  }\n\n  /** Queries */\n\n  get main() {\n    return this.data.main;\n  }\n\n  get value() {\n    const { main, groupKey, facetKey } = this.data;\n    return main.values.getOrSet(groupKey, facetKey, () => new Filter(\"any\")) as Filter<Val>;\n  }\n}\n", "import type { Ref } from \"preact\";\nimport { useContext, useEffect, useRef } from \"preact/hooks\";\n\nimport { useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { handler, on } from \"@plangs/frontend/auxiliar/events\";\nimport { CLOSE } from \"@plangs/frontend/auxiliar/icons\";\nimport { HOVER, INPUT, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { debounce } from \"@plangs/frontend/auxiliar/utils\";\nimport { FacetsMainContext } from \"@plangs/frontend/components/facets/main/facets-main\";\nimport type { AnyFacetsMainState } from \"@plangs/frontend/components/facets/main/state\";\nimport { IconButton } from \"@plangs/frontend/components/icon-button/icon-button\";\n\nimport { FacetMultiState } from \"./state\";\n\nexport function FacetMulti<GroupKey extends string, FacetKey extends string>({\n  active,\n  facetKey,\n  groupKey,\n  label,\n}: { active: boolean; facetKey: FacetKey; groupKey: GroupKey; label: string }) {\n  const self = useRef<HTMLDivElement>(); // We perform various queries on the root element.\n  const input = useRef<HTMLInputElement>(); // Used to focus on the input after adding a value.\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n  const state = useDispatchable(() => new FacetMultiState<GroupKey, FacetKey>({ main, groupKey, facetKey }));\n\n  useEffect(() => {\n    return on(self?.current, \"icon-button\", (ev: CustomEvent) => {\n      ev.stopPropagation();\n      state.doSetMode(ev.detail.mode);\n    });\n  });\n\n  /** Scroll the selection so we can see what's been added. */\n  const maybeScroll = (value: string) =>\n    self.current?.querySelector(`button[data-value=\"${value}\"]`)?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\n\n  const add = handler((input: HTMLInputElement, ev: KeyboardEvent) => {\n    ev.stopPropagation();\n    if (ev.key !== \"Enter\") return;\n\n    // NOTE: if we use facet-multi for anything other than extensions, we should make value transform configurable.\n    const val = input.value.startsWith(\".\") ? input.value : `.${input.value}`;\n    if (state.doAdd(val)) setTimeout(() => maybeScroll(val), 100);\n    input.value = \"\";\n  });\n\n  /** Remove all instances of the pulse animation. */\n  const removePulse = debounce(() => {\n    for (const li of self.current?.querySelectorAll(\".quick-pulse\") ?? []) li.classList.remove(\"quick-pulse\");\n  }, 150);\n\n  const nthButton = (n: number) => self.current?.querySelector<HTMLButtonElement>(`li:nth-child(${n})>button`);\n\n  const remover = (idx: number) =>\n    handler((b: HTMLButtonElement, ev) => {\n      ev.stopPropagation();\n      if (state.doRemove(b.dataset.value)) {\n        // Determine next focus an add a lil animation. Timeout: wait till next render.\n        setTimeout(() => {\n          const nb = nthButton(idx + 1) ?? nthButton(idx);\n          (nb ?? input.current)?.focus();\n          if (!nb) return;\n          nb.classList.add(\"quick-pulse\"); // Add a pulsing animation to show what's being focused next.\n          setTimeout(() => removePulse(), 150);\n        }, 10);\n      }\n    });\n\n  // Helper to enumerate the entries, map them, then return an array (instead of an iterator).\n  function mapEntries<T>(mapper: (entry: [number, string | number | boolean]) => T): T[] {\n    return [...state.value.values].entries().map(mapper).toArray();\n  }\n\n  const body = () => (\n    <>\n      <input\n        type=\"search\"\n        name={facetKey as string}\n        ref={input as Ref<HTMLInputElement>}\n        placeholder={label}\n        class={tw(INPUT, \"w-full\")}\n        onKeyDown={add}\n      />\n\n      <span class={tw(state.value.size === 0 && \"hidden\", state.value.size < 2 ? \"text-foreground/50\" : \"text-foreground\", \"pl-2\")}>\n        <IconButton action=\"allAny\" disabled={state.value.size < 2} initial={\"any\"} />\n      </span>\n\n      <ul>\n        {mapEntries(([idx, value]) => (\n          <li key={value}>\n            <button\n              type=\"button\"\n              data-value={value}\n              class={tw(\"inline-flex flex-row\", \"p-2\", \"w-full text-left\", \"cursor-pointer\", HOVER)}\n              {...onClickOnEnter(remover(idx))}>\n              <div class=\"-mt-[2px] inline-block scale-75 text-red-500\">{CLOSE}</div>\n              {value}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n\n  return (\n    <div ref={self as Ref<HTMLDivElement>} class={tw(\"flex flex-col\")}>\n      {active ? body() : null}\n    </div>\n  );\n}\n", "import type { JSX } from \"preact/jsx-runtime\";\n\nimport { SORT_DOWN, SORT_UP } from \"@plangs/frontend/auxiliar/icons\";\nimport type { E, N, PlangsGraph } from \"@plangs/plangs/index\";\n\nexport type Val = string | number | boolean;\nexport type Entry = { value: Val; label: string; count: number };\nexport type FacetTableConfig = { kind: \"noderel\"; node: N; edge: E; dir: \"direct\" | \"inverse\" } | { kind: \"year\"; node: N };\n\nexport function generateEntries(pg: PlangsGraph, config: FacetTableConfig): Entry[] {\n  if (config.kind === \"noderel\") {\n    const { node, edge, dir } = config;\n    // TODO: check the node.\n    const emap = dir === \"direct\" ? pg.edges[edge].adjTo : pg.edges[edge].adjFrom;\n    if (!emap) {\n      console.error(\"No edges found for:\", edge, dir);\n      return [];\n    }\n    return [...emap.entries()]\n      .filter(([, edges]) => edges.size > 0)\n      .map(([key, edges]) => {\n        // biome-ignore lint/style/noNonNullAssertion: the filter above ensures there is at least one edge.\n        const anyEdge = edges.values().next().value!;\n        const name = (dir === \"direct\" ? anyEdge.nodeTo : anyEdge.nodeFrom)?.name ?? anyEdge.key;\n        return { value: key, label: name, count: edges.size };\n      });\n  }\n\n  if (config.kind === \"year\") {\n    const years: Map<number, number> = new Map(); // year -> count\n    for (const { year } of pg.nodes.pl.values) {\n      if (!year) continue;\n      years.set(year, (years.get(year) ?? 0) + 1);\n    }\n    return [...years.entries()].map(([year, count]) => {\n      const strYear = `${year}`;\n      return { value: year, label: strYear, count };\n    });\n  }\n\n  console.error(\"Unknown config kind\", config);\n  return [];\n}\n\nexport type Column = \"facet\" | \"count\" | \"sel\";\nexport type Order = \"facet-asc\" | \"facet-desc\" | \"count-asc\" | \"count-desc\" | \"sel-asc\" | \"sel-desc\";\n\nexport function label(col: Column, config: FacetTableConfig): string {\n  if (col === \"facet\" && config.kind === \"noderel\") return config.node;\n  if (col === \"facet\" && config.kind === \"year\") return `${config.node} year`;\n  return col;\n}\n\nexport function icon(col: Column, order: Order): JSX.Element | false {\n  if (col === \"facet\") return (order === \"facet-asc\" && SORT_UP) || (order === \"facet-desc\" && SORT_DOWN);\n  if (col === \"count\") return (order === \"count-asc\" && SORT_UP) || (order === \"count-desc\" && SORT_DOWN);\n  return (order === \"sel-asc\" && SORT_UP) || (order === \"sel-desc\" && SORT_DOWN);\n}\n\nexport function opposite(col: Column, order: string): Order {\n  if (col === \"facet\") return order === \"facet-asc\" ? \"facet-desc\" : \"facet-asc\";\n  if (col === \"count\") return order === \"count-desc\" ? \"count-asc\" : \"count-desc\";\n  return order === \"sel-desc\" ? \"sel-asc\" : \"sel-desc\";\n}\n\nexport type IsSel = (entry: Entry) => boolean;\nexport type Cmp = (a: Entry, b: Entry, isSel?: IsSel) => number;\n\nexport const CMP: Record<Order, Cmp> = {\n  \"facet-asc\": (a, b) => a.label.localeCompare(b.label),\n  \"facet-desc\": (a, b) => b.label.localeCompare(a.label),\n  \"count-asc\": (a, b) => a.count - b.count,\n  \"count-desc\": (a, b) => b.count - a.count,\n  \"sel-asc\": (a, b, isSel) => (isSel ? Number(isSel(a)) - Number(isSel(b)) : 0),\n  \"sel-desc\": (a, b, isSel) => (isSel ? Number(isSel(b)) - Number(isSel(a)) : 0),\n} as const;\n\nexport function sortEntries(entries: Entry[], order: Order, isSel?: IsSel): Entry[] {\n  const less = CMP[order];\n  return entries.sort((a, b) => less(a, b, isSel));\n}\n", "import { HOVER, tw } from \"@plangs/frontend/auxiliar/styles\";\n\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { type Column, type FacetTableConfig, type Order, icon, label } from \"./entries\";\n\nexport function Header({\n  action,\n  class: cssClass,\n  col,\n  config,\n  order,\n}: { action: () => void; class?: string; col: Column; config: FacetTableConfig; order: Order }) {\n  return (\n    <button\n      type=\"button\"\n      class={tw(\"p-1\", \"italic\", \"underline decoration-1 decoration-dotted\", \"cursor-pointer\", cssClass)}\n      {...onClickOnEnter(action)}>\n      <div class={tw(HOVER, \"inline-flex w-full\", \"p-1\", \"items-center justify-between\", \"gap-1\")}>\n        <span>{label(col, config)}</span>\n        <span class={tw(\"scale-75\", \"mt-1\")}>{icon(col, order)}</span>\n        <span class=\"flex-1\" />\n      </div>\n    </button>\n  );\n}\n", "import { Filter } from \"@plangs/auxiliar/filters\";\nimport { Dispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport type { AnyFacetsMainState } from \"@plangs/frontend/components/facets/main/state\";\n\nimport { CMP, type Column, type Entry, type Order, type Val, opposite, sortEntries } from \"./entries\";\nimport type { FacetTableProps } from \"./facet-table\";\n\ntype StateData<GroupKey extends string, FacetKey extends string> = Pick<FacetTableProps<GroupKey, FacetKey>, \"config\" | \"facetKey\" | \"groupKey\"> & {\n  main: AnyFacetsMainState;\n  entries: Entry[];\n  order: Order;\n};\n\nexport class FacetTableState<GroupKey extends string, FacetKey extends string> extends Dispatchable<StateData<GroupKey, FacetKey>> {\n  /** Actions */\n\n  doSetValue(val: Filter<Val>): \"changed\" | \"unchanged\" {\n    const { main, data } = this;\n    return main.doSetValue(data.groupKey, data.facetKey, val);\n  }\n\n  doToggle(val: Val) {\n    const { value } = this;\n    value.has(val) ? value.delete(val) : value.add(val);\n    this.doSetValue(value);\n  }\n\n  doSetMode(mode: \"all\" | \"any\"): void {\n    const { value } = this;\n    if (value.mode === mode) return;\n    this.value.mode = mode === \"all\" ? \"all\" : \"any\";\n    this.doSetValue(value);\n  }\n\n  // Note that this is the only place where we dispatch locally instead of through the main state.\n  doToggleOrder(col: Column) {\n    const { order } = this.data;\n    this.data.order = opposite(col, order);\n    sortEntries(this.data.entries, this.data.order, entry => this.value.has(entry.value));\n    this.dispatch();\n  }\n\n  doResetSelection() {\n    this.value.clear();\n    this.doSetValue(this.value);\n  }\n\n  /** Queries */\n\n  get main() {\n    return this.data.main;\n  }\n\n  /** Selected values. */\n  get value() {\n    const { main, groupKey, facetKey } = this.data;\n    return main.values.getOrSet(groupKey, facetKey, () => new Filter(\"any\")) as Filter<Val>;\n  }\n\n  /** All entries. */\n  get entries() {\n    return this.data.entries;\n  }\n\n  get order() {\n    return this.data.order;\n  }\n}\n", "import type { Ref } from \"preact\";\nimport { useContext, useEffect, useRef } from \"preact/hooks\";\n\nimport { useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { on } from \"@plangs/frontend/auxiliar/events\";\nimport { BORDER, HOVER, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { tap } from \"@plangs/frontend/auxiliar/utils\";\nimport { FacetsMainContext } from \"@plangs/frontend/components/facets/main/facets-main\";\nimport type { AnyFacetsMainState } from \"@plangs/frontend/components/facets/main/state\";\nimport { IconButton } from \"@plangs/frontend/components/icon-button/icon-button\";\n\nimport { type FacetTableConfig, generateEntries, sortEntries } from \"./entries\";\nimport { Header } from \"./header\";\nimport { FacetTableState } from \"./state\";\n\nexport type FacetTableProps<GroupKey extends string, FacetKey extends string> = {\n  groupKey: GroupKey;\n  facetKey: FacetKey;\n  config: FacetTableConfig;\n  active: boolean;\n};\n\nexport function FacetTable<GroupKey extends string, FacetKey extends string>({\n  groupKey,\n  facetKey,\n  config,\n  active,\n}: FacetTableProps<GroupKey, FacetKey>) {\n  const self = useRef<HTMLDivElement>();\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n\n  const state = useDispatchable(() => {\n    const order = config.kind === \"year\" ? \"facet-desc\" : \"facet-asc\";\n    const entries = sortEntries(generateEntries(main.pg, config), order);\n    return new FacetTableState({ config, entries, facetKey, groupKey, main, order });\n  });\n\n  useEffect(() =>\n    on(self?.current, \"icon-button\", (ev: CustomEvent) => {\n      ev.stopPropagation();\n      state.doSetMode(ev.detail.mode === \"all\" ? \"all\" : \"any\");\n    }),\n  );\n\n  const SUBGRID = tw(\"col-span-3\", \"grid grid-cols-subgrid\", \"items-center\");\n  const ROW = tw(SUBGRID, tw(\"border-b-1\", BORDER));\n  const CENTER_ROW = tw(\"items-center justify-between\");\n\n  const body = () => (\n    <div class={tw(\"grid grid-cols-[1fr_auto_auto]\", \"overflow-y-auto\", \"relative\")}>\n      <div class={tw(ROW, \"sticky top-0 cursor-pointer\", tw(BORDER, \"border-b-1\"))}>\n        <div class={tw(\"col-span-3\", \"py-1\", \"flex shrink-0 flex-row\", \"bg-background\", CENTER_ROW, tw(BORDER, \"border-t-1\"))}>\n          <span class={tw(\"pl-2\", CENTER_ROW, state.value.size < 2 ? \"text-foreground/50\" : \"text-foreground\")}>\n            <IconButton action=\"allAny\" disabled={state.value.size < 2} initial={state.value.mode} class={tw(config.kind === \"year\" && \"hidden\")} />\n          </span>\n        </div>\n\n        <div class={tw(ROW, \"col-span-3\", \"bg-primary text-background/80\")}>\n          <Header class={\"text-left\"} action={() => state.doToggleOrder(\"facet\")} col=\"facet\" config={config} order={state.order} />\n          <Header class={\"text-center\"} action={() => state.doToggleOrder(\"count\")} col=\"count\" config={config} order={state.order} />\n          <Header class={\"text-right\"} action={() => state.doToggleOrder(\"sel\")} col=\"sel\" config={config} order={state.order} />\n        </div>\n      </div>\n\n      {state.entries.map(entry =>\n        tap(\n          onClickOnEnter(() => state.doToggle(entry.value)),\n          clickOrEnter => (\n            <div key={entry.value} class={tw(ROW, HOVER, state.value.has(entry.value) && \"bg-primary/20\")} {...clickOrEnter}>\n              <div class={tw(\"p-2\", \"text-left\", \"overflow-hidden text-ellipsis\", \"line-clamp-3\")}>{entry.label}</div>\n              <div class={tw(\"p-2\", \"text-center\")}>{entry.count}</div>\n              <div class={tw(\"p-2\", \"text-right\")}>\n                <input type=\"checkbox\" checked={state.value.has(entry.value)} {...clickOrEnter} />\n              </div>\n            </div>\n          ),\n        ),\n      )}\n    </div>\n  );\n\n  return (\n    <div ref={self as Ref<HTMLDivElement>} class={tw(\"flex flex-col\")}>\n      {active ? body() : null}\n    </div>\n  );\n}\n", "import type { ComponentChild } from \"preact\";\n\nimport type { AnyValue } from \"@plangs/auxiliar/value\";\nimport type { FacetBoolMapper } from \"@plangs/frontend/components/facets/misc/facet-bool\";\nimport type { FacetTableConfig } from \"@plangs/frontend/components/facets/table/entries\";\n\n////////////////////////////////////////////////////////////////////////////////\n/// Facet Input Configuration\n////////////////////////////////////////////////////////////////////////////////\n\nexport type FacetConfigBase<Kind extends string, FK> = { kind: Kind; label: string; facetKey: FK };\n\nexport type FacetConfigBool<FK> = FacetConfigBase<\"bool\", FK> & { valueMapper?: (checked: boolean) => AnyValue };\nexport type FacetConfigMulti<FK> = FacetConfigBase<\"multi\", FK>;\nexport type FacetConfigTable<FK> = FacetConfigBase<\"table\", FK> & { config: FacetTableConfig };\nexport type FacetConfigText<FK> = FacetConfigBase<\"text\", FK>;\n\n/** Type for the input for a facet. */\nexport type FacetConfig<FK> = FacetConfigBool<FK> | FacetConfigMulti<FK> | FacetConfigTable<FK> | FacetConfigText<FK>;\n\nexport function bool<FK>(facetKey: FK, label: string, valueMapper?: FacetBoolMapper): FacetConfigBool<FK> {\n  return { kind: \"bool\", facetKey, label, valueMapper };\n}\n\nexport function multi<FK>(facetKey: FK, label: string): FacetConfigMulti<FK> {\n  return { kind: \"multi\", facetKey, label };\n}\n\nexport function table<FK>(facetKey: FK, label: string, config: FacetTableConfig): FacetConfigTable<FK> {\n  return { kind: \"table\", facetKey, label, config };\n}\n\nexport function text<FK>(facetKey: FK, label: string): FacetConfigText<FK> {\n  return { kind: \"text\", facetKey, label };\n}\n\n/** Define a map of facets keyed by facetKey. */\nexport function defineFacets<FK extends string>(...facets: readonly FacetConfig<FK>[]): Map<FK, FacetConfig<FK>> {\n  return facets.reduce((map, facet) => {\n    map.set(facet.facetKey, facet);\n    return map;\n  }, new Map<FK, FacetConfig<FK>>());\n}\n\n////////////////////////////////////////////////////////////////////////////////\n/// Facet Group Configuration\n////////////////////////////////////////////////////////////////////////////////\n\n/** Type of a group of facets. */\nexport type FacetGroupConfig<GK, FK> = { groupKey: GK; label: string; facetKeys: readonly FK[] };\n\nexport function group<GK, FK>(groupKey: GK, label: string, facetKeys: FK[]): FacetGroupConfig<GK, FK> {\n  return { groupKey, label, facetKeys };\n}\n\n/** Define a map of groups keyed by group key, and derive a map of groupKey by facetKey (so we can tell which group holds which facet). */\nexport function defineGroups<GK, FK>(...groups: FacetGroupConfig<GK, FK>[]): readonly [Map<GK, FacetGroupConfig<GK, FK>>, Map<FK, GK>] {\n  const groupMap = new Map<GK, FacetGroupConfig<GK, FK>>();\n  const groupForFacetKey = new Map<FK, GK>();\n  for (const group of groups) {\n    groupMap.set(group.groupKey, group);\n    for (const facetKey of group.facetKeys) groupForFacetKey.set(facetKey, group.groupKey);\n  }\n  return [groupMap, groupForFacetKey] as const;\n}\n\n/** Helper to map group configuration to Preact components. */\nexport function mapGroups<GK, FK>(\n  groups: Map<GK, FacetGroupConfig<GK, FK>>,\n  currentFacetGroup: string,\n  mapper: (props: { groupKey: GK; label: string; facetKeys: FK[]; active: boolean }) => ComponentChild,\n): ComponentChild[] {\n  return groups\n    .values()\n    .map(({ groupKey, label, facetKeys }) =>\n      mapper({ groupKey: groupKey as GK, label, facetKeys: facetKeys as FK[], active: currentFacetGroup === groupKey }),\n    )\n    .toArray();\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { NLicense, NParadigm, NPlang, NPlatform, NTag, NTsys } from \"@plangs/plangs\";\nimport type { PlangFacetKey } from \"@plangs/plangs/facets/plangs\";\nimport type { FunctionComponent } from \"preact\";\nimport { FacetBool } from \"../misc/facet-bool\";\nimport { FacetGroup } from \"../misc/facet-group\";\nimport { FacetText } from \"../misc/facet-text\";\nimport { FacetMulti } from \"../multisel/facet-multi\";\nimport { FacetTable } from \"../table/facet-table\";\nimport { type FacetConfig, bool, defineFacets, defineGroups, group, mapGroups, multi, table, text } from \"./types\";\n\ntype FK = PlangFacetKey;\n\nexport const FACETS: Map<FK, FacetConfig<FK>> = defineFacets<FK>(\n  bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n  bool(\"hasLogo\", \"Has Logo\"),\n  bool(\"hasWikipedia\", \"Has Wikipedia\"),\n  bool(\"isPopular\", \"Is Popular\"),\n  bool(\"isTranspiler\", \"Is Transpiler\"),\n  bool(\"releasedRecently\", \"Released Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 1) : new ValNil())),\n  multi(\"extensions\", \"Extensions\"),\n  table(\"compilesTo\", \"Compiles To\", { kind: \"noderel\", edge: \"compilesTo\", node: NPlang.kind, dir: \"direct\" }),\n  table(\"creationYear\", \"Creation Year\", { kind: \"year\", node: NPlang.kind }),\n  table(\"dialectOf\", \"Dialect Of\", { kind: \"noderel\", edge: \"dialect\", node: NPlang.kind, dir: \"direct\" }),\n  table(\"implements\", \"Implements\", { kind: \"noderel\", edge: \"impl\", node: NPlang.kind, dir: \"direct\" }),\n  table(\"influenced\", \"Influenced\", { kind: \"noderel\", edge: \"influence\", node: NPlang.kind, dir: \"inverse\" }),\n  table(\"influencedBy\", \"Influenced By\", { kind: \"noderel\", edge: \"influence\", node: NPlang.kind, dir: \"direct\" }),\n  table(\"licenses\", \"Licenses\", { kind: \"noderel\", edge: \"license\", node: NLicense.kind, dir: \"direct\" }),\n  table(\"paradigms\", \"Paradigms\", { kind: \"noderel\", edge: \"paradigm\", node: NParadigm.kind, dir: \"direct\" }),\n  table(\"platforms\", \"Platforms\", { kind: \"noderel\", edge: \"plat\", node: NPlatform.kind, dir: \"direct\" }),\n  table(\"tags\", \"Tags\", { kind: \"noderel\", edge: \"tag\", node: NTag.kind, dir: \"direct\" }),\n  table(\"typeSystems\", \"Type Systems\", { kind: \"noderel\", edge: \"tsys\", node: NTsys.kind, dir: \"direct\" }),\n  table(\"writtenIn\", \"Written In\", { kind: \"noderel\", edge: \"writtenIn\", node: NPlang.kind, dir: \"direct\" }),\n  text(\"plangName\", \"Plang Name\"),\n);\n\n// biome-ignore format: Keep it in one line.\nexport type PlangFacetGroupKey = \"creationYear\" | \"dialectOf\" | \"general\" | \"implements\" | \"influenced\" | \"influencedBy\" | \"licenses\" | \"paradigms\" | \"platforms\" | \"tags\" | \"transpiler\" | \"typeSystems\" | \"writtenIn\";\n\ntype GK = PlangFacetGroupKey;\n\nexport const [GROUPS, GROUP_FOR_FACET_KEY] = defineGroups<GK, FK>(\n  group(\"creationYear\", \"Creation Year\", [\"creationYear\"]),\n  group(\"dialectOf\", \"Dialect Of\", [\"dialectOf\"]),\n  group(\"general\", \"General\", [\"plangName\", \"createdRecently\", \"releasedRecently\", \"isPopular\", \"hasLogo\", \"hasWikipedia\", \"extensions\"]),\n  group(\"implements\", \"Implements\", [\"implements\"]),\n  group(\"influenced\", \"Influenced\", [\"influenced\"]),\n  group(\"influencedBy\", \"Influenced By\", [\"influencedBy\"]),\n  group(\"licenses\", \"Licenses\", [\"licenses\"]),\n  group(\"paradigms\", \"Paradigms\", [\"paradigms\"]),\n  group(\"platforms\", \"Platforms\", [\"platforms\"]),\n  group(\"tags\", \"Tags\", [\"tags\"]),\n  group(\"transpiler\", \"Transpiler\", [\"isTranspiler\", \"compilesTo\"]),\n  group(\"typeSystems\", \"Type Systems\", [\"typeSystems\"]),\n  group(\"writtenIn\", \"Written In\", [\"writtenIn\"]),\n);\n\n/** Group keys for the navigation menu.  */\nexport const NAV: GK[][] = [\n  [\"general\"],\n  [\"platforms\", \"paradigms\", \"typeSystems\"],\n  [\"writtenIn\", \"transpiler\", \"dialectOf\", \"implements\", \"influencedBy\", \"influenced\"],\n  [\"tags\", \"creationYear\", \"licenses\"],\n] as const;\n\nexport const DEFAULT_GROUP = \"general\";\n\nexport const PlangsFacetGroups: FunctionComponent<{ currentFacetGroup: GK }> = ({ currentFacetGroup }) => (\n  <>\n    {mapGroups<GK, FK>(GROUPS, currentFacetGroup, ({ groupKey, active, label, facetKeys }) => (\n      <FacetGroup<GK> key={groupKey} groupKey={groupKey} label={label} active={active}>\n        {facetKeys.map(facetKey => {\n          const facet = FACETS.get(facetKey);\n          const props = (f: FacetConfig<FK>) => ({ groupKey, facetKey, label: f.label, active });\n          switch (facet?.kind) {\n            case \"bool\":\n              return <FacetBool {...props(facet)} valueMapper={facet.valueMapper} />;\n            case \"multi\":\n              return <FacetMulti {...props(facet)} />;\n            case \"table\":\n              return <FacetTable {...props(facet)} config={facet.config} />;\n            case \"text\":\n              return <FacetText {...props(facet)} />;\n            default:\n              console.error(\"Facet not found\", facetKey);\n          }\n        })}\n      </FacetGroup>\n    ))}\n  </>\n);\n", "import type { FunctionComponent } from \"preact\";\n\nimport { Map2 } from \"@plangs/auxiliar/map2\";\nimport { type AnyValue, deserializeValue } from \"@plangs/auxiliar/value\";\nimport { Dispatchable, useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport type { NPlang, PlangsGraph } from \"@plangs/plangs\";\nimport type { PlangFacetKey } from \"@plangs/plangs/facets/plangs\";\nimport type { TAB } from \"@plangs/server/components/layout\";\n\nimport { $ } from \"@plangs/frontend/auxiliar/dom\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { loadLocalStorage, updateLocalStorage } from \"@plangs/frontend/auxiliar/storage\";\nimport type { ToggleClearFacets } from \"../../icon-button/state\";\nimport { updateThumbns } from \"./grid\";\nimport { DEFAULT_GROUP, GROUPS, GROUP_FOR_FACET_KEY, NAV, type PlangFacetGroupKey, PlangsFacetGroups } from \"./plangs\";\n\n/** Generic state so components can work with any group and facet key. */\nexport type AnyFacetsMainState = FacetsMainState<string, string>;\n\nexport type SerializedFacets<FacetKey extends string> = Partial<Record<FacetKey, ReturnType<AnyValue[\"serializable\"]>>>;\n\nexport function useFacetState(tab: TAB, pg: PlangsGraph): AnyFacetsMainState | undefined {\n  if (tab === \"plangs\") return useDispatchable(() => PlangsFacetsState.initial(pg) as AnyFacetsMainState);\n  console.error(\"Unknown tab\", tab);\n}\n\nexport abstract class FacetsMainState<GroupKey extends string, FacetKey extends string> extends Dispatchable<{\n  tab: TAB;\n  pg: PlangsGraph;\n  defaultGroup: GroupKey;\n  currentGroupKey: GroupKey;\n  values: Map2<GroupKey, FacetKey, AnyValue>;\n}> {\n  /** Attempt to reconstruct a structured \"form value\" from generic data. */\n  // biome-ignore lint/suspicious/noExplicitAny: this data is the result of a de/serialization process and is not typed.\n  static dataToValue<GK, FK>(groupsByFacetKey: Map<FK, GK>, genericData: any): Map2<GK, FK, AnyValue> {\n    const result = new Map2<GK, FK, AnyValue>();\n    if (!genericData) return result;\n    for (const [facetKey, rawValue] of Object.entries(genericData)) {\n      const groupKey = groupsByFacetKey.get(facetKey as FK);\n      if (!groupKey) {\n        console.error(\"missing group for facet\", facetKey);\n        continue;\n      }\n      const value = deserializeValue(rawValue);\n      if (value?.isPresent) {\n        result.set(groupKey, facetKey as FK, value);\n      } else {\n        console.error(\"failed to deserialize value\", facetKey, rawValue);\n      }\n    }\n    return result;\n  }\n\n  doSetCurrentGroup(groupKey: GroupKey): void {\n    this.data.currentGroupKey = groupKey;\n    updateLocalStorage(this.tab, \"lastGroup\", groupKey);\n    this.dispatch();\n  }\n\n  /** Removes any and all values for the given group.  */\n  doResetGroup(groupKey: GroupKey): void {\n    this.values.delete1(groupKey);\n    this.dispatch();\n  }\n\n  /** Removes any and all values for the given group.  */\n  // biome-ignore lint/suspicious/noExplicitAny: coming from deserialize we'll have to deal with it.\n  doResetAll(values?: any): void {\n    if (values) {\n      this.data.values = FacetsMainState.dataToValue<GroupKey, FacetKey>(GROUP_FOR_FACET_KEY as Map<FacetKey, GroupKey>, values);\n    } else {\n      this.values.clear();\n    }\n    this.doSetCurrentGroup(this.defaultGroup);\n  }\n\n  /** This dispatches since we want to change the indicator of active state. */\n  doSetValue(groupKey: GroupKey, facetKey: FacetKey, value: AnyValue): \"changed\" | \"unchanged\" {\n    const { values } = this.data;\n    let result: \"changed\" | \"unchanged\";\n    if (value.isPresent) {\n      if (!value.equalTo(values.get(groupKey, facetKey))) {\n        values.set(groupKey, facetKey, value);\n        result = \"changed\";\n      } else {\n        result = \"unchanged\";\n      }\n    } else {\n      result = values.delete(groupKey, facetKey) ? \"changed\" : \"unchanged\";\n    }\n    this.dispatch();\n    return result;\n  }\n\n  /** Queries */\n\n  get tab(): TAB {\n    return this.data.tab;\n  }\n\n  get defaultGroup() {\n    return this.data.defaultGroup;\n  }\n\n  get pg(): PlangsGraph {\n    return this.data.pg;\n  }\n\n  get values() {\n    return this.data.values;\n  }\n\n  get serialized(): SerializedFacets<FacetKey> {\n    const data: SerializedFacets<FacetKey> = {};\n    for (const [_, facetKey, value] of this.values.flatEntries()) {\n      if (value.isPresent) data[facetKey] = value.serializable();\n    }\n    return data;\n  }\n\n  get currentGroupKey(): GroupKey {\n    return this.data.currentGroupKey;\n  }\n\n  groupHasValues(groupKey: GroupKey): boolean {\n    return (\n      this.values\n        .getMap(groupKey)\n        ?.values()\n        .some(v => v.isPresent) ?? false\n    );\n  }\n\n  /** Helpers */\n\n  /** Update the clear facets button on the toolbar. */\n  updateClearFacets(): this {\n    const clearAll = $<HTMLElement & { state?: ToggleClearFacets }>(\"#icon-button-clearFacets\");\n    if (!clearAll?.state) return this;\n    clearAll.state.doToggleMode(this.values.isEmpty ? \"\" : \"clearFacets\");\n    return this;\n  }\n\n  override dispatch(): this {\n    super.dispatch();\n\n    const data = this.serialized;\n    window.fragment.pushState(FragmentTracker.serialize(data));\n    updateLocalStorage(this.tab, \"inputs\", data);\n    updateThumbns(this.results);\n\n    this.updateClearFacets();\n\n    return this;\n  }\n\n  /** Abstract Methods. */\n\n  /** Links to FacetGroups appear in groups. */\n  abstract get nav(): GroupKey[][];\n\n  abstract groupTitle(groupKey: GroupKey): string;\n\n  /** The component that defines the content of a facet group. */\n  abstract get facetGroupsComponent(): FunctionComponent<{ currentFacetGroup: string }>;\n\n  /** A set of node keys that are the result of applying the filters. */\n  abstract get results(): Set<string>;\n}\n\n/** Implementation of the state for Faceted search of Programming Languages. */\nexport class PlangsFacetsState extends FacetsMainState<PlangFacetGroupKey, PlangFacetKey> {\n  static initial(pg: PlangsGraph): PlangsFacetsState {\n    const tab: TAB = \"plangs\";\n    return new PlangsFacetsState({\n      pg,\n      tab,\n      defaultGroup: DEFAULT_GROUP,\n      currentGroupKey: loadLocalStorage(tab, \"lastGroup\") ?? DEFAULT_GROUP,\n      values: FacetsMainState.dataToValue(GROUP_FOR_FACET_KEY, FragmentTracker.deserialize() ?? loadLocalStorage(tab, \"inputs\")),\n    }).updateClearFacets();\n  }\n\n  override get nav() {\n    return NAV;\n  }\n\n  override groupTitle(key: PlangFacetGroupKey) {\n    return GROUPS.get(key)?.label ?? key;\n  }\n\n  override get facetGroupsComponent() {\n    return PlangsFacetGroups as FunctionComponent<{ currentFacetGroup: string }>;\n  }\n\n  override get results(): Set<NPlang[\"key\"]> {\n    if (!this.pg) return new Set();\n    return this.pg.plangs(this.values.getMap2());\n  }\n}\n", "import { Fragment, type Ref, createContext } from \"preact\";\n\nimport { useRootState } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { FULLCIRCLE } from \"@plangs/frontend/auxiliar/icons\";\nimport { BORDER, HOVER, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { PlangsGraph } from \"@plangs/plangs\";\nimport type { TAB } from \"@plangs/server/components/layout\";\n\nimport { useEffect } from \"preact/hooks\";\nimport { type AnyFacetsMainState, useFacetState } from \"./state\";\n\nexport type FacetsMainProps = {\n  tab: TAB;\n  pg: PlangsGraph;\n};\n\nexport const FacetsMainContext = createContext<AnyFacetsMainState | undefined>(undefined);\n\nexport function FacetsMain({ tab, pg }: FacetsMainProps) {\n  const state = useFacetState(tab, pg);\n  const self = useRootState(state);\n\n  // Subscribe to user changes to reset the form when the user changes URL fragment.\n  useEffect(() => window.fragment.onUserChange(ev => state?.doResetAll(ev.deserFrag)));\n\n  const body = () =>\n    !state ? null : (\n      <FacetsMainContext.Provider value={state}>\n        {/* Wrapper to avoid streteching the links to the bottom of the screen. */}\n        <div class={tw(tw(BORDER, \"border-r-1\"), \"overflow-y-scroll\", \"shrink-0 grow-0\")}>\n          <div class={tw(\"grid grid-cols-[auto_auto]\", \"gap-2\", \"pt-1\")}>\n            {state.nav.flatMap(keys => (\n              // Subgrid respects the alignment of indicators while allowing to group the links and add a border.\n              <div key={keys.join(\"-\")} class={tw(\"col-span-2\", \"grid grid-cols-subgrid\", \"items-center\", \"pb-2\", tw(BORDER, \"border-b-1\"))}>\n                {/* biome-ignore lint/suspicious/noExplicitAny: we set as any here since the groupKey is actually a string that can belong to _any_ facet group. */}\n                {keys.map((groupKey: any) => (\n                  <Fragment key={groupKey}>\n                    <div class={tw(\"mt-[.45rem] pl-1\", state.groupHasValues(groupKey) ? \"text-primary\" : \"text-foreground/20 text-xs\")}>\n                      <div class=\"-mt-[2px] scale-66\">{FULLCIRCLE}</div>\n                    </div>\n                    <button\n                      {...onClickOnEnter(() => state.doSetCurrentGroup(groupKey))}\n                      class={tw(\n                        \"block\",\n                        \"truncate text-left\",\n                        \"mr-2 px-1 py-1\",\n                        state.currentGroupKey === groupKey ? \"text-primary\" : \"text-foreground/85\",\n                        \"underline decoration-1 decoration-dotted\",\n                        \"cursor-pointer\",\n                        HOVER,\n                      )}>\n                      {state.groupTitle(groupKey)}\n                    </button>\n                  </Fragment>\n                ))}\n              </div>\n            ))}\n          </div>\n        </div>\n        <div class={tw(\"flex w-full flex-col\", \"overflow-hidden\", \"bg-linear-to-b to-secondary/50\")}>\n          <state.facetGroupsComponent currentFacetGroup={state.currentGroupKey} />\n        </div>\n      </FacetsMainContext.Provider>\n    );\n\n  return (\n    <aside\n      ref={self as Ref<HTMLElement>}\n      class={tw(\"flex flex-row\", \"max-h-full overflow-hidden\", tw(BORDER, \"border-b-1\", \"border-t-1\", \"sm:border-r-1\"))}>\n      {body()}\n    </aside>\n  );\n}\n", "import { render } from \"preact\";\n\nimport { elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { PlangsGraph } from \"@plangs/plangs/index\";\nimport type { TAB } from \"@plangs/server/components/layout\";\nimport { cssClass } from \"@plangs/server/elements\";\n\nimport { FacetsMain, type FacetsMainProps } from \"./facets-main\";\nimport type { AnyFacetsMainState } from \"./state\";\n\nconst CL = \"facetsMain\";\n\nexport type FacetsMainElement = HTMLDivElement & { state?: AnyFacetsMainState };\n\nexport function facetsMain({ tab, class: klass }: { tab: TAB; class: string }) {\n  return <div data-tab={tab} class={tw(klass, cssClass(CL))} />;\n}\n\nexport function activateFacetsMain(pg: PlangsGraph) {\n  for (const elem of elems(CL)) {\n    if (pg && elem.dataset.tab) {\n      const props: FacetsMainProps = { pg: pg, tab: elem.dataset.tab as TAB };\n      render(<FacetsMain {...props} />, elem);\n    } else {\n      console.error(\"Missing prop for FacetsMain component.\");\n    }\n  }\n}\n", "import { render } from \"preact\";\n\nimport { elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { classesExcept, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { type CLKey, cssClass } from \"@plangs/server/elements\";\n\nimport { IconButton, type IconButtonProps } from \"./icon-button\";\n\nconst CL: CLKey = \"iconButton\";\n\n/** Server side container for the Component. */\nexport function iconButton(action: IconButtonProps[\"action\"]) {\n  return <div id={`icon-button-${action}`} data-action={action} class={tw(cssClass(CL), \"text-primary\")} />;\n}\n\n/** Find all component containers and render them. */\nexport function activateIconButtons() {\n  for (const elem of elems(\"iconButton\")) {\n    if (elem.dataset.action) {\n      const props: IconButtonProps = {\n        action: elem.dataset.action as IconButtonProps[\"action\"],\n        class: classesExcept(elem, cssClass(\"iconButton\")),\n      };\n      render(<IconButton {...props} />, elem);\n    } else {\n      console.error(\"Missing prop for IconButton component.\");\n    }\n  }\n}\n", "import { NPlang, type PlangsGraph } from \"@plangs/plangs\";\n\n/** Attempt to load a plang using the nearest data-key attribute. */\nexport function getPl(pg: PlangsGraph, target: EventTarget | null): NPlang | undefined {\n  const keyHolder = (target as Element).closest(\"[data-node-key]\") as HTMLElement;\n  if (!keyHolder || !keyHolder.dataset.nodeKey) return;\n  return pg.nodes.pl.get(keyHolder.dataset.nodeKey as NPlang[\"key\"]);\n}\n\n/** Get the latest plang from local storage, or a default one. */\nexport function lastPlang(pg: PlangsGraph): NPlang | undefined {\n  try {\n    const { key, data } = JSON.parse(localStorage.getItem(\"last-plang\") || \"{}\");\n    // This instance will not be part of the plangs graph node map,\n    // but that's okay, since it's only used for rendering once on load.\n    return new NPlang(pg, key).merge(data);\n  } catch (err) {\n    console.warn(err);\n  }\n}\n", "import { HOVER, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { TAB } from \"@plangs/server/components/layout\";\nimport { cssClass } from \"@plangs/server/elements\";\n\n/* TODO: `kind: string;` is too permissive. Should be either a Node kind N or a set of other known options. */\nexport function Pill({ name, nodeKey, kind, tab }: { name: string; nodeKey: string; kind: string; tab?: TAB }) {\n  return (\n    <div\n      data-node-key={nodeKey ?? \"NONE\"}\n      class={tw(\n        cssClass(\"pill\"),\n        \"inline-block text-center\",\n\n        // NOTE: this approximately solves a mistmatch between rendering as a web component and as a Preact component,\n        // but it's not perfect. This bug makes no sense so far and I need to find the root cause.\n        tab === \"plangs\" ? \"mr-4 mb-4\" : \"mr-[10.65px] mb-4\",\n        tab === \"plangs\" ? \"min-w-8 p-1.5\" : \"min-w-8 px-[6.025px] py-1.5\",\n\n        \"font-bold text-sm\",\n\n        \"rounded\",\n        kind === \"pl\" ? \"bg-primary text-background\" : \"bg-secondary text-foreground\",\n        \"shadow-lg shadow-secondary\",\n        \"outline-2 outline-secondary\",\n\n        kind === \"pl\" && HOVER,\n      )}>\n      {name}\n    </div>\n  );\n}\n", "import { BORDER, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { Pill } from \"@plangs/frontend/components/misc/pill\";\nimport type { NPlang } from \"@plangs/plangs\";\nimport type { TAB } from \"@plangs/server/components/layout\";\n\nexport type PlInfoProps = {\n  pl?: NPlang;\n  open?: boolean;\n  tab?: TAB;\n};\n\n/** Display a PL information, if the key is known. */\nexport function PlInfo({ pl, open, tab }: PlInfoProps) {\n  const forGrid = tab === \"plangs\";\n  return (\n    <div\n      class={tw(\n        \"w-full overflow-y-scroll\",\n        \"px-2 pt-2 sm:p-4\",\n        !forGrid && \"-mx-4\", // Compensate for padding so it aligns with the rest of the content.\n        \"prose prose-green dark:prose-invert sm:prose-sm lg:prose-lg xl:prose-xl max-w-[unset]\",\n        forGrid && \"bg-linear-to-b to-secondary/50\",\n        tw(BORDER, forGrid && \"border-b-1\"),\n      )}>\n      <h1 class={tw(!forGrid && \"text-4xl\", forGrid && \"inline text-lg sm:block sm:text-4xl\")}>\n        <a class=\"text-foreground decoration-1 decoration-dotted\" href={`/${pl?.plainKey}`}>\n          {pl?.name ?? \"Plang\"}\n        </a>\n      </h1>\n      {pl && (\n        <>\n          <span class={tw(forGrid ? \"dash sm:hidden\" : \"hidden\")}>&#8212;</span>\n          <div class={tw(forGrid && \"hidden sm:block\")}>\n            {pl.year && <Pill name={`Appeared ${pl.year}`} nodeKey=\"NA\" kind=\"firstAppeared\" tab={tab} />}\n            {pl.lastRelease && (\n              <Pill name={`Last Rel ${pl.lastRelease.date ?? pl.lastRelease.version}`} nodeKey=\"NA\" kind=\"firstAppeared\" tab={tab} />\n            )}\n            {pl.isTranspiler && <Pill name=\"Transpiler\" nodeKey=\"NA\" kind=\"transpiler\" tab={tab} />}\n            {pl.isPopular && <Pill name=\"Popular\" nodeKey=\"NA\" kind=\"popular\" tab={tab} />}\n          </div>\n          <p class={tw(forGrid && \"inline sm:block\")}>{pl.description || \"...\"}</p>\n          <details class={tw(forGrid && \"hidden sm:block\", \"pb-4\")} open={open}>\n            <summary class=\"cursor-pointer text-xl\">Details</summary>\n            {relations(pl).map(([title, iterTap]) => (\n              <div key={title}>\n                <h2 class=\"mt-4 text-xl\">{title}</h2>\n                {iterTap.existing.map(({ name, key, kind }) => (\n                  <Pill key={key} name={name} nodeKey={key} kind={kind} tab={tab} />\n                ))}\n              </div>\n            ))}\n          </details>\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction relations(pl: NPlang) {\n  const all = [\n    [\"Type Systems\", pl.relTsys.values.map(({ nodeTo }) => nodeTo)],\n    [\"Tags\", pl.relTags.values.map(({ nodeTo }) => nodeTo)],\n    [\"Platforms\", pl.relPlatforms.values.map(({ nodeTo }) => nodeTo)],\n\n    [\"Influenced By\", pl.relInfluencedBy.values.map(({ nodeTo }) => nodeTo)],\n    [\"Influenced\", pl.relInfluenced.values.map(({ nodeFrom }) => nodeFrom)],\n    [\"Dialect Of\", pl.relDialectOf.values.map(({ nodeTo }) => nodeTo)],\n    [\"Implements\", pl.relImplements.values.map(({ nodeTo }) => nodeTo)],\n    [\"Compiles To\", pl.relCompilesTo.values.map(({ nodeTo }) => nodeTo)],\n\n    [\"Licenses\", pl.relLicenses.values.map(({ nodeTo }) => nodeTo)],\n    [\"Extensions\", pl.extensions.map(name => ({ key: name, name, kind: \"ext\" }))],\n  ] as const;\n\n  return all.filter(([_, iterTap]) => iterTap.isEmpty === false);\n}\n\nexport const EVENTS = {} as const;\n", "import { render } from \"preact\";\n\nimport { lastPlang } from \"@plangs/frontend/app/pl\";\nimport { elem } from \"@plangs/frontend/auxiliar/dom\";\nimport type { PlangsGraph } from \"@plangs/plangs/index\";\nimport type { TAB } from \"@plangs/server/components/layout\";\nimport { type IDKey, cssID } from \"@plangs/server/elements\";\n\nimport { PlInfo, type PlInfoProps } from \"./pl-info\";\n\nconst id: IDKey = \"plInfo\";\n\nexport function plInfo({ tab, open }: { tab: TAB; open: boolean }) {\n  return <div id={cssID(id)} data-tab={tab} data-open={open} />;\n}\n\nexport function renderPlInfo({ pl, tab, open }: PlInfoProps) {\n  const plInfo = elem<HTMLDivElement>(\"plInfo\");\n  if (!plInfo) {\n    console.log(\"No plInfo wrapper found.\");\n    return;\n  }\n  if (!pl || !tab) {\n    console.log(\"Missing props to render plInfo.\");\n    return;\n  }\n  render(<PlInfo pl={pl} tab={tab} open={open} />, plInfo);\n}\n\nexport function renderLastPlInfo(pg: PlangsGraph) {\n  const plInfo = elem<HTMLDivElement>(\"plInfo\");\n  const pl = lastPlang(pg);\n  if (plInfo && pl) renderPlInfo({ pl, tab: \"plangs\" });\n}\n", "import \"preact/debug\";\n\nimport { elem, elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { on } from \"@plangs/frontend/auxiliar/events\";\nimport { connectLivereload } from \"@plangs/frontend/auxiliar/livereload\";\nimport { activateFacetsMain } from \"@plangs/frontend/components/facets/main\";\nimport { activateIconButtons } from \"@plangs/frontend/components/icon-button\";\nimport { ToggleFacetsMenu, ToggleHamburguer, ToggleLights } from \"@plangs/frontend/components/icon-button/state\";\nimport { renderLastPlInfo, renderPlInfo } from \"@plangs/frontend/components/pl-info\";\nimport { PlangsGraph } from \"@plangs/plangs\";\n\nimport { FragmentTracker } from \"../auxiliar/fragment\";\nimport { getPl } from \"./pl\";\n\nasync function start() {\n  const pg = new PlangsGraph();\n  const loadData = fetch(\"/plangs.json\").then(async r => pg.loadJSON(await r.json()));\n\n  window.fragment = new FragmentTracker().bind();\n  window.restoreFilters = () => ToggleFacetsMenu.initial().runEffects();\n  window.restoreHamburguer = () => ToggleHamburguer.initial().runEffects();\n  window.restoreLightMode = () => ToggleLights.initial().runEffects();\n  window.restorePlInfo = () => renderLastPlInfo(pg); // NOTE: this doesn't need the fully loaded data.\n\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    activateIconButtons();\n\n    loadData.then(() => {\n      activateFacetsMain(pg);\n\n      const grid = elem(\"plGrid\");\n      if (!grid) return;\n\n      // On thumb click, update the pl-info plang.\n      on(grid, \"click\", ({ target }: MouseEvent) => {\n        const pl = getPl(pg, target);\n        if (pl) renderPlInfo({ pl, tab: \"plangs\" });\n      });\n\n      // On double-click, open the language page.\n      on(grid, \"dblclick\", ({ target }: MouseEvent) => {\n        const pl = getPl(pg, target);\n        if (pl) window.location.href = `/${pl.plainKey}`;\n      });\n    });\n  });\n}\n\n// This is a global variable that is set by the build system.\ndeclare const DEVEL: boolean;\nif (DEVEL) connectLivereload();\n\nstart();\n\n// Declare some globals that are called as the page is being loaded to avoid flashing the wrong content.\ndeclare global {\n  interface Window {\n    fragment: FragmentTracker;\n    restoreFilters: () => void;\n    restoreHamburguer: () => void;\n    restoreLightMode: () => void;\n    restorePlInfo: () => void;\n  }\n}\n"],
  "mappings": "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",
  "names": ["slice", "options", "vnodeId", "isValidElement", "rerenderQueue", "prevDebounce", "defer", "depthSort", "eventClock", "eventProxy", "eventProxyCapture", "i", "EMPTY_OBJ", "EMPTY_ARR", "IS_NON_DIMENSIONAL", "isArray", "Array", "assign", "obj", "props", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__d", "__c", "constructor", "__v", "__i", "__u", "Fragment", "props", "children", "BaseComponent", "context", "this", "getDomSibling", "vnode", "childIndex", "__", "__i", "sibling", "__k", "length", "__e", "type", "updateParentDomPointers", "i", "child", "__c", "base", "enqueueRender", "c", "__d", "rerenderQueue", "push", "process", "__r", "prevDebounce", "options", "debounceRendering", "defer", "renderQueueLength", "component", "newVNode", "oldVNode", "oldDom", "commitQueue", "refQueue", "sort", "depthSort", "shift", "__v", "__P", "assign", "diff", "__n", "namespaceURI", "__u", "commitRoot", "diffChildren", "parentDom", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "namespace", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "oldChildren", "EMPTY_ARR", "newChildrenLength", "constructNewChildrenArray", "EMPTY_OBJ", "ref", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "constructor", "String", "createVNode", "isArray", "__b", "key", "findMatchingIndex", "unmount", "parentVNode", "contains", "insertBefore", "nodeType", "findMatchingIndex", "childVNode", "oldChildren", "skewedIndex", "remainingOldChildren", "key", "type", "x", "y", "oldVNode", "__u", "shouldSearch", "length", "setStyle", "style", "value", "setProperty", "IS_NON_DIMENSIONAL", "test", "dom", "name", "oldValue", "namespace", "useCapture", "o", "cssText", "replace", "toLowerCase", "slice", "l", "_attached", "eventClock", "addEventListener", "eventProxyCapture", "eventProxy", "removeEventListener", "e", "removeAttribute", "setAttribute", "createEventProxy", "this", "eventHandler", "_dispatched", "options", "event", "diff", "parentDom", "newVNode", "globalContext", "excessDomChildren", "commitQueue", "oldDom", "isHydrating", "refQueue", "tmp", "c", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "isClassComponent", "provider", "componentContext", "i", "renderHook", "count", "renderResult", "newType", "constructor", "__e", "__b", "outer", "props", "prototype", "render", "contextType", "__c", "__", "__E", "BaseComponent", "doRender", "sub", "state", "context", "__n", "__d", "__h", "_sb", "__s", "getDerivedStateFromProps", "assign", "__v", "componentWillMount", "componentDidMount", "push", "componentWillReceiveProps", "shouldComponentUpdate", "__k", "forEach", "vnode", "componentWillUpdate", "componentDidUpdate", "__P", "__r", "getChildContext", "getSnapshotBeforeUpdate", "diffChildren", "isArray", "Fragment", "children", "base", "MODE_HYDRATE", "nodeType", "nextSibling", "indexOf", "diffElementNodes", "diffed", "commitRoot", "root", "applyRef", "some", "cb", "call", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "localName", "document", "createTextNode", "createElementNS", "is", "data", "childNodes", "EMPTY_OBJ", "attributes", "__html", "innerHTML", "getDomSibling", "removeNode", "ref", "hasRefUnmount", "current", "unmount", "parentVNode", "skipRemove", "r", "componentWillUnmount", "replaceNode", "createElement", "namespaceURI", "firstChild", "createContext", "defaultValue", "contextId", "context", "__c", "i", "__", "Consumer", "props", "contextValue", "children", "Provider", "subs", "ctx", "this", "getChildContext", "componentWillUnmount", "shouldComponentUpdate", "_props", "value", "some", "c", "__e", "enqueueRender", "sub", "push", "old", "splice", "indexOf", "call", "contextType", "slice", "EMPTY_ARR", "options", "error", "vnode", "oldVNode", "errorInfo", "component", "ctor", "handled", "constructor", "getDerivedStateFromError", "setState", "__d", "componentDidCatch", "__E", "e", "vnodeId", "isValidElement", "undefined", "BaseComponent", "prototype", "update", "callback", "s", "__s", "state", "assign", "__v", "_sb", "forceUpdate", "__h", "render", "Fragment", "rerenderQueue", "defer", "Promise", "then", "bind", "resolve", "setTimeout", "depthSort", "a", "b", "__b", "process", "__r", "eventClock", "eventProxy", "createEventProxy", "eventProxyCapture", "globalVar", "globalVar", "globalThis", "window", "__PREACT_DEVTOOLS__", "attachPreact", "options", "Fragment", "Component", "loggedTypeFailures", "getDisplayName", "vnode", "type", "Fragment", "displayName", "name", "renderStack", "ownerStack", "getCurrentVNode", "length", "showJsxSourcePluginWarning", "isPossibleOwner", "getOwnerStack", "stack", "next", "__o", "push", "reduce", "acc", "owner", "source", "__source", "fileName", "lineNumber", "console", "warn", "isWeakMapSupported", "WeakMap", "getDomChildren", "domChildren", "__k", "forEach", "child", "apply", "getClosestDomNodeParentName", "parent", "__", "__e", "parentNode", "localName", "setState", "Component", "prototype", "isTableElement", "update", "callback", "this", "__v", "state", "call", "ILLEGAL_PARAGRAPH_CHILD_ELEMENTS", "forceUpdate", "serializeVNode", "props", "attrs", "prop", "hasOwnProperty", "value", "Object", "toString", "JSON", "stringify", "children", "__P", "oldDiff", "options", "__b", "oldDiffed", "diffed", "oldRoot", "oldVNode", "oldRender", "__r", "pop", "setupComponentStack", "hooksAllowed", "oldBeforeDiff", "oldVnode", "oldCatchError", "oldHook", "__h", "warnedComponents", "useEffect", "useLayoutEffect", "lazyPropTypes", "deprecations", "error", "errorInfo", "__c", "then", "promise", "Error", "componentStack", "setTimeout", "e", "isValid", "nodeType", "componentName", "Array", "isArray", "ref", "key", "propTypes", "has", "m", "lazyVNode", "set", "values", "__f", "obj", "i", "typeSpecs", "location", "getStack", "keys", "typeSpecName", "message", "loggedTypeFailures", "currentComponent", "renderCount", "nextComponent", "comp", "index", "property", "get", "indexOf", "deprecatedAttributes", "nodeName", "attributes", "deprecatedProto", "create", "newProps", "v", "__self", "__proto__", "join", "domParentName", "log", "illegalDomChildrenTypes", "filter", "childType", "test", "__H", "hooks", "hook", "j", "initDebug", "$", "s", "elem", "currentIndex", "currentComponent", "previousComponent", "prevRaf", "currentHook", "afterPaintEffects", "options", "_options", "oldBeforeDiff", "__b", "oldBeforeRender", "__r", "oldAfterDiff", "diffed", "oldCommit", "__c", "oldBeforeUnmount", "unmount", "oldRoot", "__", "getHookState", "index", "type", "__h", "hooks", "__H", "length", "push", "useState", "initialState", "useReducer", "invokeOrReturn", "reducer", "init", "hookState", "_reducer", "action", "currentValue", "__N", "nextValue", "setState", "_hasScuFromHooks", "updateHookState", "p", "s", "c", "stateHooks", "filter", "x", "every", "prevScu", "call", "this", "shouldUpdate", "forEach", "hookItem", "props", "shouldComponentUpdate", "prevCWU", "componentWillUpdate", "__e", "tmp", "useEffect", "callback", "args", "state", "__s", "argsChanged", "_pendingArgs", "useRef", "initialValue", "currentHook", "useMemo", "current", "useMemo", "factory", "args", "state", "getHookState", "currentIndex", "argsChanged", "__H", "__", "__h", "useContext", "context", "provider", "currentComponent", "__c", "state", "getHookState", "currentIndex", "c", "__", "sub", "props", "value", "flushAfterPaintEffects", "component", "afterPaintEffects", "shift", "__P", "__H", "__h", "forEach", "invokeCleanup", "invokeEffect", "e", "options", "__e", "__v", "__b", "vnode", "currentComponent", "oldBeforeDiff", "__", "parentDom", "__k", "__m", "oldRoot", "__r", "oldBeforeRender", "currentIndex", "hooks", "__c", "previousComponent", "hookItem", "__N", "_pendingArgs", "diffed", "oldAfterDiff", "c", "length", "push", "prevRaf", "requestAnimationFrame", "afterNextFrame", "commitQueue", "some", "filter", "cb", "oldCommit", "unmount", "oldBeforeUnmount", "hasErrored", "s", "HAS_RAF", "callback", "raf", "done", "clearTimeout", "timeout", "cancelAnimationFrame", "setTimeout", "hook", "comp", "cleanup", "argsChanged", "oldArgs", "newArgs", "arg", "index", "invokeOrReturn", "f", "h", "A", "y", "vnodeId", "isArray", "Array", "createVNode", "type", "props", "key", "isStaticChildren", "__source", "__self", "ref", "i", "normalizedProps", "vnode", "__k", "__", "__b", "__e", "__d", "__c", "constructor", "__v", "__i", "__u", "defaultProps", "options", "u", "u", "u", "u", "u", "k2", "v", "m2", "v", "v", "i", "c", "value", "c", "text", "RISON", "text", "rison.RISON", "RISON", "parse", "stringify", "e", "e", "e", "l2", "elem", "v", "n", "start", "f", "t", "_", "m", "data", "k", "r2", "i2", "e", "label", "A", "x", "u", "label", "x", "u", "label", "x", "u", "u", "cssClass", "y", "u", "label", "A", "x", "y", "input", "n", "b", "u", "CMP", "a", "b", "cssClass", "u", "A", "x", "y", "u", "label", "group", "u", "label", "f", "_", "v", "$", "y", "u", "elem", "u", "elem", "u", "u", "u", "_", "u", "r"]
}
