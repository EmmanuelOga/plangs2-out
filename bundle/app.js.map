{
  "version": 3,
  "sources": ["../../../../node_modules/preact/src/constants.js", "../../../../node_modules/preact/src/util.js", "../../../../node_modules/preact/src/options.js", "../../../../node_modules/preact/src/create-element.js", "../../../../node_modules/preact/src/component.js", "../../../../node_modules/preact/src/diff/props.js", "../../../../node_modules/preact/src/create-context.js", "../../../../node_modules/preact/src/diff/children.js", "../../../../node_modules/preact/src/diff/index.js", "../../../../node_modules/preact/src/render.js", "../../../../node_modules/preact/src/clone-element.js", "../../../../node_modules/preact/src/diff/catch-error.js", "../../src/elements.ts", "../../../frontend/src/auxiliar/dom.ts", "../../../frontend/src/auxiliar/events.ts", "../../../../node_modules/rison2/src/token.ts", "../../../../node_modules/rison2/src/lexer.ts", "../../../../node_modules/rison2/src/parser.ts", "../../../../node_modules/rison2/src/stringifier.ts", "../../../../node_modules/rison2/src/rison.ts", "../../../../node_modules/rison2/src/escaped.ts", "../../../../node_modules/rison2/src/index.ts", "../../../auxiliar/src/misc.ts", "../../../frontend/src/auxiliar/fragment.ts", "../../../frontend/src/auxiliar/livereload.ts", "../../../../node_modules/preact/hooks/src/index.js", "../../../frontend/src/auxiliar/dispatchable.ts", "../../../frontend/src/auxiliar/styles.ts", "../../../../node_modules/preact/jsx-runtime/src/utils.js", "../../../../node_modules/preact/src/constants.js", "../../../../node_modules/preact/jsx-runtime/src/index.js", "../../../frontend/src/auxiliar/icons.tsx", "../../../frontend/src/auxiliar/storage.ts", "../../../frontend/src/components/icon-button/state.tsx", "../../../frontend/src/components/icon-button/icon-button.tsx", "../../../frontend/src/components/icon-button/index.tsx", "../../../frontend/src/components/misc/pill.tsx", "../../src/utils/html.ts", "../../src/components/layout.tsx", "../../src/components/vertex-thumbn.tsx", "../../../frontend/src/components/vertex-info/vertex-info.tsx", "../../../frontend/src/components/vertex-info/index.tsx", "../../../auxiliar/src/filters.ts", "../../../auxiliar/src/value.ts", "../../../auxiliar/src/debounce.ts", "../../../auxiliar/src/map2.ts", "../../../plangs/src/facets/apps.ts", "../../../plangs/src/facets/communities.ts", "../../../plangs/src/facets/learning.ts", "../../../plangs/src/facets/libraries.ts", "../../../plangs/src/facets/plangs.ts", "../../../plangs/src/facets/subsystems.ts", "../../../plangs/src/facets/tools.ts", "../../../plangs/src/facets/index.ts", "../../../frontend/src/facets/main/state.ts", "../../../frontend/src/facets/misc/facet-bool.tsx", "../../../frontend/src/facets/misc/facet-text.tsx", "../../../frontend/src/facets/multisel/state.ts", "../../../frontend/src/facets/multisel/facet-multi.tsx", "../../../frontend/src/facets/table/entries.ts", "../../../frontend/src/facets/table/header.tsx", "../../../frontend/src/facets/table/state.ts", "../../../frontend/src/facets/table/facet-table.tsx", "../../../frontend/src/facets/misc/facet-group.tsx", "../../../frontend/src/facets/main/types.ts", "../../../auxiliar/src/array.ts", "../../../auxiliar/src/iter_tap.ts", "../../../graphgen/src/library.ts", "../../../plangs/src/auxiliar/str_date.ts", "../../../plangs/src/graph/vertex_data_fields.ts", "../../../plangs/src/graph/vertex_base.ts", "../../../plangs/src/graph/generated.ts", "../../../plangs/src/graph/index.ts", "../../../frontend/src/facets/kind/apps.tsx", "../../../frontend/src/facets/kind/communities.tsx", "../../../frontend/src/facets/kind/learning.tsx", "../../../frontend/src/facets/kind/libraries.tsx", "../../../frontend/src/facets/kind/plangs.tsx", "../../../frontend/src/facets/kind/subsystem.tsx", "../../../frontend/src/facets/kind/tools.tsx", "../../../frontend/src/facets/main/use_state.ts", "../../../frontend/src/facets/main/main.tsx", "../../../frontend/src/facets/main/index.tsx", "../../../frontend/src/app/vertices.ts", "../../../frontend/src/app/index.tsx"],
  "sourcesContent": ["/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {import('./index').ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\nimport { UNDEFINED } from './constants';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === UNDEFINED) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {import('./internal').VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: UNDEFINED,\n\t\t_original: original == null ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == null && options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor == UNDEFINED;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c;\n\trerenderQueue.sort(depthSort);\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile ((c = rerenderQueue.shift())) {\n\t\tif (c._dirty) {\n\t\t\tlet renderQueueLength = rerenderQueue.length;\n\t\t\trenderComponent(c);\n\t\t\tif (rerenderQueue.length > renderQueueLength) {\n\t\t\t\t// When i.e. rerendering a provider additional new items can be injected, we want to\n\t\t\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t\t\t// single pass\n\t\t\t\trerenderQueue.sort(depthSort);\n\t\t\t}\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { IS_NON_DIMENSIONAL, SVG_NAMESPACE } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] == '-') {\n\t\tstyle.setProperty(key, value == null ? '' : value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\nconst CAPTURE_REGEX = /(PointerCapture)$|Capture$/i;\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name == 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] == 'o' && name[1] == 'n') {\n\t\tuseCapture = name != (name = name.replace(CAPTURE_REGEX, '$1'));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (\n\t\t\tname.toLowerCase() in dom ||\n\t\t\tname == 'onFocusOut' ||\n\t\t\tname == 'onFocusIn'\n\t\t)\n\t\t\tname = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == SVG_NAMESPACE) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != null && (value !== false || name[4] == '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {import('../internal').PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == null) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n", "import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\t/** @type {Set<import('./internal').Component> | null} */\n\t\t\t\tlet subs = new Set();\n\t\t\t\tlet ctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\t\tsubs = null;\n\t\t\t\t};\n\n\t\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.add(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tif (subs) {\n\t\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType =\n\t\tcontext);\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport {\n\tEMPTY_OBJ,\n\tEMPTY_ARR,\n\tINSERT_VNODE,\n\tMATCHED,\n\tUNDEFINED\n} from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\toldDom = constructNewChildrenArray(\n\t\tnewParentVNode,\n\t\trenderResult,\n\t\toldChildren,\n\t\toldDom,\n\t\tnewChildrenLength\n\t);\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == null) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index === -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tlet result = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, null, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == null && newDom != null) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tif (\n\t\t\tchildVNode._flags & INSERT_VNODE ||\n\t\t\toldVNode._children === childVNode._children\n\t\t) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom);\n\t\t} else if (typeof childVNode.type == 'function' && result !== UNDEFINED) {\n\t\t\toldDom = result;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(\n\tnewParentVNode,\n\trenderResult,\n\toldChildren,\n\toldDom,\n\tnewChildrenLength\n) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = new Array(newChildrenLength);\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == null ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tnewParentVNode._children[i] = null;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode.constructor === UNDEFINED && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : null,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\toldVNode = null;\n\t\tif (matchingIndex !== -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original === null\n\t\tconst isMounting = oldVNode == null || oldVNode._original === null;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\tskew--;\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex != skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != null && (oldVNode._flags & MATCHED) == 0) {\n\t\t\t\tif (oldVNode._dom == oldDom) {\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (oldDom && parentVNode.type && !parentDom.contains(oldDom)) {\n\t\t\toldDom = getDomSibling(parentVNode);\n\t\t}\n\t\tparentDom.insertBefore(parentVNode._dom, oldDom || null);\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != null && oldDom.nodeType == 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet oldVNode = oldChildren[skewedIndex];\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\t//\n\t// If there is an unkeyed functional VNode, that isn't a built-in like our Fragment,\n\t// we should not search as we risk re-using state of an unrelated VNode. (reverted for now)\n\tlet shouldSearch =\n\t\t// (typeof type != 'function' || type === Fragment || key) &&\n\t\tremainingOldChildren >\n\t\t(oldVNode != null && (oldVNode._flags & MATCHED) == 0 ? 1 : 0);\n\n\tif (\n\t\toldVNode === null ||\n\t\t(oldVNode &&\n\t\t\tkey == oldVNode.key &&\n\t\t\ttype === oldVNode.type &&\n\t\t\t(oldVNode._flags & MATCHED) == 0)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\tlet x = skewedIndex - 1;\n\t\tlet y = skewedIndex + 1;\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tif (x >= 0) {\n\t\t\t\toldVNode = oldChildren[x];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn x;\n\t\t\t\t}\n\t\t\t\tx--;\n\t\t\t}\n\n\t\t\tif (y < oldChildren.length) {\n\t\t\t\toldVNode = oldChildren[y];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn y;\n\t\t\t\t}\n\t\t\t\ty++;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import {\n\tEMPTY_OBJ,\n\tMATH_NAMESPACE,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tRESET_MODE,\n\tSVG_NAMESPACE,\n\tUNDEFINED,\n\tXHTML_NAMESPACE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * @template {any} T\n * @typedef {import('../internal').Ref<T>} Ref<T>\n */\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== UNDEFINED) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!c._force &&\n\t\t\t\t\t((c.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\t\tnewVNode._original == oldVNode._original)\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original != oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\toldDom = diffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = null;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\t\tif (e.then) {\n\t\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\t\twhile (oldDom && oldDom.nodeType == 8 && oldDom.nextSibling) {\n\t\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = excessDomChildren.length; i--; ) {\n\t\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == null &&\n\t\tnewVNode._original == oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\toldDom = newVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n\n\treturn newVNode._flags & MODE_SUSPENDED ? undefined : oldDom;\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType == 'svg') namespace = SVG_NAMESPACE;\n\telse if (nodeType == 'math') namespace = MATH_NAMESPACE;\n\telse if (!namespace) namespace = XHTML_NAMESPACE;\n\n\tif (excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value == !!nodeType &&\n\t\t\t\t(nodeType ? value.localName == nodeType : value.nodeType == 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType == null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != null) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, null, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html !== oldHtml.__html &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType == 'foreignObject' ? XHTML_NAMESPACE : namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType == 'progress' && inputValue == null) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue !== UNDEFINED &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType == 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType == 'option' && inputValue !== oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked !== UNDEFINED && checked !== dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != null) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) {\n\t\t\tapplyRef(r, null, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\tvnode._component = vnode._parent = vnode._dom = UNDEFINED;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\t// https://github.com/preactjs/preact/issues/3794\n\tif (parentDom == document) {\n\t\tparentDom = document.documentElement;\n\t}\n\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? null\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: null,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\nimport { UNDEFINED } from './constants';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === UNDEFINED && defaultProps !== UNDEFINED) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tnull\n\t);\n}\n", "/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component,\n\t\t/** @type {import('../internal').ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "/**\n * @file utilities to type check DOM \"id\" and \"class\" attributes.\n */\n\n// Elements for which we have 0 or 1 instance.\nexport const ID_KEYS = [\n  \"todo\",\n\n  \"mainContent\", // Main content area in the layout.\n  \"mainNav\", // Main navigation bar, toggled by the hamburger icon.\n  \"vertexGrid\", // Main grid for vertices.\n] as const;\n\n// Elements for which we may have multiple instances.\nexport const CL_KEYS = [\n  \"todo\",\n\n  \"facetsMain\", // A Div wrapper for FacetsMain component.\n  \"iconButton\", // A Div wrapper for IconButton component.\n  \"vertexThumbn\", // Thumbnail for a vertex.\n  \"vertexThumbnImg\", // We'll use the placeholder images until after DOM ready.\n  \"vertexInfo\", // Information about a vertex.\n  \"externalLink\", // External link to another site.\n] as const;\n\nexport const DATA_KEYS = [\n  \"vertex-key\", // The key of a vertex, ex: \"pl+1\",\n  \"vertex-name\", // The name of a vertex. ex: \"plang\", matches the graph accessor, ex: `pg.plang`.\n  \"vertex-ranking\", // The ranking of a vertex, ex: \"1\" (or nothing if not ranked).\n] as const;\n\nexport type IDKey = (typeof ID_KEYS)[number];\nexport type CLKey = (typeof CL_KEYS)[number];\nexport type DataKey = (typeof DATA_KEYS)[number];\n\nexport function cssID(key: IDKey): `id-${IDKey}` {\n  return `id-${key}`;\n}\n\nexport function cssClass(key: CLKey): `cl-${CLKey}` {\n  return `cl-${key}`;\n}\n\nexport function dataKey(key: DataKey): `data-${DataKey}` {\n  return `data-${key}`;\n}\n", "import { type CLKey, type DataKey, type IDKey, cssClass, cssID, dataKey } from \"@plangs/server/elements\";\n\n/**\n * Bun will attempt to load this code from the server even if it is not imported explicitly.\n * We need to define a valid document (even if it is undefined) to avoid errors.\n */\nconst doc = (typeof document === \"undefined\" ? undefined : document) as Document;\n\nexport const $ = doc?.querySelector.bind(doc);\nexport const $$ = doc?.querySelectorAll.bind(doc);\n\nexport const elem = <T extends HTMLElement>(key: IDKey) => $<T>(`#${cssID(key)}`) ?? undefined;\nexport const elems = <T extends HTMLElement>(key: CLKey) => $$<T>(`.${cssClass(key)}`);\nexport const data = (el: Element | null, key: DataKey) => el?.getAttribute(dataKey(key)) ?? undefined;\n\n/** Return computed width and height of the element. */\nexport function size(el: HTMLElement): { width: number; height: number } {\n  try {\n    const style = getComputedStyle(el);\n    return { width: Number.parseInt(style.width), height: Number.parseInt(style.height) };\n  } catch (err) {\n    console.error(\"Error getting size\", el, err);\n  }\n  return { width: 0, height: 0 };\n}\n\n/** Call the same action on Enter or Click. */\nexport function onClickOnEnter(action: (ev: UIEvent) => void) {\n  return {\n    onClick: (ev: MouseEvent) => {\n      ev.stopPropagation();\n      action(ev);\n    },\n    onKeyDown: (ev: KeyboardEvent) => {\n      ev.stopPropagation();\n      if (ev.key === \"Enter\") {\n        ev.preventDefault();\n        action(ev);\n      }\n    },\n  };\n}\n\n/** Check if the min-width breakpoint applies right now.  */\nexport const minWidthBP = (size: string) => window.matchMedia(`(min-width: ${size})`).matches ?? false;\n", "export type Nil = null | undefined;\n\n/** Adds an event listener to the target, and returns a function to undo the listener. */\nexport function on<T>(target: EventTarget | Nil, type: string, listener: (ev: T) => void, opt?: AddEventListenerOptions): undefined | (() => void) {\n  if (!target) console.warn(\"missing target\", { type, listener, opt });\n  target?.addEventListener(type, listener as EventListener, opt);\n  if (target) return () => off(target, type, listener, opt);\n}\n\nexport function off<T>(target: EventTarget | Nil, type: string, listener: (ev: T) => void, opt?: AddEventListenerOptions): void {\n  if (!target) console.warn(\"missing target\", { type, listener, opt });\n  target?.removeEventListener(type, listener as EventListener, opt);\n}\n\nexport function send<T extends Event>(target: EventTarget | Nil, ev: T): boolean | undefined {\n  if (!target) console.warn(\"missing target\", ev);\n  return target?.dispatchEvent(ev);\n}\n\nexport function customEvent<T>(type: string, detail: T, options: CustomEventInit<T> = { bubbles: true, composed: true, cancelable: undefined }) {\n  return new CustomEvent(type, { detail, ...options });\n}\n\n/** Util to type cast and check an event handler. */\nexport function handler<T extends HTMLElement, Ev extends UIEvent = UIEvent>(action: (target: T, ev: Ev) => void) {\n  return (ev: Ev) => {\n    if (ev.target && \"tagName\" in ev.target) action(ev.target as T, ev);\n  };\n}\n", "export const NULL = '!n';\nexport const TRUE = '!t';\nexport const FALSE = '!f';\nexport const OBJECT_START = '(';\nexport const ARRAY_START = '!(';\nexport const OBJECT_ARRAY_END = ')';\nexport const COLON = ':';\nexport const COMMA = ',';\nexport const STRING = 'string';\nexport const NUMBER = 'number';\n\nexport type TokenKind =\n  | typeof NULL\n  | typeof TRUE\n  | typeof FALSE\n  | typeof OBJECT_START\n  | typeof ARRAY_START\n  | typeof OBJECT_ARRAY_END\n  | typeof COLON\n  | typeof COMMA\n  | typeof STRING\n  | typeof NUMBER;\n\nexport interface Token<T extends TokenKind = TokenKind> {\n  kind: T;\n  value: string;\n}\n", "import {\n  ARRAY_START,\n  COLON,\n  COMMA,\n  FALSE,\n  NULL,\n  NUMBER,\n  OBJECT_ARRAY_END,\n  OBJECT_START,\n  STRING,\n  Token,\n  TokenKind,\n  TRUE,\n} from './token';\n\ntype Rule<T extends TokenKind> = (\n  source: string,\n  pos: number,\n) => Token<T> | null;\n\nconst rules = {\n  quote: (): Rule<typeof STRING> => (source, pos) => {\n    if (!source.startsWith(\"'\", pos)) return null;\n\n    let i = pos;\n    while (true) {\n      if (source.length <= ++i) {\n        throw new SyntaxError(`Unexpected end of Rison input`);\n      }\n      switch (source[i]) {\n        case '!':\n          i++;\n          continue;\n        case \"'\":\n          return { kind: STRING, value: source.slice(pos, i + 1) };\n      }\n    }\n  },\n  string:\n    <T extends TokenKind>(kind: T): Rule<T> =>\n    (source, pos) =>\n      source.startsWith(kind, pos) ? { kind, value: kind } : null,\n  regexp:\n    <T extends TokenKind>(kind: T, reg: RegExp): Rule<T> =>\n    (source, pos) => {\n      const match = reg.exec(source.slice(pos));\n      return match ? { kind, value: match[0] } : null;\n    },\n};\n\nconst RULES: Rule<TokenKind>[] = [\n  rules.quote(),\n  rules.string(OBJECT_START),\n  rules.string(ARRAY_START),\n  rules.string(OBJECT_ARRAY_END),\n  rules.string(NULL),\n  rules.string(TRUE),\n  rules.string(FALSE),\n  rules.string(COLON),\n  rules.string(COMMA),\n  rules.regexp(STRING, /^[^0-9- '!:(),*@$][^ '!:(),*@$]*/),\n  rules.regexp(NUMBER, /^-?([1-9][0-9]*|[0-9])(\\.[0-9]+)?(e-?[0-9]+)?/),\n];\n\nexport class Lexer {\n  private pos = 0;\n\n  public constructor(private source: string) {}\n\n  public position(): number {\n    return this.pos;\n  }\n\n  public length(): number {\n    return this.source.length;\n  }\n\n  public nextToken(): Token<TokenKind> | null {\n    if (this.pos >= this.source.length) return null;\n\n    for (const rule of RULES) {\n      const token = rule(this.source, this.pos);\n      if (token !== null) {\n        this.pos += token.value.length;\n        return token;\n      }\n    }\n\n    throw new SyntaxError(\n      `Unexpected token ${this.source[this.pos]} in Rison at position ${\n        this.pos\n      }`,\n    );\n  }\n\n  public syntaxError(token: Token): SyntaxError {\n    const pos = this.pos - token.value.length;\n    return new SyntaxError(\n      `Unexpected token ${this.source[pos]} in Rison at position ${pos}`,\n    );\n  }\n}\n", "import { Lexer } from './lexer';\nimport {\n  ARRAY_START,\n  COLON,\n  COMMA,\n  FALSE,\n  NULL,\n  NUMBER,\n  OBJECT_ARRAY_END,\n  OBJECT_START,\n  STRING,\n  Token,\n  TokenKind,\n  TRUE,\n} from './token';\n\nexport class Parser {\n  public constructor(private readonly lexer: Lexer) {}\n\n  public readAsAny(): any {\n    const val = this.asAny(this.nextToken());\n    if (this.lexer.position() < this.lexer.length()) {\n      throw this.lexer.syntaxError(this.nextToken());\n    }\n    return val;\n  }\n\n  private asAny(token: Token): any {\n    switch (token.kind) {\n      case NULL:\n        return null;\n      case TRUE:\n        return true;\n      case FALSE:\n        return false;\n      case STRING:\n        return this.asString(token);\n      case NUMBER:\n        return Number(token.value);\n      case OBJECT_START:\n        return this.readAsObject();\n      case ARRAY_START:\n        return this.readAsArray();\n      default:\n        throw this.lexer.syntaxError(token);\n    }\n  }\n\n  private asString(token: Token): string {\n    return token.value[0] === \"'\"\n      ? token.value.replace(/!./g, (c) => c[1]).slice(1, -1)\n      : token.value;\n  }\n\n  private readAsObject(): Record<string, any> {\n    const obj: Record<string, any> = {};\n    let token = this.nextToken();\n    while (token.kind !== OBJECT_ARRAY_END) {\n      const key = this.asString(token);\n      this.expectToken(COLON);\n      const val = this.asAny(this.nextToken());\n      obj[key] = val;\n\n      token = this.nextToken();\n      if (token.kind === OBJECT_ARRAY_END) break;\n      if (token.kind !== COMMA) throw this.lexer.syntaxError(token);\n      token = this.nextToken();\n    }\n    return obj;\n  }\n\n  private readAsArray(): any[] {\n    const arr: any[] = [];\n    let token = this.nextToken();\n    while (token.kind !== OBJECT_ARRAY_END) {\n      arr.push(this.asAny(token));\n      token = this.nextToken();\n      if (token.kind === OBJECT_ARRAY_END) break;\n      if (token.kind !== COMMA) throw this.lexer.syntaxError(token);\n      token = this.nextToken();\n    }\n    return arr;\n  }\n\n  private expectToken<T extends TokenKind>(kind: T) {\n    const token = this.nextToken();\n    if (token.kind !== kind) throw this.lexer.syntaxError(token);\n  }\n\n  private nextToken(): Token {\n    const token = this.lexer.nextToken();\n    if (!token) throw new SyntaxError(`Unexpected end of Rison input`);\n    return token;\n  }\n}\n", "import {\n  ARRAY_START,\n  COLON,\n  COMMA,\n  FALSE,\n  NULL,\n  OBJECT_ARRAY_END,\n  OBJECT_START,\n  TRUE,\n} from './token';\n\nconst ID_REGEXP = /^[^0-9- '!:(),*@$][^ '!:(),*@$]*$/;\n\nexport class Stringifier {\n  public value(value: any): string | undefined {\n    if (value === undefined) return undefined;\n    if (value === null) return NULL;\n    switch (typeof value) {\n      case 'object':\n        return Array.isArray(value)\n          ? `${ARRAY_START}${this.array(value)}${OBJECT_ARRAY_END}`\n          : `${OBJECT_START}${this.object(value)}${OBJECT_ARRAY_END}`;\n      case 'boolean':\n        return this.boolean(value);\n      case 'number':\n        return this.number(value);\n      case 'string':\n        return this.string(value);\n      case 'bigint':\n        throw new TypeError('Do not known how to serialize a BigInt');\n      default:\n        return undefined;\n    }\n  }\n\n  public object(value: Record<string, any>): string {\n    return Object.entries(value).reduce<string>((prev, [key, value]) => {\n      const str = this.value(value);\n      if (str === undefined) return prev;\n\n      const pair = `${this.string(key)}${COLON}${str}`;\n      return prev.length > 0 ? `${prev}${COMMA}${pair}` : pair;\n    }, '');\n  }\n\n  public array(value: any[]): string {\n    return value.reduce((prev, value) => {\n      const str = this.value(value) || NULL;\n      return prev.length > 0 ? `${prev}${COMMA}${str}` : str;\n    }, '');\n  }\n\n  public boolean(value: boolean): string {\n    return value ? TRUE : FALSE;\n  }\n\n  public number(value: number): string {\n    return Number.isFinite(value) ? value.toString().replace('+', '') : NULL;\n  }\n\n  public string(value: string): string {\n    return ID_REGEXP.test(value)\n      ? value\n      : `'${value.replace(/[!']/g, (c) => `!${c}`)}'`;\n  }\n}\n", "import { Lexer } from './lexer';\nimport { Parser } from './parser';\nimport { Stringifier } from './stringifier';\n\nexport const RISON = {\n  parse: (text: string): any => {\n    const lexer = new Lexer(text);\n    const parser = new Parser(lexer);\n    return parser.readAsAny();\n  },\n  stringify: (value: any): string => {\n    const stringifier = new Stringifier();\n    return stringifier.value(value) as string;\n  },\n};\n\nexport const ORISON = {\n  parse: (text: string): any => {\n    const lexer = new Lexer(`(${text})`);\n    const parser = new Parser(lexer);\n    return parser.readAsAny();\n  },\n  stringify: (value: Record<string, any>): string => {\n    const stringifier = new Stringifier();\n    return stringifier.object(value);\n  },\n};\n\nexport const ARISON = {\n  parse: (text: string): any => {\n    const lexer = new Lexer(`!(${text})`);\n    const parser = new Parser(lexer);\n    return parser.readAsAny();\n  },\n  stringify: (value: any[]): string => {\n    const stringifier = new Stringifier();\n    return stringifier.array(value);\n  },\n};\n", "import * as rison from './rison';\n\nconst ESCAPE_NO_REQUIRED = /^[-A-Za-z0-9~!*()_.',:@$/]*$/;\n\n/**\n * this is like encodeURIComponent() but quotes fewer characters.\n *\n * See https://github.com/Nanonid/rison/blob/e64af6c096fd30950ec32cfd48526ca6ee21649d/js/rison.js#L107-L118\n *\n * This function is licensed under the MIT license found in the\n * https://github.com/Nanonid/rison/blob/e64af6c096fd30950ec32cfd48526ca6ee21649d/LICENSE.md.\n *\n * @param str\n */\nconst escape = (str: string): string => {\n  if (ESCAPE_NO_REQUIRED.test(str)) return str;\n\n  return encodeURIComponent(str)\n    .replace(/%2C/g, ',')\n    .replace(/%3A/g, ':')\n    .replace(/%40/g, '@')\n    .replace(/%24/g, '$')\n    .replace(/%2F/g, '/')\n    .replace(/%20/g, '+');\n};\n\nconst unescape = (str: string): string =>\n  decodeURIComponent(str.replace(/\\+/g, '%20'));\n\nconst RISON = {\n  parse: (text: string): any => rison.RISON.parse(unescape(text)),\n  stringify: (value: any): string => escape(rison.RISON.stringify(value)),\n};\n\nconst ORISON = {\n  parse: (text: string): any => rison.ORISON.parse(unescape(text)),\n  stringify: (value: Record<string, any>): string =>\n    escape(rison.ORISON.stringify(value)),\n};\n\nconst ARISON = {\n  parse: (text: string): any => rison.ARISON.parse(unescape(text)),\n  stringify: (value: any[]): string => escape(rison.ARISON.stringify(value)),\n};\n\nconst parse = RISON.parse;\nconst stringify = RISON.stringify;\n\nexport { RISON, ORISON, ARISON, parse, stringify, escape, unescape };\n", "import * as escaped from './escaped';\nimport { ARISON, ORISON, RISON } from './rison';\n\nconst parse = RISON.parse;\nconst stringify = RISON.stringify;\nconst escape = escaped.escape;\nconst unescape = escaped.unescape;\n\nexport { RISON, ORISON, ARISON, parse, stringify, escape, unescape, escaped };\n", "/**\n * Ret (short for \"returning\") is a combinator that takes an item and a function,\n * and applies the function to the item.\n *\n * Useful to avoid assigning a value to a variable, also creates a new scope around the item,\n * so the value can be reused multiple times (good if the value is expensive to compute).\n *\n * From:\n * ```\n * const thing = expensiveComputation();\n * doSomething(thing);\n * doSomethingElse(thing);\n * ```\n *\n * To:\n * ```\n * ret(expensiveComputation(), thing => {\n *  doSomething(thing);\n *  doSomethingElse(thing);\n * });\n * ```\n *\n * This is great for instance in TSX where you can't define a variable in the middle of a TSX block.\n *\n * There's a similar combinator (tap), whose purpose is to make a value available for a block of code in the middle of a chain.\n *\n * Aka aka \"K combinator\" aka \"Kestrel\" .\n * https://leanpub.com/combinators/read#leanpub-auto-kestrels\n */\nexport const ret = <T, R>(item: T, action: (item: T) => R): R => action(item);\n\nexport const tap = <T>(item: T, action: (item: T) => void): T => {\n  action(item);\n  return item;\n};\n\n// https://stackoverflow.com/a/32108184\n// biome-ignore lint/suspicious/noExplicitAny: checks if _any_ object is empty.\nexport function isEmpty(obj: any) {\n  for (const prop in obj) {\n    if (Object.hasOwn(obj, prop)) return false;\n  }\n  return true;\n}\n\n// Maintain an order of keys, with priority for some keys.\nconst PRIORITY_KEYS = [\"name\", \"description\", \"shortDesc\", \"created\"];\n\n/** Cleanup data: return a new object with sorted keys, and remove some blank values. */\nexport function cleanup(data: Record<string, any>) {\n  const entries = Object.entries(data);\n  entries.sort(([keyA], [keyB]) => {\n    const indexA = PRIORITY_KEYS.indexOf(keyA);\n    const indexB = PRIORITY_KEYS.indexOf(keyB);\n\n    if (indexA !== -1 && indexB !== -1) return indexA - indexB;\n    if (indexA !== -1) return -1;\n    if (indexB !== -1) return 1;\n\n    return keyA.localeCompare(keyB);\n  });\n\n  const result: Record<string, any> = {};\n  for (const [k, v] of entries) {\n    if (Array.isArray(v)) {\n      if (v.length > 0) result[k] = [...v].sort();\n    } else if ((v !== null && v !== undefined) || v !== \"\") {\n      result[k] = v;\n    }\n  }\n\n  return result;\n}\n", "import { RISON } from \"rison2\";\n\nimport { isEmpty } from \"@plangs/auxiliar/misc\";\n\nimport { on } from \"./events\";\n\n// Bun loads this code so we need to define a valid window (even if it is not defined).\nconst win = (typeof window === \"undefined\" ? undefined : window) as Window;\n\n/**\n * Returns the fragment (possible empty): the string after the first '#' of a URL or HREF.\n * Returns the input string if it has no '#' character.\n */\nexport function getFragment(fragmentOrURL: URL | Location | string | undefined): string {\n  if (!fragmentOrURL) return \"\";\n  if (fragmentOrURL instanceof URL || fragmentOrURL instanceof Location) return fragmentOrURL.hash.slice(1);\n  const hashIndex = fragmentOrURL.indexOf(\"#\");\n  return hashIndex !== -1 ? fragmentOrURL.slice(hashIndex + 1) : fragmentOrURL;\n}\n\n/**\n * All fragment updates should go to a single instance of this class to ensure we can distinguish\n * between user initiated and app initiated URL Fragment changes:\n *\n * * Use instance.pushState to change the fragment and only trigger a \"user change\" event.\n * * Use instance.update to change the fragment and trigger both a \"user change\" and a \"change\" event.\n */\nexport class FragmentTracker extends EventTarget {\n  #fragment: string = win.location.hash.slice(1);\n  #previous?: string;\n\n  /** Keep a reference so we can remove it if needed (with {@link destroy}). */\n  #boundedHandler?: (ev: HashChangeEvent) => void;\n\n  // biome-ignore lint/suspicious/noExplicitAny: Return of RISON.parse is any.\n  static deserialize(fragment = win.location.hash): any {\n    try {\n      const data = fragment.slice(fragment.indexOf(\"#\") + 1).trim();\n      if (data.length > 2 && data.startsWith(\"(\") && data.endsWith(\")\")) return RISON.parse(data);\n    } catch (e) {\n      console.warn(\"Failed to parse RISON:\", fragment, e);\n    }\n  }\n\n  // biome-ignore lint/suspicious/noExplicitAny: RISON.stringify can serialize any data.\n  static serialize(data: any): string | undefined {\n    try {\n      if (isEmpty(data)) return undefined;\n      return RISON.stringify(data);\n    } catch (e) {\n      console.error(\"Failed to serialize data\", e);\n    }\n  }\n\n  /** Call this to bind the tracker to the hashchange event of the window. */\n  bind(): this {\n    this.destroy();\n    this.#boundedHandler = this.#hashChangeHandler.bind(this);\n    win.addEventListener(\"hashchange\", this.#boundedHandler);\n    return this;\n  }\n\n  /** Remove the hashchange event listener off the window. */\n  destroy() {\n    if (this.#boundedHandler) {\n      win.removeEventListener(\"hashchange\", this.#boundedHandler);\n      this.#boundedHandler = undefined;\n    }\n  }\n\n  get fragment(): string {\n    return this.#fragment;\n  }\n\n  get previous(): string | undefined {\n    return this.#previous;\n  }\n\n  /**\n   * Handler for 'hashchange': this must come from user action (or 3rd party code :-/) since\n   * updates through this class use history.pushState, which doesn't trigger hashchange.\n   */\n  #hashChangeHandler({ newURL, oldURL }: HashChangeEvent) {\n    const newFragment = getFragment(newURL);\n    if (newFragment !== this.#fragment) {\n      this.#previous = getFragment(oldURL);\n      this.#fragment = newFragment;\n      this.dispatchEvent(this.#createEvent(FRAGMENT_USER_CHANGE));\n      this.dispatchEvent(this.#createEvent(FRAGMENT_CHANGE));\n    }\n  }\n\n  /**\n   * This method will use history.pushState, so it won't trigger a {@link FRAGMENT_USER_CHANGE}.\n   * https://developer.mozilla.org/en-US/docs/Web/API/History/pushState#description\n   */\n  pushState(fragmentOrURL: string | URL | undefined) {\n    const newFragment = getFragment(fragmentOrURL);\n    if (newFragment !== this.#fragment) {\n      this.#previous = this.#fragment;\n      this.#fragment = newFragment;\n      history.pushState(null, \"\", `#${newFragment}`);\n      this.dispatchEvent(this.#createEvent(FRAGMENT_CHANGE));\n    }\n  }\n\n  /**\n   * Updates fragment using window.location.hash,\n   * which will trigger both {@link FRAGMENT_USER_CHANGE} and {@link FRAGMENT_CHANGE}.\n   * Useful for programmatically simulating user navigation.\n   */\n  update(fragmentOrURL: string | URL): void {\n    win.location.hash = getFragment(fragmentOrURL);\n  }\n\n  onUserChange(callback: (ev: FragmentChangeEvent) => void): (() => void) | undefined {\n    return on(this, FRAGMENT_USER_CHANGE, callback);\n  }\n\n  #createEvent(type: FragmentEventType): FragmentChangeEvent {\n    return new FragmentChangeEvent(type, { fragment: this.#fragment, previous: this.#previous });\n  }\n}\n\nexport const FRAGMENT_CHANGE = \"fragmentchange\" as const;\nexport const FRAGMENT_USER_CHANGE = \"fragmentuserchange\" as const;\nexport type FragmentEventType = typeof FRAGMENT_CHANGE | typeof FRAGMENT_USER_CHANGE;\n\nexport interface FragmentChangeEventDetail {\n  fragment: string;\n  previous: string | undefined;\n}\n\nexport class FragmentChangeEvent extends CustomEvent<FragmentChangeEventDetail> {\n  constructor(\n    type: FragmentEventType,\n    detail: FragmentChangeEventDetail,\n    options: CustomEventInit<FragmentChangeEventDetail> = { bubbles: true, cancelable: undefined, composed: true },\n  ) {\n    super(type, { ...options, detail });\n  }\n\n  get fragment(): string {\n    return this.detail.fragment;\n  }\n\n  get previous(): string | undefined {\n    return this.detail.previous;\n  }\n\n  /** Attempt to deserialize RISON data. */\n  // biome-ignore lint/suspicious/noExplicitAny: RISON data can be anything.\n  get deserFrag(): any {\n    return FragmentTracker.deserialize(this.detail.fragment);\n  }\n\n  /** Attempt to deserialize RISON data. */\n  // biome-ignore lint/suspicious/noExplicitAny: RISON data can be anything.\n  get deserPrev(): any {\n    const { previous } = this.detail;\n    return previous ? FragmentTracker.deserialize(previous) : undefined;\n  }\n}\n", "let pingTimer: Timer | undefined;\n\n// If this is too short, in Firefox it stops opening external links :-).\n// I think it's, if a remote link takes too long to load, the browser will instead handle the reload request first.\nconst INITIAL_TIMEOUT_MS = 1000;\nconst PING_FREQ_MS = 10;\nconst RELOAD_LATENCY_MS = 10;\n\n/**\n * Setup a liverelaod connection. Attempts to reconnect if necessary.\n */\nexport function connectLivereload(timeout = INITIAL_TIMEOUT_MS, lifecycle: \"start\" | \"error\" = \"start\") {\n  if (pingTimer) {\n    clearInterval(pingTimer);\n    pingTimer = undefined;\n  }\n\n  const reconnect = () => {\n    console.info(\"attempting livereload reconnect in\", timeout, \"ms\");\n    setTimeout(() => connectLivereload(timeout * 1.5, \"error\"), timeout);\n  };\n\n  const reload = () => {\n    setTimeout(() => window.location.reload(), RELOAD_LATENCY_MS);\n  };\n\n  const socket = new WebSocket(\"/livereload\");\n  socket.addEventListener(\"open\", () => {\n    // If we needed to reconnect, reload so we can see any server side changes.\n    if (lifecycle === \"error\") return reload();\n    socket.send(\"CONNECT\");\n    pingTimer = setInterval(() => socket.readyState === WebSocket.OPEN && socket.send(\"PING\"), PING_FREQ_MS);\n  });\n\n  socket.addEventListener(\"message\", event => {\n    if (event.data === \"ACK\") console.info(\"livereload connected\", new Date());\n    if (event.data === \"RELOAD\") reload();\n  });\n\n  socket.addEventListener(\"close\", event => {\n    reconnect();\n  });\n}\n", "import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = hookState._component.props !== p;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn prevScu\n\t\t\t\t\t? prevScu.call(this, p, s, c) || shouldUpdate\n\t\t\t\t\t: shouldUpdate;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tref(createHandle());\n\t\t\t\treturn () => ref(null);\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n", "import type { RefObject } from \"preact\";\nimport { type Dispatch, useEffect, useRef, useState } from \"preact/hooks\";\n\nexport abstract class Dispatchable<T> {\n  dispatcher?: Dispatch<this>;\n\n  constructor(protected data: T) {}\n\n  clone(): this {\n    const Ctor = this.constructor as new (data: T) => this;\n    const clone = new Ctor(this.data);\n    clone.dispatcher = this.dispatcher;\n    return clone;\n  }\n\n  dispatch(): this {\n    this.dispatcher?.(this.clone());\n    return this;\n  }\n}\n\n/**\n * Setup a {@link Dispatchable} instance with a {@link useState} dispatcher.\n */\n// biome-ignore lint/suspicious/noExplicitAny: accept any kind of Dispatchable.\nexport function useDispatchable<T extends Dispatchable<any>>(factory: () => T): T {\n  const [state, dispatcher] = useState(factory);\n  state.dispatcher = dispatcher;\n  return state;\n}\n\n/**\n * Saves the state of the component on the HTML wrapper element of a preact component.\n * Returns a ref that should be attached to the root element of the component.\n */\nexport function useRootState<Container extends HTMLElement, T>(state: T): RefObject<Container | undefined> {\n  const ref = useRef<Container | undefined>();\n  useEffect(() => {\n    const root = ref.current?.parentElement as Container & { state?: T };\n    if (root && state) root.state = state;\n  }, [state]);\n  return ref as RefObject<Container | undefined>;\n}\n", "/**\n * Some CSS styles we reuse across the app.\n */\n\nexport const VSCROLL = \"overflow-hidden overflow-y-auto\";\n\nexport const BAR = \"bg-linear-to-b from-secondary to-background\";\nexport const BORDER = \"border-primary/85 border-dotted\";\n\nexport const INPUT = \"bg-background text-foreground placeholder:text-foreground/50 mx-2\";\n\nexport const HOVER = \"hover:bg-hiliteb/75 hover:text-hilitef cursor-pointer\";\nexport const HOVER_ICON = \"rounded p-1 hover:bg-primary/20 hover:text-hiliteb hover:ring-2 hover:ring-primary\";\nexport const HOVER_ICON_BG = \"rounded-2xl hover:bg-background/20 hover:text-hiliteb\";\n\nexport const PROSE_BASIC = \"prose dark:prose-invert sm:prose-sm lg:prose-lg xl:prose-xl\"; // 2xl:prose-2xl; // prose-green\nexport const PROSE = `${PROSE_BASIC} max-w-[80ch] mx-auto`;\n\n/** Generate a stripped background image style. */\nexport function stripes(backdrop = true, col1 = \"var(--color-stripes)\", col2 = \"var(--color-background)\", size = \"10px\") {\n  const grad = \"radial-gradient(transparent 0, var(--color-background) 75%) top left / 100% 100%\";\n  const rlg = `repeating-linear-gradient(45deg, ${col1} 0, ${col1} 1px, ${col2} 0, ${col2} 50%) top left / ${size} ${size}`;\n  return `background: ${grad}, ${rlg}; ${backdrop ? \"backdrop-filter: blur(1.25px);\" : \"\"}`;\n}\n\n/** Collect tailwind classes. Adding a semicolon at the end or start of a class string filters that string out. */\nexport function tw(...classes: (string | undefined | boolean | string[])[]): string {\n  return classes\n    .flat(5) // Arbirtrary depth to flatten \uD83E\uDD37\u200D\u2642 (in practice we don't really use more than 1 level).\n    .filter(s => typeof s === \"string\" && !/^;|;$/.test(s))\n    .join(\" \");\n}\n\n/** Allow classList.toggle with more than one class. */\nexport function toggleClasses(element: HTMLElement | null | undefined, classes: string | string[], check: boolean) {\n  if (!element) return;\n  const all = Array.isArray(classes) ? classes : classes.split(\" \");\n  for (const c of all) element.classList.toggle(c, check);\n}\n", "const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in props) {\n\t\tref = props.ref;\n\t\tdelete props.ref;\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (typeof normalizedProps[i] === 'undefined') {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + str + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities(value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n", "// From https://spectrum.adobe.com/page/icons/\n\nconst CSS = \"fill-current size-[1.5rem] sm:size-[1.75rem] lg:size-[2rem] xl:size-[2.25rem] 2xl:size-[2.5rem]\";\n\nexport const ABC = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Alphabetic</title>\n    <path d=\"M3.0805,8.3675,2.31,10.878c-.028.091-.0705.122-.154.122H.756c-.0845,0-.1125-.0455-.1-.15L3.5425,1.9285A2.51436,2.51436,0,0,0,3.669,1.107c0-.0615.028-.107.084-.107H5.7c.0705,0,.084.015.1.0915L9.0355,10.863c.0145.0915,0,.137-.084.137H7.381a.14051.14051,0,0,1-.1405-.0915L6.428,8.3675Zm2.9-1.6595c-.294-1.005-.9525-3.12-1.233-4.1855h-.014c-.224,1.02-.785,2.8-1.2045,4.1855Z\" />\n    <path d=\"M9.613,17c-.0565,0-.1125-.015-.1125-.122v-1.02a.346.346,0,0,1,.042-.1825l4.861-7.032H9.711c-.0705,0-.1125-.0145-.1-.106l.21-1.4155C9.835,7.031,9.877,7,9.9465,7H16.463c.069,0,.084.031.084.0915v1.096a.3265.3265,0,0,1-.0705.213L11.7,15.3415h5.015c.069,0,.1.0455.069.137l-.2235,1.4c-.0135.091-.042.122-.126.122Z\" />\n  </svg>\n);\n\nexport const RANKING = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Ranking</title>\n    <path d=\"M14.259,7.6a2.3635,2.3635,0,0,0,1.6805-2.2255c0-1.521-1.0885-2.625-3.0895-2.625a5.365,5.365,0,0,0-2.561.6245.13949.13949,0,0,0-.064.144V4.542c0,.064.0165.0795.0965.05A4.33146,4.33146,0,0,1,12.626,3.95c1.4085,0,2,.688,2,1.584,0,1.0245-.8645,1.569-2.273,1.569h-.591c-.08,0-.096.05-.096.112V8.223c0,.064.032.096.112.096h.672c1.5845,0,2.641.5765,2.641,1.857,0,1.009-.704,1.8725-2.4325,1.8725a7.11785,7.11785,0,0,1-2.497-.654,3.79252,3.79252,0,0,0,.3305-1.54,3.01569,3.01569,0,0,0-3.224-3.192A6.30249,6.30249,0,0,0,4.5,7.392V1.625a.375.375,0,0,0-.375-.375H3.379a.3735.3735,0,0,0-.3.15L1.65,2.545a.747.747,0,0,0-.15.45v.124a.375.375,0,0,0,.375.375H3v7.125a.375.375,0,0,0,.375.375h.75a.375.375,0,0,0,.375-.375V8.7775a5.26947,5.26947,0,0,1,2.516-.754c1.2735,0,2.05.6225,2.05,1.8765,0,.9625-.4695,1.8975-1.9,3.4775A24.53582,24.53582,0,0,1,4.6,15.897a.25.25,0,0,0-.0845.2095v.709c0,.161.106.1845.169.1845H10.575c.1185,0,.156-.0425.2-.15l.235-.9755a.135.135,0,0,0-.0175-.1215.17851.17851,0,0,0-.15-.05H8.669c-1.209,0-1.457,0-1.932.031a15.25015,15.25015,0,0,0,1.859-2.0125c.3735-.4585.6955-.874.9695-1.275a8.3231,8.3231,0,0,0,3.1085.805c2.161,0,3.7775-1.104,3.7775-3.073A2.611,2.611,0,0,0,14.259,7.6Z\" />\n  </svg>\n);\n\nexport const FULLCIRCLE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Circle</title>\n    <circle cx=\"9\" cy=\"9\" r=\"8\" />\n  </svg>\n);\n\nexport const SUN = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Sun</title>\n    <path d=\"m9,5.05c2.18152,0,3.95,1.76848,3.95,3.95s-1.76848,3.95-3.95,3.95-3.95-1.76848-3.95-3.95,1.76848-3.95,3.95-3.95Zm-.9-4.8v2.5c0,.13807.11193.25.25.25h1.3c.13807,0,.25-.11193.25-.25V.25c0-.13807-.11193-.25-.25-.25h-1.3c-.13807,0-.25.11193-.25.25Zm0,15v2.5c0,.13807.11193.25.25.25h1.3c.13807,0,.25-.11193.25-.25v-2.5c0-.13807-.11193-.25-.25-.25h-1.3c-.13807,0-.25.11193-.25.25ZM0,8.35v1.3c0,.13807.11193.25.25.25h2.5c.13807,0,.25-.11193.25-.25v-1.3c0-.13807-.11193-.25-.25-.25H.25c-.13807,0-.25.11193-.25.25Zm15,0v1.3c0,.13807.11193.25.25.25h2.5c.13807,0,.25-.11193.25-.25v-1.3c0-.13807-.11193-.25-.25-.25h-2.5c-.13807,0-.25.11193-.25.25Zm-2.01021-4.23913l.91924.91924c.09763.09763.25592.09763.35355,0l1.76777-1.76777c.09763-.09763.09763-.25592,0-.35355l-.91924-.91924c-.09763-.09763-.25592-.09763-.35355,0l-1.76777,1.76777c-.09763.09763-.09763.25592,0,.35355ZM1.98978,15.11121l.91924.91924c.09763.09763.25592.09763.35355,0l1.76777-1.76777c.09763-.09763.09763-.25592,0-.35355l-.91924-.91924c-.09763-.09763-.25592-.09763-.35355,0l-1.76777,1.76777c-.09763.09763-.09763.25592,0,.35355Zm-.01031-11.8587l1.76777,1.76777c.09763.09763.25592.09763.35355,0l.91924-.91924c.09763-.09763.09763-.25592,0-.35355l-1.76777-1.76777c-.09763-.09763-.25592-.09763-.35355,0l-.91924.91924c-.09763.09763-.09763.25592,0,.35355Zm10.9902,10.99001l1.76777,1.76777c.09763.09763.25592.09763.35355,0l.91924-.91924c.09763-.09763.09763-.25592,0-.35355l-1.76777-1.76777c-.09763-.09763-.25592-.09763-.35355,0l-.91924.91924c-.09763.09763-.09763.25592,0,.35355Z\" />\n  </svg>\n);\n\nexport const MOON = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Moon</title>\n    <path d=\"M9,1a8,8,0,1,0,8,8A8,8,0,0,0,9,1Zm.5,14.982c-.165.0115-.332.018-.5.018A7,7,0,0,1,9,2c.168,0,.335.0065.5.018A11,11,0,0,0,9.5,15.982Z\" />\n  </svg>\n);\n\nexport const MENU = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Menu</title>\n    <rect height=\"2\" rx=\"0.5\" width=\"14\" x=\"2\" y=\"8\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"14\" x=\"2\" y=\"3\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"14\" x=\"2\" y=\"13\" />\n  </svg>\n);\n\nexport const CLOSE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Close</title>\n    <path d=\"M13.2425,3.343,9,7.586,4.7575,3.343a.5.5,0,0,0-.707,0L3.343,4.05a.5.5,0,0,0,0,.707L7.586,9,3.343,13.2425a.5.5,0,0,0,0,.707l.707.7075a.5.5,0,0,0,.707,0L9,10.414l4.2425,4.243a.5.5,0,0,0,.707,0l.7075-.707a.5.5,0,0,0,0-.707L10.414,9l4.243-4.2425a.5.5,0,0,0,0-.707L13.95,3.343a.5.5,0,0,0-.70711-.00039Z\" />\n  </svg>\n);\n\nexport const FILTER = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Filter</title>\n    <path d=\"M15.473,1H1.527a.5.5,0,0,0-.3935.8085L7,9.2945V16.95a.496.496,0,0,0,.84.412l1.9905-2.0765A.60949.60949,0,0,0,10,14.864V9.2945l5.8665-7.486A.5.5,0,0,0,15.473,1Z\" />\n  </svg>\n);\n\nexport const FILTER_EDIT = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Filter Edit</title>\n    <path d=\"M17.8925,10.8605,16.14,9.1075A.36952.36952,0,0,0,15.8765,9H15.865a.41651.41651,0,0,0-.282.1235l-5.411,5.411a.304.304,0,0,0-.0765.128l-1.0135,3c-.0345.1145.1395.2585.238.2585a.15858.15858,0,0,0,.0185,0c.084-.0195,2.5615-.882,3-1.014a.3.3,0,0,0,.126-.0755l5.412-5.4145A.41749.41749,0,0,0,18,11.15.37152.37152,0,0,0,17.8925,10.8605Zm-5.8,5.4815c-.657.1975-1.65.6145-2.215.784l.78-2.2155Z\" />\n    <path d=\"M15.473,1H1.527a.5.5,0,0,0-.3935.8085L7,9.2945V15a.496.496,0,0,0,.84.4125L9.83,13.336a.61.61,0,0,0,.17-.4225V9.2945l5.8665-7.486A.5.5,0,0,0,15.473,1Z\" />\n  </svg>\n);\n\nexport const FILTER_CLOSE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Filter Close</title>\n    <path d=\"M13.5,9.05a4.45,4.45,0,1,0,4.45,4.45A4.45,4.45,0,0,0,13.5,9.05Zm2.913,6.1335a.25.25,0,0,1,0,.3535l-.876.876a.25.25,0,0,1-.3535,0L13.5,14.7295,11.8165,16.413a.25.25,0,0,1-.3535,0l-.876-.876a.25.25,0,0,1,0-.3535L12.2705,13.5,10.587,11.8165a.25.25,0,0,1,0-.3535l.876-.876a.25.25,0,0,1,.3535,0L13.5,12.2705l1.6835-1.6835a.25.25,0,0,1,.3535,0l.876.876a.25.25,0,0,1,0,.3535L14.7295,13.5Z\" />\n    <path d=\"M7.4,13.5A6.573,6.573,0,0,1,9,9.2945c1.0415-1.347,5.8665-7.486,5.8665-7.486A.5.5,0,0,0,14.473,1H.527a.5.5,0,0,0-.3935.8085L6,9.2945V16.95a.496.496,0,0,0,.84.4125L8.009,16.143A6.06548,6.06548,0,0,1,7.4,13.5Z\" />\n  </svg>\n);\n\nexport const BOOLEAN = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Boolean</title>\n    <path d=\"M12,4.25a4.75,4.75,0,0,1,0,9.5H6a4.75,4.75,0,0,1,0-9.5ZM12,3H6A6,6,0,0,0,6,15h6A6,6,0,0,0,12,3Zm0,3A3,3,0,1,1,9,9,3,3,0,0,1,12,6Z\" />\n  </svg>\n);\n\nexport const DELETE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Delete</title>\n    <path d=\"M15.75,3H12V2a1,1,0,0,0-1-1H6A1,1,0,0,0,5,2V3H1.25A.25.25,0,0,0,1,3.25v.5A.25.25,0,0,0,1.25,4h1L3.4565,16.55a.5.5,0,0,0,.5.45H13.046a.5.5,0,0,0,.5-.45L14.75,4h1A.25.25,0,0,0,16,3.75v-.5A.25.25,0,0,0,15.75,3ZM5.5325,14.5a.5.5,0,0,1-.53245-.46529L5,14.034l-.5355-8a.50112.50112,0,0,1,1-.067l.5355,8a.5.5,0,0,1-.46486.53283ZM9,14a.5.5,0,0,1-1,0V6A.5.5,0,0,1,9,6ZM11,3H6V2h5Zm1,11.034a.50112.50112,0,0,1-1-.067l.5355-8a.50112.50112,0,1,1,1,.067Z\" />\n  </svg>\n);\n\nexport const DESELECT = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Reset Selection</title>\n    <path d=\"m2,9h1v3h-1v-3Zm1,6v-1h-1v1.5555c0,.24549.19901.4445.4445.4445h1.5555v-1h-1Zm3,1h3v-1h-3v1Zm9-7h1v-3h-1v3Zm.5555-7h-1.5555v1h1v1h1v-1.5555c0-.24549-.19901-.4445-.4445-.4445Zm-6.5555,1h3v-1h-3v1ZM1.10295,1.97065l14.92632,14.92632c.15973.15973.41869.15972.57841,0l.28956-.28956c.15972-.15972.15973-.41869,0-.57841L1.97092,1.10268c-.15972-.15972-.41869-.15972-.57841,0l-.28956.28956c-.15972.15972-.15972.41869,0,.57841Zm14.89705,11.74835v-2.719h-1v1.719l1,1Zm-3.282,1.281h-1.718v1h2.718l-1-1ZM2,4.281v2.719h1v-1.719l-1-1Zm3.281-1.281h1.719v-1h-2.719l1,1Z\" />\n  </svg>\n);\n\nexport const LINKOUT = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Link Out</title>\n    <path d=\"M11.77,1.4265l1.6945,1.695-4.773,4.773a.25.25,0,0,0,0,.3535L9.75,9.3085a.25.25,0,0,0,.3535,0l4.773-4.773L16.571,6.23A.25.25,0,0,0,17,6.0535V1H11.9465a.25.25,0,0,0-.1765.4265Z\" />\n  </svg>\n);\n\nexport const SORT_DOWN = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Sort Down</title>\n    <rect id=\"Canvas\" fill=\"#ff13dc\" opacity=\"0\" width=\"18\" height=\"18\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"6\" x=\"1\" y=\"12\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"8\" x=\"1\" y=\"8\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"10\" x=\"1\" y=\"4\" />\n    <path d=\"M16,12H14.9965V4.5a.494.494,0,0,0-.488-.5L14.503,4h-.496a.5.5,0,0,0-.5.5L13.5035,12H12.5a.25.25,0,0,0-.25.25.245.245,0,0,0,.0735.175l1.7685,2.0165a.25.25,0,0,0,.316,0l1.7685-2.0165a.245.245,0,0,0,.0735-.175A.25.25,0,0,0,16,12Z\" />\n  </svg>\n);\n\nexport const SORT_UP = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Sort Up</title>\n    <rect height=\"2\" rx=\"0.5\" width=\"6\" x=\"1\" y=\"4\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"8\" x=\"1\" y=\"8\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"10\" x=\"1\" y=\"12\" />\n    <path d=\"M15.99951,6H14.99634v7.5a.49378.49378,0,0,1-.49317.5h-.49633a.5.5,0,0,1-.5-.49951L13.50366,6H12.50049A.24984.24984,0,0,1,12.25,5.74823a.24439.24439,0,0,1,.07373-.175L14.0918,3.5564a.25007.25007,0,0,1,.3164,0l1.76807,2.01684a.24439.24439,0,0,1,.07373.175A.24984.24984,0,0,1,15.99951,6Z\" />\n  </svg>\n);\n\nexport const SEARCH = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Search</title>\n    <rect id=\"Canvas\" fill=\"#ff13dc\" opacity=\"0\" width=\"18\" height=\"18\" />\n    <path d=\"M16.5865,15.107,12.7,11.2215A6.413,6.413,0,1,0,11.2215,12.7l3.886,3.886a1.05,1.05,0,0,0,1.479-1.479ZM3,7.5A4.5,4.5,0,1,1,7.5,12,4.5,4.5,0,0,1,3,7.5Z\" />\n  </svg>\n);\n\nexport const LANGUISH = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Languish Language Rankings</title>\n    <path d=\"M16.5465,3.0305l-4.07,5.687L10.45,4.6605a.25.25,0,0,0-.4585.0265l-2.725,7.496L5.226,10.1425a.25.25,0,0,0-.337-.0155L1.09,13.2895a.25.25,0,0,0-.09.192v2.094a.25.25,0,0,0,.4145.188l3.524-3.0785,2.854,2.854a.25.25,0,0,0,.4115-.0915l2.274-6.255L12,12.2405a.25.25,0,0,0,.4285.0315L16.955,5.808A.25.25,0,0,0,17,5.665V3.176a.25.25,0,0,0-.4535-.1455Z\" />\n  </svg>\n);\n\n//--------------------------------------------------------------------------------\n// Icons from Font Awesome Free 6.7.1\n// https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.\n\nexport const HOME = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\" class={CSS}>\n    <title>Home</title>\n    <path d=\"M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z\" />\n  </svg>\n);\n\n// GITHUB\nexport const GITHUB = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 16 480 384\" class={CSS}>\n    <title>Github</title>\n    <path d=\"M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z\" />\n  </svg>\n);\n\n// REDDIT\nexport const REDDIT = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 32 512 448\" class={CSS}>\n    <title>Reddit</title>\n    <path d=\"M373 138.6c-25.2 0-46.3-17.5-51.9-41l0 0c-30.6 4.3-54.2 30.7-54.2 62.4l0 .2c47.4 1.8 90.6 15.1 124.9 36.3c12.6-9.7 28.4-15.5 45.5-15.5c41.3 0 74.7 33.4 74.7 74.7c0 29.8-17.4 55.5-42.7 67.5c-2.4 86.8-97 156.6-213.2 156.6S45.5 410.1 43 323.4C17.6 311.5 0 285.7 0 255.7c0-41.3 33.4-74.7 74.7-74.7c17.2 0 33 5.8 45.7 15.6c34-21.1 76.8-34.4 123.7-36.4l0-.3c0-44.3 33.7-80.9 76.8-85.5C325.8 50.2 347.2 32 373 32c29.4 0 53.3 23.9 53.3 53.3s-23.9 53.3-53.3 53.3zM157.5 255.3c-20.9 0-38.9 20.8-40.2 47.9s17.1 38.1 38 38.1s36.6-9.8 37.8-36.9s-14.7-49.1-35.7-49.1zM395 303.1c-1.2-27.1-19.2-47.9-40.2-47.9s-36.9 22-35.7 49.1c1.2 27.1 16.9 36.9 37.8 36.9s39.3-11 38-38.1zm-60.1 70.8c1.5-3.6-1-7.7-4.9-8.1c-23-2.3-47.9-3.6-73.8-3.6s-50.8 1.3-73.8 3.6c-3.9 .4-6.4 4.5-4.9 8.1c12.9 30.8 43.3 52.4 78.7 52.4s65.8-21.6 78.7-52.4z\" />\n  </svg>\n);\n\n// Wikipedia\nexport const WIKIPEDIA = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 413\" class={CSS}>\n    <title>Wikipedia</title>\n    <path d=\"M640 51.2l-.3 12.2c-28.1 .8-45 15.8-55.8 40.3-25 57.8-103.3 240-155.3 358.6H415l-81.9-193.1c-32.5 63.6-68.3 130-99.2 193.1-.3 .3-15 0-15-.3C172 352.3 122.8 243.4 75.8 133.4 64.4 106.7 26.4 63.4 .2 63.7c0-3.1-.3-10-.3-14.2h161.9v13.9c-19.2 1.1-52.8 13.3-43.3 34.2 21.9 49.7 103.6 240.3 125.6 288.6 15-29.7 57.8-109.2 75.3-142.8-13.9-28.3-58.6-133.9-72.8-160-9.7-17.8-36.1-19.4-55.8-19.7V49.8l142.5 .3v13.1c-19.4 .6-38.1 7.8-29.4 26.1 18.9 40 30.6 68.1 48.1 104.7 5.6-10.8 34.7-69.4 48.1-100.8 8.9-20.6-3.9-28.6-38.6-29.4 .3-3.6 0-10.3 .3-13.6 44.4-.3 111.1-.3 123.1-.6v13.6c-22.5 .8-45.8 12.8-58.1 31.7l-59.2 122.8c6.4 16.1 63.3 142.8 69.2 156.7L559.2 91.8c-8.6-23.1-36.4-28.1-47.2-28.3V49.6l127.8 1.1 .2 .5z\" />\n  </svg>\n);\n\n// Stack Overflow\nexport const STACKOV = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"3 32 379 448\" class={CSS}>\n    <title>Stack Overflow</title>\n    <path d=\"M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z\" />\n  </svg>\n);\n\nexport const EXTERN = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" class={CSS}>\n    <title>External Link</title>\n    <path d=\"M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l82.7 0L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3l0 82.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-17.7-14.3-32-32-32L320 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z\" />\n  </svg>\n);\n", "import type { PlangsPage } from \"@plangs/server/components/layout\";\n\nexport type StorageKey =\n  /** Light/Dark mode. */\n  | \"theme\"\n  /** Show/Hide the hamburguer menu. */\n  | \"hamburger-menu\"\n  /** Show/Hide Facets Browser. */\n  | \"facets-browser\"\n  /** Last facets value, saved between page switching. */\n  | \"facet-value\"\n  /** Name of the last open group on the facets browser. */\n  | \"facets-last-group\"\n  /** Last Vertex displayed on a {@link VertexInfo} component. */\n  | \"vertex-detail\"\n  /** Whether the VertexInfo component is open. */\n  | \"vertex-detail-open\";\n\n// Alias to avoid errors if server side rendering is used.\nconst stapi = (typeof localStorage === \"undefined\" ? undefined : localStorage) as Storage | undefined;\nconst doc = (typeof document === \"undefined\" ? undefined : document) as Document;\n\nexport const getStore = (page: PlangsPage) => new Store(page);\nexport const getCurrentPage = () => ((doc ? doc.body.dataset.page : undefined) ?? \"_any_page_\") as PlangsPage;\nexport const getCurrentPageStore = () => getStore(getCurrentPage());\n\n/**\n * Wrapper for localStorage.\n * * Ensures we use different keys per page.\n * * Serializes/deserializes data to/from JSON.\n */\nexport class Store {\n  constructor(readonly page: PlangsPage) {}\n\n  // biome-ignore lint/suspicious/noExplicitAny: JSON can serialize any data.\n  update(key: StorageKey, data: any): void {\n    const fk = this.fullKey(key);\n    stapi?.setItem(fk, JSON.stringify(data));\n  }\n\n  // biome-ignore lint/suspicious/noExplicitAny: JSON can deserialize any data.\n  load(key: StorageKey): any {\n    const fk = this.fullKey(key);\n    const jsonString = stapi?.getItem(fk);\n    if (!jsonString) return undefined;\n    try {\n      return JSON.parse(jsonString);\n    } catch (e) {\n      console.error(\"Failed to load data from localStorage\", { key: fk, jsonString, e });\n      stapi?.removeItem(fk);\n    }\n  }\n\n  private fullKey(key: StorageKey): string {\n    return `plangs-${this.page}-${key}`;\n  }\n}\n", "import type { ComponentChild } from \"preact\";\n\nimport { Dispatchable, useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { data, elem, elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { ABC, BOOLEAN, CLOSE, DESELECT, FILTER_EDIT, MENU, MOON, RANKING, SUN } from \"@plangs/frontend/auxiliar/icons\";\nimport { HOVER_ICON_BG, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { FacetsMainElement } from \"@plangs/frontend/facets/main\";\n\nimport { getCurrentPageStore, getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport type { IconButtonProps } from \"./icon-button\";\n\nexport type IconButtonState = ToggleLights | ToggleHamburguer | ToggleFacetsMenu | ToggleAllAny | ToggleClearFacets | ToggleGridOrder | undefined;\n\nexport function useIconButtonState({ action, disabled, initial }: IconButtonProps): IconButtonState {\n  if (action === \"lights\") return useDispatchable(() => ToggleLights.initial(disabled));\n  if (action === \"hamburger\") return useDispatchable(() => ToggleHamburguer.initial(disabled));\n  if (action === \"facets\") return useDispatchable(() => ToggleFacetsMenu.initial(disabled));\n  if (action === \"allAny\") return useDispatchable(() => ToggleAllAny.initial(initial, disabled));\n  if (action === \"clearFacets\") return useDispatchable(() => ToggleClearFacets.initial(disabled));\n  if (action === \"gridOrder\") return useDispatchable(() => ToggleGridOrder.initial(disabled));\n  console.error(`Unknown action: ${action}`);\n}\n\nabstract class IconButtonBaseState<T> extends Dispatchable<T & { disabled: boolean }> {\n  abstract doAction(): void;\n\n  /** Side effects handler, if any. */\n  abstract runEffects(): void;\n\n  abstract get icon(): ComponentChild;\n\n  get disabled(): boolean {\n    return this.data.disabled;\n  }\n\n  set disabled(value: boolean) {\n    this.data.disabled = value;\n  }\n\n  get value() {\n    const { disabled, ...data } = this.data;\n    return data;\n  }\n\n  get hilight(): boolean {\n    return false;\n  }\n}\n\nconst STORE = getStore(\"_any_page_\");\n\n/** State for a dark/ligh mode button */\nexport class ToggleLights extends IconButtonBaseState<{ mode: \"dark\" | \"light\" }> {\n  static initial(disabled = false) {\n    const theme = STORE.load(\"theme\");\n    return new ToggleLights({ mode: theme === \"light\" ? \"light\" : \"dark\", disabled });\n  }\n\n  get isDark(): boolean {\n    return this.data.mode === \"dark\";\n  }\n\n  override get icon() {\n    return this.isDark ? SUN : MOON;\n  }\n\n  override doAction() {\n    this.data.mode = this.isDark ? \"light\" : \"dark\";\n  }\n\n  override runEffects() {\n    document.body.classList.toggle(\"dark\", this.isDark);\n    STORE.update(\"theme\", this.data.mode);\n  }\n}\n\n/** State for a \"hamburguer\" menu. */\nexport class ToggleHamburguer extends IconButtonBaseState<{ mode: \"show\" | \"hide\" }> {\n  static initial(disabled = false) {\n    const mode = STORE.load(\"hamburger-menu\");\n    return new ToggleHamburguer({ mode: mode === \"show\" ? \"show\" : \"hide\", disabled });\n  }\n\n  get hide(): boolean {\n    return this.data.mode === \"hide\";\n  }\n\n  override get icon() {\n    return this.hide ? MENU : CLOSE;\n  }\n\n  override doAction() {\n    this.data.mode = this.hide ? \"show\" : \"hide\";\n  }\n\n  override runEffects() {\n    elem(\"mainNav\")?.classList.toggle(\"hidden\", this.hide);\n    STORE.update(\"hamburger-menu\", this.data.mode);\n  }\n}\n\n/** State for the facets menu. */\nexport class ToggleFacetsMenu extends IconButtonBaseState<{ mode: \"show\" | \"hide\" }> {\n  static initial(disabled = false) {\n    const mode = getCurrentPageStore().load(\"facets-browser\");\n    return new ToggleFacetsMenu({ mode: mode === \"show\" ? \"show\" : \"hide\", disabled });\n  }\n\n  override get hilight(): boolean {\n    return this.show;\n  }\n\n  get show(): boolean {\n    return this.data.mode === \"show\";\n  }\n\n  override get icon() {\n    return FILTER_EDIT;\n  }\n\n  override doAction() {\n    this.data.mode = this.show ? \"hide\" : \"show\";\n  }\n\n  override runEffects() {\n    const fm = elems(\"facetsMain\");\n    if (fm.length > 0) fm[0].classList.toggle(\"hidden\", !this.show);\n    getCurrentPageStore().update(\"facets-browser\", this.data.mode);\n  }\n}\n\n/** State for toggling between \"and\" and \"all\" modes. */\nexport class ToggleAllAny extends IconButtonBaseState<{ mode: \"all\" | \"any\" }> {\n  static initial(initial: string | undefined, disabled = false) {\n    return new ToggleAllAny({ mode: initial === \"all\" ? \"all\" : \"any\", disabled });\n  }\n\n  get mode(): \"all\" | \"any\" {\n    return this.data.mode;\n  }\n\n  override get icon() {\n    const disabled = this.data.disabled;\n\n    const shadeAll = disabled || this.mode === \"any\";\n    const shadeAny = disabled || this.mode === \"all\";\n\n    return (\n      <span class={tw(\"px-1\", \"flex flex-row gap-1\", \"items-center\", \"align-middle\")}>\n        <span class={tw(shadeAll && \"opacity-50\", \"whitespace-nowrap\")}>All</span>\n        <span class={tw(\"inline-block\", \"mt-[1px] px-1\", \"scale-85\", this.mode === \"all\" && \"rotate-180\", !disabled && HOVER_ICON_BG)}>\n          {BOOLEAN}\n        </span>\n        <span class={tw(shadeAny && \"opacity-50\", \"whitespace-nowrap\")}>Any</span>\n      </span>\n    );\n  }\n\n  override doAction() {\n    this.data.mode = this.mode === \"all\" ? \"any\" : \"all\";\n  }\n\n  override runEffects() {\n    // nada.\n  }\n}\n\n/** State for clearing any selection from the facets menu. */\nexport class ToggleClearFacets extends IconButtonBaseState<{ mode: \"clearFacets\" | \"\" }> {\n  static initial(disabled = false) {\n    return new ToggleClearFacets({ disabled, mode: \"\" });\n  }\n\n  override get icon() {\n    return this.data.mode === \"clearFacets\" ? DESELECT : null;\n  }\n\n  override doAction() {\n    this.data.mode = \"\";\n  }\n\n  doToggleMode(mode: \"clearFacets\" | \"\") {\n    this.data.mode = mode;\n    this.dispatch();\n  }\n\n  override runEffects() {\n    for (const el of elems<FacetsMainElement>(\"facetsMain\")) el.state?.doResetAll();\n  }\n}\n\n/** State for toggling order of thumbnails between ranking and alphabetical. */\nexport class ToggleGridOrder extends IconButtonBaseState<{ mode: \"alpha\" | \"ranking\" }> {\n  static initial(disabled = false) {\n    return new ToggleGridOrder({ disabled, mode: \"alpha\" });\n  }\n\n  get mode(): \"alpha\" | \"ranking\" {\n    return this.data.mode;\n  }\n\n  override get icon() {\n    return this.mode === \"alpha\" ? ABC : RANKING;\n  }\n\n  override doAction() {\n    this.data.mode = this.mode === \"alpha\" ? \"ranking\" : \"alpha\";\n  }\n\n  /** Reorder the grid on dispatch. */\n  override runEffects() {\n    const grid = elem(\"vertexGrid\");\n    if (!grid) return;\n    const thumbns = [...elems(\"vertexThumbn\")].sort(CMP[this.mode]);\n    for (const thumb of thumbns) {\n      grid.appendChild(thumb); // Re-appending without removing just reorders the element.\n    }\n  }\n}\n\n// Ensure languages without a ranking are placed last.\nconst RANKED_LAST = Number.MAX_SAFE_INTEGER;\n\nconst getRank = (el: HTMLElement) => {\n  const ranking = data(el, \"vertex-ranking\");\n  return ranking ? Number.parseInt(ranking) : RANKED_LAST;\n};\n\nconst getKey = (el: HTMLElement) => el.dataset.vertexKey ?? \"\";\n\n// Ordering criteria for the sort function.\nconst CMP = {\n  ranking: (elA: HTMLElement, elB: HTMLElement) => getRank(elA) - getRank(elB),\n  alpha: (elA: HTMLElement, elB: HTMLElement) => getKey(elA).localeCompare(getKey(elB)),\n} as const;\n", "import type { Ref } from \"preact\";\nimport { useEffect } from \"preact/hooks\";\n\nimport { useRootState } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { customEvent, send } from \"@plangs/frontend/auxiliar/events\";\nimport { HOVER_ICON, tw } from \"@plangs/frontend/auxiliar/styles\";\n\nimport { cssClass } from \"@plangs/server/elements\";\nimport { useIconButtonState } from \"./state\";\n\nexport type IconButtonProps = {\n  action: \"facets\" | \"clearFacets\" | \"hamburger\" | \"lights\" | \"allAny\" | \"gridOrder\";\n  disabled?: boolean;\n  initial?: string;\n};\n\nexport function IconButton({ action, disabled, initial }: IconButtonProps) {\n  const state = useIconButtonState({ action, disabled, initial });\n  const self = useRootState(state);\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: state is not a dependency since it is a dispatchable.\n  useEffect(() => {\n    if (!state) return;\n\n    const newval = disabled === undefined ? false : disabled;\n    if (newval !== state.disabled) {\n      state.disabled = newval;\n      state.dispatch();\n    }\n  }, [disabled]);\n\n  const toggle = () => {\n    if (!state) return;\n\n    state.doAction();\n    state.runEffects();\n    state.dispatch();\n\n    send(self.current, customEvent(\"icon-button\", state.value));\n  };\n\n  return (\n    <div\n      ref={self as Ref<HTMLDivElement>}\n      tabIndex={disabled ? undefined : 0}\n      {...onClickOnEnter(toggle)}\n      class={tw(\n        \"group\",\n        disabled ? \"cursor-auto opacity-50\" : \"cursor-pointer\",\n        state?.hilight && \"ring-1 ring-primary\",\n        action !== \"allAny\" && HOVER_ICON,\n      )}>\n      {state?.icon}\n    </div>\n  );\n}\n", "import { render } from \"preact\";\n\nimport { elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { type CLKey, cssClass } from \"@plangs/server/elements\";\n\nimport { IconButton, type IconButtonProps } from \"./icon-button\";\n\nconst CL: CLKey = \"iconButton\";\n\n/** Server side container for the Component. */\nexport function iconButton(action: IconButtonProps[\"action\"]) {\n  return (\n    <div id={`icon-button-${action}`} data-action={action} class={cssClass(\"iconButton\")}>\n      {/* Render the icon server-side to reduce flickering when enabling the icons. */}\n      <IconButton action={action} />\n    </div>\n  );\n}\n\n/** Find all component containers and render them. */\nexport function activateIconButtons() {\n  for (const elem of elems(\"iconButton\")) {\n    if (elem.dataset.action) {\n      const action = elem.dataset.action as IconButtonProps[\"action\"];\n      render(<IconButton action={action} />, elem);\n    } else {\n      console.error(\"Missing prop for IconButton component.\");\n    }\n  }\n}\n", "import { tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { ComponentChildren } from \"preact\";\n\nexport function Pill({ children, title }: { title?: string; children: ComponentChildren }) {\n  return (\n    // shadow-md inset-shadow-sm inset-shadow-white/20 ring ring-blue-600 inset-ring inset-ring-white/15\n    <div\n      {...(title ? { title } : {})}\n      class={tw(\n        \"inline-flex items-center\",\n        \"mr-4 mb-3 h-8 px-2\",\n        \"border-1 border-foreground/25\",\n        \"rounded-tl-2xl rounded-br-2xl\",\n        \"bg-secondary/75 text-foreground/85\",\n        \"overflow-ellipsis whitespace-nowrap\",\n      )}>\n      {children}\n    </div>\n  );\n}\n", "import { h } from \"preact\";\n\nimport { type DataKey, dataKey } from \"@plangs/server/elements\";\n\nexport const script = (src: string) => rawTag(\"script\", src);\nexport const style = (src: string) => rawTag(\"style\", src);\nexport const rawTag = (tag: \"script\" | \"style\", __html: string) => h(tag, { dangerouslySetInnerHTML: { __html } });\n\n/** Generate a record of data attributes to embed in an react component. Skeip falsey values. */\nexport function dataset(data: Record<DataKey, string | number | boolean | undefined>): Record<string, string> {\n  const entries = Object.entries(data)\n    .filter(([, value]) => {\n      if (typeof value === \"boolean\") return value;\n      if (typeof value === \"string\") return !!value;\n      if (typeof value === \"number\") return value;\n      return false;\n    })\n    .map(([key, value]) => [dataKey(key as DataKey), `${value}`]);\n  return Object.fromEntries(entries);\n}\n", "import type { ComponentChildren } from \"preact\";\n\nimport { VSCROLL, stripes, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { iconButton } from \"@plangs/frontend/components/icon-button\";\nimport { cssID } from \"@plangs/server/elements\";\nimport { script } from \"@plangs/server/utils/html\";\n\nimport type { TPlangsVertexName } from \"@plangs/plangs/graph/generated\";\nimport { MainNav } from \"./main-nav\";\nimport { PlangsLogo } from \"./plangs-logo\";\n\nexport type PageType = \"grid\" | \"other\";\nexport type PlangsPage =\n  | TPlangsVertexName\n  | \"_any_page_\"\n  | \"about\"\n  | \"apps\"\n  | \"blog\"\n  | \"communities\"\n  | \"libraries\"\n  | \"licenses\"\n  | \"paradigms\"\n  | \"plangs\"\n  | \"platforms\"\n  | \"subsystem\"\n  | \"subsystems\"\n  | \"tags\"\n  | \"tools\"\n  | \"typesystems\"\n  | \"NA\";\n\nexport const GRID_PAGES: Set<PlangsPage> = new Set([\"plangs\", \"tools\", \"apps\", \"libraries\", \"subsystems\", \"communities\", \"learning\"]);\n\ntype LayoutProps = {\n  page: PlangsPage;\n  pageType?: \"grid\" | \"other\";\n  title?: string;\n  desc?: string;\n  mainClasses?: string;\n  children: ComponentChildren;\n};\n\nexport function Layout({ page, pageType, title, desc, mainClasses, children }: LayoutProps) {\n  return (\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"utf-8\" />\n        <title>{title ? `Plangs! - ${title}` : \"Plangs!\"}</title>\n        <meta name=\"description\" content={desc ?? title} />\n        <script src=\"/bundle/app.js\" />\n\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <link rel=\"stylesheet\" href=\"/bundle/app.css\" />\n        <link type=\"image/png\" rel=\"apple-touch-icon\" sizes=\"192x192\" href=\"/icons/icon-192x192.png\" />\n        <link type=\"image/png\" rel=\"icon\" sizes=\"192x192\" href=\"/icons/icon-192x192.png\" />\n        <link type=\"image/png\" rel=\"icon\" sizes=\"72x72\" href=\"/icons/icon-72x72.png\" />\n        <link rel=\"manifest\" href=\"/manifest.json\" />\n      </head>\n      <body\n        data-page={page}\n        style={stripes()}\n        class={tw(\"dark\", \"h-dvh w-full\", \"flex flex-col flex-nowrap\", \"bg-background text-foreground\", \"overflow-hidden\")}>\n        {script(\"window.restoreLightMode()\")}\n\n        <noscript class={tw(\"border-primary border-b-1\", \"bg-background\", \"p-2 text-center\")}>\n          <strong>Note!</strong>\n          This site requires JavaScript for the best experience. In particular, the search feature will not work without JavaScript.\n        </noscript>\n\n        <header class={tw(\"pt-4 pb-2\", \"flex flex-col\", \"bg-linear-to-b from-secondary to-background\")} style={stripes(false)}>\n          <PlangsLogo class={tw(\"sm:mt-4\", \"h-12 sm:h-16 lg:h-20 xl:h-24\", \"short:hidden\")} />\n          <div class={tw(\"px-2 sm:px-4\", \"flex flex-row\", \"gap-4\", \"items-center justify-between\", \"text-primary\")}>\n            {iconButton(\"hamburger\")}\n            {pageType === \"grid\" && iconButton(\"facets\")}\n            {page === \"plangs\" && iconButton(\"gridOrder\")}\n            {pageType === \"grid\" && iconButton(\"clearFacets\")}\n            <div class=\"short:hidden flex-1\" />\n            <PlangsLogo class={tw(\"short:block hidden\", \"h-10 flex-1\")} />\n            {iconButton(\"lights\")}\n          </div>\n        </header>\n\n        <div class={tw(\"flex-1\", \"flex flex-row\", \"overflow-y-auto\")}>\n          <MainNav page={page} class={tw(\"sm:static\", \"z-20\", \"w-[12rem]\", VSCROLL)} />\n          <main id={cssID(\"mainContent\")} class={tw(\"flex-1\", mainClasses)}>\n            {children}\n          </main>\n        </div>\n      </body>\n    </html>\n  );\n}\n", "import type { JSX } from \"preact/jsx-runtime\";\n\nimport { HOVER, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { VertexDetail } from \"@plangs/plangs/graph/vertex_base\";\nimport { cssClass } from \"@plangs/server/elements\";\nimport { dataset } from \"@plangs/server/utils/html\";\n\nconst PLACEHOLDER = \"/images/placeholder.png\";\n\nexport function VertexThumbn({ detail, onlyImg, class: klass }: { class?: string; onlyImg?: boolean; detail: VertexDetail }): JSX.Element {\n  return (\n    <div\n      {...dataset({ \"vertex-key\": detail.key, \"vertex-name\": detail.vertexName, \"vertex-ranking\": detail.ranking })}\n      class={tw(cssClass(\"vertexThumbn\"), \"group\", !onlyImg && \"cursor-pointer\", klass)}>\n      {!onlyImg && (\n        <div class=\"truncate text-center\">\n          <a class=\"text-foreground group-hover:text-primary\" href={detail.href}>\n            {detail.name}\n          </a>\n        </div>\n      )}\n      <div\n        class={tw(\n          \"relative\",\n          \"p-4\",\n          \"aspect-square overflow-hidden\",\n          \"flex items-center justify-center\",\n          \"bg-thumbnails\",\n          \"border-1 border-primary\",\n          \"shadow-background shadow-lg group-hover:shadow-md group-hover:shadow-primary\",\n        )}>\n        <img\n          loading=\"lazy\"\n          src={onlyImg ? (detail.thumbUrl ?? PLACEHOLDER) : PLACEHOLDER}\n          alt={detail.name}\n          data-src={detail.thumbUrl ?? \"\"}\n          class={tw(cssClass(\"vertexThumbnImg\"), \"max-h-full max-w-full object-contain\")}\n        />\n        {\"ranking\" in detail && detail.ranking && (\n          <div\n            title={`Languish Ranking: ${detail.ranking}`}\n            class={tw(\n              \"block\",\n              // ALlow hiding the ranking using a data attribute on the wrapper.\n              \"group-[[data-hide-ranking='1']]:hidden\",\n              \"-bottom-1 absolute right-0\",\n              \"p-1 text-primary text-xs\",\n              \"rounded opacity-50\",\n              HOVER,\n              \"hover:border-1 hover:border-primary hover:opacity-100\",\n            )}>\n            {detail.ranking}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n", "import type { ComponentChildren, JSX } from \"preact\";\nimport { useEffect, useRef } from \"preact/hooks\";\n\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { EXTERN, GITHUB, LANGUISH, REDDIT, STACKOV, WIKIPEDIA } from \"@plangs/frontend/auxiliar/icons\";\nimport { getCurrentPageStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { BORDER, HOVER_ICON, PROSE_BASIC, VSCROLL, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { Pill } from \"@plangs/frontend/components/misc/pill\";\nimport type { VertexDetail } from \"@plangs/plangs/graph/vertex_base\";\nimport { GRID_PAGES, type PlangsPage } from \"@plangs/server/components/layout\";\nimport { VertexThumbn } from \"@plangs/server/components/vertex-thumbn\";\nimport { cssClass } from \"@plangs/server/elements\";\n\nexport type VertexInfoProps = {\n  page: PlangsPage;\n  open?: boolean;\n  detail?: VertexDetail;\n};\n\n/** Display Vertex. */\nexport function VertexInfo({ detail, open, page }: VertexInfoProps) {\n  const self = useRef<HTMLDivElement>(null);\n\n  // Remember the open state.\n  const store = getCurrentPageStore();\n  const updateOpen = () => {\n    const elem = self.current?.querySelector<HTMLDetailsElement>(\"details\");\n    // The event happens before the default action of the element, so we need to invert the value.\n    if (elem) store.update(\"vertex-detail-open\", !elem.open);\n  };\n\n  useEffect(() => {\n    if (!self.current) return;\n\n    // Make sure the title is visible.\n    self.current.querySelector(\"h2\")?.scrollIntoView({ behavior: \"smooth\", block: \"end\" });\n\n    const links = self.current.querySelectorAll(`.${cssClass(\"externalLink\")}`);\n    if (links.length === 0) return;\n    for (const [i, el] of links.entries()) {\n      el.classList.add(\"scale-0\");\n      setTimeout(() => el.classList.remove(\"scale-0\"), 50 + (i + 1) * 50);\n    }\n  });\n\n  const forGrid = GRID_PAGES.has(page);\n  return (\n    <div ref={self} class={tw(VSCROLL, forGrid && \"p-4\", !forGrid && \"sm:mb-16\", PROSE_BASIC, \"max-w-[unset]\")}>\n      {!detail && (\n        <div>\n          <h2 class={tw(\"mt-0!\")}>Information</h2>\n          <p>\n            <strong class=\"text-primary\">Click</strong> a thumbnail for more info.\n          </p>\n        </div>\n      )}\n      {detail && (\n        <div>\n          <h2 class={tw(\"mt-0!\", forGrid && \"inline sm:block\")}>\n            {!forGrid && (\n              <div class={tw(\"float-right ml-2 p-4\", tw(BORDER, \"border-1\"))}>\n                <VertexThumbn detail={detail} onlyImg={true} class=\"size-24\" />\n              </div>\n            )}\n            <a class=\"text-primary\" href={detail.href}>\n              {detail.name}\n            </a>\n          </h2>\n          <div class=\"-mx-1 flex flex-row gap-1 align-middle\">\n            {ret(detail.urlHome, url => url && <IconLink href={url} icon={EXTERN} />)}\n            {ret(detail.urlLanguish, url => url && <IconLink href={url} icon={LANGUISH} title={`#${detail.ranking} on Languish`} />)}\n            {ret(detail.urlGithub, url => url && <IconLink href={url} icon={GITHUB} />)}\n            {ret(detail.urlWikipedia, url => url && <IconLink href={url} icon={WIKIPEDIA} />)}\n            {ret(detail.urlStackov, url => url && <IconLink href={url} icon={STACKOV} />)}\n            {ret(detail.urlReddit, url => url && <IconLink href={url} icon={REDDIT} />)}\n          </div>\n          <p class={tw(forGrid && \"inline sm:block\", \"hyphens-auto\")}>{forGrid ? detail.shortDesc : detail.description}</p>\n        </div>\n      )}\n      {detail && detail.relations.length > 0 && (\n        <details class={tw(forGrid && \"hidden sm:block\", \"overflow-hidden\", !forGrid && tw(\"p-4\"))} open={open}>\n          <summary class=\"cursor-pointer text-primary\" {...onClickOnEnter(updateOpen)}>\n            Details\n          </summary>\n          <div class={tw(forGrid ? \"flex flex-col\" : \"grid grid-cols-[auto_1fr]\", \"sm:gap-4\", \"sm:p-4\")}>\n            {detail.general.length > 0 && (\n              <RelationCell title=\"General\">\n                {detail.general.map(item => (\n                  <Pill title={item.title} key={item}>\n                    {item.kind === \"text\" ? (\n                      item.value\n                    ) : (\n                      <a href={item.href} class={tw(\"inline-flex flex-row items-center align-middle\")}>\n                        <span>{item.value}</span>\n                        <span class={tw(\"inline-block scale-50\", \"rounded\")}>{EXTERN}</span>\n                      </a>\n                    )}\n                  </Pill>\n                ))}\n              </RelationCell>\n            )}\n            {detail.relations.map(([title, vertices]) => (\n              <RelationCell key={title} title={title}>\n                {vertices.map(vertex => (\n                  <Pill key={vertex.name}>\n                    <a href={vertex.href}>{vertex.name}</a>\n                  </Pill>\n                ))}\n              </RelationCell>\n            ))}\n          </div>\n        </details>\n      )}\n    </div>\n  );\n}\n\nfunction IconLink({ href, icon, title }: { href: string; icon: JSX.Element; title?: string }) {\n  return (\n    <a\n      {...(title ? { title } : {})}\n      href={href}\n      class={tw(cssClass(\"externalLink\"), \"inline-block aspect-square\", \"transition-transform\", \"text-primary\")}>\n      <div class={tw(\"inline-block scale-75\", HOVER_ICON)}>{icon}</div>\n    </a>\n  );\n}\n\nfunction RelationCell({ title, children }: { title: string; children: ComponentChildren }) {\n  return (\n    <div\n      class={tw(\"col-span-2 grid grid-cols-subgrid\", tw(\"border-foreground/25 border-dotted sm:border-t-1\", \"pt-4\"), tw(\"hover:bg-hiliteb/10\"))}\n      key={title}>\n      <header class=\"p-1 text-foreground/75\">{title}</header>\n      <div>{children}</div>\n    </div>\n  );\n}\n", "import { render } from \"preact\";\n\nimport { elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { getCurrentPage, getCurrentPageStore } from \"@plangs/frontend/auxiliar/storage\";\nimport type { TPlangsVertex } from \"@plangs/plangs/graph/generated\";\nimport type { VertexDetail } from \"@plangs/plangs/graph/vertex_base\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\nimport { VertexInfo } from \"./vertex-info\";\n\n/** Rendering with undefined vertex attempts to render the last thing displayed (per Page). */\nexport function renderVertexInfo(vertex?: TPlangsVertex) {\n  const page = getCurrentPage();\n  const store = getCurrentPageStore();\n\n  for (const elem of elems<HTMLDivElement>(\"vertexInfo\")) {\n    let detail: VertexDetail | undefined = vertex?.detail;\n    let open = elem.dataset.open === \"true\";\n\n    if (detail) {\n      store.update(\"vertex-detail\", detail);\n      store.update(\"vertex-detail-open\", open);\n    } else {\n      open = store.load(\"vertex-detail-open\") ?? open ?? true;\n      detail = store.load(\"vertex-detail\");\n    }\n\n    render(<VertexInfo detail={detail} page={page} open={open} />, elem);\n  }\n}\n", "import type { Value } from \"./value\";\n\nexport type Predicate<T> = (v: T) => boolean;\n\nexport type EncodedFilter<T> = { mode: \"all\" | \"any\"; values: T[] };\n\n/**\n * A filter that can match any or all of the elements against a predicate.\n */\nexport class Filter<T> implements Value<Filter<T>> {\n  constructor(\n    public mode: \"all\" | \"any\" = \"any\",\n    public readonly values: Set<T> = new Set(),\n  ) {}\n\n  get isEmpty(): boolean {\n    return this.values.size === 0;\n  }\n\n  add(...values: T[]): this {\n    for (const val of values) this.values.add(val);\n    return this;\n  }\n\n  delete(value: T): boolean {\n    return this.values.delete(value);\n  }\n\n  has(value: T): boolean {\n    return this.values.has(value);\n  }\n\n  clear() {\n    this.values.clear();\n  }\n\n  get size(): number {\n    return this.values.size;\n  }\n\n  matches(predicate: Predicate<T>): boolean {\n    return this.mode === \"all\" ? this.all(predicate) : this.any(predicate);\n  }\n\n  all(predicate: Predicate<T>): boolean {\n    for (const v of this.values) if (!predicate(v)) return false;\n    return true;\n  }\n\n  any(predicate: Predicate<T>): boolean {\n    for (const v of this.values) if (predicate(v)) return true;\n    return false;\n  }\n\n  get value() {\n    return this;\n  }\n\n  get isPresent(): boolean {\n    return !this.isEmpty;\n  }\n\n  equalTo(other?: Filter<T>): boolean {\n    if (!other) return false;\n\n    if (!(other instanceof Filter)) return false;\n    if (this.mode !== other.mode) return false;\n    if (this.values.size !== other.values.size) return false;\n    for (const v of this.values) if (!other.values.has(v)) return false;\n    return true;\n  }\n\n  clone(): this {\n    return new Filter(this.mode, new Set(this.values)) as this;\n  }\n\n  toJSON(): EncodedFilter<T> {\n    return { mode: this.mode, values: [...this.values] };\n  }\n\n  serializable() {\n    return this.isEmpty ? undefined : this.toJSON();\n  }\n\n  // biome-ignore lint/suspicious/noExplicitAny: we can't know for sure the type of the values here.\n  static isSerialized(val: unknown): val is { mode: \"all\" | \"any\"; values: any[] } {\n    return (\n      !!val && typeof val === \"object\" && \"mode\" in val && (val.mode === \"all\" || val.mode === \"any\") && \"values\" in val && Array.isArray(val.values)\n    );\n  }\n\n  toString() {\n    return `Filter(${this.mode}: ${JSON.stringify([...this.values]).slice(1, -1)})`;\n  }\n}\n\n// biome-ignore lint/suspicious/noExplicitAny: there's no _precise_ way to know the type of the values here.\nexport function isEncodedFilter(value: unknown): value is EncodedFilter<any> {\n  return typeof value === \"object\" && value !== null && value !== undefined && \"mode\" in value && \"values\" in value && Array.isArray(value.values);\n}\n", "import { Filter } from \"./filters\";\n\n/**\n * The objective of this interface is to simplify checking if a value is present (aka \"non blank\").\n * This avoids the need to sprinkle runtime type checks all over the place.\n *\n * This is useful in places were we don't want to serialize empty values,\n * if we want to check there are any present values on a form, etc.\n *\n * Also we want to avoid serializing values that are not \"present\".\n * This is because for things like URL encoding, we don't want to have a lot of keys pointing to blank values.\n */\nexport interface Value<T> {\n  // biome-ignore lint/suspicious/noExplicitAny: without a generic value type the wrappers are useless.\n  readonly value: any;\n\n  /**\n   * \"Presence\" implies that the value is not blank or empty:\n   * * null, undefined or empty string are considered \"blank\", and hence not present.\n   * * 0 is present, even though JavaScript considers it falsy.\n   * * Containers of any kind (Set, Map, Array) are present if they have at least one element.\n   */\n  get isPresent(): boolean;\n\n  /** Compare values. */\n  equalTo(other?: AnyValue): boolean;\n\n  /**\n   * This is meant to return something that can be easilty serialized.\n   * For instance if the value is a Set, it should return an array (since JSON doesn't support Sets).\n   * * The result should contain enough information to reconstruct the value.\n   * * Blank / non present values should be omitted.\n   */\n  // biome-ignore lint/suspicious/noExplicitAny: we want to be flexible here.\n  serializable(): any;\n}\n\n// biome-ignore lint/suspicious/noExplicitAny: Allow for flexibility in the type of the value.\nexport type AnyValue = Value<any>;\n\nexport abstract class ValBase<T> implements Value<T> {\n  constructor(readonly value: T) {}\n\n  get isNil(): boolean {\n    return this.value === undefined || this.value === null;\n  }\n\n  get isPresent(): boolean {\n    return !this.isNil;\n  }\n\n  abstract equalTo(other?: AnyValue): boolean;\n\n  // biome-ignore lint/suspicious/noExplicitAny: We can't be more specific here.\n  serializable(): any {\n    return this.isPresent ? this.value : undefined;\n  }\n}\n\nexport class ValNil extends ValBase<null | undefined> {\n  constructor(value: null | undefined = undefined) {\n    super(value);\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValNil;\n  }\n}\n\nexport class ValNumber extends ValBase<number> {\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValNumber && this.value === other.value;\n  }\n}\n\nexport class ValBool extends ValBase<boolean> {\n  override get isPresent(): boolean {\n    return !this.isNil && this.value === true;\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValBool && this.value === other.value;\n  }\n}\n\nexport class ValString extends ValBase<string> {\n  override get isPresent(): boolean {\n    return !this.isNil && this.value.length > 0 && !/^\\s*$/.test(this.value);\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValString && this.value === other.value;\n  }\n}\n\nexport class ValSet<T> extends ValBase<Set<T>> {\n  override get isPresent(): boolean {\n    return !this.isNil && this.value.size > 0;\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    if (!(other instanceof ValSet)) return false;\n    if (this.value === other.value) return true;\n    if (this.value.size !== other.value.size) return false;\n    for (const v of this.value) if (!other.value.has(v)) return false;\n    return true;\n  }\n\n  override serializable() {\n    return this.isPresent ? [\"Set\", [...this.value]] : undefined;\n  }\n\n  // biome-ignore lint/suspicious/noExplicitAny: we cannot know for sure the type of the values.\n  static isSerialized(val: unknown): val is [string, any[]] {\n    return Array.isArray(val) && val[0] === \"Set\" && Array.isArray(val[1]);\n  }\n}\n\nconst EMPTY_REGEX = /(?:)/;\n\nexport class ValRegExp extends ValBase<RegExp> {\n  override get isPresent(): boolean {\n    return !this.isNil && this.value.source !== EMPTY_REGEX.source;\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValRegExp && this.value.source === other.value.source;\n  }\n\n  override serializable() {\n    const { value } = this;\n    return this.isPresent ? (value.flags ? [\"RegExp\", value.source, value.flags] : [\"RegExp\", value.source]) : undefined;\n  }\n\n  static isSerialized(val: unknown): val is [string, string, string?] {\n    return Array.isArray(val) && val[0] === \"RegExp\" && typeof val[1] === \"string\" && (val[2] === undefined || typeof val[2] === \"string\");\n  }\n}\n\n/** Matches the serialized \"shape\" and returns a deserialized value, or undefined if it can't recognize the shape. */\nexport function deserializeValue(val: unknown): AnyValue | undefined {\n  if (val === undefined || val === null) return new ValNil(val);\n\n  switch (typeof val) {\n    case \"number\":\n      return new ValNumber(val);\n    case \"boolean\":\n      return new ValBool(val);\n    case \"string\":\n      return new ValString(val);\n  }\n\n  if (ValRegExp.isSerialized(val)) return new ValRegExp(new RegExp(val[1], val[2]));\n  if (ValSet.isSerialized(val)) return new ValSet(new Set(val[1]));\n  if (Filter.isSerialized(val)) return new Filter(val.mode, new Set(val.values));\n\n  console.log(\"Attempt to deserialize an unrecognized value shape:\", val);\n}\n", "// biome-ignore lint/suspicious/noExplicitAny: We want to debounce any function.\ntype AnyFunc = (...args: any[]) => any;\n\nexport function debounce<T extends AnyFunc>(callback: T, millies: number): (...args: Parameters<T>) => void {\n  let timeout: Timer | undefined;\n  return (...args: Parameters<AnyFunc>) => {\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => callback(...args), millies);\n  };\n}\n", "/** Two dimensional Map. */\nexport class Map2<K1, K2, V> {\n  #map = new Map<K1, Map<K2, V>>();\n\n  has(k1: K1, k2: K2): boolean {\n    return this.#map.get(k1)?.has(k2) ?? false;\n  }\n\n  set(k1: K1, k2: K2, v: V): this {\n    let m2 = this.#map.get(k1);\n    if (!m2) {\n      m2 = new Map();\n      this.#map.set(k1, m2);\n    }\n    m2.set(k2, v);\n    return this;\n  }\n\n  getOrSet(k1: K1, k2: K2, whenMissing: () => V): V {\n    let v = this.get(k1, k2);\n    if (v === undefined) this.set(k1, k2, (v = whenMissing()));\n    return v;\n  }\n\n  delete(k1: K1, k2: K2): boolean {\n    return this.#map.get(k1)?.delete(k2) ?? false;\n  }\n\n  // Delete all keys [k1, *] from the map.\n  delete1(k1: K1): boolean {\n    const map = this.#map.get(k1);\n    if (map) {\n      this.#map.delete(k1);\n      return map.size > 0;\n    }\n    return false;\n  }\n\n  clear() {\n    this.#map.clear();\n  }\n\n  get(k1: K1, k2: K2): V | undefined {\n    return this.#map.get(k1)?.get(k2);\n  }\n\n  getMap(k1: K1): Map<K2, V> | undefined {\n    return this.#map.get(k1);\n  }\n\n  /** Get a consolidated map of all keys in the second dimension. */\n  getMap2(): Map<K2, V> {\n    const res = new Map<K2, V>();\n    for (const [_k1, map2] of this.#map) {\n      for (const [k2, v] of map2) res.set(k2, v);\n    }\n    return res;\n  }\n\n  get size(): number {\n    let size = 0;\n    for (const map of this.#map.values()) size += map.size;\n    return size;\n  }\n\n  get isEmpty(): boolean {\n    for (const map of this.#map.values()) if (map.size > 0) return false;\n    return true;\n  }\n\n  /** Returns the size of the second dimension for a given key in the first dimension. */\n  size2(k1: K1): number {\n    return this.#map.get(k1)?.size ?? 0;\n  }\n\n  /** Returns the keys in the first dimension. */\n  keys(): K1[] {\n    return [...this.#map.keys()].filter(k1 => (this.#map.get(k1)?.size ?? 0) > 0);\n  }\n\n  /** Return all the keys from a first dimension. */\n  keys2(k1: K1): K2[] {\n    const res: K2[] = [];\n    const m = this.#map.get(k1);\n    if (m) for (const k2 of m.keys()) res.push(k2);\n    return res;\n  }\n\n  entries(): [K1, Map<K2, V>][] {\n    return [...this.#map.entries()].filter(([_k1, map2]) => map2.size > 0);\n  }\n\n  flatEntries(): [K1, K2, V][] {\n    const results: [K1, K2, V][] = [];\n    for (const [k1, map2] of this.#map) {\n      for (const [k2, v] of map2) results.push([k1, k2, v]);\n    }\n    return results;\n  }\n\n  /** Return a new Map with filtered entries. */\n  filter(predicate: (k1: K1, k2: K2, v: V) => boolean): Map2<K1, K2, V> {\n    const m = new Map2<K1, K2, V>();\n    for (const [k1, map2] of this.#map) {\n      for (const [k2, v] of map2) if (predicate(k1, k2, v)) m.set(k1, k2, v);\n    }\n    return m;\n  }\n\n  values(): V[] {\n    return [...this.#map.values()].flatMap(map => [...map.values()]);\n  }\n\n  values2(k1: K1): V[] {\n    const m = this.#map.get(k1);\n    return m ? [...m.values()] : [];\n  }\n\n  toString(): string {\n    const entries = [...this.flatEntries()].map(([k1, k2, v]) => `(${k1}, ${k2}) => ${v}`);\n    return `Map2(size: ${this.size})${entries.length > 0 ? ` { ${entries.join(\", \")} }` : \"\"}`;\n  }\n}\n\n// biome-ignore lint/suspicious/noExplicitAny: Any object key is valid.\ntype AnyKey = keyof any;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { AnyValue, ValNumber, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VApp } from \"@plangs/plangs/graph\";\nimport type { VLicenseKey, VPlangKey, VPlatformKey, VTagKey } from \"@plangs/plangs/graph/generated\";\nimport type { StrDate } from \"@plangs/plangs/graph/vertex_data_schemas\";\n\ntype Pred<T extends Value<AnyValue>> = (app: VApp, value: T) => boolean;\n\n/** Predicates to filter Apps. */\nexport const APP_FACET_PREDICATES = {\n  createdRecently: ((app, date) => app.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((app, flt) => ret(app.created.strYear, appYear => flt.matches(year => appYear === year))) as Pred<Filter<string>>,\n  ghStars: ((app, num) => app.github.stars > num.value) as Pred<ValNumber>,\n  licenses: ((app, flt) => flt.matches(key => app.relLicenses.has(key))) as Pred<Filter<VLicenseKey>>,\n  name: ((app, str) => app.lcName.includes(str.value)) as Pred<ValString>,\n  platforms: ((app, flt) => flt.matches(key => app.relPlatforms.has(key))) as Pred<Filter<VPlatformKey>>,\n  releasedRecently: ((app, date) => ret(app.releases.last, lastRel => lastRel?.isRecent(date.value as StrDate))) as Pred<ValString>,\n  tags: ((app, flt) => flt.matches(key => app.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  writtenWith: ((app, flt) => flt.matches(key => app.relWrittenWith.has(key))) as Pred<Filter<VPlangKey>>,\n} as const;\n\nexport type AppFacetKey = keyof typeof APP_FACET_PREDICATES;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { AnyValue, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VCommunity } from \"@plangs/plangs/graph\";\nimport type { VAppKey, VLibraryKey, VPlangKey, VTagKey, VToolKey } from \"@plangs/plangs/graph/generated\";\nimport type { StrDate } from \"@plangs/plangs/graph/vertex_data_schemas\";\n\ntype Pred<T extends Value<AnyValue>> = (community: VCommunity, value: T) => boolean;\n\n/** Predicates to filter Communities. */\nexport const COMMUNITY_FACET_PREDICATES = {\n  apps: ((comm, flt) => flt.matches(key => comm.relApps.has(key))) as Pred<Filter<VAppKey>>,\n  createdRecently: ((comm, date) => comm.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((comm, flt) => ret(comm.created.strYear, communityYear => flt.matches(year => communityYear === year))) as Pred<Filter<string>>,\n  libraries: ((comm, flt) => flt.matches(key => comm.relLibraries.has(key))) as Pred<Filter<VLibraryKey>>,\n  name: ((comm, str) => comm.lcName.includes(str.value)) as Pred<ValString>,\n  plangs: ((com, flt) => flt.matches(key => com.relPlangs.has(key))) as Pred<Filter<VPlangKey>>,\n  tags: ((comm, flt) => flt.matches(key => comm.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  tools: ((comm, flt) => flt.matches(key => comm.relTools.has(key))) as Pred<Filter<VToolKey>>,\n} as const;\n\nexport type CommunityFacetKey = keyof typeof COMMUNITY_FACET_PREDICATES;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { AnyValue, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VLearning } from \"@plangs/plangs/graph\";\nimport type { VAppKey, VLibraryKey, VPlangKey, VTagKey, VToolKey } from \"@plangs/plangs/graph/generated\";\nimport type { StrDate } from \"@plangs/plangs/graph/vertex_data_schemas\";\n\ntype Pred<T extends Value<AnyValue>> = (learning: VLearning, value: T) => boolean;\n\n/** Predicates to filter Learning Resources. */\nexport const LEARNING_FACET_PREDICATES = {\n  apps: ((learn, flt) => flt.matches(key => learn.relApps.has(key))) as Pred<Filter<VAppKey>>,\n  createdRecently: ((learn, date) => learn.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((learn, flt) => ret(learn.created.strYear, learningYear => flt.matches(year => learningYear === year))) as Pred<Filter<string>>,\n  libraries: ((learn, flt) => flt.matches(key => learn.relLibraries.has(key))) as Pred<Filter<VLibraryKey>>,\n  name: ((learn, str) => learn.lcName.includes(str.value)) as Pred<ValString>,\n  plangs: ((learn, flt) => flt.matches(key => learn.relPlangs.has(key))) as Pred<Filter<VPlangKey>>,\n  tags: ((learn, flt) => flt.matches(key => learn.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  tools: ((learn, flt) => flt.matches(key => learn.relTools.has(key))) as Pred<Filter<VToolKey>>,\n} as const;\n\nexport type LearningFacetKey = keyof typeof LEARNING_FACET_PREDICATES;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { AnyValue, ValNumber, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VLibrary } from \"@plangs/plangs/graph\";\nimport type { VLicenseKey, VPlangKey, VPlatformKey, VTagKey } from \"@plangs/plangs/graph/generated\";\nimport type { StrDate } from \"@plangs/plangs/graph/vertex_data_schemas\";\n\ntype Pred<T extends Value<AnyValue>> = (library: VLibrary, value: T) => boolean;\n\n/** Predicates to filter Libraries. */\nexport const LIBRARY_FACET_PREDICATES = {\n  createdRecently: ((lib, date) => lib.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((lib, flt) => ret(lib.created.strYear, libraryYear => flt.matches(year => libraryYear === year))) as Pred<Filter<string>>,\n  ghStars: ((lib, num) => lib.github.stars > num.value) as Pred<ValNumber>,\n  licenses: ((lib, flt) => flt.matches(key => lib.relLicenses.has(key))) as Pred<Filter<VLicenseKey>>,\n  name: ((lib, str) => lib.lcName.includes(str.value)) as Pred<ValString>,\n  platforms: ((lib, flt) => flt.matches(key => lib.relPlatforms.has(key))) as Pred<Filter<VPlatformKey>>,\n  releasedRecently: ((lib, date) => ret(lib.releases.last, lastRel => lastRel?.isRecent(date.value as StrDate))) as Pred<ValString>,\n  tags: ((lib, flt) => flt.matches(key => lib.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  writtenFor: ((lib, flt) => flt.matches(key => lib.relPlangs.has(key))) as Pred<Filter<VPlangKey>>,\n  writtenWith: ((lib, flt) => flt.matches(key => lib.relWrittenWith.has(key))) as Pred<Filter<VPlangKey>>,\n} as const;\n\nexport type LibraryFacetKey = keyof typeof LIBRARY_FACET_PREDICATES;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { AnyValue, ValBool, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VPlang } from \"@plangs/plangs/graph\";\nimport type { VLicenseKey, VParadigmKey, VPlangKey, VPlatformKey, VTagKey, VTypeSystemKey } from \"@plangs/plangs/graph/generated\";\nimport type { StrDate } from \"@plangs/plangs/graph/vertex_data_schemas\";\n\ntype Pred<T extends Value<AnyValue>> = (pl: VPlang, value: T) => boolean;\n\n/** Predicates to filter Plangs. */\nexport const PLANG_FACET_PREDICATES = {\n  compilesTo: ((pl, flt) => flt.matches(key => pl.relCompilesTo.has(key))) as Pred<Filter<VPlangKey>>,\n  createdRecently: ((pl, date) => pl.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((pl, flt) => ret(pl.created.strYear, plYear => flt.matches(year => plYear === year))) as Pred<Filter<string>>,\n  dialectOf: ((pl, flt) => flt.matches(key => pl.key === key || pl.relDialectOf.has(key))) as Pred<Filter<VPlangKey>>,\n  extensions: ((pl, flt) => flt.matches(key => pl.extensions.includes(key))) as Pred<Filter<string>>,\n  hasLogo: ((pl, val) => val.value === pl.images.some(img => img.kind === \"logo\")) as Pred<ValBool>,\n  hasWikipedia: ((pl, val) => val.value === !!pl.data.extWikipediaPath) as Pred<ValBool>,\n  implements: ((pl, flt) => flt.matches(key => key === pl.key || pl.relImplements.has(key))) as Pred<Filter<VPlangKey>>,\n  influenced: ((pl, flt) => flt.matches(key => pl.relInfluenced.has(key))) as Pred<Filter<VPlangKey>>,\n  influencedBy: ((pl, flt) => flt.matches(key => pl.relInfluencedBy.has(key))) as Pred<Filter<VPlangKey>>,\n  isPopular: ((pl, val) => val.value === pl.isPopular) as Pred<ValBool>,\n  isTranspiler: ((pl, val) => val.value === pl.isTranspiler) as Pred<ValBool>,\n  licenses: ((pl, flt) => flt.matches(key => pl.relLicenses.has(key))) as Pred<Filter<VLicenseKey>>,\n  paradigms: ((pl, flt) => flt.matches(key => pl.relParadigms.has(key))) as Pred<Filter<VParadigmKey>>,\n  plangName: ((pl, str) => pl.lcName.includes(str.value)) as Pred<ValString>,\n  platforms: ((pl, flt) => flt.matches(key => pl.relPlatforms.has(key))) as Pred<Filter<VPlatformKey>>,\n  releasedRecently: ((pl, date) => ret(pl.releases.last, lastRel => lastRel?.isRecent(date.value as StrDate))) as Pred<ValString>,\n  tags: ((pl, flt) => flt.matches(key => pl.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  typeSystems: ((pl, flt) => flt.matches(key => pl.relTypeSystems.has(key))) as Pred<Filter<VTypeSystemKey>>,\n  writtenWith: ((pl, flt) => flt.matches(key => pl.relWrittenWith.has(key))) as Pred<Filter<VPlangKey>>,\n\n  // These relationships are probably less useful for filtering.\n  // dialects: // \"Dialects\", rel(\"plang\", \"relDialects\")). Ex. Pick \"VisualBasic\" and see \"Basic\".\n  // implementedBy: // \"Implemented By\", rel(\"plang\", \"relImplementedBy\")). Ex. Pick \"CPython\" and see \"Python\".\n  // targetOf: // \"Target of\", rel(\"plang\", \"relTargetOf\")). Ex. Pick \"Haxe\" and see what languages it targets.\n  // usedToWrite: //  \"Used to Write\", rel(\"plang\", \"relUsedToWrite\")). Ex Pick \"C++\" and see \"C\".\n} as const;\n\nexport type PlangFacetKey = keyof typeof PLANG_FACET_PREDICATES;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { AnyValue, ValNumber, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VSubsystem } from \"@plangs/plangs/graph\";\nimport type { VLicenseKey, VPlangKey, VPlatformKey, VTagKey } from \"@plangs/plangs/graph/generated\";\nimport type { StrDate } from \"@plangs/plangs/graph/vertex_data_schemas\";\n\ntype Pred<T extends Value<AnyValue>> = (sys: VSubsystem, value: T) => boolean;\n\n/** Predicates to filter Apps. */\nexport const SUBSYSTEM_FACET_PREDICATES = {\n  createdRecently: ((sys, date) => sys.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((sys, flt) => ret(sys.created.strYear, appYear => flt.matches(year => appYear === year))) as Pred<Filter<string>>,\n  ghStars: ((sys, num) => sys.github.stars > num.value) as Pred<ValNumber>,\n  licenses: ((sys, flt) => flt.matches(key => sys.relLicenses.has(key))) as Pred<Filter<VLicenseKey>>,\n  name: ((sys, str) => sys.lcName.includes(str.value)) as Pred<ValString>,\n  platforms: ((sys, flt) => flt.matches(key => sys.relPlatforms.has(key))) as Pred<Filter<VPlatformKey>>,\n  releasedRecently: ((sys, date) => ret(sys.releases.last, lastRel => lastRel?.isRecent(date.value as StrDate))) as Pred<ValString>,\n  tags: ((sys, flt) => flt.matches(key => sys.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  writtenWith: ((sys, flt) => flt.matches(key => sys.relWrittenWith.has(key))) as Pred<Filter<VPlangKey>>,\n} as const;\n\nexport type SubsystemFacetKey = keyof typeof SUBSYSTEM_FACET_PREDICATES;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { AnyValue, ValNumber, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VTool } from \"@plangs/plangs/graph\";\nimport type { VLicenseKey, VPlangKey, VPlatformKey, VTagKey } from \"@plangs/plangs/graph/generated\";\nimport type { StrDate } from \"@plangs/plangs/graph/vertex_data_schemas\";\n\ntype Pred<T extends Value<AnyValue>> = (tool: VTool, value: T) => boolean;\n\n/** Predicates to filter Tools.*/\nexport const TOOL_FACET_PREDICATES = {\n  createdRecently: ((tool, date) => tool.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((tool, flt) => ret(tool.created.strYear, toolYear => flt.matches(year => toolYear === year))) as Pred<Filter<string>>,\n  ghStars: ((tool, num) => tool.github.stars > num.value) as Pred<ValNumber>,\n  licenses: ((tool, flt) => flt.matches(key => tool.relLicenses.has(key))) as Pred<Filter<VLicenseKey>>,\n  name: ((tool, str) => tool.lcName.includes(str.value)) as Pred<ValString>,\n  platforms: ((tool, flt) => flt.matches(key => tool.relPlatforms.has(key))) as Pred<Filter<VPlatformKey>>,\n  releasedRecently: ((tool, date) => ret(tool.releases.last, lastRel => lastRel?.isRecent(date.value as StrDate))) as Pred<ValString>,\n  tags: ((tool, flt) => flt.matches(key => tool.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  writtenFor: ((tool, flt) => flt.matches(key => tool.relPlangs.has(key))) as Pred<Filter<VPlangKey>>,\n  writtenWith: ((tool, flt) => flt.matches(key => tool.relWrittenWith.has(key))) as Pred<Filter<VPlangKey>>,\n} as const;\n\nexport type ToolFacetKey = keyof typeof TOOL_FACET_PREDICATES;\n", "import type { Map2 } from \"@plangs/auxiliar/map2\";\nimport type { AnyValue } from \"@plangs/auxiliar/value\";\nimport type { Vertices } from \"@plangs/graphgen/library\";\nimport type { TPlangsVertex, TPlangsVertexName } from \"@plangs/plangs/graph/generated\";\n\nimport { APP_FACET_PREDICATES } from \"./apps\";\nimport { COMMUNITY_FACET_PREDICATES } from \"./communities\";\nimport { LEARNING_FACET_PREDICATES } from \"./learning\";\nimport { LIBRARY_FACET_PREDICATES } from \"./libraries\";\nimport { PLANG_FACET_PREDICATES } from \"./plangs\";\nimport { SUBSYSTEM_FACET_PREDICATES } from \"./subsystems\";\nimport { TOOL_FACET_PREDICATES } from \"./tools\";\n\n/** A Map of predicates from an arbitrary name to a predicate function. */\nexport type Predicates<PredKey extends string> = Record<PredKey, (vertex: TPlangsVertex, value: AnyValue) => boolean>;\n\n/** Match a single Vertex against several predicates. */\nexport function matchVertex<PredKey extends string>(\n  vertex: TPlangsVertex,\n  predicates: Predicates<PredKey>,\n  facetValues: Map<PredKey, AnyValue>,\n  mode: \"all\" | \"any\" = \"any\",\n): boolean {\n  let someFilter = false;\n\n  for (const [key, value] of facetValues) {\n    if (!value.isPresent) continue; // This facet is not set, so we skip it.\n    someFilter = true;\n\n    const pred = predicates[key];\n    if (!pred) {\n      console.error(`No predicate found for key: ${key}`);\n      continue;\n    }\n\n    const predResult = pred(vertex, value);\n    if (mode === \"all\" && !predResult) return false;\n    if (mode === \"any\" && predResult) return true;\n  }\n\n  if (!someFilter) return true; // No filters set, so we can't filter the vertex out.\n\n  // If we get here in mode \"all\", all predicates matched.\n  // If we get here in mode \"any\", no predicates matched.\n  return mode === \"all\";\n}\n\n/**\n * Match all vertices of a container against several predicates.\n * We can match a vertex if it complies with all predicates or any of them.\n */\nexport function matchVertices<T extends TPlangsVertex, PredKey extends string>(\n  vertices: Vertices<T>,\n  facetValues: Map<PredKey, AnyValue>,\n  mode: \"all\" | \"any\" = \"all\",\n): Set<T[\"key\"]> {\n  const predicates = vertexPredicates(vertices.name as TPlangsVertexName) as Predicates<string> | undefined;\n\n  // If we don't have predicates, we can't filter anything out.\n  if (!predicates) {\n    console.warn(`No predicates found for vertex name: ${vertices.name}`);\n    return new Set(vertices.keys);\n  }\n\n  return new Set([...vertices.values].filter(v => matchVertex(v, predicates, facetValues, mode)).map(v => v.key));\n}\n\n/**\n * Match all vertices of a container against several predicates.\n * This function is used to match against filters from different groups.\n * We can unite or intersect the results from the filters of different groups.\n *\n * NOTE: if the facetValues is empty, it will return all vertices, but in a roundabout way.\n * Is more efficient to don't even call this function in that case.\n */\nexport function matchVerticesFromGroups<T extends TPlangsVertex, PredKey extends string>(\n  vertices: Vertices<T>,\n  facetValues: Map2<string, PredKey, AnyValue>,\n  mode: \"all\" | \"any\" = \"any\",\n): Set<T[\"key\"]> {\n  let results = new Set<T[\"key\"]>();\n  for (const [_, fkValueMap] of facetValues.entries()) {\n    const groupResult = matchVertices(vertices, fkValueMap, \"all\"); // Per group match all set filters.\n\n    // To match all, we can exit early as soon as one group has no results.\n    if (mode === \"all\") {\n      if (groupResult.size === 0) return new Set(); // Intersection will be empty.\n      results = results.intersection(groupResult);\n      if (results.size === 0) return results; // No vertex matched\n    } else {\n      // For \"any\", we need to test all groups and union the results.\n      results = results.union(groupResult);\n    }\n  }\n\n  return results;\n}\n\n/** Return the available facet predicates for the given Vertex name. */\nexport function vertexPredicates(name: TPlangsVertexName) {\n  switch (name) {\n    case \"app\":\n      return APP_FACET_PREDICATES;\n    case \"community\":\n      return COMMUNITY_FACET_PREDICATES;\n    case \"learning\":\n      return LEARNING_FACET_PREDICATES;\n    case \"library\":\n      return LIBRARY_FACET_PREDICATES;\n    case \"plang\":\n      return PLANG_FACET_PREDICATES;\n    case \"tool\":\n      return TOOL_FACET_PREDICATES;\n    case \"subsystem\":\n      return SUBSYSTEM_FACET_PREDICATES;\n  }\n}\n", "import type { FunctionComponent } from \"preact\";\n\nimport { debounce } from \"@plangs/auxiliar/debounce\";\nimport { Map2 } from \"@plangs/auxiliar/map2\";\nimport { type AnyValue, deserializeValue } from \"@plangs/auxiliar/value\";\nimport { Dispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { $, elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport type { ToggleClearFacets } from \"@plangs/frontend/components/icon-button/state\";\nimport type { Vertices } from \"@plangs/graphgen/library\";\nimport { matchVerticesFromGroups } from \"@plangs/plangs/facets\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { TPlangsVertexName } from \"@plangs/plangs/graph/generated\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\nexport type SerializedFacets<FacetKey extends string> = Partial<Record<FacetKey, ReturnType<AnyValue[\"serializable\"]>>>;\n\n/** State for the facets browser, extended by each specific Facet Browser for each Vertex. */\nexport abstract class FacetsMainState<GroupKey extends string, FacetKey extends string> extends Dispatchable<{\n  pg: PlangsGraph;\n  currentGroupKey: GroupKey;\n  values: Map2<GroupKey, FacetKey, AnyValue>;\n}> {\n  /** Attempt to reconstruct the state from a serialized value (ex: a value coming from the URL fragment). */\n  // biome-ignore lint/suspicious/noExplicitAny: this data is the result of a de/serialization process and is not typed.\n  static deserialize<GK extends string, FK extends string>(groupsByFacetKey: Map<FK, GK>, genericData: any): Map2<GK, FK, AnyValue> {\n    const result = new Map2<GK, FK, AnyValue>();\n    if (!genericData) return result;\n    for (const [facetKey, rawValue] of Object.entries(genericData)) {\n      const groupKey = groupsByFacetKey.get(facetKey as FK);\n      if (!groupKey) {\n        console.error(\"missing group for facet\", facetKey);\n        continue;\n      }\n      const value = deserializeValue(rawValue);\n      if (value?.isPresent) {\n        result.set(groupKey, facetKey as FK, value);\n      } else {\n        console.error(\"failed to deserialize value\", facetKey, rawValue);\n      }\n    }\n    return result;\n  }\n\n  doSetCurrentGroup(groupKey: GroupKey): void {\n    this.data.currentGroupKey = groupKey;\n    getStore(this.page).update(\"facets-last-group\", groupKey);\n    this.dispatch();\n  }\n\n  /** Removes any and all values for the given group.  */\n  doResetGroup(groupKey: GroupKey): void {\n    this.values.delete1(groupKey);\n    this.dispatch();\n  }\n\n  /** Removes any and all values for the given group.  */\n  // biome-ignore lint/suspicious/noExplicitAny: coming from deserialize we'll have to deal with it.\n  doResetAll(values?: any): void {\n    if (values) {\n      this.data.values = FacetsMainState.deserialize<GroupKey, FacetKey>(this.gkByFk, values);\n    } else {\n      this.values.clear();\n    }\n    this.doSetCurrentGroup(this.nav.default);\n  }\n\n  /** This dispatches since we want to change the indicator of active state. */\n  doSetValue(groupKey: GroupKey, facetKey: FacetKey, value: AnyValue): \"changed\" | \"unchanged\" {\n    const { values } = this.data;\n    let result: \"changed\" | \"unchanged\";\n    if (value.isPresent) {\n      if (!values.has(groupKey, facetKey) || !value.equalTo(values.get(groupKey, facetKey))) {\n        values.set(groupKey, facetKey, value);\n        result = \"changed\";\n      } else {\n        result = \"unchanged\";\n      }\n    } else {\n      result = values.delete(groupKey, facetKey) ? \"changed\" : \"unchanged\";\n    }\n    this.dispatch();\n    return result;\n  }\n\n  /** Queries */\n\n  get pg(): PlangsGraph {\n    return this.data.pg;\n  }\n\n  get values() {\n    return this.data.values;\n  }\n\n  get serialized(): SerializedFacets<FacetKey> {\n    const data: SerializedFacets<FacetKey> = {};\n    for (const [_, facetKey, value] of this.values.flatEntries()) {\n      if (value.isPresent) data[facetKey] = value.serializable();\n    }\n    return data;\n  }\n\n  get currentGroupKey(): GroupKey {\n    return this.data.currentGroupKey;\n  }\n\n  groupHasValues(groupKey: GroupKey): boolean {\n    for (const v of this.values.getMap(groupKey)?.values() ?? []) {\n      if (v.isPresent) return true;\n    }\n    return false;\n  }\n\n  get anyValues(): boolean {\n    return this.values.values().some(v => v.isPresent);\n  }\n\n  groupTitle(key: GroupKey) {\n    return this.groupsConfig.get(key)?.title ?? key;\n  }\n\n  /** Helpers */\n\n  /** A static thumbnail grid will be render server side, we just need to show or hide each element.  */\n  _updateThumbs() {\n    const selection = this.values.filter((g, f, v) => v.isPresent);\n\n    // Don't bother filtering if there are no values.\n    const vertexKeys = selection.isEmpty\n      ? undefined\n      : // biome-ignore lint/suspicious/noExplicitAny: the loop up next can handle any kind of key returned.\n        matchVerticesFromGroups(this.pg[this.vertexName] as Vertices<any>, selection);\n\n    for (const div of elems(\"vertexThumbn\")) {\n      const vkey = div.dataset.vertexKey;\n      if (!vkey) continue;\n      const visible = vertexKeys === undefined || vertexKeys.has(vkey);\n      div.classList.toggle(\"hidden\", !visible);\n    }\n  }\n\n  updateThumbns = debounce(this._updateThumbs.bind(this), 30);\n\n  /**\n   * Run any side effects without dispatching.\n   * Useful for instance on start, for instance: where we don't want to dispatch\n   * (hence render twice) but we do want to setup a clean state.\n   */\n  runEffects(persist: \"persist\" | \"\" = \"\"): this {\n    if (persist === \"persist\") {\n      const data = this.serialized;\n      this.pushState(data);\n      getStore(this.page).update(\"facet-value\", data);\n    }\n    this.updateThumbns();\n    this.updateClearFacets();\n    return this;\n  }\n\n  /** Update the clear facets button on the toolbar. */\n  private updateClearFacets(): this {\n    const clearAll = $<HTMLElement & { state?: ToggleClearFacets }>(\"#icon-button-clearFacets\");\n    if (!clearAll?.state) return this;\n    clearAll.state.doToggleMode(this.anyValues ? \"clearFacets\" : \"\");\n    return this;\n  }\n\n  /** Push state to the history, but debounced. */\n  private pushState = debounce(\n    ((data: typeof this.serialized) => {\n      window.fragment.pushState(FragmentTracker.serialize(data));\n    }).bind(this),\n    50,\n  );\n\n  override dispatch(): this {\n    try {\n      super.dispatch();\n      this.runEffects(\"persist\");\n    } catch (err) {\n      console.error(err);\n    }\n    return this;\n  }\n\n  /** Abstract Methods. */\n\n  /** Page displaying the filters. */\n  abstract readonly page: PlangsPage;\n\n  /** Navigation configuration. */\n  abstract readonly nav: { groupKeys: GroupKey[][]; default: GroupKey };\n\n  /** Which group a facet key belongs to. */\n  abstract readonly gkByFk: Map<FacetKey, GroupKey>;\n\n  /** Configuration of the groups. */\n  abstract readonly groupsConfig: Map<GroupKey, { title: string }>;\n\n  /** The component that defines the content of a facet group. */\n  abstract readonly groupsComponent: FunctionComponent<{ currentFacetGroup: string }>;\n\n  abstract readonly vertexName: TPlangsVertexName;\n}\n", "import type { Ref } from \"preact\";\nimport { useContext, useRef } from \"preact/hooks\";\n\nimport { type AnyValue, ValBool } from \"@plangs/auxiliar/value\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { handler } from \"@plangs/frontend/auxiliar/events\";\nimport { tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { type AnyFacetsMainState, FacetsMainContext } from \"@plangs/frontend/facets/main/use_state\";\n\nexport type FacetBoolMapper = (checked: boolean) => AnyValue;\n\nexport type FacetBoolProps<GroupKey, FacetKey> = {\n  groupKey: GroupKey;\n  facetKey: FacetKey;\n  label: string;\n  valueMapper?: FacetBoolMapper;\n};\n\nexport function FacetBool<GroupKey extends string, FacetKey extends string>({\n  groupKey,\n  facetKey,\n  label,\n  valueMapper = (checked: boolean) => new ValBool(checked),\n}: FacetBoolProps<GroupKey, FacetKey>) {\n  const input = useRef<HTMLInputElement>();\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n\n  const toggle = handler((checkbox: HTMLInputElement) => {\n    main.doSetValue(groupKey, facetKey, valueMapper(checkbox.checked));\n  });\n\n  return (\n    <label for={facetKey} class={tw(\"block\", \"px-2\")}>\n      <input\n        id={facetKey}\n        name={facetKey}\n        type=\"checkbox\"\n        class={tw(\"-mt-1\")}\n        placeholder={label}\n        {...onClickOnEnter(toggle)}\n        checked={!!main.values.get(groupKey, facetKey)?.isPresent}\n        ref={input as Ref<HTMLInputElement>}\n      />\n      <span class=\"ml-2\">{label}</span>\n    </label>\n  );\n}\n", "import { useContext } from \"preact/hooks\";\n\nimport { debounce } from \"@plangs/auxiliar/debounce\";\nimport { ValString } from \"@plangs/auxiliar/value\";\nimport { handler } from \"@plangs/frontend/auxiliar/events\";\nimport { INPUT, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { type AnyFacetsMainState, FacetsMainContext } from \"@plangs/frontend/facets/main/use_state\";\n\nexport function FacetText<GroupKey extends string, FacetKey extends string>({\n  groupKey,\n  facetKey,\n  label,\n}: { groupKey: GroupKey; facetKey: FacetKey; label: string }) {\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n  const onInput = debounce(\n    handler((input: HTMLInputElement) => {\n      main.doSetValue(groupKey, facetKey, new ValString(input.value.toLowerCase()));\n    }),\n    50,\n  );\n  const current = main.values.get(groupKey, facetKey)?.value ?? \"\";\n  return <input type=\"search\" onInput={onInput} placeholder={label} class={tw(INPUT, \"mt-8\")} value={current} />;\n}\n", "import { Filter } from \"@plangs/auxiliar/filters\";\nimport { Dispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport type { AnyFacetsMainState } from \"@plangs/frontend/facets/main/use_state\";\n\ntype Val = string | number | boolean;\n\n/** NOTE: we don't need to dispatch when calling actions of the main state. */\nexport class FacetMultiState<GroupKey extends string, FacetKey extends string> extends Dispatchable<{\n  groupKey: GroupKey;\n  facetKey: FacetKey;\n  main: AnyFacetsMainState;\n}> {\n  /** Actions */\n\n  doSetValue(val: Filter<Val>): \"changed\" | \"unchanged\" {\n    const { main, data } = this;\n    return main.doSetValue(data.groupKey, data.facetKey, val);\n  }\n\n  doAdd(val: Val): boolean {\n    if (!val) return false;\n    const { value } = this;\n    if (value.has(val)) return false;\n    value.add(val);\n    return this.doSetValue(value) === \"changed\";\n  }\n\n  doRemove(val: string | undefined): boolean {\n    if (!val) return false;\n    const { value } = this;\n    if (!value.has(val)) return false;\n    value.delete(val);\n    return this.doSetValue(value) === \"changed\";\n  }\n\n  doSetMode(mode: \"all\" | \"any\"): void {\n    const { value } = this;\n    if (value.mode === mode) return;\n    this.value.mode = mode === \"all\" ? \"all\" : \"any\";\n    this.doSetValue(value);\n  }\n\n  /** Queries */\n\n  get main() {\n    return this.data.main;\n  }\n\n  get value() {\n    const { main, groupKey, facetKey } = this.data;\n    return main.values.getOrSet(groupKey, facetKey, () => new Filter(\"any\")) as Filter<Val>;\n  }\n}\n", "import type { Ref } from \"preact\";\nimport { useContext, useEffect, useRef } from \"preact/hooks\";\n\nimport { debounce } from \"@plangs/auxiliar/debounce\";\nimport { useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { handler, on } from \"@plangs/frontend/auxiliar/events\";\nimport { CLOSE } from \"@plangs/frontend/auxiliar/icons\";\nimport { HOVER, INPUT, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { IconButton } from \"@plangs/frontend/components/icon-button/icon-button\";\nimport { type AnyFacetsMainState, FacetsMainContext } from \"@plangs/frontend/facets/main/use_state\";\n\nimport { FacetMultiState } from \"./state\";\n\nexport function FacetMulti<GroupKey extends string, FacetKey extends string>({\n  active,\n  facetKey,\n  groupKey,\n  label,\n}: { active: boolean; facetKey: FacetKey; groupKey: GroupKey; label: string }) {\n  const self = useRef<HTMLDivElement>(); // We perform various queries on the root element.\n  const input = useRef<HTMLInputElement>(); // Used to focus on the input after adding a value.\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n  const state = useDispatchable(() => new FacetMultiState<GroupKey, FacetKey>({ main, groupKey, facetKey }));\n\n  useEffect(() => {\n    return on(self?.current, \"icon-button\", (ev: CustomEvent) => {\n      ev.stopPropagation();\n      state.doSetMode(ev.detail.mode);\n    });\n  });\n\n  /** Scroll the selection so we can see what's been added. */\n  const maybeScroll = (value: string) =>\n    self.current?.querySelector(`button[data-value=\"${value}\"]`)?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\n\n  const add = handler((input: HTMLInputElement, ev: KeyboardEvent) => {\n    ev.stopPropagation();\n    if (ev.key !== \"Enter\") return;\n\n    // NOTE: if we use facet-multi for anything other than extensions, we should make value transform configurable.\n    const val = input.value.startsWith(\".\") ? input.value : `.${input.value}`;\n    if (state.doAdd(val)) setTimeout(() => maybeScroll(val), 100);\n    input.value = \"\";\n  });\n\n  /** Remove all instances of the pulse animation. */\n  const removePulse = debounce(() => {\n    for (const li of self.current?.querySelectorAll(\".quick-pulse\") ?? []) li.classList.remove(\"quick-pulse\");\n  }, 150);\n\n  const nthButton = (n: number) => self.current?.querySelector<HTMLButtonElement>(`li:nth-child(${n})>button`);\n\n  const remover = (idx: number) =>\n    handler((b: HTMLButtonElement, ev) => {\n      ev.stopPropagation();\n      if (state.doRemove(b.dataset.value)) {\n        // Determine next focus an add a lil animation. Timeout: wait till next render.\n        setTimeout(() => {\n          const nb = nthButton(idx + 1) ?? nthButton(idx);\n          (nb ?? input.current)?.focus();\n          if (!nb) return;\n          nb.classList.add(\"quick-pulse\"); // Add a pulsing animation to show what's being focused next.\n          setTimeout(() => removePulse(), 150);\n        }, 10);\n      }\n    });\n\n  // Helper to enumerate the entries, map them, then return an array (instead of an iterator).\n  function mapEntries<T>(mapper: (entry: [number, string | number | boolean]) => T): T[] {\n    return Array.from([...state.value.values].entries()).map(mapper);\n  }\n\n  const body = () => (\n    <>\n      <input type=\"search\" name={facetKey as string} ref={input as Ref<HTMLInputElement>} placeholder={label} class={tw(INPUT)} onKeyDown={add} />\n\n      <span class={tw(state.value.size === 0 && \"hidden\", state.value.size < 2 ? \"text-foreground/50\" : \"text-foreground\", \"pl-2\")}>\n        <IconButton action=\"allAny\" disabled={state.value.size < 2} initial={\"any\"} />\n      </span>\n\n      <ul>\n        {mapEntries(([idx, value]) => (\n          <li key={value}>\n            <button\n              type=\"button\"\n              data-value={value}\n              class={tw(\"inline-flex flex-row\", \"p-2\", \"w-full text-left\", \"cursor-pointer\", HOVER)}\n              {...onClickOnEnter(remover(idx))}>\n              <div class=\"-mt-[2px] inline-block scale-75 text-red-500\">{CLOSE}</div>\n              {value}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n\n  return (\n    <div ref={self as Ref<HTMLDivElement>} class={tw(\"flex flex-col\")}>\n      {active ? body() : null}\n    </div>\n  );\n}\n", "import type { JSX } from \"preact/jsx-runtime\";\n\nimport { SORT_DOWN, SORT_UP } from \"@plangs/frontend/auxiliar/icons\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { TPlangsEdgeName, TPlangsVertexName } from \"@plangs/plangs/graph/generated\";\nimport type { StrDate } from \"@plangs/plangs/graph/vertex_data_schemas\";\n\nexport type Val = string | number | boolean;\nexport type Entry = { value: Val; label: string; count: number };\nexport type FacetTableConfig =\n  | { kind: \"rel\"; edgeName: TPlangsEdgeName; direction: \"direct\" | \"inverse\"; minEntries?: number }\n  | { kind: \"prop\"; vertexName: TPlangsVertexName; vertexProp: string };\n\nexport function generateEntries(pg: PlangsGraph, config: FacetTableConfig): Entry[] {\n  if (config.kind === \"rel\") {\n    const { edgeName, direction, minEntries } = config;\n\n    const edges = pg.edges[edgeName as TPlangsEdgeName];\n    if (!edges) {\n      console.error(\"No edges found for:\", edgeName, direction);\n      return [];\n    }\n\n    const relations = direction === \"direct\" ? edges.entriesBackward : edges.entriesForward;\n    const source = direction === \"direct\" ? edges.toSource : edges.fromSource;\n\n    const entries = [...relations].map(([key, toKeys]) => {\n      const name = source.get(key as any)?.name ?? key;\n      return { value: key, label: name, count: toKeys.size };\n    });\n\n    if (typeof minEntries === \"number\") return entries.filter(entry => entry.count >= minEntries);\n\n    return entries;\n  }\n\n  if (config.kind === \"prop\") {\n    // TODO: actually use the property. The code below assumes the property is 'created'.\n\n    const years: Map<string, number> = new Map(); // year -> count\n    for (const { created } of pg[config.vertexName].values) {\n      if (!created.year) continue;\n      const key = `${created.year}`;\n      years.set(key, (years.get(key) ?? 0) + 1);\n    }\n    return [...years.entries()].map(([year, count]) => {\n      const strYear = `${year}`;\n      return { value: year, label: strYear, count };\n    });\n  }\n\n  console.error(\"Unknown config kind\", config);\n  return [];\n}\n\nexport type Column = \"facet\" | \"count\" | \"sel\";\nexport type Order = \"facet-asc\" | \"facet-desc\" | \"count-asc\" | \"count-desc\" | \"sel-asc\" | \"sel-desc\";\n\nexport function label(col: Column, config: FacetTableConfig): string {\n  if (col === \"facet\" && config.kind === \"rel\") return \"Name\";\n  if (col === \"facet\" && config.kind === \"prop\") return \"Value\";\n  return col;\n}\n\nexport function icon(col: Column, order: Order): JSX.Element | false {\n  if (col === \"facet\") return (order === \"facet-asc\" && SORT_UP) || (order === \"facet-desc\" && SORT_DOWN);\n  if (col === \"count\") return (order === \"count-asc\" && SORT_UP) || (order === \"count-desc\" && SORT_DOWN);\n  return (order === \"sel-asc\" && SORT_UP) || (order === \"sel-desc\" && SORT_DOWN);\n}\n\nexport function opposite(col: Column, order: string): Order {\n  if (col === \"facet\") return order === \"facet-asc\" ? \"facet-desc\" : \"facet-asc\";\n  if (col === \"count\") return order === \"count-desc\" ? \"count-asc\" : \"count-desc\";\n  return order === \"sel-desc\" ? \"sel-asc\" : \"sel-desc\";\n}\n\nexport type IsSel = (entry: Entry) => boolean;\nexport type Cmp = (a: Entry, b: Entry, isSel?: IsSel) => number;\n\nexport const CMP: Record<Order, Cmp> = {\n  \"facet-asc\": (a, b) => a.label.localeCompare(b.label),\n  \"facet-desc\": (a, b) => b.label.localeCompare(a.label),\n  \"count-asc\": (a, b) => a.count - b.count,\n  \"count-desc\": (a, b) => b.count - a.count,\n  \"sel-asc\": (a, b, isSel) => (isSel ? Number(isSel(a)) - Number(isSel(b)) : 0),\n  \"sel-desc\": (a, b, isSel) => (isSel ? Number(isSel(b)) - Number(isSel(a)) : 0),\n} as const;\n\nexport function sortEntries(entries: Entry[], order: Order, isSel?: IsSel): Entry[] {\n  const less = CMP[order];\n  return entries.sort((a, b) => less(a, b, isSel));\n}\n", "import { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { HOVER, tw } from \"@plangs/frontend/auxiliar/styles\";\n\nimport { type Column, type FacetTableConfig, type Order, icon, label } from \"./entries\";\n\nexport function Header({\n  action,\n  class: cssClass,\n  col,\n  config,\n  order,\n}: { action: () => void; class?: string; col: Column; config: FacetTableConfig; order: Order }) {\n  return (\n    <button\n      type=\"button\"\n      class={tw(\"px-1\", \"italic\", \"underline decoration-1 decoration-dotted\", \"cursor-pointer\", cssClass)}\n      {...onClickOnEnter(action)}>\n      <div class={tw(HOVER, \"inline-flex w-full\", \"px-1\", \"items-center justify-between\", \"gap-1\")}>\n        <span>{label(col, config)}</span>\n        <span class={tw(\"scale-75\", \"mt-1\")}>{icon(col, order)}</span>\n        <span class=\"flex-1\" />\n      </div>\n    </button>\n  );\n}\n", "import { Filter } from \"@plangs/auxiliar/filters\";\nimport { Dispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport type { AnyFacetsMainState } from \"@plangs/frontend/facets/main/use_state\";\n\nimport { type Column, type Entry, type Order, type Val, opposite, sortEntries } from \"./entries\";\nimport type { FacetTableProps } from \"./facet-table\";\n\ntype StateData<GroupKey extends string, FacetKey extends string> = Pick<FacetTableProps<GroupKey, FacetKey>, \"config\" | \"facetKey\" | \"groupKey\"> & {\n  main: AnyFacetsMainState;\n  entries: Entry[];\n  order: Order;\n  filter: string;\n};\n\nexport class FacetTableState<GroupKey extends string, FacetKey extends string> extends Dispatchable<StateData<GroupKey, FacetKey>> {\n  /** Actions */\n\n  doSetValue(val: Filter<Val>): \"changed\" | \"unchanged\" {\n    const { main, data } = this;\n    return main.doSetValue(data.groupKey, data.facetKey, val);\n  }\n\n  doToggle(val: Val) {\n    const { value } = this;\n    value.has(val) ? value.delete(val) : value.add(val);\n    this.doSetValue(value);\n  }\n\n  doSetMode(mode: \"all\" | \"any\"): void {\n    const { value } = this;\n    if (value.mode === mode) return;\n    this.value.mode = mode === \"all\" ? \"all\" : \"any\";\n    this.doSetValue(value);\n  }\n\n  // Note that this is the only place where we dispatch locally instead of through the main state.\n  doToggleOrder(col: Column) {\n    const { order } = this.data;\n    this.data.order = opposite(col, order);\n    sortEntries(this.data.entries, this.data.order, entry => this.value.has(entry.value));\n    this.dispatch();\n  }\n\n  doResetSelection() {\n    this.value.clear();\n    this.doSetValue(this.value);\n  }\n\n  doSetFilter(value: string): void {\n    this.data.filter = value;\n    this.dispatch();\n  }\n\n  /** Queries */\n\n  get main() {\n    return this.data.main;\n  }\n\n  get filter() {\n    return this.data.filter;\n  }\n\n  /** Selected values. */\n  get value() {\n    const { main, groupKey, facetKey } = this.data;\n    return main.values.getOrSet(groupKey, facetKey, () => new Filter(\"any\")) as Filter<Val>;\n  }\n\n  /** All entries. */\n  get filteredEntries() {\n    if (this.filter === \"\") return this.data.entries;\n    const pattern = this.filter.toLowerCase();\n    return this.data.entries.filter(entry => entry.label.toLowerCase().includes(pattern));\n  }\n\n  get order() {\n    return this.data.order;\n  }\n\n  get hasSelection() {\n    return this.value.size > 0;\n  }\n}\n", "import type { Ref } from \"preact\";\nimport { useContext, useEffect, useRef } from \"preact/hooks\";\n\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport { useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { on } from \"@plangs/frontend/auxiliar/events\";\nimport { BORDER, HOVER, HOVER_ICON, HOVER_ICON_BG, VSCROLL, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { IconButton } from \"@plangs/frontend/components/icon-button/icon-button\";\nimport { type AnyFacetsMainState, FacetsMainContext } from \"@plangs/frontend/facets/main/use_state\";\n\nimport { DESELECT } from \"@plangs/frontend/auxiliar/icons\";\nimport { type FacetTableConfig, generateEntries, sortEntries } from \"./entries\";\nimport { Header } from \"./header\";\nimport { FacetTableState } from \"./state\";\n\nexport type FacetTableProps<GroupKey extends string, FacetKey extends string> = {\n  groupKey: GroupKey;\n  facetKey: FacetKey;\n  config: FacetTableConfig;\n  active: boolean;\n};\n\nexport function FacetTable<GroupKey extends string, FacetKey extends string>({\n  groupKey,\n  facetKey,\n  config,\n  active,\n}: FacetTableProps<GroupKey, FacetKey>) {\n  const self = useRef<HTMLDivElement>();\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n\n  const state = useDispatchable(() => {\n    const order = config.kind === \"prop\" ? \"facet-desc\" : \"facet-asc\";\n    const entries = sortEntries(generateEntries(main.pg, config), order);\n    return new FacetTableState({ config, entries, facetKey, groupKey, main, order, filter: \"\" });\n  });\n\n  useEffect(() =>\n    on(self?.current, \"icon-button\", (ev: CustomEvent) => {\n      ev.stopPropagation();\n      state.doSetMode(ev.detail.mode === \"all\" ? \"all\" : \"any\");\n    }),\n  );\n\n  const SUBGRID = tw(\"col-span-3\", \"grid grid-cols-subgrid\");\n  const ROW = tw(SUBGRID, tw(\"border-b-1\", BORDER));\n\n  const body = () => (\n    <div class={tw(\"grid grid-cols-[1fr_auto_auto]\", VSCROLL, \"relative\")}>\n      <div class={tw(ROW, \"sticky top-0\", \"bg-primary text-background/80\", \"cursor-pointer\", tw(BORDER, \"border-b-1\"))}>\n        <div class={tw(\"col-span-3\", \"flex flex-row items-center gap-2\", \"px-1\", \"border-secondary border-b-1 border-dotted\")}>\n          <label for=\"filter-facets\" class=\"inline-block\">\n            Filter:\n          </label>\n          <input\n            id=\"filter-facets\"\n            class=\"m-2 inline-block flex-1 p-1\"\n            value={state.filter}\n            onInput={ev => state.doSetFilter(ev.currentTarget.value)}\n          />\n          <IconButton action=\"allAny\" initial={state.value.mode} disabled={state.value.size < 2} />\n\n          <div\n            {...onClickOnEnter(() => state.doResetSelection())}\n            class={tw(\"scale-75 p-1\", state.hasSelection ? tw(\"hover:text-hiliteb\", HOVER_ICON_BG) : \"opacity-25\")}>\n            {DESELECT}\n          </div>\n        </div>\n\n        <div class={tw(ROW, \"col-span-3\")}>\n          <Header class={\"text-left\"} action={() => state.doToggleOrder(\"facet\")} col=\"facet\" config={config} order={state.order} />\n          <Header class={\"text-center\"} action={() => state.doToggleOrder(\"count\")} col=\"count\" config={config} order={state.order} />\n          <Header class={\"text-right\"} action={() => state.doToggleOrder(\"sel\")} col=\"sel\" config={config} order={state.order} />\n        </div>\n      </div>\n      {state.filteredEntries.map(entry =>\n        ret(\n          onClickOnEnter(() => state.doToggle(entry.value)),\n          clickOrEnter => (\n            <div key={entry.value} class={tw(ROW, HOVER, state.value.has(entry.value) && \"bg-primary/20\")} {...clickOrEnter}>\n              <div class={tw(\"p-2\", \"text-left\", \"overflow-hidden text-ellipsis\", \"line-clamp-3\")}>{entry.label}</div>\n              <div class={tw(\"p-2\", \"text-center\")}>{entry.count}</div>\n              <div class={tw(\"p-2\", \"text-right\")}>\n                <input type=\"checkbox\" checked={state.value.has(entry.value)} {...clickOrEnter} />\n              </div>\n            </div>\n          ),\n        ),\n      )}\n    </div>\n  );\n\n  return (\n    <div ref={self as Ref<HTMLDivElement>} class={tw(\"flex flex-col\", \"size-full overflow-hidden\")}>\n      {active ? body() : null}\n    </div>\n  );\n}\n", "import type { ComponentChildren, FunctionComponent } from \"preact\";\nimport { useContext } from \"preact/hooks\";\n\nimport { tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { FacetConfig } from \"@plangs/frontend/facets/main/types\";\nimport { type AnyFacetsMainState, FacetsMainContext } from \"@plangs/frontend/facets/main/use_state\";\nimport { FacetBool } from \"@plangs/frontend/facets/misc/facet-bool\";\nimport { FacetText } from \"@plangs/frontend/facets/misc/facet-text\";\nimport { FacetMulti } from \"@plangs/frontend/facets/multisel/facet-multi\";\nimport { FacetTable } from \"@plangs/frontend/facets/table/facet-table\";\n\n/** Higher order component: Return a component wrapping several FacetGroup components. */\nexport function createFacetGroupsComponent<GK extends string, FK extends string>(\n  groups: Map<GK, { title: string; facets: FacetConfig<FK>[] }>,\n): FunctionComponent<{ currentFacetGroup: GK }> {\n  return ({ currentFacetGroup }) => (\n    <>\n      {[...groups.entries()].map(([groupKey, { title, facets }]) => (\n        <FacetGroup<GK> key={groupKey} groupKey={groupKey} label={title} active={currentFacetGroup === groupKey}>\n          {facets.map(facet => {\n            const { kind, label, facetKey } = facet;\n            const props = { groupKey, facetKey, label, active: currentFacetGroup === groupKey };\n            switch (kind) {\n              case \"bool\":\n                return <FacetBool {...props} valueMapper={facet.valueMapper} />;\n              case \"multi\":\n                return <FacetMulti {...props} />;\n              case \"table\":\n                return <FacetTable {...props} config={facet.config} />;\n              case \"text\":\n                return <FacetText {...props} />;\n              default:\n                console.error(\"Facet not found\", facetKey);\n            }\n          })}\n        </FacetGroup>\n      ))}\n    </>\n  );\n}\n\nexport function FacetGroup<GroupKey extends string>({\n  active,\n  children,\n}: { label: string; groupKey: GroupKey; active: boolean; children: ComponentChildren }) {\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n  return (\n    <div\n      class={tw(\n        \"relative\",\n        !active && \"hidden\",\n\n        // Self.\n        \"flex-1\",\n        \"self-center\",\n        \"size-full overflow-hidden overflow-y-auto\",\n\n        // Children.\n        \"flex flex-col gap-4\",\n      )}>\n      {children}\n    </div>\n  );\n}\n", "import type { FunctionComponent } from \"preact\";\n\nimport type { AnyValue } from \"@plangs/auxiliar/value\";\nimport type { FacetBoolMapper } from \"@plangs/frontend/facets/misc/facet-bool\";\nimport { createFacetGroupsComponent } from \"@plangs/frontend/facets/misc/facet-group\";\nimport type { FacetTableConfig } from \"@plangs/frontend/facets/table/entries\";\n\n////////////////////////////////////////////////////////////////////////////////\n/// Facet Input Configuration\n////////////////////////////////////////////////////////////////////////////////\n\nexport type FacetConfigBase<Kind extends string, FK> = { kind: Kind; label: string; facetKey: FK };\n\nexport type FacetConfigBool<FK> = FacetConfigBase<\"bool\", FK> & { valueMapper?: (checked: boolean) => AnyValue };\nexport type FacetConfigMulti<FK> = FacetConfigBase<\"multi\", FK>;\nexport type FacetConfigTable<FK> = FacetConfigBase<\"table\", FK> & { config: FacetTableConfig };\nexport type FacetConfigText<FK> = FacetConfigBase<\"text\", FK>;\n\n/** Type for the input for a facet. */\nexport type FacetConfig<FK> = FacetConfigBool<FK> | FacetConfigMulti<FK> | FacetConfigTable<FK> | FacetConfigText<FK>;\n\n/** A Map from the facet key to the facet configuration. */\nexport type FacetsMap<FK> = Map<FK, FacetConfig<FK>>;\n\nexport function bool<FK>(facetKey: FK, label: string, valueMapper?: FacetBoolMapper): FacetConfigBool<FK> {\n  return { kind: \"bool\", facetKey, label, valueMapper };\n}\n\nexport function multi<FK>(facetKey: FK, label: string): FacetConfigMulti<FK> {\n  return { kind: \"multi\", facetKey, label };\n}\n\nexport function table<FK>(facetKey: FK, label: string, config: FacetTableConfig): FacetConfigTable<FK> {\n  return { kind: \"table\", facetKey, label, config };\n}\n\nexport function text<FK>(facetKey: FK, label: string): FacetConfigText<FK> {\n  return { kind: \"text\", facetKey, label };\n}\n\n////////////////////////////////////////////////////////////////////////////////\n/// Facet Groups Configuration helper.\n////////////////////////////////////////////////////////////////////////////////\n\n/** Returns a map of group config, a map of group key by facet key, and a preact componetn to render the group. */\nexport function defineFacetGroups<GK extends string, FK extends string>(\n  groups: Record<GK, { title: string; facets: FacetConfig<FK>[] }>,\n): [Map<GK, { title: string; facets: FacetConfig<FK>[] }>, Map<FK, GK>, FunctionComponent<{ currentFacetGroup: string }>] {\n  const groupsMap = new Map(Object.entries(groups) as [GK, { title: string; facets: FacetConfig<FK>[] }][]);\n  const gkByFk = new Map<FK, GK>();\n  type GEntry = { title: string; facets: FacetConfig<FK>[] };\n  for (const [groupKey, { facets }] of Object.entries(groups) as [GK, GEntry][]) {\n    for (const facet of facets) gkByFk.set(facet.facetKey, groupKey);\n  }\n  const component = createFacetGroupsComponent(groupsMap);\n\n  return [groupsMap, gkByFk, component as FunctionComponent<{ currentFacetGroup: string }>];\n}\n", "/** Insert elements in the array if they are not already present. */\nexport function arrayMerge<T>(\n  target: T[],\n  newData: T[],\n  similar: (l1: T, l2: T) => boolean = (l1, l2) => l1 === l2,\n  onDuplicate?: (prevElem: T, newElem: T) => void,\n) {\n  for (const newElem of newData) {\n    const prevElem = target.find((elem: T) => similar(elem, newElem));\n    if (prevElem) {\n      onDuplicate?.(prevElem, newElem);\n    } else {\n      target.push(newElem);\n    }\n  }\n}\n\n/** Delete in-place the given indexes of an array. Sorts the array in descending order to delete the proper elements. */\nexport function arrayDelete<T>(array: T[], indexes: Set<number>) {\n  // Delete indexes starting with the last one to avoid shifting elements.\n  for (const idx of [...indexes].sort((a, b) => b - a)) array.splice(idx, 1);\n}\n\n/** In place removal of array elements. */\nexport function removeIf<T>(array: T[], predicate: (value: T) => boolean, onRemove?: (value: T) => void): T[] {\n  for (let i = array.length - 1; i >= 0; i--) {\n    if (predicate(array[i])) {\n      onRemove?.(array[i]);\n      array.splice(i, 1);\n    }\n  }\n  return array;\n}\n", "/**\n * Wrapper to work with potentially empty or undefined iterables.\n */\nexport class IterTap<T> implements Iterable<T> {\n  readonly array: T[] | undefined;\n\n  constructor(iterable: Iterable<T> | undefined) {\n    this.array = Array.isArray(iterable) ? iterable : iterable ? [...iterable] : undefined;\n  }\n\n  filter(callback: (value: T, index: number, array: T[]) => boolean) {\n    return this.array ? this.array.filter(callback) : [];\n  }\n\n  map<R>(callback: (value: T, index: number, array: T[]) => R): IterTap<R> {\n    return new IterTap(this.array ? this.array.map(callback) : []);\n  }\n\n  reduce<R>(callback: (previousValue: R, currentValue: T, currentIndex: number, array: T[]) => R, init: R) {\n    return this.array ? this.array.reduce<R>(callback, init) : init;\n  }\n\n  sort(cmp?: (a: T, b: T) => number): T[] {\n    return this.array ? [...this.array].sort(cmp) : [];\n  }\n\n  join(str: string): string {\n    return this.array ? this.array.join(str) : \"\";\n  }\n\n  includes(val: T): boolean {\n    return this.array ? this.array.includes(val) : false;\n  }\n\n  some(predicate: (value: T, index: number, array: T[]) => boolean): boolean {\n    return this.array ? this.array.some(predicate) : false;\n  }\n\n  find(predicate: (value: T, index?: number, obj?: T[]) => boolean): T | undefined {\n    return this.array?.find(predicate);\n  }\n\n  tap<R>(callback: (array: T[]) => R): R | undefined {\n    if (this.array && this.array.length > 0) return callback(this.array);\n  }\n\n  get(index: number): T | undefined {\n    return this.array ? this.array[index] : undefined;\n  }\n\n  get isEmpty(): boolean {\n    return this.array ? this.array.length === 0 : true;\n  }\n\n  get size(): number {\n    return this.array ? this.array.length : 0;\n  }\n\n  get length(): number {\n    return this.size;\n  }\n\n  /** Return all non-null and non-undefined values (if strings, returns the ones with length > 0). */\n  get existing(): NonNullable<T>[] {\n    return this.filter(v => v !== undefined && v !== null && (typeof v !== \"string\" || v.length > 0)) as NonNullable<T>[];\n  }\n\n  get reverse(): IterTap<T> {\n    return new IterTap(this.array ? [...this.array].reverse() : undefined);\n  }\n\n  get first(): T | undefined {\n    return this.array && this.array.length > 0 ? this.array[0] : undefined;\n  }\n\n  get last(): T | undefined {\n    return this.array && this.array.length > 0 ? this.array[this.array.length - 1] : undefined;\n  }\n\n  [Symbol.iterator](): Iterator<T> {\n    return this.array ? this.array[Symbol.iterator]() : [].values();\n  }\n}\n", "export type VKey<Prefix extends string> = `${Prefix}+${string}`;\n\n/**\n * Vertex object:\n *\n * The string keys use a prefix go help differentiate vertices:\n * \"key+1\", \"another+2\", etc.\n *\n * Serializes to the plain data object without the key.\n */\nexport abstract class Vertex<KeyPrefix extends string, Data> {\n  /** Serializable data. */\n  data: Partial<Data> = {};\n\n  constructor(readonly key: VKey<KeyPrefix>) {}\n\n  /** Shallow merge data. */\n  merge(data: Partial<Data>): this {\n    Object.assign(this.data, data);\n    return this;\n  }\n\n  /** The key without the `${kind}+` prefix. */\n  get plainKey(): string {\n    return this.key.replace(/^[a-z]+\\+/, \"\");\n  }\n\n  /**\n   * Lower-case first letter of the {@link plainKey}, or {@link NON_AZ} if it starts with a non-letter.\n   * Useful when doing things like organizing the data in a folder structure.\n   */\n  get classifier(): string {\n    const pk = this.plainKey;\n    return /^[a-z]/i.test(pk) ? pk[0].toLowerCase() : NON_AZ;\n  }\n\n  /** {@link merge} can be used to load serialized data into an instance. */\n  toJSON() {\n    return this.data;\n  }\n\n  toString() {\n    return this.key;\n  }\n}\n\n/** Type of a Vertex with any key and data, useful for generic containers. */\n// biome-ignore lint/suspicious/noExplicitAny: we want to keep track of vertices with any key and data.\nexport type AnyVertex = Vertex<any, any>;\n\n/* Used to classify vertices whose plain key don't start with a letter. */\nexport const NON_AZ = \"-\";\n\n/**\n * A container for vertices and identity map:\n *\n * - Maintains a map of Vertices by Vertex key.\n * - Creates Vertices as needed using the factory function.\n */\nexport class Vertices<V extends AnyVertex> {\n  readonly map = new Map<V[\"key\"], V>();\n\n  constructor(\n    /** Name of the kind of Vertices. */\n    readonly name: string,\n    /** Kind of Vertices, used as prefix of the Key. */\n    readonly kind: string,\n    private factory: (key: V[\"key\"]) => V,\n  ) {}\n\n  set(key: V[\"key\"], data: V[\"data\"] = {}): V {\n    const vertex = this.factory(key).merge(data);\n    this.map.set(key, vertex);\n    return vertex;\n  }\n\n  get(key: V[\"key\"]): V | undefined {\n    return this.map.get(key);\n  }\n\n  has(key: V[\"key\"]): boolean {\n    return this.map.has(key);\n  }\n\n  delete(key: V[\"key\"]): boolean {\n    return this.map.delete(key);\n  }\n\n  clear(): void {\n    this.map.clear();\n  }\n\n  get keys() {\n    return this.map.keys();\n  }\n\n  get values() {\n    return this.map.values();\n  }\n\n  get entries() {\n    return this.map.entries();\n  }\n\n  toJSON(): Record<V[\"key\"], V[\"data\"]> {\n    return Object.fromEntries([...this.map].map(([key, vertex]) => [key, vertex.toJSON()])) as Record<V[\"key\"], V[\"data\"]>;\n  }\n}\n\n/**\n * Keep track of forward and backward edges between vertices.\n *\n * - Only allows a single edge between vertices.\n * - Tracks vertices keys only. The actual vertices live in the {@link Vertices} containers.\n * - Doesn't keep track of any edge data for now.\n */\nexport class Edges<From extends AnyVertex, To extends AnyVertex> {\n  readonly #forward = new Map<From[\"key\"], Set<To[\"key\"]>>();\n  readonly #backward = new Map<To[\"key\"], Set<From[\"key\"]>>();\n\n  /**\n   * We keep track of the from and to sources {@link Vertices} containers,\n   * so we can easily retrieve the actual vertex from its key when needed.\n   */\n  constructor(\n    readonly fromSource: Vertices<From>,\n    readonly toSource: Vertices<To>,\n    /** Description of the direct relationship from -> to. */\n    readonly descDirect: string,\n    /** Description of the inverse relationship to -> from. */\n    readonly descInverse: string,\n  ) {}\n\n  /**\n   * Track a relationship between two vertices.\n   * **Note**: the user is responsible of ensuring the vertices exist.\n   */\n  add(fromKey: From[\"key\"], ...toKeys: To[\"key\"][]): this {\n    let forward = this.#forward.get(fromKey);\n    if (!forward) this.#forward.set(fromKey, (forward = new Set()));\n\n    for (const toKey of toKeys) {\n      forward.add(toKey);\n\n      let backward = this.#backward.get(toKey);\n      if (!backward) this.#backward.set(toKey, (backward = new Set()));\n\n      backward.add(fromKey);\n    }\n\n    return this;\n  }\n\n  /** Get the vertices from the keys. */\n  get(fromKey: From[\"key\"], toKey: To[\"key\"]): [From | undefined, To | undefined] {\n    return [this.fromSource.get(fromKey), this.toSource.get(toKey)];\n  }\n\n  /** Shortcut: add a relationship and return the target vertices. */\n  addGet(fromKey: From[\"key\"], toKey: To[\"key\"]): [From | undefined, To | undefined] {\n    return this.add(fromKey, toKey).get(fromKey, toKey);\n  }\n\n  delete(fromKey: From[\"key\"], toKey: To[\"key\"]): boolean {\n    const f = this.#forward.get(fromKey)?.delete(toKey) ?? false;\n    const b = this.#backward.get(toKey)?.delete(fromKey) ?? false;\n    return f || b;\n  }\n\n  forward(fromKey: From[\"key\"]): Set<To[\"key\"]> {\n    return this.#forward.get(fromKey) ?? new Set();\n  }\n\n  backward(toKey: To[\"key\"]): Set<From[\"key\"]> {\n    return this.#backward.get(toKey) ?? new Set();\n  }\n\n  has(fromKey: From[\"key\"], toKey: To[\"key\"]): boolean {\n    return this.#forward.get(fromKey)?.has(toKey) ?? false;\n  }\n\n  /** Return all keys `[fromKey, Set<toKey>]`. */\n  get entriesForward(): [From[\"key\"], Set<To[\"key\"]>][] {\n    return [...this.#forward].map(([key, set]) => [key, set]);\n  }\n\n  /** Return all keys `[toKey, Set<fromKey>]`. */\n  get entriesBackward(): [From[\"key\"], Set<To[\"key\"]>][] {\n    return [...this.#backward].map(([key, set]) => [key, set]);\n  }\n\n  /** Map all Vertex keys to their respective Vertices or undefined if missing. */\n  get vertices(): [From[\"key\"], From | undefined, To[\"key\"], To | undefined][] {\n    const result: [From[\"key\"], From | undefined, To[\"key\"], To | undefined][] = [];\n    for (const [fromKey, toKeys] of this.entriesForward) {\n      const from = this.fromSource.get(fromKey);\n      for (const toKey of toKeys) result.push([fromKey, from, toKey, this.toSource.get(toKey)]);\n    }\n    return result;\n  }\n\n  /* Number of relationships. */\n  get size() {\n    let size = 0; // Both #forward and #backward should have the same size.\n    for (const set of this.#forward.values()) size += set.size;\n    return size;\n  }\n\n  /* {@link addMany} can be used to load back the result of the serialization. */\n  toJSON(): Record<From[\"key\"], To[\"key\"][]> {\n    return Object.fromEntries(this.entriesForward.map(([fromKey, setToKeys]) => [fromKey, [...setToKeys]])) as Record<From[\"key\"], To[\"key\"][]>;\n  }\n}\n\nexport type SerializedGraph = {\n  vertices: Record<string, Record<string, AnyVertex[\"data\"]>>;\n  edges: Record<string, Record<string, string[]>>;\n};\n\n/** This class provides shrotcuts to work with relationship between vertices directly **from** the vertex. */\nexport class RelFrom<FromVertex extends AnyVertex, ToVertex extends AnyVertex> {\n  constructor(\n    readonly from: FromVertex,\n    readonly edges: Edges<FromVertex, ToVertex>,\n  ) {}\n\n  get desc(): string {\n    return this.edges.descDirect;\n  }\n\n  add(...toKeys: ToVertex[\"key\"][]): FromVertex {\n    this.edges.add(this.from.key, ...toKeys);\n    return this.from;\n  }\n\n  /** Add keys if they match existing vertices only. */\n  maybeAdd(toKeys: string[]): FromVertex {\n    const existing = (toKeys as ToVertex[\"key\"][]).filter(k => this.edges.toSource.has(k));\n    return this.add(...existing);\n  }\n\n  remove(...toKeys: ToVertex[\"key\"][]): FromVertex {\n    for (const toKey of toKeys) this.edges.delete(this.from.key, toKey);\n    return this.from;\n  }\n\n  has(toKey: ToVertex[\"key\"]): boolean {\n    return this.edges.has(this.from.key, toKey);\n  }\n\n  get keys(): Set<ToVertex[\"key\"]> {\n    return this.edges.forward(this.from.key);\n  }\n\n  get values(): ToVertex[] {\n    return [...this.keys].map(k => this.edges.toSource.get(k)).filter(v => v) as ToVertex[];\n  }\n\n  get size() {\n    return this.keys.size;\n  }\n\n  toString() {\n    return `RelFrom(${this.from}, ${this.desc})`;\n  }\n}\n\n/** This class provides shrotcuts to work with relationship between vertices directly **to** the vertex. */\nexport class RelTo<FromVertex extends AnyVertex, ToVertex extends AnyVertex> {\n  constructor(\n    readonly to: ToVertex,\n    readonly edges: Edges<FromVertex, ToVertex>,\n  ) {}\n\n  get desc(): string {\n    return this.edges.descInverse;\n  }\n\n  add(...fromKeys: FromVertex[\"key\"][]): ToVertex {\n    for (const fromKey of fromKeys) this.edges.add(fromKey, this.to.key);\n    return this.to;\n  }\n\n  /** Add keys if they match existing vertices only. */\n  maybeAdd(fromKeys: string[]): ToVertex {\n    const existing = (fromKeys as FromVertex[\"key\"][]).filter(k => this.edges.fromSource.has(k));\n    return this.add(...existing);\n  }\n\n  remove(...fromKeys: FromVertex[\"key\"][]): ToVertex {\n    for (const fromKey of fromKeys) this.edges.delete(fromKey, this.to.key);\n    return this.to;\n  }\n\n  has(fromKey: FromVertex[\"key\"]): boolean {\n    return this.edges.has(fromKey, this.to.key);\n  }\n\n  get keys(): Set<FromVertex[\"key\"]> {\n    return this.edges.backward(this.to.key);\n  }\n\n  get values(): FromVertex[] {\n    return [...this.keys].map(k => this.edges.fromSource.get(k)).filter(v => v) as FromVertex[];\n  }\n\n  get size() {\n    return this.keys.size;\n  }\n\n  toString() {\n    return `RelTo(${this.to}, ${this.desc})`;\n  }\n}\n", "import type { StrDate } from \"@plangs/plangs/graph/vertex_data_schemas\";\n\n// Arbitrary \"valid\" year range.\nexport const validYear = (year: number): boolean => year >= 1940 && year <= 2100;\nexport const validMonth = (month: number): boolean => month >= 1 && month <= 12;\nexport const validDay = (day: number): boolean => day >= 1 && day <= 31;\n\n/** If the string complies with StrDate, returns it formatted and type checked. */\nexport function parseDate(val: string): StrDate | undefined {\n  if (!val || val.length < 4 || val.length > 10) return;\n  const [year, month, day] = val.split(/\\D/, 3);\n  const [y, m, d] = [Number.parseInt(year), Number.parseInt(month), Number.parseInt(day)];\n\n  if (validYear(y)) {\n    if (validMonth(m)) {\n      if (validDay(d)) return `${y}-${`${m}`.padStart(2, \"0\")}-${`${d}`.padStart(2, \"0\")}`;\n      return `${y}-${`${m}`.padStart(2, \"0\")}`;\n    }\n    return `${y}`;\n  }\n}\n\n/** Extract the year from a StrDate. */\nexport function parseYear(val?: StrDate): number | undefined {\n  if (!val || val.length < 4 || val.length > 10) return;\n  const year = Number.parseInt(val.split(/\\D/, 3)[0], 10);\n  if (validYear(year)) return year;\n}\n\nexport function parseMonth(val?: StrDate): number | undefined {\n  if (!val || val.length < 4 || val.length > 10) return;\n  const month = Number.parseInt(val.split(/\\D/, 3)[1], 10);\n  if (validMonth(month)) return month;\n}\n\nexport function strDateCompare(a: StrDate | undefined, b: StrDate | undefined): number {\n  if (a === b) return 0;\n  if (!a) return -1;\n  if (!b) return 1;\n  return a.localeCompare(b);\n}\n\nexport function isRecent(date: StrDate | undefined, referenceDate: StrDate): boolean {\n  if (!date) return false;\n  return date >= referenceDate; // StrDate is a string, so this comparison works.\n}\n", "/**\n * Methods to work with vertex data fields.\n *\n * - Having these wrappers helps avoid duplication of methods that do the same thing accross different vertices.\n * - Wrappers are passed the vertex object instead of the data directly since eventually we will have setters that should modify the data in the vertex.\n */\n\nimport { IterTap } from \"@plangs/auxiliar/iter_tap\";\nimport { isRecent, parseMonth, parseYear, strDateCompare } from \"@plangs/plangs/auxiliar/str_date\";\n\nimport type { GithubRepo, Release, StrDate } from \"./vertex_data_schemas\";\n\n/** Wraps a single release. */\nexport class ReleaseWrapper {\n  constructor(private readonly release: Release) {}\n\n  get version(): string | undefined {\n    return this.release.version;\n  }\n\n  get date(): StrDate | undefined {\n    return this.release.date;\n  }\n\n  get year(): number | undefined {\n    return parseYear(this.release.date);\n  }\n\n  get month(): number | undefined {\n    return parseMonth(this.release.date);\n  }\n\n  get yearMonth() {\n    const { year, month } = this;\n    return year && month ? `${month.toString().padStart(2, \"0\")}/${year}` : year;\n  }\n\n  isRecent(referenceDate: StrDate): boolean {\n    return isRecent(this.date, referenceDate);\n  }\n\n  compareDate(other: ReleaseWrapper): number {\n    return strDateCompare(this.date, other.date);\n  }\n}\n\n/** Wraps a list of releases. */\nexport class FieldReleases {\n  constructor(private readonly vertex: { data: { releases?: Release[] } }) {}\n\n  get all(): IterTap<ReleaseWrapper> {\n    return new IterTap(this.vertex.data.releases).map(rel => new ReleaseWrapper(rel));\n  }\n\n  get last(): ReleaseWrapper | undefined {\n    const all = this.all;\n    if (all.size === 0) return undefined;\n    if (all.size === 1) return all.get(0);\n    return all.sort((r1, r2) => r1.compareDate(r2))[0];\n  }\n}\n\n/** Wraps a StrDate field. */\nexport class FieldStrDate<Key extends string> {\n  constructor(\n    private readonly key: Key,\n    private readonly vertex: { data: Partial<Record<Key, StrDate | undefined>> },\n  ) {}\n\n  get value(): StrDate | undefined {\n    return this.vertex.data[this.key];\n  }\n\n  get year(): number | undefined {\n    return parseYear(this.value);\n  }\n\n  get strYear(): string | undefined {\n    return this.value?.slice(0, 4);\n  }\n\n  get month(): number | undefined {\n    return parseMonth(this.value);\n  }\n\n  isRecent(referenceDate: StrDate): boolean {\n    return isRecent(this.value, referenceDate);\n  }\n}\n\n/**\n * Wraps Github fields: repo stars and repo path\n * The releases field is present in Github but wrapped by FieldReleases.\n */\nexport class FieldGithub {\n  constructor(private readonly vertex: { data: Partial<GithubRepo> }) {}\n\n  /** Returns -1 if the number of stars is unknown. */\n  get stars(): number {\n    return this.vertex.data.githubStars ?? -1;\n  }\n\n  get path(): string | undefined {\n    return this.vertex.data.extGithubPath;\n  }\n\n  get url(): string | undefined {\n    return this.path ? `https://github.com/${this.path}` : undefined;\n  }\n}\n", "import { arrayMerge } from \"@plangs/auxiliar/array\";\nimport { IterTap } from \"@plangs/auxiliar/iter_tap\";\nimport { tap } from \"@plangs/auxiliar/misc\";\nimport { Vertex } from \"@plangs/graphgen/library\";\n\nimport { VPlang } from \".\";\nimport type { PlangsGraphBase, TPlangsVertex, TPlangsVertexName } from \"./generated\";\nimport { type FieldGithub, FieldStrDate } from \"./vertex_data_fields\";\nimport type { Image, Link, VertexBaseData } from \"./vertex_data_schemas\";\n\n/**\n * Vertex detail to display in an information box.\n * Having a stand-alone structure is useful for storing the info on localStorage.\n */\nexport type VertexDetail = {\n  description: string;\n  href: string;\n  key: string;\n  name: string;\n  ranking?: number;\n  shortDesc: string;\n  thumbUrl?: string;\n  urlGithub?: string;\n  urlHome?: string;\n  urlReddit?: string;\n  urlStackov?: string;\n  urlWikipedia?: string;\n  urlLanguish?: string;\n  vertexDesc: string;\n  vertexKind: string;\n  vertexName: string;\n\n  /** Arbitrary \"pill\" data. */\n  general: ({ kind: \"text\"; value: string; title?: string } | { kind: \"link\"; value: string; href: string; title?: string })[];\n\n  /** Related vertex by relationship name. */\n  relations: [string, { name: string; href: string }[]][];\n};\n\nexport abstract class PlangsVertex<KeyPrefix extends string, Data extends VertexBaseData> extends Vertex<KeyPrefix, Data> {\n  constructor(\n    public readonly graph: PlangsGraphBase,\n    key: `${KeyPrefix}+${string}`,\n  ) {\n    super(key);\n  }\n\n  /** Matches the key prefix of vertices, ex: name: \"pl\", for \"plang\" nodes (\"pl+java\").  */\n  abstract readonly vertexKind: string;\n\n  /** Matches the Vertex collection accessor on the Graph instance. */\n  abstract readonly vertexDesc: string;\n\n  /** General description of Vertices of this kind. */\n  abstract readonly vertexName: TPlangsVertexName;\n\n  /** Generate a detail of the vertex, used to render thumbnails and info boxes. */\n  get detail(): VertexDetail {\n    const relations: VertexDetail[\"relations\"] = [];\n    const vertex = this as unknown as TPlangsVertex;\n\n    for (const rel of vertex.relations.values()) {\n      const relValues = rel.values.filter(related => related.key !== vertex.key);\n      if (relValues.length === 0) continue;\n      relations.push([rel.desc, relValues.map(({ name, href }) => ({ name, href }))]);\n    }\n\n    const general: VertexDetail[\"general\"] = [];\n    if (vertex instanceof VPlang) {\n      tap(vertex.created.year, year => year && general.push({ kind: \"text\", value: `Appeared ${vertex.created.year}` }));\n      tap(vertex.isPopular, pop => pop && general.push({ kind: \"text\", value: \"Popular\", title: \"Languish's Rank <= #25 or popular on Github.\" }));\n      tap(vertex.isTranspiler, tsp => tsp && general.push({ kind: \"text\", value: \"Transpiler\", title: \"a.k.a. Source-to-Source Compiler.\" }));\n      tap(\n        vertex.releases.last,\n        rel => rel && general.push({ kind: \"text\", value: `Released ${rel.yearMonth ?? rel.version}`, title: \"Last Release we know about.\" }),\n      );\n      tap(\n        [vertex.urlLanguish, vertex.ranking && `#${vertex.ranking} on Languish`],\n        ([href, value]) => href && value && general.push({ kind: \"link\", href, value, title: value }),\n      );\n    }\n\n    for (const link of vertex.links ?? []) {\n      general.push({ kind: \"link\", href: link.url, value: link.title ?? \"Link\" });\n    }\n\n    return {\n      description: vertex.description,\n      href: vertex.href,\n      key: vertex.key,\n      name: vertex.name,\n      ranking: vertex.ranking,\n      shortDesc: vertex.shortDesc,\n      thumbUrl: vertex.thumbUrl,\n      urlGithub: vertex.urlGithub,\n      urlHome: vertex.urlHome,\n      urlReddit: vertex.urlReddit,\n      urlStackov: vertex.urlStackov,\n      urlWikipedia: vertex.urlWikipedia,\n      urlLanguish: vertex.urlLanguish,\n      vertexDesc: vertex.vertexDesc,\n      vertexKind: vertex.vertexKind,\n      vertexName: vertex.vertexName,\n\n      general,\n      relations,\n    };\n  }\n\n  /** Internal path name for rendering the vertex in the web UI.  */\n  get href(): string {\n    if (this.vertexName === \"plang\") return `/${this.plainKey}`;\n    if (this.vertexName === \"post\") return `/blog/${this.plainKey}`;\n    return `/${this.vertexName.toLowerCase()}/${this.plainKey}`;\n  }\n\n  /** Node ranking, if the nodes are ranked. For instance, Plangs use Linguist data for ranking popularity. */\n  get ranking(): number | undefined {\n    return undefined;\n  }\n\n  get name(): string {\n    return this.data.name ? this.data.name : this.plainKey;\n  }\n\n  #lcName: string | undefined;\n\n  /** Lower case Name, used to compare agasint user search string. */\n  get lcName(): string {\n    if (!this.#lcName) this.#lcName = this.name.toLowerCase();\n    return this.#lcName;\n  }\n\n  get created(): FieldStrDate<\"created\"> {\n    return new FieldStrDate(\"created\", this);\n  }\n\n  get description(): string {\n    return this.data.description || this.name;\n  }\n\n  get shortDesc(): string {\n    if (this.data.shortDesc) return this.data.shortDesc;\n    const desc = this.description;\n    return desc.length > 100 ? `${desc.slice(0, 80)} ...` : desc;\n  }\n\n  get urlHome(): string | undefined {\n    return this.data.extHomeURL;\n  }\n\n  get urlGithub(): string | undefined {\n    return \"github\" in this ? (this.github as FieldGithub).url : undefined;\n  }\n\n  get urlStackov(): string | undefined {\n    return this.data.stackovTags ? `https://stackoverflow.com/questions/tagged/${this.data.stackovTags.join(\"+\")}` : undefined;\n  }\n\n  get urlReddit(): string | undefined {\n    return this.data.extRedditPath ? `https://reddit.com/r/${this.data.extRedditPath}` : undefined;\n  }\n\n  get urlWikipedia(): string | undefined {\n    return this.data.extWikipediaPath ? `https://en.wikipedia.org/wiki/${this.data.extWikipediaPath}` : undefined;\n  }\n\n  get urlLanguish(): string | undefined {\n    if (!(this instanceof VPlang) || !this.data.languishRanking) return undefined;\n    return `https://tjpalmer.github.io/languish/#names=${encodeURIComponent(this.name.toLowerCase())}`;\n  }\n\n  get links(): IterTap<Link> {\n    return new IterTap(this.data.links);\n  }\n\n  get images() {\n    return new IterTap(this.data.images);\n  }\n\n  get keywords(): IterTap<string> {\n    return new IterTap(this.data.keywords);\n  }\n\n  get keywordsRegexp(): RegExp | undefined {\n    const { keywords } = this.data;\n    if (!keywords) return undefined;\n    const lenient = keywords.map(k => k.replaceAll(/[- ]/g, \"\\\\s*.?\\\\s*\"));\n    return new RegExp(`\\\\b(${lenient.join(\"|\")})\\\\b`, \"i\");\n  }\n\n  get thumbUrl(): string | undefined {\n    return (this.images.find(({ kind }) => kind === \"logo\") ?? this.images.first)?.url;\n  }\n\n  addImages(images: Image[]): this {\n    arrayMerge((this.data.images ??= []), images, (i1, i2) => i1.url === i2.url);\n    return this;\n  }\n\n  addKeywords(keywords: string[]): this {\n    arrayMerge((this.data.keywords ??= []), keywords);\n    return this;\n  }\n\n  addLinks(links: Link[]): this {\n    arrayMerge((this.data.links ??= []), links, (l1, l2) => l1.url === l2.url);\n    return this;\n  }\n\n  addStackovTags(stackovTags: string[]): this {\n    arrayMerge((this.data.stackovTags ??= []), stackovTags);\n    return this;\n  }\n\n  /** Override merge to handle some array fields better. */\n  override merge(data: Partial<Data>): this {\n    const { keywords, images, links, stackovTags, ...rest } = data;\n\n    if (images) this.addImages(images);\n    if (keywords) this.addKeywords(keywords);\n    if (links) this.addLinks(links);\n    if (stackovTags) this.addStackovTags(stackovTags);\n\n    return super.merge(rest as Data);\n  }\n}\n", "/**  Do not modify manually! Generated by graphgen on 2024-12-20T03:39:01.868Z. */\n\nimport { Edges, RelFrom, RelTo, type SerializedGraph, Vertices } from \"@plangs/graphgen/library\";\n\n/** Import user defined classes and types. */\nimport * as VC from \".\";\nimport { PlangsVertex } from \"./vertex_base\";\nimport type * as VD from \"./vertex_data_schemas\";\n\n/** Used for better autocomplete. */\nexport type TPlangsClasses = {\n  app: VC.VApp;\n  author: VC.VAuthor;\n  bundle: VC.VBundle;\n  community: VC.VCommunity;\n  learning: VC.VLearning;\n  library: VC.VLibrary;\n  license: VC.VLicense;\n  paradigm: VC.VParadigm;\n  plang: VC.VPlang;\n  platform: VC.VPlatform;\n  post: VC.VPost;\n  subsystem: VC.VSubsystem;\n  tag: VC.VTag;\n  tool: VC.VTool;\n  typeSystem: VC.VTypeSystem;\n};\n\n/** Every Vertex Name. */\nexport type TPlangsVertexName = keyof TPlangsClasses;\n\n/** Every Generated Vertex Class. */\nexport type TPlangsVertex = TPlangsClasses[TPlangsVertexName];\n\n/** Supported relations of each class. */\nexport type TPlangsRelations = {\n  app: VAppRelName;\n  author: VAuthorRelName;\n  bundle: VBundleRelName;\n  community: VCommunityRelName;\n  learning: VLearningRelName;\n  library: VLibraryRelName;\n  license: VLicenseRelName;\n  paradigm: VParadigmRelName;\n  plang: VPlangRelName;\n  platform: VPlatformRelName;\n  post: VPostRelName;\n  subsystem: VSubsystemRelName;\n  tag: VTagRelName;\n  tool: VToolRelName;\n  typeSystem: VTypeSystemRelName;\n};\n\n/** Supported edges of the graph. */\nexport type TPlangsEdgeName = keyof PlangsGraphBase[\"edges\"];\n\n/** Base class for the Plangs graph, generated from its specification. */\nexport class PlangsGraphBase {\n  /** Return a type checked object identifying a relationship of a specific kind of Vertex. */\n  static relConfig<T extends TPlangsVertexName>(vertexName: T, vertexRel: TPlangsRelations[T]) {\n    // biome-ignore lint/style/noNonNullAssertion: correct by construction.\n    const klass = PlangsGraphBase.vertexClass(vertexName)!;\n    // @ts-ignore correct by construction.\n    const { edgeName, direction }: { edgeName: TPlangsEdgeName; direction: \"direct\" | \"inverse\" } = klass.relConfig[vertexRel];\n    return { kind: \"rel\", edgeName, direction } as const;\n  }\n\n  /** Return a type checked object identifying a property of the class that is \"readable\" (a prop returning a String, Boolean or Nunber). */\n  static propConfig<T extends TPlangsVertexName>(vertexName: T, vertexProp: keyof TPlangsClasses[T]) {\n    return { kind: \"prop\", vertexName, vertexProp } as const;\n  }\n\n  /** Get a Vertex class by its Vertex name. */\n  static vertexClass<T extends TPlangsVertexName>(vertexName: T) {\n    // We cannot use a Map here because each of the classes will not be initialized yet.\n    if (vertexName === \"app\") return VC.VApp;\n    if (vertexName === \"author\") return VC.VAuthor;\n    if (vertexName === \"bundle\") return VC.VBundle;\n    if (vertexName === \"community\") return VC.VCommunity;\n    if (vertexName === \"learning\") return VC.VLearning;\n    if (vertexName === \"library\") return VC.VLibrary;\n    if (vertexName === \"license\") return VC.VLicense;\n    if (vertexName === \"paradigm\") return VC.VParadigm;\n    if (vertexName === \"plang\") return VC.VPlang;\n    if (vertexName === \"platform\") return VC.VPlatform;\n    if (vertexName === \"post\") return VC.VPost;\n    if (vertexName === \"subsystem\") return VC.VSubsystem;\n    if (vertexName === \"tag\") return VC.VTag;\n    if (vertexName === \"tool\") return VC.VTool;\n    if (vertexName === \"typeSystem\") return VC.VTypeSystem;\n  }\n\n  /** Vertex kinds per Vertex Name. The kind is the prefix of a Vertex Key. */\n  static readonly vertexKind = new Map<TPlangsVertexName, string>([\n    [\"app\", \"app\"],\n    [\"author\", \"author\"],\n    [\"bundle\", \"bun\"],\n    [\"community\", \"comm\"],\n    [\"learning\", \"learn\"],\n    [\"library\", \"lib\"],\n    [\"license\", \"lic\"],\n    [\"paradigm\", \"para\"],\n    [\"plang\", \"pl\"],\n    [\"platform\", \"plat\"],\n    [\"post\", \"post\"],\n    [\"subsystem\", \"sys\"],\n    [\"tag\", \"tag\"],\n    [\"tool\", \"tool\"],\n    [\"typeSystem\", \"tsys\"],\n  ]);\n\n  /** Reverse map of vertexKind. */\n  static readonly vertexNameByKind = new Map<string, TPlangsVertexName>(Array.from(PlangsGraphBase.vertexKind.entries()).map(([k, v]) => [v, k]));\n\n  /** Get a vertex by key, if the kind of vertex is known. */\n  getVertex(vertexKey: string): TPlangsVertex | undefined {\n    const kind = vertexKey.split(\"+\", 2)[0] as TPlangsVertexName;\n    const vertexName = PlangsGraphBase.vertexNameByKind.get(kind);\n    if (!vertexName) return;\n    return this.vertices[vertexName]?.get(vertexKey as any);\n  }\n\n  // Create a Vertices instances for each vertex.\n\n  readonly app = new Vertices<VC.VApp>(\"app\", \"app\", key => new VC.VApp(this, key));\n  readonly author = new Vertices<VC.VAuthor>(\"author\", \"author\", key => new VC.VAuthor(this, key));\n  readonly bundle = new Vertices<VC.VBundle>(\"bundle\", \"bun\", key => new VC.VBundle(this, key));\n  readonly community = new Vertices<VC.VCommunity>(\"community\", \"comm\", key => new VC.VCommunity(this, key));\n  readonly learning = new Vertices<VC.VLearning>(\"learning\", \"learn\", key => new VC.VLearning(this, key));\n  readonly library = new Vertices<VC.VLibrary>(\"library\", \"lib\", key => new VC.VLibrary(this, key));\n  readonly license = new Vertices<VC.VLicense>(\"license\", \"lic\", key => new VC.VLicense(this, key));\n  readonly paradigm = new Vertices<VC.VParadigm>(\"paradigm\", \"para\", key => new VC.VParadigm(this, key));\n  readonly plang = new Vertices<VC.VPlang>(\"plang\", \"pl\", key => new VC.VPlang(this, key));\n  readonly platform = new Vertices<VC.VPlatform>(\"platform\", \"plat\", key => new VC.VPlatform(this, key));\n  readonly post = new Vertices<VC.VPost>(\"post\", \"post\", key => new VC.VPost(this, key));\n  readonly subsystem = new Vertices<VC.VSubsystem>(\"subsystem\", \"sys\", key => new VC.VSubsystem(this, key));\n  readonly tag = new Vertices<VC.VTag>(\"tag\", \"tag\", key => new VC.VTag(this, key));\n  readonly tool = new Vertices<VC.VTool>(\"tool\", \"tool\", key => new VC.VTool(this, key));\n  readonly typeSystem = new Vertices<VC.VTypeSystem>(\"typeSystem\", \"tsys\", key => new VC.VTypeSystem(this, key));\n\n  /** All vertex collections. */\n  readonly vertices = {\n    app: this.app,\n    author: this.author,\n    bundle: this.bundle,\n    community: this.community,\n    learning: this.learning,\n    library: this.library,\n    license: this.license,\n    paradigm: this.paradigm,\n    plang: this.plang,\n    platform: this.platform,\n    post: this.post,\n    subsystem: this.subsystem,\n    tag: this.tag,\n    tool: this.tool,\n    typeSystem: this.typeSystem,\n  } as const;\n\n  /** All edge collections. */\n  readonly edges = {\n    appRelPlatforms: new Edges(this.app, this.platform, \"Platforms\", \"Apps\"),\n    appRelWrittenWith: new Edges(this.app, this.plang, \"Plangs\", \"Apps\"),\n    authorRelCommunites: new Edges(this.author, this.community, \"Communites\", \"Members\"),\n    bundleRelPlangs: new Edges(this.bundle, this.plang, \"Plangs\", \"Bundles\"),\n    bundleRelTools: new Edges(this.bundle, this.tool, \"Tools\", \"Bundles\"),\n    communityRelApps: new Edges(this.community, this.app, \"Apps\", \"Communities\"),\n    communityRelLibraries: new Edges(this.community, this.library, \"Libraries\", \"Communities\"),\n    communityRelPlangs: new Edges(this.community, this.plang, \"Plangs\", \"Communities\"),\n    communityRelSubsystems: new Edges(this.community, this.subsystem, \"Subsystems\", \"Communities\"),\n    communityRelTools: new Edges(this.community, this.tool, \"Tools\", \"Communities\"),\n    learningRelApps: new Edges(this.learning, this.app, \"Apps\", \"Learning Resources\"),\n    learningRelCommunities: new Edges(this.learning, this.community, \"Communities\", \"Learning Resources\"),\n    learningRelLibraries: new Edges(this.learning, this.library, \"Libraries\", \"Learning Resources\"),\n    learningRelPlangs: new Edges(this.learning, this.plang, \"Plangs\", \"Learning Resources\"),\n    learningRelSubsystems: new Edges(this.learning, this.subsystem, \"Subsystems\", \"Learning Resources\"),\n    learningRelTools: new Edges(this.learning, this.tool, \"Tools\", \"Learning Resources\"),\n    libraryRelPlangs: new Edges(this.library, this.plang, \"Plangs\", \"Libraries\"),\n    libraryRelPlatforms: new Edges(this.library, this.platform, \"Platforms\", \"Libraries\"),\n    libraryRelWrittenWith: new Edges(this.library, this.plang, \"Written With\", \"Used for Libraries\"),\n    licenseRelApps: new Edges(this.license, this.app, \"Apps\", \"Licenses\"),\n    licenseRelLibraries: new Edges(this.license, this.library, \"Libraries\", \"Licenses\"),\n    licenseRelPlangs: new Edges(this.license, this.plang, \"Plangs\", \"Licenses\"),\n    licenseRelSubsystems: new Edges(this.license, this.subsystem, \"Subsystems\", \"Licenses\"),\n    licenseRelTools: new Edges(this.license, this.tool, \"Tools\", \"Licenses\"),\n    plangRelCompilesTo: new Edges(this.plang, this.plang, \"Transpiling Targets\", \"Source Plangs\"),\n    plangRelDialectOf: new Edges(this.plang, this.plang, \"Dialect of\", \"Dialects\"),\n    plangRelImplements: new Edges(this.plang, this.plang, \"Implements\", \"Implemented By\"),\n    plangRelInfluencedBy: new Edges(this.plang, this.plang, \"Influenced By\", \"Influenced\"),\n    plangRelParadigms: new Edges(this.plang, this.paradigm, \"Paradigms\", \"Plangs\"),\n    plangRelPlatforms: new Edges(this.plang, this.platform, \"Platforms\", \"Plangs\"),\n    plangRelTools: new Edges(this.plang, this.tool, \"Tools\", \"Plangs\"),\n    plangRelTypeSystems: new Edges(this.plang, this.typeSystem, \"Type Systems\", \"Plangs\"),\n    plangRelWrittenWith: new Edges(this.plang, this.plang, \"Written With\", \"Used to Write\"),\n    postRelApps: new Edges(this.post, this.app, \"Apps\", \"Posts\"),\n    postRelAuthors: new Edges(this.post, this.author, \"Authors\", \"Posts\"),\n    postRelCommunities: new Edges(this.post, this.community, \"Communities\", \"Posts\"),\n    postRelLearning: new Edges(this.post, this.learning, \"Learning Resources\", \"Posts\"),\n    postRelLibraries: new Edges(this.post, this.library, \"Libraries\", \"Posts\"),\n    postRelPlangs: new Edges(this.post, this.plang, \"Plangs\", \"Posts\"),\n    postRelSubsystems: new Edges(this.post, this.subsystem, \"Subsystems\", \"Posts\"),\n    postRelTools: new Edges(this.post, this.tool, \"Tools\", \"Posts\"),\n    subsystemRelPlatforms: new Edges(this.subsystem, this.platform, \"Platforms\", \"Subsystems\"),\n    subsystemRelWrittenWith: new Edges(this.subsystem, this.plang, \"Plangs\", \"Subsystems\"),\n    tagRelApps: new Edges(this.tag, this.app, \"Apps tagged\", \"Tags\"),\n    tagRelCommunities: new Edges(this.tag, this.community, \"Communities\", \"Tags\"),\n    tagRelLearning: new Edges(this.tag, this.learning, \"Learning Resources\", \"Tags\"),\n    tagRelLibraries: new Edges(this.tag, this.library, \"Libraries\", \"Tags\"),\n    tagRelPlangs: new Edges(this.tag, this.plang, \"Plangs\", \"Tags\"),\n    tagRelSubsystems: new Edges(this.tag, this.subsystem, \"Subsystems\", \"Tags\"),\n    tagRelTools: new Edges(this.tag, this.tool, \"Tools\", \"Tags\"),\n    toolRelPlatforms: new Edges(this.tool, this.platform, \"Platforms\", \"Tools\"),\n    toolRelWrittenWith: new Edges(this.tool, this.plang, \"Implemented With\", \"Tool Plang\"),\n  } as const;\n\n  toJSON(): SerializedGraph {\n    return {\n      vertices: Object.fromEntries(Object.entries(this.vertices).map(([k, v]) => [k, v.toJSON()])),\n      edges: Object.fromEntries(Object.entries(this.edges).map(([k, e]) => [k, e.toJSON()])),\n    };\n  }\n\n  loadJSON(data: SerializedGraph): this {\n    for (const [vertexName, vertices] of Object.entries(data.vertices)) {\n      const map = this.vertices[vertexName as TPlangsVertexName];\n      for (const [vertexKey, vertexData] of Object.entries(vertices)) {\n        map.set(vertexKey as any, vertexData as any);\n      }\n    }\n    for (const [edgeName, edges] of Object.entries(data.edges)) {\n      const map = this.edges[edgeName as keyof typeof this.edges];\n      for (const [fromKey, toKeys] of Object.entries(edges)) {\n        map.add(fromKey as any, ...(toKeys as any[]));\n      }\n    }\n    return this;\n  }\n}\n\n/** Type of the key of an instance of {@link VApp}. */\nexport type VAppKey = `app+${string}`;\n\nexport type VAppRelName = keyof (typeof VAppBase)[\"relConfig\"];\n\n/** Software Application */\nexport abstract class VAppBase extends PlangsVertex<\"app\", VD.VAppData> {\n  static readonly vertexKind = \"app\" as const;\n  static readonly vertexName = \"app\" as const;\n  static readonly vertexDesc = \"Software Application\";\n  static readonly relConfig = {\n    relCommunities: { edgeName: \"communityRelApps\", direction: \"inverse\", gen: false },\n    relLearning: { edgeName: \"learningRelApps\", direction: \"inverse\", gen: false },\n    relLicenses: { edgeName: \"licenseRelApps\", direction: \"inverse\", gen: true },\n    relPlatforms: { edgeName: \"appRelPlatforms\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelApps\", direction: \"inverse\", gen: false },\n    relTags: { edgeName: \"tagRelApps\", direction: \"inverse\", gen: true },\n    relWrittenWith: { edgeName: \"appRelWrittenWith\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VAppBase.vertexKind;\n  override readonly vertexDesc = VAppBase.vertexDesc;\n  override readonly vertexName = VAppBase.vertexName;\n  readonly relConfig = VAppBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VAppBase.relConfig) as VAppRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Communities `VCommunity-[communityRelApps]->(this:VApp)`. Inverse: {@link VC.VCommunity.relApps}. */\n  get relCommunities() {\n    return new RelTo(this as unknown as VC.VApp, this.graph.edges.communityRelApps);\n  }\n\n  /** Learning Resources `VLearning-[learningRelApps]->(this:VApp)`. Inverse: {@link VC.VLearning.relApps}. */\n  get relLearning() {\n    return new RelTo(this as unknown as VC.VApp, this.graph.edges.learningRelApps);\n  }\n\n  /** Licenses `VLicense-[licenseRelApps]->(this:VApp)`. Inverse: {@link VC.VLicense.relApps}. */\n  get relLicenses() {\n    return new RelTo(this as unknown as VC.VApp, this.graph.edges.licenseRelApps);\n  }\n\n  /** Platforms `(this:VApp)-[appRelPlatforms]->VPlatform`. Inverse: {@link VC.VPlatform.relApps}. */\n  get relPlatforms() {\n    return new RelFrom(this as unknown as VC.VApp, this.graph.edges.appRelPlatforms);\n  }\n\n  /** Posts `VPost-[postRelApps]->(this:VApp)`. Inverse: {@link VC.VPost.relApps}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VApp, this.graph.edges.postRelApps);\n  }\n\n  /** Tags `VTag-[tagRelApps]->(this:VApp)`. Inverse: {@link VC.VTag.relApps}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VApp, this.graph.edges.tagRelApps);\n  }\n\n  /** Plangs `(this:VApp)-[appRelWrittenWith]->VPlang`. Inverse: {@link VC.VPlang.relApps}. */\n  get relWrittenWith() {\n    return new RelFrom(this as unknown as VC.VApp, this.graph.edges.appRelWrittenWith);\n  }\n}\n\n/** Type of the key of an instance of {@link VAuthor}. */\nexport type VAuthorKey = `author+${string}`;\n\nexport type VAuthorRelName = keyof (typeof VAuthorBase)[\"relConfig\"];\n\n/** Author */\nexport abstract class VAuthorBase extends PlangsVertex<\"author\", VD.VAuthorData> {\n  static readonly vertexKind = \"author\" as const;\n  static readonly vertexName = \"author\" as const;\n  static readonly vertexDesc = \"Author\";\n  static readonly relConfig = {\n    relCommunites: { edgeName: \"authorRelCommunites\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelAuthors\", direction: \"inverse\", gen: false },\n  } as const;\n\n  override readonly vertexKind = VAuthorBase.vertexKind;\n  override readonly vertexDesc = VAuthorBase.vertexDesc;\n  override readonly vertexName = VAuthorBase.vertexName;\n  readonly relConfig = VAuthorBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VAuthorBase.relConfig) as VAuthorRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Communites `(this:VAuthor)-[authorRelCommunites]->VCommunity`. Inverse: {@link VC.VCommunity.relMembers}. */\n  get relCommunites() {\n    return new RelFrom(this as unknown as VC.VAuthor, this.graph.edges.authorRelCommunites);\n  }\n\n  /** Posts `VPost-[postRelAuthors]->(this:VAuthor)`. Inverse: {@link VC.VPost.relAuthors}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VAuthor, this.graph.edges.postRelAuthors);\n  }\n}\n\n/** Type of the key of an instance of {@link VBundle}. */\nexport type VBundleKey = `bun+${string}`;\n\nexport type VBundleRelName = keyof (typeof VBundleBase)[\"relConfig\"];\n\n/** Bundle of Tools */\nexport abstract class VBundleBase extends PlangsVertex<\"bun\", VD.VBundleData> {\n  static readonly vertexKind = \"bun\" as const;\n  static readonly vertexName = \"bundle\" as const;\n  static readonly vertexDesc = \"Bundle of Tools\";\n  static readonly relConfig = {\n    relPlangs: { edgeName: \"bundleRelPlangs\", direction: \"direct\", gen: false },\n    relTools: { edgeName: \"bundleRelTools\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VBundleBase.vertexKind;\n  override readonly vertexDesc = VBundleBase.vertexDesc;\n  override readonly vertexName = VBundleBase.vertexName;\n  readonly relConfig = VBundleBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VBundleBase.relConfig) as VBundleRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Plangs `(this:VBundle)-[bundleRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relBundles}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VBundle, this.graph.edges.bundleRelPlangs);\n  }\n\n  /** Tools `(this:VBundle)-[bundleRelTools]->VTool`. Inverse: {@link VC.VTool.relBundles}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VBundle, this.graph.edges.bundleRelTools);\n  }\n}\n\n/** Type of the key of an instance of {@link VCommunity}. */\nexport type VCommunityKey = `comm+${string}`;\n\nexport type VCommunityRelName = keyof (typeof VCommunityBase)[\"relConfig\"];\n\n/** Community */\nexport abstract class VCommunityBase extends PlangsVertex<\"comm\", VD.VCommunityData> {\n  static readonly vertexKind = \"comm\" as const;\n  static readonly vertexName = \"community\" as const;\n  static readonly vertexDesc = \"Community\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"communityRelApps\", direction: \"direct\", gen: true },\n    relLearning: { edgeName: \"learningRelCommunities\", direction: \"inverse\", gen: false },\n    relLibraries: { edgeName: \"communityRelLibraries\", direction: \"direct\", gen: true },\n    relMembers: { edgeName: \"authorRelCommunites\", direction: \"inverse\", gen: false },\n    relPlangs: { edgeName: \"communityRelPlangs\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelCommunities\", direction: \"inverse\", gen: false },\n    relSubsystems: { edgeName: \"communityRelSubsystems\", direction: \"direct\", gen: true },\n    relTags: { edgeName: \"tagRelCommunities\", direction: \"inverse\", gen: true },\n    relTools: { edgeName: \"communityRelTools\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VCommunityBase.vertexKind;\n  override readonly vertexDesc = VCommunityBase.vertexDesc;\n  override readonly vertexName = VCommunityBase.vertexName;\n  readonly relConfig = VCommunityBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VCommunityBase.relConfig) as VCommunityRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps `(this:VCommunity)-[communityRelApps]->VApp`. Inverse: {@link VC.VApp.relCommunities}. */\n  get relApps() {\n    return new RelFrom(this as unknown as VC.VCommunity, this.graph.edges.communityRelApps);\n  }\n\n  /** Learning Resources `VLearning-[learningRelCommunities]->(this:VCommunity)`. Inverse: {@link VC.VLearning.relCommunities}. */\n  get relLearning() {\n    return new RelTo(this as unknown as VC.VCommunity, this.graph.edges.learningRelCommunities);\n  }\n\n  /** Libraries `(this:VCommunity)-[communityRelLibraries]->VLibrary`. Inverse: {@link VC.VLibrary.relCommunities}. */\n  get relLibraries() {\n    return new RelFrom(this as unknown as VC.VCommunity, this.graph.edges.communityRelLibraries);\n  }\n\n  /** Members `VAuthor-[authorRelCommunites]->(this:VCommunity)`. Inverse: {@link VC.VAuthor.relCommunites}. */\n  get relMembers() {\n    return new RelTo(this as unknown as VC.VCommunity, this.graph.edges.authorRelCommunites);\n  }\n\n  /** Plangs `(this:VCommunity)-[communityRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relCommunities}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VCommunity, this.graph.edges.communityRelPlangs);\n  }\n\n  /** Posts `VPost-[postRelCommunities]->(this:VCommunity)`. Inverse: {@link VC.VPost.relCommunities}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VCommunity, this.graph.edges.postRelCommunities);\n  }\n\n  /** Subsystems `(this:VCommunity)-[communityRelSubsystems]->VSubsystem`. Inverse: {@link VC.VSubsystem.relCommunities}. */\n  get relSubsystems() {\n    return new RelFrom(this as unknown as VC.VCommunity, this.graph.edges.communityRelSubsystems);\n  }\n\n  /** Tags `VTag-[tagRelCommunities]->(this:VCommunity)`. Inverse: {@link VC.VTag.relCommunities}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VCommunity, this.graph.edges.tagRelCommunities);\n  }\n\n  /** Tools `(this:VCommunity)-[communityRelTools]->VTool`. Inverse: {@link VC.VTool.relCommunities}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VCommunity, this.graph.edges.communityRelTools);\n  }\n}\n\n/** Type of the key of an instance of {@link VLearning}. */\nexport type VLearningKey = `learn+${string}`;\n\nexport type VLearningRelName = keyof (typeof VLearningBase)[\"relConfig\"];\n\n/** Learning Resource */\nexport abstract class VLearningBase extends PlangsVertex<\"learn\", VD.VLearningData> {\n  static readonly vertexKind = \"learn\" as const;\n  static readonly vertexName = \"learning\" as const;\n  static readonly vertexDesc = \"Learning Resource\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"learningRelApps\", direction: \"direct\", gen: true },\n    relCommunities: { edgeName: \"learningRelCommunities\", direction: \"direct\", gen: true },\n    relLibraries: { edgeName: \"learningRelLibraries\", direction: \"direct\", gen: true },\n    relPlangs: { edgeName: \"learningRelPlangs\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelLearning\", direction: \"inverse\", gen: false },\n    relSubsystems: { edgeName: \"learningRelSubsystems\", direction: \"direct\", gen: true },\n    relTags: { edgeName: \"tagRelLearning\", direction: \"inverse\", gen: true },\n    relTools: { edgeName: \"learningRelTools\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VLearningBase.vertexKind;\n  override readonly vertexDesc = VLearningBase.vertexDesc;\n  override readonly vertexName = VLearningBase.vertexName;\n  readonly relConfig = VLearningBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VLearningBase.relConfig) as VLearningRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps `(this:VLearning)-[learningRelApps]->VApp`. Inverse: {@link VC.VApp.relLearning}. */\n  get relApps() {\n    return new RelFrom(this as unknown as VC.VLearning, this.graph.edges.learningRelApps);\n  }\n\n  /** Communities `(this:VLearning)-[learningRelCommunities]->VCommunity`. Inverse: {@link VC.VCommunity.relLearning}. */\n  get relCommunities() {\n    return new RelFrom(this as unknown as VC.VLearning, this.graph.edges.learningRelCommunities);\n  }\n\n  /** Libraries `(this:VLearning)-[learningRelLibraries]->VLibrary`. Inverse: {@link VC.VLibrary.relLearning}. */\n  get relLibraries() {\n    return new RelFrom(this as unknown as VC.VLearning, this.graph.edges.learningRelLibraries);\n  }\n\n  /** Plangs `(this:VLearning)-[learningRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relLearning}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VLearning, this.graph.edges.learningRelPlangs);\n  }\n\n  /** Posts `VPost-[postRelLearning]->(this:VLearning)`. Inverse: {@link VC.VPost.relLearning}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VLearning, this.graph.edges.postRelLearning);\n  }\n\n  /** Subsystems `(this:VLearning)-[learningRelSubsystems]->VSubsystem`. Inverse: {@link VC.VSubsystem.relLearning}. */\n  get relSubsystems() {\n    return new RelFrom(this as unknown as VC.VLearning, this.graph.edges.learningRelSubsystems);\n  }\n\n  /** Tags `VTag-[tagRelLearning]->(this:VLearning)`. Inverse: {@link VC.VTag.relLearning}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VLearning, this.graph.edges.tagRelLearning);\n  }\n\n  /** Tools `(this:VLearning)-[learningRelTools]->VTool`. Inverse: {@link VC.VTool.relLearning}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VLearning, this.graph.edges.learningRelTools);\n  }\n}\n\n/** Type of the key of an instance of {@link VLibrary}. */\nexport type VLibraryKey = `lib+${string}`;\n\nexport type VLibraryRelName = keyof (typeof VLibraryBase)[\"relConfig\"];\n\n/** Software Library */\nexport abstract class VLibraryBase extends PlangsVertex<\"lib\", VD.VLibraryData> {\n  static readonly vertexKind = \"lib\" as const;\n  static readonly vertexName = \"library\" as const;\n  static readonly vertexDesc = \"Software Library\";\n  static readonly relConfig = {\n    relCommunities: { edgeName: \"communityRelLibraries\", direction: \"inverse\", gen: false },\n    relLearning: { edgeName: \"learningRelLibraries\", direction: \"inverse\", gen: false },\n    relLicenses: { edgeName: \"licenseRelLibraries\", direction: \"inverse\", gen: true },\n    relPlangs: { edgeName: \"libraryRelPlangs\", direction: \"direct\", gen: true },\n    relPlatforms: { edgeName: \"libraryRelPlatforms\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelLibraries\", direction: \"inverse\", gen: false },\n    relTags: { edgeName: \"tagRelLibraries\", direction: \"inverse\", gen: true },\n    relWrittenWith: { edgeName: \"libraryRelWrittenWith\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VLibraryBase.vertexKind;\n  override readonly vertexDesc = VLibraryBase.vertexDesc;\n  override readonly vertexName = VLibraryBase.vertexName;\n  readonly relConfig = VLibraryBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VLibraryBase.relConfig) as VLibraryRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Communities `VCommunity-[communityRelLibraries]->(this:VLibrary)`. Inverse: {@link VC.VCommunity.relLibraries}. */\n  get relCommunities() {\n    return new RelTo(this as unknown as VC.VLibrary, this.graph.edges.communityRelLibraries);\n  }\n\n  /** Learning Resources `VLearning-[learningRelLibraries]->(this:VLibrary)`. Inverse: {@link VC.VLearning.relLibraries}. */\n  get relLearning() {\n    return new RelTo(this as unknown as VC.VLibrary, this.graph.edges.learningRelLibraries);\n  }\n\n  /** Licenses `VLicense-[licenseRelLibraries]->(this:VLibrary)`. Inverse: {@link VC.VLicense.relLibraries}. */\n  get relLicenses() {\n    return new RelTo(this as unknown as VC.VLibrary, this.graph.edges.licenseRelLibraries);\n  }\n\n  /** Plangs `(this:VLibrary)-[libraryRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relLibraries}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VLibrary, this.graph.edges.libraryRelPlangs);\n  }\n\n  /** Platforms `(this:VLibrary)-[libraryRelPlatforms]->VPlatform`. Inverse: {@link VC.VPlatform.relLibraries}. */\n  get relPlatforms() {\n    return new RelFrom(this as unknown as VC.VLibrary, this.graph.edges.libraryRelPlatforms);\n  }\n\n  /** Posts `VPost-[postRelLibraries]->(this:VLibrary)`. Inverse: {@link VC.VPost.relLibraries}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VLibrary, this.graph.edges.postRelLibraries);\n  }\n\n  /** Tags `VTag-[tagRelLibraries]->(this:VLibrary)`. Inverse: {@link VC.VTag.relLibraries}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VLibrary, this.graph.edges.tagRelLibraries);\n  }\n\n  /** Written With `(this:VLibrary)-[libraryRelWrittenWith]->VPlang`. Inverse: {@link VC.VPlang.relUsedInLibrary}. */\n  get relWrittenWith() {\n    return new RelFrom(this as unknown as VC.VLibrary, this.graph.edges.libraryRelWrittenWith);\n  }\n}\n\n/** Type of the key of an instance of {@link VLicense}. */\nexport type VLicenseKey = `lic+${string}`;\n\nexport type VLicenseRelName = keyof (typeof VLicenseBase)[\"relConfig\"];\n\n/** Software License */\nexport abstract class VLicenseBase extends PlangsVertex<\"lic\", VD.VLicenseData> {\n  static readonly vertexKind = \"lic\" as const;\n  static readonly vertexName = \"license\" as const;\n  static readonly vertexDesc = \"Software License\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"licenseRelApps\", direction: \"direct\", gen: false },\n    relLibraries: { edgeName: \"licenseRelLibraries\", direction: \"direct\", gen: false },\n    relPlangs: { edgeName: \"licenseRelPlangs\", direction: \"direct\", gen: false },\n    relSubsystems: { edgeName: \"licenseRelSubsystems\", direction: \"direct\", gen: false },\n    relTools: { edgeName: \"licenseRelTools\", direction: \"direct\", gen: false },\n  } as const;\n\n  override readonly vertexKind = VLicenseBase.vertexKind;\n  override readonly vertexDesc = VLicenseBase.vertexDesc;\n  override readonly vertexName = VLicenseBase.vertexName;\n  readonly relConfig = VLicenseBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VLicenseBase.relConfig) as VLicenseRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps `(this:VLicense)-[licenseRelApps]->VApp`. Inverse: {@link VC.VApp.relLicenses}. */\n  get relApps() {\n    return new RelFrom(this as unknown as VC.VLicense, this.graph.edges.licenseRelApps);\n  }\n\n  /** Libraries `(this:VLicense)-[licenseRelLibraries]->VLibrary`. Inverse: {@link VC.VLibrary.relLicenses}. */\n  get relLibraries() {\n    return new RelFrom(this as unknown as VC.VLicense, this.graph.edges.licenseRelLibraries);\n  }\n\n  /** Plangs `(this:VLicense)-[licenseRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relLicenses}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VLicense, this.graph.edges.licenseRelPlangs);\n  }\n\n  /** Subsystems `(this:VLicense)-[licenseRelSubsystems]->VSubsystem`. Inverse: {@link VC.VSubsystem.relLicenses}. */\n  get relSubsystems() {\n    return new RelFrom(this as unknown as VC.VLicense, this.graph.edges.licenseRelSubsystems);\n  }\n\n  /** Tools `(this:VLicense)-[licenseRelTools]->VTool`. Inverse: {@link VC.VTool.relLicenses}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VLicense, this.graph.edges.licenseRelTools);\n  }\n}\n\n/** Type of the key of an instance of {@link VParadigm}. */\nexport type VParadigmKey = `para+${string}`;\n\nexport type VParadigmRelName = keyof (typeof VParadigmBase)[\"relConfig\"];\n\n/** Programming Language Paradigm */\nexport abstract class VParadigmBase extends PlangsVertex<\"para\", VD.VParadigmData> {\n  static readonly vertexKind = \"para\" as const;\n  static readonly vertexName = \"paradigm\" as const;\n  static readonly vertexDesc = \"Programming Language Paradigm\";\n  static readonly relConfig = { relPlangs: { edgeName: \"plangRelParadigms\", direction: \"inverse\", gen: false } } as const;\n\n  override readonly vertexKind = VParadigmBase.vertexKind;\n  override readonly vertexDesc = VParadigmBase.vertexDesc;\n  override readonly vertexName = VParadigmBase.vertexName;\n  readonly relConfig = VParadigmBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VParadigmBase.relConfig) as VParadigmRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Plangs `VPlang-[plangRelParadigms]->(this:VParadigm)`. Inverse: {@link VC.VPlang.relParadigms}. */\n  get relPlangs() {\n    return new RelTo(this as unknown as VC.VParadigm, this.graph.edges.plangRelParadigms);\n  }\n}\n\n/** Type of the key of an instance of {@link VPlang}. */\nexport type VPlangKey = `pl+${string}`;\n\nexport type VPlangRelName = keyof (typeof VPlangBase)[\"relConfig\"];\n\n/** Programming Language */\nexport abstract class VPlangBase extends PlangsVertex<\"pl\", VD.VPlangData> {\n  static readonly vertexKind = \"pl\" as const;\n  static readonly vertexName = \"plang\" as const;\n  static readonly vertexDesc = \"Programming Language\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"appRelWrittenWith\", direction: \"inverse\", gen: false },\n    relBundles: { edgeName: \"bundleRelPlangs\", direction: \"inverse\", gen: false },\n    relCommunities: { edgeName: \"communityRelPlangs\", direction: \"inverse\", gen: false },\n    relCompilesTo: { edgeName: \"plangRelCompilesTo\", direction: \"direct\", gen: true },\n    relDialectOf: { edgeName: \"plangRelDialectOf\", direction: \"direct\", gen: true },\n    relDialects: { edgeName: \"plangRelDialectOf\", direction: \"inverse\", gen: false },\n    relImplementedBy: { edgeName: \"plangRelImplements\", direction: \"inverse\", gen: false },\n    relImplements: { edgeName: \"plangRelImplements\", direction: \"direct\", gen: true },\n    relInfluenced: { edgeName: \"plangRelInfluencedBy\", direction: \"inverse\", gen: false },\n    relInfluencedBy: { edgeName: \"plangRelInfluencedBy\", direction: \"direct\", gen: true },\n    relLearning: { edgeName: \"learningRelPlangs\", direction: \"inverse\", gen: false },\n    relLibraries: { edgeName: \"libraryRelPlangs\", direction: \"inverse\", gen: false },\n    relLicenses: { edgeName: \"licenseRelPlangs\", direction: \"inverse\", gen: true },\n    relParadigms: { edgeName: \"plangRelParadigms\", direction: \"direct\", gen: true },\n    relPlatforms: { edgeName: \"plangRelPlatforms\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelPlangs\", direction: \"inverse\", gen: false },\n    relSubsystems: { edgeName: \"subsystemRelWrittenWith\", direction: \"inverse\", gen: false },\n    relTags: { edgeName: \"tagRelPlangs\", direction: \"inverse\", gen: true },\n    relTargetOf: { edgeName: \"plangRelCompilesTo\", direction: \"inverse\", gen: false },\n    relTools: { edgeName: \"plangRelTools\", direction: \"direct\", gen: false },\n    relToolsUsing: { edgeName: \"toolRelWrittenWith\", direction: \"inverse\", gen: false },\n    relTypeSystems: { edgeName: \"plangRelTypeSystems\", direction: \"direct\", gen: true },\n    relUsedInLibrary: { edgeName: \"libraryRelWrittenWith\", direction: \"inverse\", gen: false },\n    relUsedToWrite: { edgeName: \"plangRelWrittenWith\", direction: \"inverse\", gen: false },\n    relWrittenWith: { edgeName: \"plangRelWrittenWith\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VPlangBase.vertexKind;\n  override readonly vertexDesc = VPlangBase.vertexDesc;\n  override readonly vertexName = VPlangBase.vertexName;\n  readonly relConfig = VPlangBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VPlangBase.relConfig) as VPlangRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps `VApp-[appRelWrittenWith]->(this:VPlang)`. Inverse: {@link VC.VApp.relWrittenWith}. */\n  get relApps() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.appRelWrittenWith);\n  }\n\n  /** Bundles `VBundle-[bundleRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VBundle.relPlangs}. */\n  get relBundles() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.bundleRelPlangs);\n  }\n\n  /** Communities `VCommunity-[communityRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VCommunity.relPlangs}. */\n  get relCommunities() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.communityRelPlangs);\n  }\n\n  /** Transpiling Targets `(this:VPlang)-[plangRelCompilesTo]->VPlang`. Inverse: {@link VC.VPlang.relTargetOf}. */\n  get relCompilesTo() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelCompilesTo);\n  }\n\n  /** Dialect of `(this:VPlang)-[plangRelDialectOf]->VPlang`. Inverse: {@link VC.VPlang.relDialects}. */\n  get relDialectOf() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelDialectOf);\n  }\n\n  /** Dialects `VPlang-[plangRelDialectOf]->(this:VPlang)`. Inverse: {@link VC.VPlang.relDialectOf}. */\n  get relDialects() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.plangRelDialectOf);\n  }\n\n  /** Implemented By `VPlang-[plangRelImplements]->(this:VPlang)`. Inverse: {@link VC.VPlang.relImplements}. */\n  get relImplementedBy() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.plangRelImplements);\n  }\n\n  /** Implements `(this:VPlang)-[plangRelImplements]->VPlang`. Inverse: {@link VC.VPlang.relImplementedBy}. */\n  get relImplements() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelImplements);\n  }\n\n  /** Influenced `VPlang-[plangRelInfluencedBy]->(this:VPlang)`. Inverse: {@link VC.VPlang.relInfluencedBy}. */\n  get relInfluenced() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.plangRelInfluencedBy);\n  }\n\n  /** Influenced By `(this:VPlang)-[plangRelInfluencedBy]->VPlang`. Inverse: {@link VC.VPlang.relInfluenced}. */\n  get relInfluencedBy() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelInfluencedBy);\n  }\n\n  /** Learning Resources `VLearning-[learningRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VLearning.relPlangs}. */\n  get relLearning() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.learningRelPlangs);\n  }\n\n  /** Libraries `VLibrary-[libraryRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VLibrary.relPlangs}. */\n  get relLibraries() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.libraryRelPlangs);\n  }\n\n  /** Licenses `VLicense-[licenseRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VLicense.relPlangs}. */\n  get relLicenses() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.licenseRelPlangs);\n  }\n\n  /** Paradigms `(this:VPlang)-[plangRelParadigms]->VParadigm`. Inverse: {@link VC.VParadigm.relPlangs}. */\n  get relParadigms() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelParadigms);\n  }\n\n  /** Platforms `(this:VPlang)-[plangRelPlatforms]->VPlatform`. Inverse: {@link VC.VPlatform.relPlangs}. */\n  get relPlatforms() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelPlatforms);\n  }\n\n  /** Posts `VPost-[postRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VPost.relPlangs}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.postRelPlangs);\n  }\n\n  /** Subsystems `VSubsystem-[subsystemRelWrittenWith]->(this:VPlang)`. Inverse: {@link VC.VSubsystem.relWrittenWith}. */\n  get relSubsystems() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.subsystemRelWrittenWith);\n  }\n\n  /** Tags `VTag-[tagRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VTag.relPlangs}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.tagRelPlangs);\n  }\n\n  /** Source Plangs `VPlang-[plangRelCompilesTo]->(this:VPlang)`. Inverse: {@link VC.VPlang.relCompilesTo}. */\n  get relTargetOf() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.plangRelCompilesTo);\n  }\n\n  /** Tools `(this:VPlang)-[plangRelTools]->VTool`. Inverse: {@link VC.VTool.relPlangs}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelTools);\n  }\n\n  /** Tool Plang `VTool-[toolRelWrittenWith]->(this:VPlang)`. Inverse: {@link VC.VTool.relWrittenWith}. */\n  get relToolsUsing() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.toolRelWrittenWith);\n  }\n\n  /** Type Systems `(this:VPlang)-[plangRelTypeSystems]->VTypeSystem`. Inverse: {@link VC.VTypeSystem.relPlangs}. */\n  get relTypeSystems() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelTypeSystems);\n  }\n\n  /** Used for Libraries `VLibrary-[libraryRelWrittenWith]->(this:VPlang)`. Inverse: {@link VC.VLibrary.relWrittenWith}. */\n  get relUsedInLibrary() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.libraryRelWrittenWith);\n  }\n\n  /** Used to Write `VPlang-[plangRelWrittenWith]->(this:VPlang)`. Inverse: {@link VC.VPlang.relWrittenWith}. */\n  get relUsedToWrite() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.plangRelWrittenWith);\n  }\n\n  /** Written With `(this:VPlang)-[plangRelWrittenWith]->VPlang`. Inverse: {@link VC.VPlang.relUsedToWrite}. */\n  get relWrittenWith() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelWrittenWith);\n  }\n}\n\n/** Type of the key of an instance of {@link VPlatform}. */\nexport type VPlatformKey = `plat+${string}`;\n\nexport type VPlatformRelName = keyof (typeof VPlatformBase)[\"relConfig\"];\n\n/** Platform where Software runs */\nexport abstract class VPlatformBase extends PlangsVertex<\"plat\", VD.VPlatformData> {\n  static readonly vertexKind = \"plat\" as const;\n  static readonly vertexName = \"platform\" as const;\n  static readonly vertexDesc = \"Platform where Software runs\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"appRelPlatforms\", direction: \"inverse\", gen: false },\n    relLibraries: { edgeName: \"libraryRelPlatforms\", direction: \"inverse\", gen: false },\n    relPlangs: { edgeName: \"plangRelPlatforms\", direction: \"inverse\", gen: false },\n    relSubsystems: { edgeName: \"subsystemRelPlatforms\", direction: \"inverse\", gen: false },\n    relTools: { edgeName: \"toolRelPlatforms\", direction: \"inverse\", gen: false },\n  } as const;\n\n  override readonly vertexKind = VPlatformBase.vertexKind;\n  override readonly vertexDesc = VPlatformBase.vertexDesc;\n  override readonly vertexName = VPlatformBase.vertexName;\n  readonly relConfig = VPlatformBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VPlatformBase.relConfig) as VPlatformRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps `VApp-[appRelPlatforms]->(this:VPlatform)`. Inverse: {@link VC.VApp.relPlatforms}. */\n  get relApps() {\n    return new RelTo(this as unknown as VC.VPlatform, this.graph.edges.appRelPlatforms);\n  }\n\n  /** Libraries `VLibrary-[libraryRelPlatforms]->(this:VPlatform)`. Inverse: {@link VC.VLibrary.relPlatforms}. */\n  get relLibraries() {\n    return new RelTo(this as unknown as VC.VPlatform, this.graph.edges.libraryRelPlatforms);\n  }\n\n  /** Plangs `VPlang-[plangRelPlatforms]->(this:VPlatform)`. Inverse: {@link VC.VPlang.relPlatforms}. */\n  get relPlangs() {\n    return new RelTo(this as unknown as VC.VPlatform, this.graph.edges.plangRelPlatforms);\n  }\n\n  /** Subsystems `VSubsystem-[subsystemRelPlatforms]->(this:VPlatform)`. Inverse: {@link VC.VSubsystem.relPlatforms}. */\n  get relSubsystems() {\n    return new RelTo(this as unknown as VC.VPlatform, this.graph.edges.subsystemRelPlatforms);\n  }\n\n  /** Tools `VTool-[toolRelPlatforms]->(this:VPlatform)`. Inverse: {@link VC.VTool.relPlatforms}. */\n  get relTools() {\n    return new RelTo(this as unknown as VC.VPlatform, this.graph.edges.toolRelPlatforms);\n  }\n}\n\n/** Type of the key of an instance of {@link VPost}. */\nexport type VPostKey = `post+${string}`;\n\nexport type VPostRelName = keyof (typeof VPostBase)[\"relConfig\"];\n\n/** Blog Post */\nexport abstract class VPostBase extends PlangsVertex<\"post\", VD.VPostData> {\n  static readonly vertexKind = \"post\" as const;\n  static readonly vertexName = \"post\" as const;\n  static readonly vertexDesc = \"Blog Post\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"postRelApps\", direction: \"direct\", gen: false },\n    relAuthors: { edgeName: \"postRelAuthors\", direction: \"direct\", gen: false },\n    relCommunities: { edgeName: \"postRelCommunities\", direction: \"direct\", gen: false },\n    relLearning: { edgeName: \"postRelLearning\", direction: \"direct\", gen: false },\n    relLibraries: { edgeName: \"postRelLibraries\", direction: \"direct\", gen: false },\n    relPlangs: { edgeName: \"postRelPlangs\", direction: \"direct\", gen: false },\n    relSubsystems: { edgeName: \"postRelSubsystems\", direction: \"direct\", gen: false },\n    relTools: { edgeName: \"postRelTools\", direction: \"direct\", gen: false },\n  } as const;\n\n  override readonly vertexKind = VPostBase.vertexKind;\n  override readonly vertexDesc = VPostBase.vertexDesc;\n  override readonly vertexName = VPostBase.vertexName;\n  readonly relConfig = VPostBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VPostBase.relConfig) as VPostRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps `(this:VPost)-[postRelApps]->VApp`. Inverse: {@link VC.VApp.relPosts}. */\n  get relApps() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelApps);\n  }\n\n  /** Authors `(this:VPost)-[postRelAuthors]->VAuthor`. Inverse: {@link VC.VAuthor.relPosts}. */\n  get relAuthors() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelAuthors);\n  }\n\n  /** Communities `(this:VPost)-[postRelCommunities]->VCommunity`. Inverse: {@link VC.VCommunity.relPosts}. */\n  get relCommunities() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelCommunities);\n  }\n\n  /** Learning Resources `(this:VPost)-[postRelLearning]->VLearning`. Inverse: {@link VC.VLearning.relPosts}. */\n  get relLearning() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelLearning);\n  }\n\n  /** Libraries `(this:VPost)-[postRelLibraries]->VLibrary`. Inverse: {@link VC.VLibrary.relPosts}. */\n  get relLibraries() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelLibraries);\n  }\n\n  /** Plangs `(this:VPost)-[postRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relPosts}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelPlangs);\n  }\n\n  /** Subsystems `(this:VPost)-[postRelSubsystems]->VSubsystem`. Inverse: {@link VC.VSubsystem.relPosts}. */\n  get relSubsystems() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelSubsystems);\n  }\n\n  /** Tools `(this:VPost)-[postRelTools]->VTool`. Inverse: {@link VC.VTool.relPosts}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelTools);\n  }\n}\n\n/** Type of the key of an instance of {@link VSubsystem}. */\nexport type VSubsystemKey = `sys+${string}`;\n\nexport type VSubsystemRelName = keyof (typeof VSubsystemBase)[\"relConfig\"];\n\n/** Subsystem */\nexport abstract class VSubsystemBase extends PlangsVertex<\"sys\", VD.VSubsystemData> {\n  static readonly vertexKind = \"sys\" as const;\n  static readonly vertexName = \"subsystem\" as const;\n  static readonly vertexDesc = \"Subsystem\";\n  static readonly relConfig = {\n    relCommunities: { edgeName: \"communityRelSubsystems\", direction: \"inverse\", gen: false },\n    relLearning: { edgeName: \"learningRelSubsystems\", direction: \"inverse\", gen: false },\n    relLicenses: { edgeName: \"licenseRelSubsystems\", direction: \"inverse\", gen: true },\n    relPlatforms: { edgeName: \"subsystemRelPlatforms\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelSubsystems\", direction: \"inverse\", gen: false },\n    relTags: { edgeName: \"tagRelSubsystems\", direction: \"inverse\", gen: true },\n    relWrittenWith: { edgeName: \"subsystemRelWrittenWith\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VSubsystemBase.vertexKind;\n  override readonly vertexDesc = VSubsystemBase.vertexDesc;\n  override readonly vertexName = VSubsystemBase.vertexName;\n  readonly relConfig = VSubsystemBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VSubsystemBase.relConfig) as VSubsystemRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Communities `VCommunity-[communityRelSubsystems]->(this:VSubsystem)`. Inverse: {@link VC.VCommunity.relSubsystems}. */\n  get relCommunities() {\n    return new RelTo(this as unknown as VC.VSubsystem, this.graph.edges.communityRelSubsystems);\n  }\n\n  /** Learning Resources `VLearning-[learningRelSubsystems]->(this:VSubsystem)`. Inverse: {@link VC.VLearning.relSubsystems}. */\n  get relLearning() {\n    return new RelTo(this as unknown as VC.VSubsystem, this.graph.edges.learningRelSubsystems);\n  }\n\n  /** Licenses `VLicense-[licenseRelSubsystems]->(this:VSubsystem)`. Inverse: {@link VC.VLicense.relSubsystems}. */\n  get relLicenses() {\n    return new RelTo(this as unknown as VC.VSubsystem, this.graph.edges.licenseRelSubsystems);\n  }\n\n  /** Platforms `(this:VSubsystem)-[subsystemRelPlatforms]->VPlatform`. Inverse: {@link VC.VPlatform.relSubsystems}. */\n  get relPlatforms() {\n    return new RelFrom(this as unknown as VC.VSubsystem, this.graph.edges.subsystemRelPlatforms);\n  }\n\n  /** Posts `VPost-[postRelSubsystems]->(this:VSubsystem)`. Inverse: {@link VC.VPost.relSubsystems}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VSubsystem, this.graph.edges.postRelSubsystems);\n  }\n\n  /** Tags `VTag-[tagRelSubsystems]->(this:VSubsystem)`. Inverse: {@link VC.VTag.relSubsystems}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VSubsystem, this.graph.edges.tagRelSubsystems);\n  }\n\n  /** Plangs `(this:VSubsystem)-[subsystemRelWrittenWith]->VPlang`. Inverse: {@link VC.VPlang.relSubsystems}. */\n  get relWrittenWith() {\n    return new RelFrom(this as unknown as VC.VSubsystem, this.graph.edges.subsystemRelWrittenWith);\n  }\n}\n\n/** Type of the key of an instance of {@link VTag}. */\nexport type VTagKey = `tag+${string}`;\n\nexport type VTagRelName = keyof (typeof VTagBase)[\"relConfig\"];\n\n/** Tag */\nexport abstract class VTagBase extends PlangsVertex<\"tag\", VD.VTagData> {\n  static readonly vertexKind = \"tag\" as const;\n  static readonly vertexName = \"tag\" as const;\n  static readonly vertexDesc = \"Tag\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"tagRelApps\", direction: \"direct\", gen: false },\n    relCommunities: { edgeName: \"tagRelCommunities\", direction: \"direct\", gen: false },\n    relLearning: { edgeName: \"tagRelLearning\", direction: \"direct\", gen: false },\n    relLibraries: { edgeName: \"tagRelLibraries\", direction: \"direct\", gen: false },\n    relPlangs: { edgeName: \"tagRelPlangs\", direction: \"direct\", gen: false },\n    relSubsystems: { edgeName: \"tagRelSubsystems\", direction: \"direct\", gen: false },\n    relTools: { edgeName: \"tagRelTools\", direction: \"direct\", gen: false },\n  } as const;\n\n  override readonly vertexKind = VTagBase.vertexKind;\n  override readonly vertexDesc = VTagBase.vertexDesc;\n  override readonly vertexName = VTagBase.vertexName;\n  readonly relConfig = VTagBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VTagBase.relConfig) as VTagRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps tagged `(this:VTag)-[tagRelApps]->VApp`. Inverse: {@link VC.VApp.relTags}. */\n  get relApps() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelApps);\n  }\n\n  /** Communities `(this:VTag)-[tagRelCommunities]->VCommunity`. Inverse: {@link VC.VCommunity.relTags}. */\n  get relCommunities() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelCommunities);\n  }\n\n  /** Learning Resources `(this:VTag)-[tagRelLearning]->VLearning`. Inverse: {@link VC.VLearning.relTags}. */\n  get relLearning() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelLearning);\n  }\n\n  /** Libraries `(this:VTag)-[tagRelLibraries]->VLibrary`. Inverse: {@link VC.VLibrary.relTags}. */\n  get relLibraries() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelLibraries);\n  }\n\n  /** Plangs `(this:VTag)-[tagRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relTags}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelPlangs);\n  }\n\n  /** Subsystems `(this:VTag)-[tagRelSubsystems]->VSubsystem`. Inverse: {@link VC.VSubsystem.relTags}. */\n  get relSubsystems() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelSubsystems);\n  }\n\n  /** Tools `(this:VTag)-[tagRelTools]->VTool`. Inverse: {@link VC.VTool.relTags}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelTools);\n  }\n}\n\n/** Type of the key of an instance of {@link VTool}. */\nexport type VToolKey = `tool+${string}`;\n\nexport type VToolRelName = keyof (typeof VToolBase)[\"relConfig\"];\n\n/** Programming Tool */\nexport abstract class VToolBase extends PlangsVertex<\"tool\", VD.VToolData> {\n  static readonly vertexKind = \"tool\" as const;\n  static readonly vertexName = \"tool\" as const;\n  static readonly vertexDesc = \"Programming Tool\";\n  static readonly relConfig = {\n    relBundles: { edgeName: \"bundleRelTools\", direction: \"inverse\", gen: false },\n    relCommunities: { edgeName: \"communityRelTools\", direction: \"inverse\", gen: false },\n    relLearning: { edgeName: \"learningRelTools\", direction: \"inverse\", gen: false },\n    relLicenses: { edgeName: \"licenseRelTools\", direction: \"inverse\", gen: true },\n    relPlangs: { edgeName: \"plangRelTools\", direction: \"inverse\", gen: true },\n    relPlatforms: { edgeName: \"toolRelPlatforms\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelTools\", direction: \"inverse\", gen: false },\n    relTags: { edgeName: \"tagRelTools\", direction: \"inverse\", gen: true },\n    relWrittenWith: { edgeName: \"toolRelWrittenWith\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VToolBase.vertexKind;\n  override readonly vertexDesc = VToolBase.vertexDesc;\n  override readonly vertexName = VToolBase.vertexName;\n  readonly relConfig = VToolBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VToolBase.relConfig) as VToolRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Bundles `VBundle-[bundleRelTools]->(this:VTool)`. Inverse: {@link VC.VBundle.relTools}. */\n  get relBundles() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.bundleRelTools);\n  }\n\n  /** Communities `VCommunity-[communityRelTools]->(this:VTool)`. Inverse: {@link VC.VCommunity.relTools}. */\n  get relCommunities() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.communityRelTools);\n  }\n\n  /** Learning Resources `VLearning-[learningRelTools]->(this:VTool)`. Inverse: {@link VC.VLearning.relTools}. */\n  get relLearning() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.learningRelTools);\n  }\n\n  /** Licenses `VLicense-[licenseRelTools]->(this:VTool)`. Inverse: {@link VC.VLicense.relTools}. */\n  get relLicenses() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.licenseRelTools);\n  }\n\n  /** Plangs `VPlang-[plangRelTools]->(this:VTool)`. Inverse: {@link VC.VPlang.relTools}. */\n  get relPlangs() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.plangRelTools);\n  }\n\n  /** Platforms `(this:VTool)-[toolRelPlatforms]->VPlatform`. Inverse: {@link VC.VPlatform.relTools}. */\n  get relPlatforms() {\n    return new RelFrom(this as unknown as VC.VTool, this.graph.edges.toolRelPlatforms);\n  }\n\n  /** Posts `VPost-[postRelTools]->(this:VTool)`. Inverse: {@link VC.VPost.relTools}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.postRelTools);\n  }\n\n  /** Tags `VTag-[tagRelTools]->(this:VTool)`. Inverse: {@link VC.VTag.relTools}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.tagRelTools);\n  }\n\n  /** Implemented With `(this:VTool)-[toolRelWrittenWith]->VPlang`. Inverse: {@link VC.VPlang.relToolsUsing}. */\n  get relWrittenWith() {\n    return new RelFrom(this as unknown as VC.VTool, this.graph.edges.toolRelWrittenWith);\n  }\n}\n\n/** Type of the key of an instance of {@link VTypeSystem}. */\nexport type VTypeSystemKey = `tsys+${string}`;\n\nexport type VTypeSystemRelName = keyof (typeof VTypeSystemBase)[\"relConfig\"];\n\n/** Type System */\nexport abstract class VTypeSystemBase extends PlangsVertex<\"tsys\", VD.VTypeSystemData> {\n  static readonly vertexKind = \"tsys\" as const;\n  static readonly vertexName = \"typeSystem\" as const;\n  static readonly vertexDesc = \"Type System\";\n  static readonly relConfig = { relPlangs: { edgeName: \"plangRelTypeSystems\", direction: \"inverse\", gen: false } } as const;\n\n  override readonly vertexKind = VTypeSystemBase.vertexKind;\n  override readonly vertexDesc = VTypeSystemBase.vertexDesc;\n  override readonly vertexName = VTypeSystemBase.vertexName;\n  readonly relConfig = VTypeSystemBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VTypeSystemBase.relConfig) as VTypeSystemRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Plangs `VPlang-[plangRelTypeSystems]->(this:VTypeSystem)`. Inverse: {@link VC.VPlang.relTypeSystems}. */\n  get relPlangs() {\n    return new RelTo(this as unknown as VC.VTypeSystem, this.graph.edges.plangRelTypeSystems);\n  }\n}\n", "import { arrayMerge } from \"@plangs/auxiliar/array\";\nimport { IterTap } from \"@plangs/auxiliar/iter_tap\";\n\nimport * as Gen from \"./generated\";\n\nimport { FieldGithub, FieldReleases } from \"./vertex_data_fields\";\nimport type { Release, StrDate, VPlangData } from \"./vertex_data_schemas\";\n\n// Shortcuts to the configuration objects.\nexport const rel = Gen.PlangsGraphBase.relConfig;\nexport const prop = Gen.PlangsGraphBase.propConfig;\n\nexport class PlangsGraph extends Gen.PlangsGraphBase {\n  /** We can derive / infer some data from the existing data. */\n  materialize(): this {\n    // Bundle -> Tool -> Plang is transitive: a bundle supports all the languages supported by its tools.\n    for (const bundle of this.bundle.values) {\n      for (const tool of bundle.relTools.values) {\n        bundle.relPlangs.add(...tool.relPlangs.keys);\n      }\n    }\n\n    // Data can say a langauge is a transpiler, but we can also infer it.\n    // If a language compiles to another, then it is a transpiler.\n    for (const plang of this.plang.values) {\n      if (!plang.isTranspiler && plang.relCompilesTo.size > 0) {\n        plang.data.isTranspiler = true;\n      }\n    }\n\n    return this;\n  }\n}\n\nexport class VApp extends Gen.VAppBase {\n  get github(): FieldGithub {\n    return new FieldGithub(this);\n  }\n\n  get releases(): FieldReleases {\n    return new FieldReleases(this);\n  }\n}\n\nexport class VAuthor extends Gen.VAuthorBase {}\n\nexport class VBundle extends Gen.VBundleBase {}\n\nexport class VCommunity extends Gen.VCommunityBase {}\n\nexport class VLearning extends Gen.VLearningBase {}\n\nexport class VLibrary extends Gen.VLibraryBase {\n  get github(): FieldGithub {\n    return new FieldGithub(this);\n  }\n\n  get releases(): FieldReleases {\n    return new FieldReleases(this);\n  }\n}\n\nexport class VLicense extends Gen.VLicenseBase {\n  get spdx(): string | undefined {\n    return this.data.spdx;\n  }\n\n  get isFSFLibre(): boolean {\n    return this.data.isFSFLibre === true;\n  }\n\n  get isOSIApproved(): boolean {\n    return this.data.isOSIApproved === true;\n  }\n}\n\nexport class VParadigm extends Gen.VParadigmBase {}\n\nexport class VPlang extends Gen.VPlangBase {\n  addExtensions(exts: string[]): this {\n    arrayMerge((this.data.extensions ??= []), exts);\n    return this;\n  }\n\n  addFilenames(filenames: string[]): this {\n    arrayMerge((this.data.filenames ??= []), filenames);\n    return this;\n  }\n\n  addReleases(releases: Release[]): this {\n    arrayMerge((this.data.releases ??= []), releases, (r1, r2) => r1.version === r2.version);\n    return this;\n  }\n\n  /** Override merge to handle some array fields better. */\n  override merge(data: Partial<VPlangData>): this {\n    const { extensions, filenames, releases, ...rest } = data;\n\n    if (extensions) this.addExtensions(extensions);\n    if (filenames) this.addFilenames(filenames);\n    if (releases) this.addReleases(releases);\n\n    return super.merge(rest as VPlangData);\n  }\n\n  get extensions(): IterTap<string> {\n    return new IterTap(this.data.extensions);\n  }\n\n  get github(): FieldGithub {\n    return new FieldGithub(this);\n  }\n\n  get isPopular(): boolean {\n    const { githubPopular, languishRanking } = this.data;\n    return !!githubPopular || (typeof languishRanking === \"number\" && languishRanking <= 25);\n  }\n\n  get isTranspiler(): boolean {\n    return this.data.isTranspiler === true;\n  }\n\n  override get ranking(): number | undefined {\n    return this.data.languishRanking;\n  }\n\n  get releases(): FieldReleases {\n    return new FieldReleases(this);\n  }\n\n  get stackovTags(): IterTap<string> {\n    return new IterTap(this.data.stackovTags);\n  }\n\n  /**\n   * Builds (non-recursively) a set of all languages that this language is related to, not including self.\n   * A language is related if it is compiled to, is a dialect of, or implements this language.\n   */\n  family(opt = { compilesTo: true, dialectOf: true, implements: true }): Set<VPlang> {\n    const set = new Set<VPlang>([]);\n    if (opt.compilesTo) for (const pl of this.relCompilesTo.values) set.add(pl);\n    if (opt.dialectOf) for (const pl of this.relDialectOf.values) set.add(pl);\n    if (opt.implements) for (const pl of this.relImplements.values) set.add(pl);\n    return set;\n  }\n}\n\nexport class VPlatform extends Gen.VPlatformBase {}\n\nexport class VTag extends Gen.VTagBase {}\n\nexport class VTool extends Gen.VToolBase {\n  get github(): FieldGithub {\n    return new FieldGithub(this);\n  }\n\n  get releases(): FieldReleases {\n    return new FieldReleases(this);\n  }\n}\n\nexport class VTypeSystem extends Gen.VTypeSystemBase {}\n\nexport class VSubsystem extends Gen.VSubsystemBase {\n  get github(): FieldGithub {\n    return new FieldGithub(this);\n  }\n\n  get releases(): FieldReleases {\n    return new FieldReleases(this);\n  }\n}\n\nexport class VPost extends Gen.VPostBase {\n  set path(path: string) {\n    this.data.path = path;\n  }\n\n  get author(): string | undefined {\n    return this.data.author;\n  }\n\n  get date(): StrDate | undefined {\n    return this.data.date;\n  }\n\n  get path(): string | undefined {\n    return this.data.path;\n  }\n\n  get title(): string | undefined {\n    return this.name;\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { AppFacetKey } from \"@plangs/plangs/facets/apps\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"general\" | \"licenses\" | \"platforms\" | \"tags\" | \"writtenWith\";\ntype FK = AppFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"app\", \"created\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"App Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n      bool(\"releasedRecently\", \"Released Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 1) : new ValNil())),\n      text(\"ghStars\", \"GitHub Stars\"),\n    ],\n  },\n  licenses: { title: \"Licenses\", facets: [table(\"licenses\", \"Licenses\", rel(\"app\", \"relLicenses\"))] },\n  platforms: { title: \"Platforms\", facets: [table(\"platforms\", \"Platforms\", rel(\"app\", \"relPlatforms\"))] },\n  tags: { title: \"Tags\", facets: [table(\"tags\", \"Tags\", rel(\"app\", \"relTags\"))] },\n  writtenWith: { title: \"Written With\", facets: [table(\"writtenWith\", \"Written With\", rel(\"app\", \"relWrittenWith\"))] },\n});\n\nconst PAGE: PlangsPage = \"apps\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [[\"general\"], [\"writtenWith\"], [\"tags\", \"creationYear\", \"licenses\"], [\"platforms\"]],\n  default: \"general\",\n};\n\nexport class AppsFacetsState extends FacetsMainState<GK, AppFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"app\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): AppsFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const values = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new AppsFacetsState({ pg, currentGroupKey, values });\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { CommunityFacetKey } from \"@plangs/plangs/facets/communities\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"general\" | \"plangs\" | \"libraries\" | \"apps\" | \"tools\" | \"tags\";\ntype FK = CommunityFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"community\", \"created\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"Community Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n    ],\n  },\n  apps: { title: \"Licenses\", facets: [table(\"apps\", \"Apps\", rel(\"community\", \"relApps\"))] },\n  libraries: { title: \"Platforms\", facets: [table(\"libraries\", \"libraries\", rel(\"community\", \"relLibraries\"))] },\n  tags: { title: \"Tags\", facets: [table(\"tags\", \"Tags\", rel(\"community\", \"relTags\"))] },\n  plangs: { title: \"Written For\", facets: [table(\"plangs\", \"Plangs\", rel(\"community\", \"relPlangs\"))] },\n  tools: { title: \"Written With\", facets: [table(\"tools\", \"Tools\", rel(\"community\", \"relTools\"))] },\n});\n\nconst PAGE: PlangsPage = \"communities\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [[\"general\"], [\"plangs\", \"libraries\"], [\"apps\", \"tools\"], [\"tags\"]],\n  default: \"general\",\n};\n\nexport class CommunitiesFacetsState extends FacetsMainState<GK, CommunityFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"community\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): CommunitiesFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const values = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new CommunitiesFacetsState({ pg, currentGroupKey, values });\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { LearningFacetKey } from \"@plangs/plangs/facets/learning\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"general\" | \"plangs\" | \"libraries\" | \"apps\" | \"tools\" | \"tags\";\ntype FK = LearningFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"learning\", \"created\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"Learning Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n    ],\n  },\n  apps: { title: \"Apps\", facets: [table(\"apps\", \"Apps\", rel(\"learning\", \"relApps\"))] },\n  libraries: { title: \"Libraries\", facets: [table(\"libraries\", \"libraries\", rel(\"learning\", \"relLibraries\"))] },\n  tags: { title: \"Tags\", facets: [table(\"tags\", \"Tags\", rel(\"learning\", \"relTags\"))] },\n  plangs: { title: \"Plangs\", facets: [table(\"plangs\", \"Plangs\", rel(\"learning\", \"relPlangs\"))] },\n  tools: { title: \"Tools\", facets: [table(\"tools\", \"Tools\", rel(\"learning\", \"relTools\"))] },\n});\n\nconst PAGE: PlangsPage = \"learning\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [[\"general\"], [\"plangs\", \"libraries\"], [\"apps\", \"tools\"], [\"tags\"]],\n  default: \"general\",\n};\n\nexport class LearningFacetsState extends FacetsMainState<GK, LearningFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"learning\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): LearningFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const values = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new LearningFacetsState({ pg, currentGroupKey, values });\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { LibraryFacetKey } from \"@plangs/plangs/facets/libraries\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"general\" | \"licenses\" | \"platforms\" | \"tags\" | \"writtenWith\" | \"writtenFor\";\ntype FK = LibraryFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"library\", \"created\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"Library Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n      bool(\"releasedRecently\", \"Released Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 1) : new ValNil())),\n      text(\"ghStars\", \"GitHub Stars\"),\n    ],\n  },\n  licenses: {\n    title: \"Licenses\",\n    facets: [table(\"licenses\", \"Licenses\", rel(\"library\", \"relLicenses\"))],\n  },\n  platforms: {\n    title: \"Platforms\",\n    facets: [table(\"platforms\", \"Platforms\", rel(\"library\", \"relPlatforms\"))],\n  },\n  tags: {\n    title: \"Tags\",\n    facets: [table(\"tags\", \"Tags\", rel(\"library\", \"relTags\"))],\n  },\n  writtenWith: { title: \"Written With \", facets: [table(\"writtenWith\", \"Written With\", rel(\"library\", \"relWrittenWith\"))] },\n  writtenFor: { title: \"Written For\", facets: [table(\"writtenFor\", \"Written For\", rel(\"tool\", \"relPlangs\"))] },\n});\n\nconst PAGE: PlangsPage = \"libraries\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [[\"general\"], [\"writtenWith\", \"writtenFor\"], [\"tags\", \"creationYear\", \"licenses\"], [\"platforms\"]],\n  default: \"general\",\n};\n\nexport class LibrariesFacetsState extends FacetsMainState<GK, LibraryFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"library\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): LibrariesFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const values = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new LibrariesFacetsState({ pg, currentGroupKey, values });\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, multi, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { PlangFacetKey } from \"@plangs/plangs/facets/plangs\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"dialectOf\" | \"general\" | \"implements\" | \"influenced\" | \"influencedBy\" | \"licenses\" | \"paradigms\" | \"platforms\" | \"tags\" | \"transpiler\" | \"typeSystems\" | \"writtenWith\";\ntype FK = PlangFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"plang\", \"created\"))] },\n  dialectOf: { title: \"Dialect Of\", facets: [table(\"dialectOf\", \"Dialect Of\", rel(\"plang\", \"relDialectOf\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"plangName\", \"Plang Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n      bool(\"releasedRecently\", \"Released Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 1) : new ValNil())),\n      bool(\"isPopular\", \"Is Popular\"),\n      bool(\"hasLogo\", \"Has Logo\"),\n      bool(\"hasWikipedia\", \"Has Wikipedia\"),\n      multi(\"extensions\", \"Extensions\"),\n    ],\n  },\n  implements: {\n    title: \"Implements\",\n    facets: [\n      table(\"implements\", \"Implements\", { ...rel(\"plang\", \"relImplements\"), minEntries: 2 }), // All plangs implement themselves.\n    ],\n  },\n  influenced: { title: \"Influenced\", facets: [table(\"influenced\", \"Influenced\", rel(\"plang\", \"relInfluenced\"))] },\n  influencedBy: { title: \"Influenced By\", facets: [table(\"influencedBy\", \"Influenced By\", rel(\"plang\", \"relInfluencedBy\"))] },\n  licenses: { title: \"Licenses\", facets: [table(\"licenses\", \"Licenses\", rel(\"plang\", \"relLicenses\"))] },\n  paradigms: { title: \"Paradigms\", facets: [table(\"paradigms\", \"Paradigms\", rel(\"plang\", \"relParadigms\"))] },\n  platforms: { title: \"Platforms\", facets: [table(\"platforms\", \"Platforms\", rel(\"plang\", \"relPlatforms\"))] },\n  tags: { title: \"Tags\", facets: [table(\"tags\", \"Tags\", rel(\"plang\", \"relTags\"))] },\n  transpiler: {\n    title: \"Transpiler\",\n    facets: [bool(\"isTranspiler\", \"Transpiler to Anything\"), table(\"compilesTo\", \"Compiles To\", rel(\"plang\", \"relCompilesTo\"))],\n  },\n  typeSystems: { title: \"Type Systems\", facets: [table(\"typeSystems\", \"Type Systems\", rel(\"plang\", \"relTypeSystems\"))] },\n  writtenWith: { title: \"Written With\", facets: [table(\"writtenWith\", \"Written With\", rel(\"plang\", \"relWrittenWith\"))] },\n});\n\nconst PAGE: PlangsPage = \"plangs\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [\n    [\"general\"],\n    [\"platforms\", \"paradigms\", \"typeSystems\"],\n    [\"writtenWith\", \"transpiler\", \"dialectOf\", \"implements\", \"influencedBy\", \"influenced\"],\n    [\"tags\", \"creationYear\", \"licenses\"],\n  ],\n  default: \"general\",\n};\n\nexport class PlangsFacetsState extends FacetsMainState<GK, PlangFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"plang\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): PlangsFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const values = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new PlangsFacetsState({ pg, currentGroupKey, values });\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { SubsystemFacetKey } from \"@plangs/plangs/facets/subsystems\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"general\" | \"licenses\" | \"platforms\" | \"tags\" | \"writtenWith\";\ntype FK = SubsystemFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"subsystem\", \"created\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"Subsystem Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n      bool(\"releasedRecently\", \"Released Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 1) : new ValNil())),\n      text(\"ghStars\", \"GitHub Stars\"),\n    ],\n  },\n  licenses: { title: \"Licenses\", facets: [table(\"licenses\", \"Licenses\", rel(\"subsystem\", \"relLicenses\"))] },\n  platforms: { title: \"Platforms\", facets: [table(\"platforms\", \"Platforms\", rel(\"subsystem\", \"relPlatforms\"))] },\n  tags: { title: \"Tags\", facets: [table(\"tags\", \"Tags\", rel(\"subsystem\", \"relTags\"))] },\n  writtenWith: { title: \"Written With\", facets: [table(\"writtenWith\", \"Written With\", rel(\"subsystem\", \"relWrittenWith\"))] },\n});\n\nconst PAGE: PlangsPage = \"subsystems\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [[\"general\"], [\"writtenWith\"], [\"tags\", \"creationYear\", \"licenses\"], [\"platforms\"]],\n  default: \"general\",\n};\n\nexport class SubsystemsFacetsState extends FacetsMainState<GK, SubsystemFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"subsystem\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): SubsystemsFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const values = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new SubsystemsFacetsState({ pg, currentGroupKey, values });\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { ToolFacetKey } from \"@plangs/plangs/facets/tools\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"general\" | \"licenses\" | \"platforms\" | \"tags\" | \"writtenFor\" | \"writtenWith\";\ntype FK = ToolFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"tool\", \"created\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"Tool Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n      bool(\"releasedRecently\", \"Released Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 1) : new ValNil())),\n      text(\"ghStars\", \"GitHub Stars\"),\n    ],\n  },\n  licenses: { title: \"Licenses\", facets: [table(\"licenses\", \"Licenses\", rel(\"tool\", \"relLicenses\"))] },\n  platforms: { title: \"Platforms\", facets: [table(\"platforms\", \"Platforms\", rel(\"tool\", \"relPlatforms\"))] },\n  tags: { title: \"Tags\", facets: [table(\"tags\", \"Tags\", rel(\"tool\", \"relTags\"))] },\n  writtenFor: { title: \"Written For\", facets: [table(\"writtenFor\", \"Written For\", rel(\"tool\", \"relPlangs\"))] },\n  writtenWith: { title: \"Written With\", facets: [table(\"writtenWith\", \"Written With\", rel(\"tool\", \"relWrittenWith\"))] },\n});\n\nconst PAGE: PlangsPage = \"tools\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [[\"general\"], [\"writtenWith\", \"writtenFor\"], [\"tags\", \"creationYear\", \"licenses\"], [\"platforms\"]],\n  default: \"general\",\n};\n\nexport class ToolsFacetsState extends FacetsMainState<GK, ToolFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"tool\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): ToolsFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const values = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new ToolsFacetsState({ pg, currentGroupKey, values });\n  }\n}\n", "import { createContext } from \"preact\";\n\nimport { useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\nimport { AppsFacetsState } from \"@plangs/frontend/facets/kind/apps\";\nimport { CommunitiesFacetsState } from \"@plangs/frontend/facets/kind/communities\";\nimport { LearningFacetsState } from \"@plangs/frontend/facets/kind/learning\";\nimport { LibrariesFacetsState } from \"@plangs/frontend/facets/kind/libraries\";\nimport { PlangsFacetsState } from \"@plangs/frontend/facets/kind/plangs\";\nimport { SubsystemsFacetsState } from \"@plangs/frontend/facets/kind/subsystem\";\nimport { ToolsFacetsState } from \"@plangs/frontend/facets/kind/tools\";\n\nimport type { FacetsMainState } from \"./state\";\n\n/** Share the main component state across all other children components that may need it. */\nexport const FacetsMainContext = createContext<AnyFacetsMainState | undefined>(undefined);\n\n/** Generic state so components can work with any group and facet key. */\nexport type AnyFacetsMainState = FacetsMainState<string, string>;\n\nexport function useFacetState(page: PlangsPage, pg: PlangsGraph): AnyFacetsMainState | undefined {\n  let state: AnyFacetsMainState | undefined;\n\n  if (page === \"apps\") state = useDispatchable(() => AppsFacetsState.initial(pg) as AnyFacetsMainState);\n  if (page === \"communities\") state = useDispatchable(() => CommunitiesFacetsState.initial(pg) as AnyFacetsMainState);\n  if (page === \"learning\") state = useDispatchable(() => LearningFacetsState.initial(pg) as AnyFacetsMainState);\n  if (page === \"libraries\") state = useDispatchable(() => LibrariesFacetsState.initial(pg) as AnyFacetsMainState);\n  if (page === \"plangs\") state = useDispatchable(() => PlangsFacetsState.initial(pg) as AnyFacetsMainState);\n  if (page === \"subsystems\") state = useDispatchable(() => SubsystemsFacetsState.initial(pg) as AnyFacetsMainState);\n  if (page === \"tools\") state = useDispatchable(() => ToolsFacetsState.initial(pg) as AnyFacetsMainState);\n\n  if (!state) {\n    console.error(\"Unknown page\", page);\n    return;\n  }\n\n  // Ensures the initial side effects are enforced: for instance filtering thumbs according to state fragment/localStorage.\n  return state.runEffects();\n}\n", "import type { JSX, Ref } from \"preact\";\nimport { useEffect } from \"preact/hooks\";\n\nimport { useRootState } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { DESELECT } from \"@plangs/frontend/auxiliar/icons\";\nimport { BORDER, HOVER_ICON_BG, VSCROLL, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { type AnyFacetsMainState, FacetsMainContext, useFacetState } from \"./use_state\";\n\nconst SUBGRID = tw(\"col-span-2\", \"grid grid-cols-subgrid\", \"items-center\", \"grow-0\");\n\nexport function FacetsMain({ page, pg }: { page: PlangsPage; pg: PlangsGraph }) {\n  const state = useFacetState(page, pg);\n  const self = useRootState(state);\n\n  // Subscribe to user changes to reset the form when the user changes URL fragment.\n  useEffect(() => window.fragment.onUserChange(ev => state?.doResetAll(ev.deserFrag)));\n\n  const mapGroups = (state: AnyFacetsMainState, group: string[], callback: (key: string, isCurrent: boolean, hasValues: boolean) => JSX.Element) =>\n    group.map(groupKey => callback(groupKey, state.currentGroupKey === groupKey, state.groupHasValues(groupKey)));\n\n  const body = (state: AnyFacetsMainState) => (\n    <FacetsMainContext.Provider value={state}>\n      <aside\n        class={tw(\n          tw(\"h-full\", VSCROLL),\n          \"min-w-[10rem] sm:min-w-[12rem]\",\n          // ---\n          tw(BORDER, \"border-r-1\"),\n          \"bg-linear-to-t from-secondary to-background\",\n        )}>\n        <div class={tw(\"grid grid-cols-[auto_auto]\")}>\n          <header class={tw(\"uppercase\", \"text-primary\", \"mb-4\", \"ml-4\")}>Filter {page}</header>\n\n          {state.nav.groupKeys.map(group => (\n            <nav key={group.join(\"-\")} class={tw(\"sm:mb-6\", \"min-w-[12rem] max-w-[15rem]\", SUBGRID)}>\n              {mapGroups(state, group, (groupKey, isCurrent, hasValues) => (\n                <div\n                  key={groupKey}\n                  class={tw(\n                    SUBGRID,\n                    isCurrent ? tw(tw(\"border-secondary border-dotted\", \"border-l-1\"), \"bg-primary/85 text-background\") : \"hover:bg-primary/25\",\n                  )}\n                  style={`${hasValues ? \"font-weight: bold\" : \"\"}`}>\n                  <button\n                    {...onClickOnEnter(() => state.doSetCurrentGroup(groupKey))}\n                    class={tw(\n                      \"block w-full\",\n                      \"truncate text-left\",\n                      \"mr-2 px-4 py-1.5 sm:mb-1 sm:ml-4\",\n                      \"cursor-pointer\",\n                      isCurrent ? \"text-background/85\" : hasValues ? \"text-primary\" : \"text-foreground\",\n                    )}>\n                    {state.groupTitle(groupKey)}\n                  </button>\n                  <div\n                    {...onClickOnEnter(() => state.doResetGroup(groupKey))}\n                    class={tw(\n                      \"mr-1 p-1\",\n                      \"scale-75\",\n                      \"cursor-pointer\",\n                      state.groupHasValues(groupKey) ? tw(\"hover:text-hiliteb\", HOVER_ICON_BG) : \"hidden\",\n                    )}>\n                    {DESELECT}\n                  </div>\n                </div>\n              ))}\n            </nav>\n          ))}\n        </div>\n      </aside>\n\n      <div class={tw(\"flex w-full flex-col\", \"overflow-hidden\", tw(BORDER, \"border-r-1\"), \"bg-linear-to-b to-secondary/50\", \"relative\")}>\n        <state.groupsComponent currentFacetGroup={state.currentGroupKey} />\n      </div>\n    </FacetsMainContext.Provider>\n  );\n\n  return (\n    <aside ref={self as Ref<HTMLElement>} class={tw(\"flex flex-row items-stretch\", \"size-full overflow-hidden\")}>\n      {state && body(state)}\n    </aside>\n  );\n}\n", "import { render } from \"preact\";\n\nimport { elems } from \"@plangs/frontend/auxiliar/dom\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\nimport { FacetsMain } from \"./main\";\nimport type { AnyFacetsMainState } from \"./use_state\";\n\nexport type FacetsMainElement = HTMLDivElement & { state?: AnyFacetsMainState };\n\n/** Find {@link FacetsMain} component/s in the DOM and render them. */\nexport function activateFacetsMain(pg: PlangsGraph) {\n  for (const elem of elems(\"facetsMain\")) {\n    if (pg && elem.dataset.page) {\n      try {\n        render(<FacetsMain pg={pg} page={elem.dataset.page as PlangsPage} />, elem);\n      } catch (e) {\n        console.error(\"Error rendering FacetsMain component:\", e);\n      }\n    } else {\n      console.error(\"Missing prop for FacetsMain component.\");\n    }\n  }\n}\n", "import { data } from \"@plangs/frontend/auxiliar/dom\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { TPlangsVertex, TPlangsVertexName } from \"@plangs/plangs/graph/generated\";\nimport { dataKey } from \"@plangs/server/elements\";\n\n/** Attempt to load a vertex using the nearest data-key attribute. */\nexport function getClosestVertex(pg: PlangsGraph, target: EventTarget | null): TPlangsVertex | undefined {\n  const elem = (target as Element).closest(`[${dataKey(\"vertex-key\")}]`);\n  const key = data(elem, \"vertex-key\");\n  const vertexName = data(elem, \"vertex-name\");\n  const vertices = key && vertexName && pg[vertexName as TPlangsVertexName];\n  if (!vertices) return;\n  return vertices.get(key as any);\n}\n", "import \"preact\";\n\nimport { elem, elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { on } from \"@plangs/frontend/auxiliar/events\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { connectLivereload } from \"@plangs/frontend/auxiliar/livereload\";\nimport { activateIconButtons } from \"@plangs/frontend/components/icon-button\";\nimport { ToggleFacetsMenu, ToggleHamburguer, ToggleLights } from \"@plangs/frontend/components/icon-button/state\";\nimport { renderVertexInfo } from \"@plangs/frontend/components/vertex-info\";\nimport { activateFacetsMain } from \"@plangs/frontend/facets/main\";\nimport { PlangsGraph } from \"@plangs/plangs/graph\";\nimport { getClosestVertex } from \"./vertices\";\n\nasync function start() {\n  const pg = new PlangsGraph();\n  const loadData = fetch(\"/plangs.json\")\n    .then(async r => pg.loadJSON(await r.json()))\n    .then(g => g.materialize());\n\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    activateIconButtons();\n\n    loadData.then(() => {\n      activateFacetsMain(pg);\n\n      const grid = elem(\"vertexGrid\");\n      if (!grid) return;\n\n      // On click display the vertex info.\n      on(grid, \"pointerdown\", ({ target }: MouseEvent) => {\n        const vertex = getClosestVertex(pg, target);\n        renderVertexInfo(vertex);\n      });\n\n      // Replace placeholders with the actual images, if any.\n      for (const img of elems(\"vertexThumbnImg\")) {\n        const src = img.dataset.src;\n        if (src) img.setAttribute(\"src\", src);\n      }\n    });\n  });\n}\n\n// This is a global variable that is set by the build system.\ndeclare const PLANGS_ENV: \"dev\" | \"prod\";\nif (PLANGS_ENV === \"dev\") {\n  try {\n    connectLivereload();\n  } catch (err) {\n    console.error(err);\n  }\n}\n\ntry {\n  start();\n} catch (err) {\n  console.error(err);\n}\n\n// Declare some globals that are called as the page is being loaded\n// to avoid flashing the wrong content.\n//\n// This causes some layout shift during the page load, which may\n// add a few ms to the page load time, but it's worth it to avoid\n// the flicker.\ndeclare global {\n  interface Window {\n    fragment: FragmentTracker;\n    restoreFilters: () => void;\n    restoreHamburguer: () => void;\n    restoreLightMode: () => void;\n    restoreVertexInfo: () => void;\n  }\n}\n\nwindow.fragment = new FragmentTracker().bind();\n\nwindow.restoreFilters = () => ToggleFacetsMenu.initial().runEffects();\nwindow.restoreHamburguer = () => ToggleHamburguer.initial().runEffects();\nwindow.restoreLightMode = () => ToggleLights.initial().runEffects();\nwindow.restoreVertexInfo = () => renderVertexInfo();\n"],
  "mappings": "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",
  "names": ["slice", "options", "vnodeId", "isValidElement", "rerenderQueue", "prevDebounce", "defer", "depthSort", "CAPTURE_REGEX", "eventClock", "eventProxy", "eventProxyCapture", "i", "EMPTY_OBJ", "EMPTY_ARR", "IS_NON_DIMENSIONAL", "isArray", "Array", "assign", "obj", "props", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "Fragment", "props", "children", "BaseComponent", "context", "this", "getDomSibling", "vnode", "childIndex", "__", "__i", "sibling", "__k", "length", "__e", "type", "updateParentDomPointers", "i", "child", "__c", "base", "enqueueRender", "c", "__d", "rerenderQueue", "push", "process", "__r", "prevDebounce", "options", "debounceRendering", "defer", "renderQueueLength", "component", "newVNode", "oldVNode", "oldDom", "commitQueue", "refQueue", "sort", "depthSort", "shift", "__v", "__P", "assign", "diff", "__n", "namespaceURI", "__u", "commitRoot", "diffChildren", "parentDom", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "namespace", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "result", "oldChildren", "EMPTY_ARR", "newChildrenLength", "constructNewChildrenArray", "EMPTY_OBJ", "ref", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "Array", "constructor", "String", "createVNode", "isArray", "__b", "key", "findMatchingIndex", "unmount", "parentVNode", "contains", "insertBefore", "nodeType", "findMatchingIndex", "childVNode", "oldChildren", "skewedIndex", "remainingOldChildren", "x", "y", "key", "type", "oldVNode", "__u", "length", "setStyle", "style", "value", "setProperty", "IS_NON_DIMENSIONAL", "test", "dom", "name", "oldValue", "namespace", "useCapture", "o", "cssText", "replace", "CAPTURE_REGEX", "toLowerCase", "slice", "l", "_attached", "eventClock", "addEventListener", "eventProxyCapture", "eventProxy", "removeEventListener", "e", "removeAttribute", "setAttribute", "createEventProxy", "this", "eventHandler", "_dispatched", "options", "event", "diff", "parentDom", "newVNode", "globalContext", "excessDomChildren", "commitQueue", "oldDom", "isHydrating", "refQueue", "tmp", "c", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "isClassComponent", "provider", "componentContext", "i", "renderHook", "count", "renderResult", "newType", "constructor", "__e", "__b", "outer", "props", "prototype", "render", "contextType", "__c", "__", "__E", "BaseComponent", "doRender", "sub", "state", "context", "__n", "__d", "__h", "_sb", "__s", "getDerivedStateFromProps", "assign", "__v", "componentWillMount", "componentDidMount", "push", "componentWillReceiveProps", "shouldComponentUpdate", "__k", "some", "vnode", "componentWillUpdate", "componentDidUpdate", "__P", "__r", "getChildContext", "getSnapshotBeforeUpdate", "diffChildren", "isArray", "Fragment", "children", "base", "then", "MODE_HYDRATE", "nodeType", "nextSibling", "indexOf", "removeNode", "diffElementNodes", "diffed", "commitRoot", "root", "applyRef", "cb", "call", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "localName", "document", "createTextNode", "createElementNS", "is", "__m", "data", "childNodes", "EMPTY_OBJ", "attributes", "__html", "innerHTML", "getDomSibling", "ref", "hasRefUnmount", "current", "unmount", "parentVNode", "skipRemove", "r", "componentWillUnmount", "replaceNode", "documentElement", "createElement", "namespaceURI", "firstChild", "createContext", "defaultValue", "contextId", "context", "__c", "i", "__", "Consumer", "props", "contextValue", "children", "Provider", "subs", "ctx", "this", "getChildContext", "Set", "componentWillUnmount", "shouldComponentUpdate", "_props", "value", "forEach", "c", "__e", "enqueueRender", "sub", "add", "old", "delete", "call", "contextType", "slice", "EMPTY_ARR", "options", "error", "vnode", "oldVNode", "errorInfo", "component", "ctor", "handled", "constructor", "getDerivedStateFromError", "setState", "__d", "componentDidCatch", "__E", "e", "vnodeId", "isValidElement", "undefined", "BaseComponent", "prototype", "update", "callback", "s", "__s", "state", "assign", "__v", "_sb", "push", "forceUpdate", "__h", "render", "Fragment", "rerenderQueue", "defer", "Promise", "then", "bind", "resolve", "setTimeout", "depthSort", "a", "b", "__b", "process", "__r", "CAPTURE_REGEX", "eventClock", "eventProxy", "createEventProxy", "eventProxyCapture", "$", "i", "c", "value", "c", "text", "RISON", "text", "rison.RISON", "RISON", "parse", "stringify", "prop", "data", "e", "currentIndex", "currentComponent", "previousComponent", "prevRaf", "currentHook", "afterPaintEffects", "options", "_options", "oldBeforeDiff", "__b", "oldBeforeRender", "__r", "oldAfterDiff", "diffed", "oldCommit", "__c", "oldBeforeUnmount", "unmount", "oldRoot", "__", "getHookState", "index", "type", "__h", "hooks", "__H", "length", "push", "useState", "initialState", "useReducer", "invokeOrReturn", "reducer", "init", "hookState", "_reducer", "action", "currentValue", "__N", "nextValue", "setState", "_hasScuFromHooks", "updateHookState", "p", "s", "c", "stateHooks", "filter", "x", "every", "prevScu", "call", "this", "shouldUpdate", "props", "forEach", "hookItem", "shouldComponentUpdate", "prevCWU", "componentWillUpdate", "__e", "tmp", "useEffect", "callback", "args", "state", "__s", "argsChanged", "_pendingArgs", "useRef", "initialValue", "currentHook", "useMemo", "current", "useMemo", "factory", "args", "state", "getHookState", "currentIndex", "argsChanged", "__H", "__", "__h", "useContext", "context", "provider", "currentComponent", "__c", "state", "getHookState", "currentIndex", "c", "__", "sub", "props", "value", "flushAfterPaintEffects", "component", "afterPaintEffects", "shift", "__P", "__H", "__h", "forEach", "invokeCleanup", "invokeEffect", "e", "options", "__e", "__v", "__b", "vnode", "currentComponent", "oldBeforeDiff", "__", "parentDom", "__k", "__m", "oldRoot", "__r", "oldBeforeRender", "currentIndex", "hooks", "__c", "previousComponent", "hookItem", "__N", "_pendingArgs", "diffed", "oldAfterDiff", "c", "length", "push", "prevRaf", "requestAnimationFrame", "afterNextFrame", "commitQueue", "some", "filter", "cb", "oldCommit", "unmount", "oldBeforeUnmount", "hasErrored", "s", "HAS_RAF", "callback", "raf", "done", "clearTimeout", "timeout", "cancelAnimationFrame", "setTimeout", "hook", "comp", "cleanup", "argsChanged", "oldArgs", "newArgs", "arg", "index", "invokeOrReturn", "f", "data", "h", "A", "y", "s", "vnodeId", "isArray", "Array", "createVNode", "type", "props", "key", "isStaticChildren", "__source", "__self", "ref", "i", "normalizedProps", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "defaultProps", "options", "u", "u", "u", "u", "u", "u", "u", "u", "doc", "data", "e", "data", "u", "y", "u", "elem", "u", "u", "data", "u", "A", "elem", "y", "i", "u", "icon", "elem", "u", "v", "v", "k2", "v", "m2", "m", "v", "_", "data", "_", "v", "g", "f", "$", "label", "A", "x", "u", "label", "x", "u", "data", "label", "A", "x", "y", "input", "n", "u", "CMP", "a", "cssClass", "u", "data", "A", "x", "y", "SUBGRID", "u", "u", "label", "x", "label", "l2", "elem", "v", "data", "f", "k", "v", "a", "rel", "r2", "rel", "k", "i2", "l2", "data", "k", "v", "e", "data", "rel", "r2", "data", "GROUPS", "GK_BY_FK", "COMPONENT", "PAGE", "NAV", "GROUPS", "GK_BY_FK", "COMPONENT", "PAGE", "NAV", "GROUPS", "GK_BY_FK", "COMPONENT", "PAGE", "NAV", "GROUPS", "GK_BY_FK", "COMPONENT", "PAGE", "NAV", "GROUPS", "GK_BY_FK", "COMPONENT", "PAGE", "NAV", "GROUPS", "GK_BY_FK", "COMPONENT", "PAGE", "NAV", "y", "state", "u", "elem", "u", "e", "elem", "r", "g"]
}
