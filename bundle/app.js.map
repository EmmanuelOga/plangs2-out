{
  "version": 3,
  "sources": ["../../plangs2/node_modules/preact/src/constants.js", "../../plangs2/node_modules/preact/src/util.js", "../../plangs2/node_modules/preact/src/options.js", "../../plangs2/node_modules/preact/src/create-element.js", "../../plangs2/node_modules/preact/src/component.js", "../../plangs2/node_modules/preact/src/diff/props.js", "../../plangs2/node_modules/preact/src/create-context.js", "../../plangs2/node_modules/preact/src/diff/children.js", "../../plangs2/node_modules/preact/src/diff/index.js", "../../plangs2/node_modules/preact/src/render.js", "../../plangs2/node_modules/preact/src/clone-element.js", "../../plangs2/node_modules/preact/src/diff/catch-error.js", "../../plangs2/node_modules/preact/devtools/src/devtools.js", "../../plangs2/node_modules/preact/devtools/src/index.js", "../../plangs2/node_modules/preact/debug/src/check-props.js", "../../plangs2/node_modules/preact/debug/src/component-stack.js", "../../plangs2/node_modules/preact/debug/src/debug.js", "../../plangs2/node_modules/preact/debug/src/constants.js", "../../plangs2/node_modules/preact/debug/src/util.js", "../../plangs2/node_modules/preact/debug/src/index.js", "../../plangs2/packages/server/src/elements.ts", "../../plangs2/packages/frontend/src/auxiliar/dom.ts", "../../plangs2/packages/frontend/src/auxiliar/events.ts", "../../plangs2/node_modules/rison2/src/token.ts", "../../plangs2/node_modules/rison2/src/lexer.ts", "../../plangs2/node_modules/rison2/src/parser.ts", "../../plangs2/node_modules/rison2/src/stringifier.ts", "../../plangs2/node_modules/rison2/src/rison.ts", "../../plangs2/node_modules/rison2/src/escaped.ts", "../../plangs2/node_modules/rison2/src/index.ts", "../../plangs2/packages/auxiliar/src/misc.ts", "../../plangs2/packages/frontend/src/auxiliar/fragment.ts", "../../plangs2/node_modules/preact/hooks/src/index.js", "../../plangs2/packages/frontend/src/auxiliar/dispatchable.ts", "../../plangs2/packages/frontend/src/auxiliar/styles.ts", "../../plangs2/node_modules/preact/jsx-runtime/src/utils.js", "../../plangs2/node_modules/preact/src/constants.js", "../../plangs2/node_modules/preact/jsx-runtime/src/index.js", "../../plangs2/packages/frontend/src/auxiliar/icons.tsx", "../../plangs2/packages/frontend/src/auxiliar/storage.ts", "../../plangs2/packages/frontend/src/components/icon-button/state.tsx", "../../plangs2/packages/frontend/src/components/icon-button/icon-button.tsx", "../../plangs2/packages/frontend/src/components/icon-button/index.tsx", "../../plangs2/packages/frontend/src/components/misc/pill.tsx", "../../plangs2/packages/server/src/utils/html.ts", "../../plangs2/packages/server/src/components/layout.tsx", "../../plangs2/packages/server/src/components/vertex-thumbn.tsx", "../../plangs2/packages/frontend/src/components/vertex-info/vertex-info.tsx", "../../plangs2/packages/frontend/src/components/vertex-info/index.tsx", "../../plangs2/packages/auxiliar/src/filters.ts", "../../plangs2/packages/auxiliar/src/value.ts", "../../plangs2/packages/auxiliar/src/debounce.ts", "../../plangs2/packages/auxiliar/src/map2.ts", "../../plangs2/packages/plangs/src/facets/apps.ts", "../../plangs2/packages/plangs/src/facets/communities.ts", "../../plangs2/packages/plangs/src/facets/learning.ts", "../../plangs2/packages/plangs/src/facets/libraries.ts", "../../plangs2/packages/plangs/src/facets/plangs.ts", "../../plangs2/packages/plangs/src/facets/subsystems.ts", "../../plangs2/packages/plangs/src/facets/tools.ts", "../../plangs2/packages/plangs/src/facets/index.ts", "../../plangs2/packages/frontend/src/facets/main/state.ts", "../../plangs2/packages/auxiliar/src/str_date.ts", "../../plangs2/packages/frontend/src/facets/multisel/state.ts", "../../plangs2/packages/frontend/src/facets/multisel/facet-multi.tsx", "../../plangs2/packages/frontend/src/facets/table/entries.ts", "../../plangs2/packages/frontend/src/facets/table/header.tsx", "../../plangs2/packages/frontend/src/facets/table/state.ts", "../../plangs2/packages/frontend/src/facets/table/facet-table.tsx", "../../plangs2/packages/frontend/src/facets/misc/facet-bool.tsx", "../../plangs2/packages/frontend/src/facets/misc/facet-select.tsx", "../../plangs2/packages/frontend/src/facets/misc/facet-text.tsx", "../../plangs2/packages/frontend/src/facets/misc/facet-group.tsx", "../../plangs2/packages/frontend/src/facets/main/types.ts", "../../plangs2/packages/auxiliar/src/array.ts", "../../plangs2/packages/auxiliar/src/iter_tap.ts", "../../plangs2/packages/graphgen/src/library.ts", "../../plangs2/packages/plangs/src/graph/vertex_data_fields.ts", "../../plangs2/packages/plangs/src/graph/vertex_base.ts", "../../plangs2/packages/plangs/src/graph/generated.ts", "../../plangs2/packages/plangs/src/graph/index.ts", "../../plangs2/packages/frontend/src/facets/kind/apps.tsx", "../../plangs2/packages/frontend/src/facets/kind/communities.tsx", "../../plangs2/packages/frontend/src/facets/kind/learning.tsx", "../../plangs2/packages/frontend/src/facets/kind/libraries.tsx", "../../plangs2/packages/frontend/src/facets/kind/plangs.tsx", "../../plangs2/packages/frontend/src/facets/kind/subsystem.tsx", "../../plangs2/packages/frontend/src/facets/kind/tools.tsx", "../../plangs2/packages/frontend/src/facets/main/use_state.ts", "../../plangs2/packages/frontend/src/facets/main/main.tsx", "../../plangs2/packages/frontend/src/facets/main/index.tsx", "../../plangs2/packages/frontend/src/editor/validators.ts", "../../plangs2/packages/frontend/src/editor/vertex-form-state.ts", "../../plangs2/packages/frontend/src/editor/vertex-form.tsx", "../../plangs2/packages/frontend/src/editor/vertices-editor-state.ts", "../../plangs2/packages/frontend/src/editor/vertices-editor.tsx", "../../plangs2/packages/frontend/src/editor/editor-main.tsx", "../../plangs2/packages/frontend/src/editor/index.tsx", "../../plangs2/packages/frontend/src/app/vertices.ts", "../../plangs2/packages/frontend/src/app/index.tsx"],
  "sourcesContent": ["/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {import('./index').ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\nimport { UNDEFINED } from './constants';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === UNDEFINED) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {import('./internal').VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: UNDEFINED,\n\t\t_original: original == null ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == null && options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor == UNDEFINED;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c;\n\trerenderQueue.sort(depthSort);\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile ((c = rerenderQueue.shift())) {\n\t\tif (c._dirty) {\n\t\t\tlet renderQueueLength = rerenderQueue.length;\n\t\t\trenderComponent(c);\n\t\t\tif (rerenderQueue.length > renderQueueLength) {\n\t\t\t\t// When i.e. rerendering a provider additional new items can be injected, we want to\n\t\t\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t\t\t// single pass\n\t\t\t\trerenderQueue.sort(depthSort);\n\t\t\t}\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { IS_NON_DIMENSIONAL, SVG_NAMESPACE } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] == '-') {\n\t\tstyle.setProperty(key, value == null ? '' : value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\nconst CAPTURE_REGEX = /(PointerCapture)$|Capture$/i;\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name == 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] == 'o' && name[1] == 'n') {\n\t\tuseCapture = name != (name = name.replace(CAPTURE_REGEX, '$1'));\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (\n\t\t\tname.toLowerCase() in dom ||\n\t\t\tname == 'onFocusOut' ||\n\t\t\tname == 'onFocusIn'\n\t\t)\n\t\t\tname = name.toLowerCase().slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == SVG_NAMESPACE) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == null ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != null && (value !== false || name[4] == '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {import('../internal').PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == null) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n", "import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\t/** @type {Set<import('./internal').Component> | null} */\n\t\t\t\tlet subs = new Set();\n\t\t\t\tlet ctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\t\tsubs = null;\n\t\t\t\t};\n\n\t\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.add(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tif (subs) {\n\t\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType =\n\t\tcontext);\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport {\n\tEMPTY_OBJ,\n\tEMPTY_ARR,\n\tINSERT_VNODE,\n\tMATCHED,\n\tUNDEFINED\n} from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\toldDom = constructNewChildrenArray(\n\t\tnewParentVNode,\n\t\trenderResult,\n\t\toldChildren,\n\t\toldDom,\n\t\tnewChildrenLength\n\t);\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == null) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index === -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tlet result = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, null, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == null && newDom != null) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tif (\n\t\t\tchildVNode._flags & INSERT_VNODE ||\n\t\t\toldVNode._children === childVNode._children\n\t\t) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom);\n\t\t} else if (typeof childVNode.type == 'function' && result !== UNDEFINED) {\n\t\t\toldDom = result;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(\n\tnewParentVNode,\n\trenderResult,\n\toldChildren,\n\toldDom,\n\tnewChildrenLength\n) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = new Array(newChildrenLength);\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == null ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tnewParentVNode._children[i] = null;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode.constructor === UNDEFINED && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : null,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\toldVNode = null;\n\t\tif (matchingIndex !== -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original === null\n\t\tconst isMounting = oldVNode == null || oldVNode._original === null;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\tskew--;\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex != skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != null && (oldVNode._flags & MATCHED) == 0) {\n\t\t\t\tif (oldVNode._dom == oldDom) {\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (oldDom && parentVNode.type && !parentDom.contains(oldDom)) {\n\t\t\toldDom = getDomSibling(parentVNode);\n\t\t}\n\t\tparentDom.insertBefore(parentVNode._dom, oldDom || null);\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != null && oldDom.nodeType == 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet oldVNode = oldChildren[skewedIndex];\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\t//\n\t// If there is an unkeyed functional VNode, that isn't a built-in like our Fragment,\n\t// we should not search as we risk re-using state of an unrelated VNode. (reverted for now)\n\tlet shouldSearch =\n\t\t// (typeof type != 'function' || type === Fragment || key) &&\n\t\tremainingOldChildren >\n\t\t(oldVNode != null && (oldVNode._flags & MATCHED) == 0 ? 1 : 0);\n\n\tif (\n\t\toldVNode === null ||\n\t\t(oldVNode &&\n\t\t\tkey == oldVNode.key &&\n\t\t\ttype === oldVNode.type &&\n\t\t\t(oldVNode._flags & MATCHED) == 0)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\tlet x = skewedIndex - 1;\n\t\tlet y = skewedIndex + 1;\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tif (x >= 0) {\n\t\t\t\toldVNode = oldChildren[x];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn x;\n\t\t\t\t}\n\t\t\t\tx--;\n\t\t\t}\n\n\t\t\tif (y < oldChildren.length) {\n\t\t\t\toldVNode = oldChildren[y];\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\t\tkey == oldVNode.key &&\n\t\t\t\t\ttype === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\treturn y;\n\t\t\t\t}\n\t\t\t\ty++;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import {\n\tEMPTY_OBJ,\n\tMATH_NAMESPACE,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tRESET_MODE,\n\tSVG_NAMESPACE,\n\tUNDEFINED,\n\tXHTML_NAMESPACE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * @template {any} T\n * @typedef {import('../internal').Ref<T>} Ref<T>\n */\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== UNDEFINED) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!c._force &&\n\t\t\t\t\t((c.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\t\tnewVNode._original == oldVNode._original)\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original != oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\toldDom = diffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = null;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\t\tif (e.then) {\n\t\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\t\twhile (oldDom && oldDom.nodeType == 8 && oldDom.nextSibling) {\n\t\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = excessDomChildren.length; i--; ) {\n\t\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == null &&\n\t\tnewVNode._original == oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\toldDom = newVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n\n\treturn newVNode._flags & MODE_SUSPENDED ? undefined : oldDom;\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType == 'svg') namespace = SVG_NAMESPACE;\n\telse if (nodeType == 'math') namespace = MATH_NAMESPACE;\n\telse if (!namespace) namespace = XHTML_NAMESPACE;\n\n\tif (excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value == !!nodeType &&\n\t\t\t\t(nodeType ? value.localName == nodeType : value.nodeType == 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (nodeType == null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t}\n\n\tif (nodeType === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != null) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, null, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html !== oldHtml.__html &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType == 'foreignObject' ? XHTML_NAMESPACE : namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType == 'progress' && inputValue == null) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue !== UNDEFINED &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType == 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType == 'option' && inputValue !== oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked !== UNDEFINED && checked !== dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != null) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) {\n\t\t\tapplyRef(r, null, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\tvnode._component = vnode._parent = vnode._dom = UNDEFINED;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\t// https://github.com/preactjs/preact/issues/3794\n\tif (parentDom == document) {\n\t\tparentDom = document.documentElement;\n\t}\n\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? null\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: null,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\nimport { UNDEFINED } from './constants';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === UNDEFINED && defaultProps !== UNDEFINED) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tnull\n\t);\n}\n", "/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component,\n\t\t/** @type {import('../internal').ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "import { Component, Fragment, options } from 'preact';\n\nexport function initDevTools() {\n\tconst globalVar =\n\t\ttypeof globalThis !== 'undefined'\n\t\t\t? globalThis\n\t\t\t: typeof window !== 'undefined'\n\t\t\t\t? window\n\t\t\t\t: undefined;\n\n\tif (\n\t\tglobalVar !== null &&\n\t\tglobalVar !== undefined &&\n\t\tglobalVar.__PREACT_DEVTOOLS__\n\t) {\n\t\tglobalVar.__PREACT_DEVTOOLS__.attachPreact('10.25.2', options, {\n\t\t\tFragment,\n\t\t\tComponent\n\t\t});\n\t}\n}\n", "import { options } from 'preact';\nimport { initDevTools } from './devtools';\n\ninitDevTools();\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, name: string) => T}\n */\nexport function addHookName(value, name) {\n\tif (options._addHookName) {\n\t\toptions._addHookName(name);\n\t}\n\treturn value;\n}\n", "const ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nlet loggedTypeFailures = {};\n\n/**\n * Reset the history of which prop type warnings have been logged.\n */\nexport function resetPropWarnings() {\n\tloggedTypeFailures = {};\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * Adapted from https://github.com/facebook/prop-types/blob/master/checkPropTypes.js\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n */\nexport function checkPropTypes(\n\ttypeSpecs,\n\tvalues,\n\tlocation,\n\tcomponentName,\n\tgetStack\n) {\n\tObject.keys(typeSpecs).forEach(typeSpecName => {\n\t\tlet error;\n\t\ttry {\n\t\t\terror = typeSpecs[typeSpecName](\n\t\t\t\tvalues,\n\t\t\t\ttypeSpecName,\n\t\t\t\tcomponentName,\n\t\t\t\tlocation,\n\t\t\t\tnull,\n\t\t\t\tReactPropTypesSecret\n\t\t\t);\n\t\t} catch (e) {\n\t\t\terror = e;\n\t\t}\n\t\tif (error && !(error.message in loggedTypeFailures)) {\n\t\t\tloggedTypeFailures[error.message] = true;\n\t\t\tconsole.error(\n\t\t\t\t`Failed ${location} type: ${error.message}${\n\t\t\t\t\t(getStack && `\\n${getStack()}`) || ''\n\t\t\t\t}`\n\t\t\t);\n\t\t}\n\t});\n}\n", "import { options, Fragment } from 'preact';\n\n/**\n * Get human readable name of the component/dom node\n * @param {import('./internal').VNode} vnode\n * @param {import('./internal').VNode} vnode\n * @returns {string}\n */\nexport function getDisplayName(vnode) {\n\tif (vnode.type === Fragment) {\n\t\treturn 'Fragment';\n\t} else if (typeof vnode.type == 'function') {\n\t\treturn vnode.type.displayName || vnode.type.name;\n\t} else if (typeof vnode.type == 'string') {\n\t\treturn vnode.type;\n\t}\n\n\treturn '#text';\n}\n\n/**\n * Used to keep track of the currently rendered `vnode` and print it\n * in debug messages.\n */\nlet renderStack = [];\n\n/**\n * Keep track of the current owners. An owner describes a component\n * which was responsible to render a specific `vnode`. This exclude\n * children that are passed via `props.children`, because they belong\n * to the parent owner.\n *\n * ```jsx\n * const Foo = props => <div>{props.children}</div> // div's owner is Foo\n * const Bar = props => {\n *   return (\n *     <Foo><span /></Foo> // Foo's owner is Bar, span's owner is Bar\n *   )\n * }\n * ```\n *\n * Note: A `vnode` may be hoisted to the root scope due to compiler\n * optimiztions. In these cases the `_owner` will be different.\n */\nlet ownerStack = [];\n\n/**\n * Get the currently rendered `vnode`\n * @returns {import('./internal').VNode | null}\n */\nexport function getCurrentVNode() {\n\treturn renderStack.length > 0 ? renderStack[renderStack.length - 1] : null;\n}\n\n/**\n * If the user doesn't have `@babel/plugin-transform-react-jsx-source`\n * somewhere in his tool chain we can't print the filename and source\n * location of a component. In that case we just omit that, but we'll\n * print a helpful message to the console, notifying the user of it.\n */\nlet showJsxSourcePluginWarning = true;\n\n/**\n * Check if a `vnode` is a possible owner.\n * @param {import('./internal').VNode} vnode\n */\nfunction isPossibleOwner(vnode) {\n\treturn typeof vnode.type == 'function' && vnode.type != Fragment;\n}\n\n/**\n * Return the component stack that was captured up to this point.\n * @param {import('./internal').VNode} vnode\n * @returns {string}\n */\nexport function getOwnerStack(vnode) {\n\tconst stack = [vnode];\n\tlet next = vnode;\n\twhile (next._owner != null) {\n\t\tstack.push(next._owner);\n\t\tnext = next._owner;\n\t}\n\n\treturn stack.reduce((acc, owner) => {\n\t\tacc += `  in ${getDisplayName(owner)}`;\n\n\t\tconst source = owner.__source;\n\t\tif (source) {\n\t\t\tacc += ` (at ${source.fileName}:${source.lineNumber})`;\n\t\t} else if (showJsxSourcePluginWarning) {\n\t\t\tconsole.warn(\n\t\t\t\t'Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.'\n\t\t\t);\n\t\t}\n\t\tshowJsxSourcePluginWarning = false;\n\n\t\treturn (acc += '\\n');\n\t}, '');\n}\n\n/**\n * Setup code to capture the component trace while rendering. Note that\n * we cannot simply traverse `vnode._parent` upwards, because we have some\n * debug messages for `this.setState` where the `vnode` is `undefined`.\n */\nexport function setupComponentStack() {\n\tlet oldDiff = options._diff;\n\tlet oldDiffed = options.diffed;\n\tlet oldRoot = options._root;\n\tlet oldVNode = options.vnode;\n\tlet oldRender = options._render;\n\n\toptions.diffed = vnode => {\n\t\tif (isPossibleOwner(vnode)) {\n\t\t\townerStack.pop();\n\t\t}\n\t\trenderStack.pop();\n\t\tif (oldDiffed) oldDiffed(vnode);\n\t};\n\n\toptions._diff = vnode => {\n\t\tif (isPossibleOwner(vnode)) {\n\t\t\trenderStack.push(vnode);\n\t\t}\n\t\tif (oldDiff) oldDiff(vnode);\n\t};\n\n\toptions._root = (vnode, parent) => {\n\t\townerStack = [];\n\t\tif (oldRoot) oldRoot(vnode, parent);\n\t};\n\n\toptions.vnode = vnode => {\n\t\tvnode._owner =\n\t\t\townerStack.length > 0 ? ownerStack[ownerStack.length - 1] : null;\n\t\tif (oldVNode) oldVNode(vnode);\n\t};\n\n\toptions._render = vnode => {\n\t\tif (isPossibleOwner(vnode)) {\n\t\t\townerStack.push(vnode);\n\t\t}\n\n\t\tif (oldRender) oldRender(vnode);\n\t};\n}\n", "import { checkPropTypes } from './check-props';\nimport { options, Component } from 'preact';\nimport {\n\tELEMENT_NODE,\n\tDOCUMENT_NODE,\n\tDOCUMENT_FRAGMENT_NODE\n} from './constants';\nimport {\n\tgetOwnerStack,\n\tsetupComponentStack,\n\tgetCurrentVNode,\n\tgetDisplayName\n} from './component-stack';\nimport { assign, isNaN } from './util';\n\nconst isWeakMapSupported = typeof WeakMap == 'function';\n\n/**\n * @param {import('./internal').VNode} vnode\n * @returns {Array<string>}\n */\nfunction getDomChildren(vnode) {\n\tlet domChildren = [];\n\n\tif (!vnode._children) return domChildren;\n\n\tvnode._children.forEach(child => {\n\t\tif (child && typeof child.type === 'function') {\n\t\t\tdomChildren.push.apply(domChildren, getDomChildren(child));\n\t\t} else if (child && typeof child.type === 'string') {\n\t\t\tdomChildren.push(child.type);\n\t\t}\n\t});\n\n\treturn domChildren;\n}\n\n/**\n * @param {import('./internal').VNode} parent\n * @returns {string}\n */\nfunction getClosestDomNodeParentName(parent) {\n\tif (!parent) return '';\n\tif (typeof parent.type == 'function') {\n\t\tif (parent._parent == null) {\n\t\t\tif (parent._dom != null && parent._dom.parentNode != null) {\n\t\t\t\treturn parent._dom.parentNode.localName;\n\t\t\t}\n\t\t\treturn '';\n\t\t}\n\t\treturn getClosestDomNodeParentName(parent._parent);\n\t}\n\treturn /** @type {string} */ (parent.type);\n}\n\nexport function initDebug() {\n\tsetupComponentStack();\n\n\tlet hooksAllowed = false;\n\n\t/* eslint-disable no-console */\n\tlet oldBeforeDiff = options._diff;\n\tlet oldDiffed = options.diffed;\n\tlet oldVnode = options.vnode;\n\tlet oldRender = options._render;\n\tlet oldCatchError = options._catchError;\n\tlet oldRoot = options._root;\n\tlet oldHook = options._hook;\n\tconst warnedComponents = !isWeakMapSupported\n\t\t? null\n\t\t: {\n\t\t\t\tuseEffect: new WeakMap(),\n\t\t\t\tuseLayoutEffect: new WeakMap(),\n\t\t\t\tlazyPropTypes: new WeakMap()\n\t\t\t};\n\tconst deprecations = [];\n\n\toptions._catchError = (error, vnode, oldVNode, errorInfo) => {\n\t\tlet component = vnode && vnode._component;\n\t\tif (component && typeof error.then == 'function') {\n\t\t\tconst promise = error;\n\t\t\terror = new Error(\n\t\t\t\t`Missing Suspense. The throwing component was: ${getDisplayName(vnode)}`\n\t\t\t);\n\n\t\t\tlet parent = vnode;\n\t\t\tfor (; parent; parent = parent._parent) {\n\t\t\t\tif (parent._component && parent._component._childDidSuspend) {\n\t\t\t\t\terror = promise;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// We haven't recovered and we know at this point that there is no\n\t\t\t// Suspense component higher up in the tree\n\t\t\tif (error instanceof Error) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\terrorInfo = errorInfo || {};\n\t\t\terrorInfo.componentStack = getOwnerStack(vnode);\n\t\t\toldCatchError(error, vnode, oldVNode, errorInfo);\n\n\t\t\t// when an error was handled by an ErrorBoundary we will nonetheless emit an error\n\t\t\t// event on the window object. This is to make up for react compatibility in dev mode\n\t\t\t// and thus make the Next.js dev overlay work.\n\t\t\tif (typeof error.then != 'function') {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\toptions._root = (vnode, parentNode) => {\n\t\tif (!parentNode) {\n\t\t\tthrow new Error(\n\t\t\t\t'Undefined parent passed to render(), this is the second argument.\\n' +\n\t\t\t\t\t'Check if the element is available in the DOM/has the correct id.'\n\t\t\t);\n\t\t}\n\n\t\tlet isValid;\n\t\tswitch (parentNode.nodeType) {\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\tcase DOCUMENT_NODE:\n\t\t\t\tisValid = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tisValid = false;\n\t\t}\n\n\t\tif (!isValid) {\n\t\t\tlet componentName = getDisplayName(vnode);\n\t\t\tthrow new Error(\n\t\t\t\t`Expected a valid HTML node as a second argument to render.\tReceived ${parentNode} instead: render(<${componentName} />, ${parentNode});`\n\t\t\t);\n\t\t}\n\n\t\tif (oldRoot) oldRoot(vnode, parentNode);\n\t};\n\n\toptions._diff = vnode => {\n\t\tlet { type } = vnode;\n\n\t\thooksAllowed = true;\n\n\t\tif (type === undefined) {\n\t\t\tthrow new Error(\n\t\t\t\t'Undefined component passed to createElement()\\n\\n' +\n\t\t\t\t\t'You likely forgot to export your component or might have mixed up default and named imports' +\n\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t);\n\t\t} else if (type != null && typeof type == 'object') {\n\t\t\tif (type._children !== undefined && type._dom !== undefined) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Invalid type passed to createElement(): ${type}\\n\\n` +\n\t\t\t\t\t\t'Did you accidentally pass a JSX literal as JSX twice?\\n\\n' +\n\t\t\t\t\t\t`  let My${getDisplayName(vnode)} = ${serializeVNode(type)};\\n` +\n\t\t\t\t\t\t`  let vnode = <My${getDisplayName(vnode)} />;\\n\\n` +\n\t\t\t\t\t\t'This usually happens when you export a JSX literal and not the component.' +\n\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthrow new Error(\n\t\t\t\t'Invalid type passed to createElement(): ' +\n\t\t\t\t\t(Array.isArray(type) ? 'array' : type)\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\tvnode.ref !== undefined &&\n\t\t\ttypeof vnode.ref != 'function' &&\n\t\t\ttypeof vnode.ref != 'object' &&\n\t\t\t!('$$typeof' in vnode) // allow string refs when preact-compat is installed\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t`Component's \"ref\" property should be a function, or an object created ` +\n\t\t\t\t\t`by createRef(), but got [${typeof vnode.ref}] instead\\n` +\n\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t);\n\t\t}\n\n\t\tif (typeof vnode.type == 'string') {\n\t\t\tfor (const key in vnode.props) {\n\t\t\t\tif (\n\t\t\t\t\tkey[0] === 'o' &&\n\t\t\t\t\tkey[1] === 'n' &&\n\t\t\t\t\ttypeof vnode.props[key] != 'function' &&\n\t\t\t\t\tvnode.props[key] != null\n\t\t\t\t) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`Component's \"${key}\" property should be a function, ` +\n\t\t\t\t\t\t\t`but got [${typeof vnode.props[key]}] instead\\n` +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Check prop-types if available\n\t\tif (typeof vnode.type == 'function' && vnode.type.propTypes) {\n\t\t\tif (\n\t\t\t\tvnode.type.displayName === 'Lazy' &&\n\t\t\t\twarnedComponents &&\n\t\t\t\t!warnedComponents.lazyPropTypes.has(vnode.type)\n\t\t\t) {\n\t\t\t\tconst m =\n\t\t\t\t\t'PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ';\n\t\t\t\ttry {\n\t\t\t\t\tconst lazyVNode = vnode.type();\n\t\t\t\t\twarnedComponents.lazyPropTypes.set(vnode.type, true);\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\tm + `Component wrapped in lazy() is ${getDisplayName(lazyVNode)}`\n\t\t\t\t\t);\n\t\t\t\t} catch (promise) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\tm + \"We will log the wrapped component's name once it is loaded.\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet values = vnode.props;\n\t\t\tif (vnode.type._forwarded) {\n\t\t\t\tvalues = assign({}, values);\n\t\t\t\tdelete values.ref;\n\t\t\t}\n\n\t\t\tcheckPropTypes(\n\t\t\t\tvnode.type.propTypes,\n\t\t\t\tvalues,\n\t\t\t\t'prop',\n\t\t\t\tgetDisplayName(vnode),\n\t\t\t\t() => getOwnerStack(vnode)\n\t\t\t);\n\t\t}\n\n\t\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n\t};\n\n\tlet renderCount = 0;\n\tlet currentComponent;\n\toptions._render = vnode => {\n\t\tif (oldRender) {\n\t\t\toldRender(vnode);\n\t\t}\n\t\thooksAllowed = true;\n\n\t\tconst nextComponent = vnode._component;\n\t\tif (nextComponent === currentComponent) {\n\t\t\trenderCount++;\n\t\t} else {\n\t\t\trenderCount = 1;\n\t\t}\n\n\t\tif (renderCount >= 25) {\n\t\t\tthrow new Error(\n\t\t\t\t`Too many re-renders. This is limited to prevent an infinite loop ` +\n\t\t\t\t\t`which may lock up your browser. The component causing this is: ${getDisplayName(\n\t\t\t\t\t\tvnode\n\t\t\t\t\t)}`\n\t\t\t);\n\t\t}\n\n\t\tcurrentComponent = nextComponent;\n\t};\n\n\toptions._hook = (comp, index, type) => {\n\t\tif (!comp || !hooksAllowed) {\n\t\t\tthrow new Error('Hook can only be invoked from render methods.');\n\t\t}\n\n\t\tif (oldHook) oldHook(comp, index, type);\n\t};\n\n\t// Ideally we'd want to print a warning once per component, but we\n\t// don't have access to the vnode that triggered it here. As a\n\t// compromise and to avoid flooding the console with warnings we\n\t// print each deprecation warning only once.\n\tconst warn = (property, message) => ({\n\t\tget() {\n\t\t\tconst key = 'get' + property + message;\n\t\t\tif (deprecations && deprecations.indexOf(key) < 0) {\n\t\t\t\tdeprecations.push(key);\n\t\t\t\tconsole.warn(`getting vnode.${property} is deprecated, ${message}`);\n\t\t\t}\n\t\t},\n\t\tset() {\n\t\t\tconst key = 'set' + property + message;\n\t\t\tif (deprecations && deprecations.indexOf(key) < 0) {\n\t\t\t\tdeprecations.push(key);\n\t\t\t\tconsole.warn(`setting vnode.${property} is not allowed, ${message}`);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst deprecatedAttributes = {\n\t\tnodeName: warn('nodeName', 'use vnode.type'),\n\t\tattributes: warn('attributes', 'use vnode.props'),\n\t\tchildren: warn('children', 'use vnode.props.children')\n\t};\n\n\tconst deprecatedProto = Object.create({}, deprecatedAttributes);\n\n\toptions.vnode = vnode => {\n\t\tconst props = vnode.props;\n\t\tif (\n\t\t\tvnode.type !== null &&\n\t\t\tprops != null &&\n\t\t\t('__source' in props || '__self' in props)\n\t\t) {\n\t\t\tconst newProps = (vnode.props = {});\n\t\t\tfor (let i in props) {\n\t\t\t\tconst v = props[i];\n\t\t\t\tif (i === '__source') vnode.__source = v;\n\t\t\t\telse if (i === '__self') vnode.__self = v;\n\t\t\t\telse newProps[i] = v;\n\t\t\t}\n\t\t}\n\n\t\t// eslint-disable-next-line\n\t\tvnode.__proto__ = deprecatedProto;\n\t\tif (oldVnode) oldVnode(vnode);\n\t};\n\n\toptions.diffed = vnode => {\n\t\tconst { type, _parent: parent } = vnode;\n\t\t// Check if the user passed plain objects as children. Note that we cannot\n\t\t// move this check into `options.vnode` because components can receive\n\t\t// children in any shape they want (e.g.\n\t\t// `<MyJSONFormatter>{{ foo: 123, bar: \"abc\" }}</MyJSONFormatter>`).\n\t\t// Putting this check in `options.diffed` ensures that\n\t\t// `vnode._children` is set and that we only validate the children\n\t\t// that were actually rendered.\n\t\tif (vnode._children) {\n\t\t\tvnode._children.forEach(child => {\n\t\t\t\tif (typeof child === 'object' && child && child.type === undefined) {\n\t\t\t\t\tconst keys = Object.keys(child).join(',');\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`Objects are not valid as a child. Encountered an object with the keys {${keys}}.` +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (vnode._component === currentComponent) {\n\t\t\trenderCount = 0;\n\t\t}\n\n\t\tif (\n\t\t\ttypeof type === 'string' &&\n\t\t\t(isTableElement(type) ||\n\t\t\t\ttype === 'p' ||\n\t\t\t\ttype === 'a' ||\n\t\t\t\ttype === 'button')\n\t\t) {\n\t\t\t// Avoid false positives when Preact only partially rendered the\n\t\t\t// HTML tree. Whilst we attempt to include the outer DOM in our\n\t\t\t// validation, this wouldn't work on the server for\n\t\t\t// `preact-render-to-string`. There we'd otherwise flood the terminal\n\t\t\t// with false positives, which we'd like to avoid.\n\t\t\tlet domParentName = getClosestDomNodeParentName(parent);\n\t\t\tif (domParentName !== '' && isTableElement(type)) {\n\t\t\t\tif (\n\t\t\t\t\ttype === 'table' &&\n\t\t\t\t\t// Tables can be nested inside each other if it's inside a cell.\n\t\t\t\t\t// See https://developer.mozilla.org/en-US/docs/Learn/HTML/Tables/Advanced#nesting_tables\n\t\t\t\t\tdomParentName !== 'td' &&\n\t\t\t\t\tisTableElement(domParentName)\n\t\t\t\t) {\n\t\t\t\t\tconsole.log(domParentName, parent._dom);\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Improper nesting of table. Your <table> should not have a table-node parent.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t} else if (\n\t\t\t\t\t(type === 'thead' || type === 'tfoot' || type === 'tbody') &&\n\t\t\t\t\tdomParentName !== 'table'\n\t\t\t\t) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t} else if (\n\t\t\t\t\ttype === 'tr' &&\n\t\t\t\t\tdomParentName !== 'thead' &&\n\t\t\t\t\tdomParentName !== 'tfoot' &&\n\t\t\t\t\tdomParentName !== 'tbody'\n\t\t\t\t) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot> parent.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t} else if (type === 'td' && domParentName !== 'tr') {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Improper nesting of table. Your <td> should have a <tr> parent.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t} else if (type === 'th' && domParentName !== 'tr') {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Improper nesting of table. Your <th> should have a <tr>.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else if (type === 'p') {\n\t\t\t\tlet illegalDomChildrenTypes = getDomChildren(vnode).filter(childType =>\n\t\t\t\t\tILLEGAL_PARAGRAPH_CHILD_ELEMENTS.test(childType)\n\t\t\t\t);\n\t\t\t\tif (illegalDomChildrenTypes.length) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Improper nesting of paragraph. Your <p> should not have ' +\n\t\t\t\t\t\t\tillegalDomChildrenTypes.join(', ') +\n\t\t\t\t\t\t\t' as child-elements.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else if (type === 'a' || type === 'button') {\n\t\t\t\tif (getDomChildren(vnode).indexOf(type) !== -1) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t`Improper nesting of interactive content. Your <${type}>` +\n\t\t\t\t\t\t\t` should not have other ${type === 'a' ? 'anchor' : 'button'}` +\n\t\t\t\t\t\t\t' tags as child-elements.' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\thooksAllowed = false;\n\n\t\tif (oldDiffed) oldDiffed(vnode);\n\n\t\tif (vnode._children != null) {\n\t\t\tconst keys = [];\n\t\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\t\tconst child = vnode._children[i];\n\t\t\t\tif (!child || child.key == null) continue;\n\n\t\t\t\tconst key = child.key;\n\t\t\t\tif (keys.indexOf(key) !== -1) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t'Following component has two or more children with the ' +\n\t\t\t\t\t\t\t`same key attribute: \"${key}\". This may cause glitches and misbehavior ` +\n\t\t\t\t\t\t\t'in rendering process. Component: \\n\\n' +\n\t\t\t\t\t\t\tserializeVNode(vnode) +\n\t\t\t\t\t\t\t`\\n\\n${getOwnerStack(vnode)}`\n\t\t\t\t\t);\n\n\t\t\t\t\t// Break early to not spam the console\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tkeys.push(key);\n\t\t\t}\n\t\t}\n\n\t\tif (vnode._component != null && vnode._component.__hooks != null) {\n\t\t\t// Validate that none of the hooks in this component contain arguments that are NaN.\n\t\t\t// This is a common mistake that can be hard to debug, so we want to catch it early.\n\t\t\tconst hooks = vnode._component.__hooks._list;\n\t\t\tif (hooks) {\n\t\t\t\tfor (let i = 0; i < hooks.length; i += 1) {\n\t\t\t\t\tconst hook = hooks[i];\n\t\t\t\t\tif (hook._args) {\n\t\t\t\t\t\tfor (let j = 0; j < hook._args.length; j++) {\n\t\t\t\t\t\t\tconst arg = hook._args[j];\n\t\t\t\t\t\t\tif (isNaN(arg)) {\n\t\t\t\t\t\t\t\tconst componentName = getDisplayName(vnode);\n\t\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t\t`Invalid argument passed to hook. Hooks should not be called with NaN in the dependency array. Hook index ${i} in component ${componentName} was called with NaN.`\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\nconst setState = Component.prototype.setState;\nComponent.prototype.setState = function (update, callback) {\n\tif (this._vnode == null) {\n\t\t// `this._vnode` will be `null` during componentWillMount. But it\n\t\t// is perfectly valid to call `setState` during cWM. So we\n\t\t// need an additional check to verify that we are dealing with a\n\t\t// call inside constructor.\n\t\tif (this.state == null) {\n\t\t\tconsole.warn(\n\t\t\t\t`Calling \"this.setState\" inside the constructor of a component is a ` +\n\t\t\t\t\t`no-op and might be a bug in your application. Instead, set ` +\n\t\t\t\t\t`\"this.state = {}\" directly.\\n\\n${getOwnerStack(getCurrentVNode())}`\n\t\t\t);\n\t\t}\n\t}\n\n\treturn setState.call(this, update, callback);\n};\n\nfunction isTableElement(type) {\n\treturn (\n\t\ttype === 'table' ||\n\t\ttype === 'tfoot' ||\n\t\ttype === 'tbody' ||\n\t\ttype === 'thead' ||\n\t\ttype === 'td' ||\n\t\ttype === 'tr' ||\n\t\ttype === 'th'\n\t);\n}\n\nconst ILLEGAL_PARAGRAPH_CHILD_ELEMENTS =\n\t/^(address|article|aside|blockquote|details|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|main|menu|nav|ol|p|pre|search|section|table|ul)$/;\n\nconst forceUpdate = Component.prototype.forceUpdate;\nComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode == null) {\n\t\tconsole.warn(\n\t\t\t`Calling \"this.forceUpdate\" inside the constructor of a component is a ` +\n\t\t\t\t`no-op and might be a bug in your application.\\n\\n${getOwnerStack(\n\t\t\t\t\tgetCurrentVNode()\n\t\t\t\t)}`\n\t\t);\n\t} else if (this._parentDom == null) {\n\t\tconsole.warn(\n\t\t\t`Can't call \"this.forceUpdate\" on an unmounted component. This is a no-op, ` +\n\t\t\t\t`but it indicates a memory leak in your application. To fix, cancel all ` +\n\t\t\t\t`subscriptions and asynchronous tasks in the componentWillUnmount method.` +\n\t\t\t\t`\\n\\n${getOwnerStack(this._vnode)}`\n\t\t);\n\t}\n\treturn forceUpdate.call(this, callback);\n};\n\n/**\n * Serialize a vnode tree to a string\n * @param {import('./internal').VNode} vnode\n * @returns {string}\n */\nexport function serializeVNode(vnode) {\n\tlet { props } = vnode;\n\tlet name = getDisplayName(vnode);\n\n\tlet attrs = '';\n\tfor (let prop in props) {\n\t\tif (props.hasOwnProperty(prop) && prop !== 'children') {\n\t\t\tlet value = props[prop];\n\n\t\t\t// If it is an object but doesn't have toString(), use Object.toString\n\t\t\tif (typeof value == 'function') {\n\t\t\t\tvalue = `function ${value.displayName || value.name}() {}`;\n\t\t\t}\n\n\t\t\tvalue =\n\t\t\t\tObject(value) === value && !value.toString\n\t\t\t\t\t? Object.prototype.toString.call(value)\n\t\t\t\t\t: value + '';\n\n\t\t\tattrs += ` ${prop}=${JSON.stringify(value)}`;\n\t\t}\n\t}\n\n\tlet children = props.children;\n\treturn `<${name}${attrs}${\n\t\tchildren && children.length ? '>..</' + name + '>' : ' />'\n\t}`;\n}\n\noptions._hydrationMismatch = (newVNode, excessDomChildren) => {\n\tconst { type } = newVNode;\n\tconst availableTypes = excessDomChildren\n\t\t.map(child => child && child.localName)\n\t\t.filter(Boolean);\n\tconsole.error(\n\t\t`Expected a DOM node of type ${type} but found ${availableTypes.join(', ')} as available DOM-node(s), this is caused by the SSR'd HTML containing different DOM-nodes compared to the hydrated one.\\n\\n${getOwnerStack(newVNode)}`\n\t);\n};\n", "export const ELEMENT_NODE = 1;\nexport const DOCUMENT_NODE = 9;\nexport const DOCUMENT_FRAGMENT_NODE = 11;\n", "/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\nexport function isNaN(value) {\n\treturn value !== value;\n}\n", "import { initDebug } from './debug';\nimport 'preact/devtools';\n\ninitDebug();\n\nexport { resetPropWarnings } from './check-props';\n", "/**\n * @file utilities to type check DOM \"id\" and \"class\" attributes.\n */\n\n// Elements for which we have 0 or 1 instance.\nexport const ID_KEYS = [\n  \"todo\",\n\n  \"mainContent\", // Main content area in the layout.\n  \"mainNav\", // Main navigation bar, toggled by the hamburger icon.\n  \"vertexGrid\", // Main grid for vertices.\n\n  \"plangsEditor\", // The editor for plangs.\n] as const;\n\n// Elements for which we may have multiple instances.\nexport const CL_KEYS = [\n  \"todo\",\n\n  // TODO: these should be IDs since they are unique.\n  \"facetsMain\", // The element inside which the facets are rendered.\n  \"facetsWrapper\", // The div wrapper for the facets, which we use to measure its size.\n  \"facetsBar\", // The aside menu for facets.\n  \"facetsSelect\", // The select box for facets.\n\n  \"iconButton\", // A Div wrapper for IconButton component.\n  \"vertexThumbn\", // Thumbnail for a vertex.\n  \"vertexThumbnImg\", // We'll use the placeholder images until after DOM ready.\n  \"vertexInfo\", // Information about a vertex.\n  \"externalLink\", // External link to another site.\n] as const;\n\nexport const DATA_KEYS = [\n  \"vertex-key\", // The key of a vertex, ex: \"pl+1\",\n  \"vertex-name\", // The name of a vertex. ex: \"plang\", matches the graph accessor, ex: `pg.plang`.\n  \"vertex-ranking\", // The ranking of a vertex, ex: \"1\" (or nothing if not ranked).\n] as const;\n\nexport type IDKey = (typeof ID_KEYS)[number];\nexport type CLKey = (typeof CL_KEYS)[number];\nexport type DataKey = (typeof DATA_KEYS)[number];\n\nexport function cssID(key: IDKey): `id-${IDKey}` {\n  return `id-${key}`;\n}\n\nexport function cssClass(key: CLKey): `cl-${CLKey}` {\n  return `cl-${key}`;\n}\n\nexport function dataKey(key: DataKey): `data-${DataKey}` {\n  return `data-${key}`;\n}\n", "import { type CLKey, type DataKey, type IDKey, cssClass, cssID, dataKey } from \"@plangs/server/elements\";\n\n/**\n * Bun will attempt to load this code from the server even if it is not imported explicitly.\n * We need to define a valid document (even if it is undefined) to avoid errors.\n */\nconst doc = (typeof document === \"undefined\" ? undefined : document) as Document;\n\nexport const $ = doc?.querySelector.bind(doc);\nexport const $$ = doc?.querySelectorAll.bind(doc);\n\nexport const elem = <T extends HTMLElement>(key: IDKey) => $<T>(`#${cssID(key)}`) ?? undefined;\nexport const elems = <T extends HTMLElement>(key: CLKey) => $$<T>(`.${cssClass(key)}`);\nexport const data = (el: Element | null, key: DataKey) => el?.getAttribute(dataKey(key)) ?? undefined;\n\n/** Return computed width and height of the element. */\nexport function size(el: HTMLElement): { width: number; height: number } {\n  try {\n    const style = getComputedStyle(el);\n    return { width: Number.parseInt(style.width), height: Number.parseInt(style.height) };\n  } catch (err) {\n    console.error(\"Error getting size\", el, err);\n  }\n  return { width: 0, height: 0 };\n}\n\n/** Call the same action on Enter or Click. */\nexport function onClickOnEnter(action: (ev: UIEvent) => void) {\n  return {\n    onClick: (ev: MouseEvent) => {\n      ev.stopPropagation();\n      action(ev);\n    },\n    onKeyDown: (ev: KeyboardEvent) => {\n      ev.stopPropagation();\n      if (ev.key === \"Enter\") {\n        ev.preventDefault();\n        action(ev);\n      }\n    },\n  };\n}\n\n/** Check if the min-width breakpoint applies right now.  */\nexport const minWidthBP = (size: string) => window.matchMedia(`(min-width: ${size})`).matches ?? false;\n", "export type Nil = null | undefined;\n\n/** Adds an event listener to the target, and returns a function to undo the listener. */\nexport function on<T>(target: EventTarget | Nil, type: string, listener: (ev: T) => void, opt?: AddEventListenerOptions): undefined | (() => void) {\n  if (!target) console.warn(\"missing target\", { type, listener, opt });\n  target?.addEventListener(type, listener as EventListener, opt);\n  if (target) return () => off(target, type, listener, opt);\n}\n\nexport function off<T>(target: EventTarget | Nil, type: string, listener: (ev: T) => void, opt?: AddEventListenerOptions): void {\n  if (!target) console.warn(\"missing target\", { type, listener, opt });\n  target?.removeEventListener(type, listener as EventListener, opt);\n}\n\nexport function send<T extends Event>(target: EventTarget | Nil, ev: T): boolean | undefined {\n  if (!target) console.warn(\"missing target\", ev);\n  return target?.dispatchEvent(ev);\n}\n\nexport function customEvent<T>(type: string, detail: T, options: CustomEventInit<T> = { bubbles: true, composed: true, cancelable: undefined }) {\n  return new CustomEvent(type, { detail, ...options });\n}\n\n/** Util to type cast and check an event handler. */\nexport function handler<T extends HTMLElement, Ev extends UIEvent = UIEvent>(action: (target: T, ev: Ev) => void) {\n  return (ev: Ev) => {\n    if (ev.target && \"tagName\" in ev.target) action(ev.target as T, ev);\n  };\n}\n", "export const NULL = '!n';\nexport const TRUE = '!t';\nexport const FALSE = '!f';\nexport const OBJECT_START = '(';\nexport const ARRAY_START = '!(';\nexport const OBJECT_ARRAY_END = ')';\nexport const COLON = ':';\nexport const COMMA = ',';\nexport const STRING = 'string';\nexport const NUMBER = 'number';\n\nexport type TokenKind =\n  | typeof NULL\n  | typeof TRUE\n  | typeof FALSE\n  | typeof OBJECT_START\n  | typeof ARRAY_START\n  | typeof OBJECT_ARRAY_END\n  | typeof COLON\n  | typeof COMMA\n  | typeof STRING\n  | typeof NUMBER;\n\nexport interface Token<T extends TokenKind = TokenKind> {\n  kind: T;\n  value: string;\n}\n", "import {\n  ARRAY_START,\n  COLON,\n  COMMA,\n  FALSE,\n  NULL,\n  NUMBER,\n  OBJECT_ARRAY_END,\n  OBJECT_START,\n  STRING,\n  Token,\n  TokenKind,\n  TRUE,\n} from './token';\n\ntype Rule<T extends TokenKind> = (\n  source: string,\n  pos: number,\n) => Token<T> | null;\n\nconst rules = {\n  quote: (): Rule<typeof STRING> => (source, pos) => {\n    if (!source.startsWith(\"'\", pos)) return null;\n\n    let i = pos;\n    while (true) {\n      if (source.length <= ++i) {\n        throw new SyntaxError(`Unexpected end of Rison input`);\n      }\n      switch (source[i]) {\n        case '!':\n          i++;\n          continue;\n        case \"'\":\n          return { kind: STRING, value: source.slice(pos, i + 1) };\n      }\n    }\n  },\n  string:\n    <T extends TokenKind>(kind: T): Rule<T> =>\n    (source, pos) =>\n      source.startsWith(kind, pos) ? { kind, value: kind } : null,\n  regexp:\n    <T extends TokenKind>(kind: T, reg: RegExp): Rule<T> =>\n    (source, pos) => {\n      const match = reg.exec(source.slice(pos));\n      return match ? { kind, value: match[0] } : null;\n    },\n};\n\nconst RULES: Rule<TokenKind>[] = [\n  rules.quote(),\n  rules.string(OBJECT_START),\n  rules.string(ARRAY_START),\n  rules.string(OBJECT_ARRAY_END),\n  rules.string(NULL),\n  rules.string(TRUE),\n  rules.string(FALSE),\n  rules.string(COLON),\n  rules.string(COMMA),\n  rules.regexp(STRING, /^[^0-9- '!:(),*@$][^ '!:(),*@$]*/),\n  rules.regexp(NUMBER, /^-?([1-9][0-9]*|[0-9])(\\.[0-9]+)?(e-?[0-9]+)?/),\n];\n\nexport class Lexer {\n  private pos = 0;\n\n  public constructor(private source: string) {}\n\n  public position(): number {\n    return this.pos;\n  }\n\n  public length(): number {\n    return this.source.length;\n  }\n\n  public nextToken(): Token<TokenKind> | null {\n    if (this.pos >= this.source.length) return null;\n\n    for (const rule of RULES) {\n      const token = rule(this.source, this.pos);\n      if (token !== null) {\n        this.pos += token.value.length;\n        return token;\n      }\n    }\n\n    throw new SyntaxError(\n      `Unexpected token ${this.source[this.pos]} in Rison at position ${\n        this.pos\n      }`,\n    );\n  }\n\n  public syntaxError(token: Token): SyntaxError {\n    const pos = this.pos - token.value.length;\n    return new SyntaxError(\n      `Unexpected token ${this.source[pos]} in Rison at position ${pos}`,\n    );\n  }\n}\n", "import { Lexer } from './lexer';\nimport {\n  ARRAY_START,\n  COLON,\n  COMMA,\n  FALSE,\n  NULL,\n  NUMBER,\n  OBJECT_ARRAY_END,\n  OBJECT_START,\n  STRING,\n  Token,\n  TokenKind,\n  TRUE,\n} from './token';\n\nexport class Parser {\n  public constructor(private readonly lexer: Lexer) {}\n\n  public readAsAny(): any {\n    const val = this.asAny(this.nextToken());\n    if (this.lexer.position() < this.lexer.length()) {\n      throw this.lexer.syntaxError(this.nextToken());\n    }\n    return val;\n  }\n\n  private asAny(token: Token): any {\n    switch (token.kind) {\n      case NULL:\n        return null;\n      case TRUE:\n        return true;\n      case FALSE:\n        return false;\n      case STRING:\n        return this.asString(token);\n      case NUMBER:\n        return Number(token.value);\n      case OBJECT_START:\n        return this.readAsObject();\n      case ARRAY_START:\n        return this.readAsArray();\n      default:\n        throw this.lexer.syntaxError(token);\n    }\n  }\n\n  private asString(token: Token): string {\n    return token.value[0] === \"'\"\n      ? token.value.replace(/!./g, (c) => c[1]).slice(1, -1)\n      : token.value;\n  }\n\n  private readAsObject(): Record<string, any> {\n    const obj: Record<string, any> = {};\n    let token = this.nextToken();\n    while (token.kind !== OBJECT_ARRAY_END) {\n      const key = this.asString(token);\n      this.expectToken(COLON);\n      const val = this.asAny(this.nextToken());\n      obj[key] = val;\n\n      token = this.nextToken();\n      if (token.kind === OBJECT_ARRAY_END) break;\n      if (token.kind !== COMMA) throw this.lexer.syntaxError(token);\n      token = this.nextToken();\n    }\n    return obj;\n  }\n\n  private readAsArray(): any[] {\n    const arr: any[] = [];\n    let token = this.nextToken();\n    while (token.kind !== OBJECT_ARRAY_END) {\n      arr.push(this.asAny(token));\n      token = this.nextToken();\n      if (token.kind === OBJECT_ARRAY_END) break;\n      if (token.kind !== COMMA) throw this.lexer.syntaxError(token);\n      token = this.nextToken();\n    }\n    return arr;\n  }\n\n  private expectToken<T extends TokenKind>(kind: T) {\n    const token = this.nextToken();\n    if (token.kind !== kind) throw this.lexer.syntaxError(token);\n  }\n\n  private nextToken(): Token {\n    const token = this.lexer.nextToken();\n    if (!token) throw new SyntaxError(`Unexpected end of Rison input`);\n    return token;\n  }\n}\n", "import {\n  ARRAY_START,\n  COLON,\n  COMMA,\n  FALSE,\n  NULL,\n  OBJECT_ARRAY_END,\n  OBJECT_START,\n  TRUE,\n} from './token';\n\nconst ID_REGEXP = /^[^0-9- '!:(),*@$][^ '!:(),*@$]*$/;\n\nexport class Stringifier {\n  public value(value: any): string | undefined {\n    if (value === undefined) return undefined;\n    if (value === null) return NULL;\n    switch (typeof value) {\n      case 'object':\n        return Array.isArray(value)\n          ? `${ARRAY_START}${this.array(value)}${OBJECT_ARRAY_END}`\n          : `${OBJECT_START}${this.object(value)}${OBJECT_ARRAY_END}`;\n      case 'boolean':\n        return this.boolean(value);\n      case 'number':\n        return this.number(value);\n      case 'string':\n        return this.string(value);\n      case 'bigint':\n        throw new TypeError('Do not known how to serialize a BigInt');\n      default:\n        return undefined;\n    }\n  }\n\n  public object(value: Record<string, any>): string {\n    return Object.entries(value).reduce<string>((prev, [key, value]) => {\n      const str = this.value(value);\n      if (str === undefined) return prev;\n\n      const pair = `${this.string(key)}${COLON}${str}`;\n      return prev.length > 0 ? `${prev}${COMMA}${pair}` : pair;\n    }, '');\n  }\n\n  public array(value: any[]): string {\n    return value.reduce((prev, value) => {\n      const str = this.value(value) || NULL;\n      return prev.length > 0 ? `${prev}${COMMA}${str}` : str;\n    }, '');\n  }\n\n  public boolean(value: boolean): string {\n    return value ? TRUE : FALSE;\n  }\n\n  public number(value: number): string {\n    return Number.isFinite(value) ? value.toString().replace('+', '') : NULL;\n  }\n\n  public string(value: string): string {\n    return ID_REGEXP.test(value)\n      ? value\n      : `'${value.replace(/[!']/g, (c) => `!${c}`)}'`;\n  }\n}\n", "import { Lexer } from './lexer';\nimport { Parser } from './parser';\nimport { Stringifier } from './stringifier';\n\nexport const RISON = {\n  parse: (text: string): any => {\n    const lexer = new Lexer(text);\n    const parser = new Parser(lexer);\n    return parser.readAsAny();\n  },\n  stringify: (value: any): string => {\n    const stringifier = new Stringifier();\n    return stringifier.value(value) as string;\n  },\n};\n\nexport const ORISON = {\n  parse: (text: string): any => {\n    const lexer = new Lexer(`(${text})`);\n    const parser = new Parser(lexer);\n    return parser.readAsAny();\n  },\n  stringify: (value: Record<string, any>): string => {\n    const stringifier = new Stringifier();\n    return stringifier.object(value);\n  },\n};\n\nexport const ARISON = {\n  parse: (text: string): any => {\n    const lexer = new Lexer(`!(${text})`);\n    const parser = new Parser(lexer);\n    return parser.readAsAny();\n  },\n  stringify: (value: any[]): string => {\n    const stringifier = new Stringifier();\n    return stringifier.array(value);\n  },\n};\n", "import * as rison from './rison';\n\nconst ESCAPE_NO_REQUIRED = /^[-A-Za-z0-9~!*()_.',:@$/]*$/;\n\n/**\n * this is like encodeURIComponent() but quotes fewer characters.\n *\n * See https://github.com/Nanonid/rison/blob/e64af6c096fd30950ec32cfd48526ca6ee21649d/js/rison.js#L107-L118\n *\n * This function is licensed under the MIT license found in the\n * https://github.com/Nanonid/rison/blob/e64af6c096fd30950ec32cfd48526ca6ee21649d/LICENSE.md.\n *\n * @param str\n */\nconst escape = (str: string): string => {\n  if (ESCAPE_NO_REQUIRED.test(str)) return str;\n\n  return encodeURIComponent(str)\n    .replace(/%2C/g, ',')\n    .replace(/%3A/g, ':')\n    .replace(/%40/g, '@')\n    .replace(/%24/g, '$')\n    .replace(/%2F/g, '/')\n    .replace(/%20/g, '+');\n};\n\nconst unescape = (str: string): string =>\n  decodeURIComponent(str.replace(/\\+/g, '%20'));\n\nconst RISON = {\n  parse: (text: string): any => rison.RISON.parse(unescape(text)),\n  stringify: (value: any): string => escape(rison.RISON.stringify(value)),\n};\n\nconst ORISON = {\n  parse: (text: string): any => rison.ORISON.parse(unescape(text)),\n  stringify: (value: Record<string, any>): string =>\n    escape(rison.ORISON.stringify(value)),\n};\n\nconst ARISON = {\n  parse: (text: string): any => rison.ARISON.parse(unescape(text)),\n  stringify: (value: any[]): string => escape(rison.ARISON.stringify(value)),\n};\n\nconst parse = RISON.parse;\nconst stringify = RISON.stringify;\n\nexport { RISON, ORISON, ARISON, parse, stringify, escape, unescape };\n", "import * as escaped from './escaped';\nimport { ARISON, ORISON, RISON } from './rison';\n\nconst parse = RISON.parse;\nconst stringify = RISON.stringify;\nconst escape = escaped.escape;\nconst unescape = escaped.unescape;\n\nexport { RISON, ORISON, ARISON, parse, stringify, escape, unescape, escaped };\n", "/**\n * Ret (short for \"returning\") is a combinator that takes an item and a function,\n * and applies the function to the item.\n *\n * Useful to avoid assigning a value to a variable, also creates a new scope around the item,\n * so the value can be reused multiple times (good if the value is expensive to compute).\n *\n * From:\n * ```\n * const thing = expensiveComputation();\n * doSomething(thing);\n * doSomethingElse(thing);\n * ```\n *\n * To:\n * ```\n * ret(expensiveComputation(), thing => {\n *  doSomething(thing);\n *  doSomethingElse(thing);\n * });\n * ```\n *\n * This is great for instance in TSX where you can't define a variable in the middle of a TSX block.\n *\n * There's a similar combinator (tap), whose purpose is to make a value available for a block of code in the middle of a chain.\n *\n * Aka aka \"K combinator\" aka \"Kestrel\" .\n * https://leanpub.com/combinators/read#leanpub-auto-kestrels\n */\nexport const ret = <T, R>(item: T, action: (item: T) => R): R => action(item);\n\nexport const tap = <T>(item: T, action: (item: T) => void): T => {\n  action(item);\n  return item;\n};\n\n// https://stackoverflow.com/a/32108184\n// biome-ignore lint/suspicious/noExplicitAny: checks if _any_ object is empty.\nexport function isEmpty(obj: any) {\n  for (const prop in obj) {\n    if (Object.hasOwn(obj, prop)) return false;\n  }\n  return true;\n}\n\n// Maintain an order of keys, with priority for some keys.\nconst PRIORITY_KEYS = [\"name\", \"description\", \"shortDesc\", \"created\"];\n\n/** Cleanup data: return a new object with sorted keys, and remove some blank values. */\nexport function cleanup(data: Record<string, any>) {\n  const entries = Object.entries(data);\n  entries.sort(([keyA], [keyB]) => {\n    const indexA = PRIORITY_KEYS.indexOf(keyA);\n    const indexB = PRIORITY_KEYS.indexOf(keyB);\n\n    if (indexA !== -1 && indexB !== -1) return indexA - indexB;\n    if (indexA !== -1) return -1;\n    if (indexB !== -1) return 1;\n\n    return keyA.localeCompare(keyB);\n  });\n\n  const result: Record<string, any> = {};\n  for (const [k, v] of entries) {\n    if (Array.isArray(v)) {\n      if (v.length > 0) result[k] = [...v].sort();\n    } else if ((v !== null && v !== undefined) || v !== \"\") {\n      result[k] = v;\n    }\n  }\n\n  return result;\n}\n", "import { RISON } from \"rison2\";\n\nimport { isEmpty } from \"@plangs/auxiliar/misc\";\n\nimport { on } from \"./events\";\n\n// Bun loads this code so we need to define a valid window (even if it is not defined).\nconst win = (typeof window === \"undefined\" ? undefined : window) as Window;\n\n/**\n * Returns the fragment (possible empty): the string after the first '#' of a URL or HREF.\n * Returns the input string if it has no '#' character.\n */\nexport function getFragment(fragmentOrURL: URL | Location | string | undefined): string {\n  if (!fragmentOrURL) return \"\";\n  if (fragmentOrURL instanceof URL || fragmentOrURL instanceof Location) return fragmentOrURL.hash.slice(1);\n  const hashIndex = fragmentOrURL.indexOf(\"#\");\n  return hashIndex !== -1 ? fragmentOrURL.slice(hashIndex + 1) : fragmentOrURL;\n}\n\n/**\n * All fragment updates should go to a single instance of this class to ensure we can distinguish\n * between user initiated and app initiated URL Fragment changes:\n *\n * * Use instance.pushState to change the fragment and only trigger a \"user change\" event.\n * * Use instance.update to change the fragment and trigger both a \"user change\" and a \"change\" event.\n */\nexport class FragmentTracker extends EventTarget {\n  #fragment: string = win.location.hash.slice(1);\n  #previous?: string;\n\n  /** Keep a reference so we can remove it if needed (with {@link destroy}). */\n  #boundedHandler?: (ev: HashChangeEvent) => void;\n\n  // biome-ignore lint/suspicious/noExplicitAny: Return of RISON.parse is any.\n  static deserialize(fragment = win.location.hash): any {\n    try {\n      const data = fragment.slice(fragment.indexOf(\"#\") + 1).trim();\n      if (data.length > 2 && data.startsWith(\"(\") && data.endsWith(\")\")) return RISON.parse(data);\n    } catch (e) {\n      console.warn(\"Failed to parse RISON:\", fragment, e);\n    }\n  }\n\n  // biome-ignore lint/suspicious/noExplicitAny: RISON.stringify can serialize any data.\n  static serialize(data: any): string | undefined {\n    try {\n      if (isEmpty(data)) return undefined;\n      return RISON.stringify(data);\n    } catch (e) {\n      console.error(\"Failed to serialize data\", e);\n    }\n  }\n\n  /** Call this to bind the tracker to the hashchange event of the window. */\n  bind(): this {\n    this.destroy();\n    this.#boundedHandler = this.#hashChangeHandler.bind(this);\n    win.addEventListener(\"hashchange\", this.#boundedHandler);\n    return this;\n  }\n\n  /** Remove the hashchange event listener off the window. */\n  destroy() {\n    if (this.#boundedHandler) {\n      win.removeEventListener(\"hashchange\", this.#boundedHandler);\n      this.#boundedHandler = undefined;\n    }\n  }\n\n  get fragment(): string {\n    return this.#fragment;\n  }\n\n  get previous(): string | undefined {\n    return this.#previous;\n  }\n\n  /**\n   * Handler for 'hashchange': this must come from user action (or 3rd party code :-/) since\n   * updates through this class use history.pushState, which doesn't trigger hashchange.\n   */\n  #hashChangeHandler({ newURL, oldURL }: HashChangeEvent) {\n    const newFragment = getFragment(newURL);\n    if (newFragment !== this.#fragment) {\n      this.#previous = getFragment(oldURL);\n      this.#fragment = newFragment;\n      this.dispatchEvent(this.#createEvent(FRAGMENT_USER_CHANGE));\n      this.dispatchEvent(this.#createEvent(FRAGMENT_CHANGE));\n    }\n  }\n\n  /**\n   * This method will use history.pushState, so it won't trigger a {@link FRAGMENT_USER_CHANGE}.\n   * https://developer.mozilla.org/en-US/docs/Web/API/History/pushState#description\n   */\n  pushState(fragmentOrURL: string | URL | undefined) {\n    const newFragment = getFragment(fragmentOrURL);\n    if (newFragment !== this.#fragment) {\n      this.#previous = this.#fragment;\n      this.#fragment = newFragment;\n      history.pushState(null, \"\", `#${newFragment}`);\n      this.dispatchEvent(this.#createEvent(FRAGMENT_CHANGE));\n    }\n  }\n\n  /**\n   * Updates fragment using window.location.hash,\n   * which will trigger both {@link FRAGMENT_USER_CHANGE} and {@link FRAGMENT_CHANGE}.\n   * Useful for programmatically simulating user navigation.\n   */\n  update(fragmentOrURL: string | URL): void {\n    win.location.hash = getFragment(fragmentOrURL);\n  }\n\n  onUserChange(callback: (ev: FragmentChangeEvent) => void): (() => void) | undefined {\n    return on(this, FRAGMENT_USER_CHANGE, callback);\n  }\n\n  #createEvent(type: FragmentEventType): FragmentChangeEvent {\n    return new FragmentChangeEvent(type, { fragment: this.#fragment, previous: this.#previous });\n  }\n}\n\nexport const FRAGMENT_CHANGE = \"fragmentchange\" as const;\nexport const FRAGMENT_USER_CHANGE = \"fragmentuserchange\" as const;\nexport type FragmentEventType = typeof FRAGMENT_CHANGE | typeof FRAGMENT_USER_CHANGE;\n\nexport interface FragmentChangeEventDetail {\n  fragment: string;\n  previous: string | undefined;\n}\n\nexport class FragmentChangeEvent extends CustomEvent<FragmentChangeEventDetail> {\n  constructor(\n    type: FragmentEventType,\n    detail: FragmentChangeEventDetail,\n    options: CustomEventInit<FragmentChangeEventDetail> = { bubbles: true, cancelable: undefined, composed: true },\n  ) {\n    super(type, { ...options, detail });\n  }\n\n  get fragment(): string {\n    return this.detail.fragment;\n  }\n\n  get previous(): string | undefined {\n    return this.detail.previous;\n  }\n\n  /** Attempt to deserialize RISON data. */\n  // biome-ignore lint/suspicious/noExplicitAny: RISON data can be anything.\n  get deserFrag(): any {\n    return FragmentTracker.deserialize(this.detail.fragment);\n  }\n\n  /** Attempt to deserialize RISON data. */\n  // biome-ignore lint/suspicious/noExplicitAny: RISON data can be anything.\n  get deserPrev(): any {\n    const { previous } = this.detail;\n    return previous ? FragmentTracker.deserialize(previous) : undefined;\n  }\n}\n", "import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = hookState._component.props !== p;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn prevScu\n\t\t\t\t\t? prevScu.call(this, p, s, c) || shouldUpdate\n\t\t\t\t\t: shouldUpdate;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tref(createHandle());\n\t\t\t\treturn () => ref(null);\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n", "import type { RefObject } from \"preact\";\nimport { type Dispatch, useEffect, useRef, useState } from \"preact/hooks\";\n\nexport abstract class Dispatchable<T> {\n  dispatcher?: Dispatch<this>;\n\n  constructor(protected data: T) {}\n\n  clone(): this {\n    const Ctor = this.constructor as new (data: T) => this;\n    const clone = new Ctor(this.data);\n    clone.dispatcher = this.dispatcher;\n    return clone;\n  }\n\n  dispatch(): this {\n    this.dispatcher?.(this.clone());\n    return this;\n  }\n}\n\n/**\n * Setup a {@link Dispatchable} instance with a {@link useState} dispatcher.\n */\n// biome-ignore lint/suspicious/noExplicitAny: accept any kind of Dispatchable.\nexport function useDispatchable<T extends Dispatchable<any>>(factory: () => T): T {\n  const [state, dispatcher] = useState(factory);\n  state.dispatcher = dispatcher;\n  return state;\n}\n\n/**\n * Saves the state of the component on the HTML wrapper element of a preact component.\n * Returns a ref that should be attached to the root element of the component.\n */\nexport function useRootState<Container extends HTMLElement, T>(state: T): RefObject<Container | undefined> {\n  const ref = useRef<Container | undefined>();\n  useEffect(() => {\n    const root = ref.current?.parentElement as Container & { state?: T };\n    if (root && state) root.state = state;\n  }, [state]);\n  return ref as RefObject<Container | undefined>;\n}\n", "/**\n * Some CSS styles we reuse across the app.\n */\n\nexport const HOVER = \"hover:bg-hiliteb/75 hover:text-hilitef cursor-pointer\";\nexport const HOVER_ICON = \"rounded p-1 hover:text-hiliteb hover:ring-1 hover:ring-primary\";\nexport const HOVER_ICON_BG = \"rounded-2xl hover:bg-background/20 hover:text-hiliteb\";\n\nexport const BORDER = \"border-primary/85 border-dotted\";\nexport const INPUT = \"bg-background text-foreground placeholder:text-foreground/50\";\nexport const PROSE_BASIC = \"prose dark:prose-invert sm:prose-sm lg:prose-lg xl:prose-xl\";\nexport const PROSE = `${PROSE_BASIC} max-w-[80ch] mx-auto`;\nexport const VSCROLL = \"overflow-hidden overflow-y-auto\";\n\nexport const gradRadial = (col1 = \"transparent\", col2 = \"var(--color-background)\") => `radial-gradient(${col1} 0, ${col2}  75%) top left / 100% 100%`;\n\nexport const gradLinear = (col1 = \"var(--color-stripes)\", col2 = \"var(--color-background)\", size = \"10px\") =>\n  `repeating-linear-gradient(45deg, ${col1} 0, ${col1} 1px, ${col2} 0, ${col2} 50%) top left / ${size} ${size}`;\n\nexport const background = ({ bgs = [gradRadial(), gradLinear()], backdrop = \"1.25px\" } = {}) =>\n  `background: ${bgs.join(\", \")};${backdrop ? ` backdrop-filter: blur(${backdrop});` : \"\"}`;\n\n/** Collect tailwind classes. Adding a semicolon at the end or start of a class string filters that string out. */\nexport function tw(...classes: (string | undefined | boolean | string[])[]): string {\n  return classes\n    .flat(5) // Arbirtrary depth to flatten \uD83E\uDD37\u200D\u2642 (in practice we don't really use more than 1 level).\n    .filter(s => typeof s === \"string\" && !/^;|;$/.test(s))\n    .join(\" \");\n}\n\n/** Allow classList.toggle with more than one class. */\nexport function toggleClasses(element: HTMLElement | null | undefined, classes: string | string[], check: boolean) {\n  if (!element) return;\n  const all = Array.isArray(classes) ? classes : classes.split(\" \");\n  for (const c of all) element.classList.toggle(c, check);\n}\n", "const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in props) {\n\t\tref = props.ref;\n\t\tdelete props.ref;\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (typeof normalizedProps[i] === 'undefined') {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + str + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities(value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n", "// From https://spectrum.adobe.com/page/icons/\n\nconst CSS = \"fill-current size-[1.5rem]\";\n\nexport const ABC = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Alphabetic</title>\n    <path d=\"M3.0805,8.3675,2.31,10.878c-.028.091-.0705.122-.154.122H.756c-.0845,0-.1125-.0455-.1-.15L3.5425,1.9285A2.51436,2.51436,0,0,0,3.669,1.107c0-.0615.028-.107.084-.107H5.7c.0705,0,.084.015.1.0915L9.0355,10.863c.0145.0915,0,.137-.084.137H7.381a.14051.14051,0,0,1-.1405-.0915L6.428,8.3675Zm2.9-1.6595c-.294-1.005-.9525-3.12-1.233-4.1855h-.014c-.224,1.02-.785,2.8-1.2045,4.1855Z\" />\n    <path d=\"M9.613,17c-.0565,0-.1125-.015-.1125-.122v-1.02a.346.346,0,0,1,.042-.1825l4.861-7.032H9.711c-.0705,0-.1125-.0145-.1-.106l.21-1.4155C9.835,7.031,9.877,7,9.9465,7H16.463c.069,0,.084.031.084.0915v1.096a.3265.3265,0,0,1-.0705.213L11.7,15.3415h5.015c.069,0,.1.0455.069.137l-.2235,1.4c-.0135.091-.042.122-.126.122Z\" />\n  </svg>\n);\n\nexport const ADD = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Add</title>\n    <path d=\"M14.5,8H10V3.5A.5.5,0,0,0,9.5,3h-1a.5.5,0,0,0-.5.5V8H3.5a.5.5,0,0,0-.5.5v1a.5.5,0,0,0,.5.5H8v4.5a.5.5,0,0,0,.5.5h1a.5.5,0,0,0,.5-.5V10h4.5a.5.5,0,0,0,.5-.5v-1A.5.5,0,0,0,14.5,8Z\" />\n  </svg>\n);\n\nexport const RANKING = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Ranking</title>\n    <path d=\"M14.259,7.6a2.3635,2.3635,0,0,0,1.6805-2.2255c0-1.521-1.0885-2.625-3.0895-2.625a5.365,5.365,0,0,0-2.561.6245.13949.13949,0,0,0-.064.144V4.542c0,.064.0165.0795.0965.05A4.33146,4.33146,0,0,1,12.626,3.95c1.4085,0,2,.688,2,1.584,0,1.0245-.8645,1.569-2.273,1.569h-.591c-.08,0-.096.05-.096.112V8.223c0,.064.032.096.112.096h.672c1.5845,0,2.641.5765,2.641,1.857,0,1.009-.704,1.8725-2.4325,1.8725a7.11785,7.11785,0,0,1-2.497-.654,3.79252,3.79252,0,0,0,.3305-1.54,3.01569,3.01569,0,0,0-3.224-3.192A6.30249,6.30249,0,0,0,4.5,7.392V1.625a.375.375,0,0,0-.375-.375H3.379a.3735.3735,0,0,0-.3.15L1.65,2.545a.747.747,0,0,0-.15.45v.124a.375.375,0,0,0,.375.375H3v7.125a.375.375,0,0,0,.375.375h.75a.375.375,0,0,0,.375-.375V8.7775a5.26947,5.26947,0,0,1,2.516-.754c1.2735,0,2.05.6225,2.05,1.8765,0,.9625-.4695,1.8975-1.9,3.4775A24.53582,24.53582,0,0,1,4.6,15.897a.25.25,0,0,0-.0845.2095v.709c0,.161.106.1845.169.1845H10.575c.1185,0,.156-.0425.2-.15l.235-.9755a.135.135,0,0,0-.0175-.1215.17851.17851,0,0,0-.15-.05H8.669c-1.209,0-1.457,0-1.932.031a15.25015,15.25015,0,0,0,1.859-2.0125c.3735-.4585.6955-.874.9695-1.275a8.3231,8.3231,0,0,0,3.1085.805c2.161,0,3.7775-1.104,3.7775-3.073A2.611,2.611,0,0,0,14.259,7.6Z\" />\n  </svg>\n);\n\nexport const FULLCIRCLE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Circle</title>\n    <circle cx=\"9\" cy=\"9\" r=\"8\" />\n  </svg>\n);\n\nexport const SUN = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Sun</title>\n    <path d=\"m9,5.05c2.18152,0,3.95,1.76848,3.95,3.95s-1.76848,3.95-3.95,3.95-3.95-1.76848-3.95-3.95,1.76848-3.95,3.95-3.95Zm-.9-4.8v2.5c0,.13807.11193.25.25.25h1.3c.13807,0,.25-.11193.25-.25V.25c0-.13807-.11193-.25-.25-.25h-1.3c-.13807,0-.25.11193-.25.25Zm0,15v2.5c0,.13807.11193.25.25.25h1.3c.13807,0,.25-.11193.25-.25v-2.5c0-.13807-.11193-.25-.25-.25h-1.3c-.13807,0-.25.11193-.25.25ZM0,8.35v1.3c0,.13807.11193.25.25.25h2.5c.13807,0,.25-.11193.25-.25v-1.3c0-.13807-.11193-.25-.25-.25H.25c-.13807,0-.25.11193-.25.25Zm15,0v1.3c0,.13807.11193.25.25.25h2.5c.13807,0,.25-.11193.25-.25v-1.3c0-.13807-.11193-.25-.25-.25h-2.5c-.13807,0-.25.11193-.25.25Zm-2.01021-4.23913l.91924.91924c.09763.09763.25592.09763.35355,0l1.76777-1.76777c.09763-.09763.09763-.25592,0-.35355l-.91924-.91924c-.09763-.09763-.25592-.09763-.35355,0l-1.76777,1.76777c-.09763.09763-.09763.25592,0,.35355ZM1.98978,15.11121l.91924.91924c.09763.09763.25592.09763.35355,0l1.76777-1.76777c.09763-.09763.09763-.25592,0-.35355l-.91924-.91924c-.09763-.09763-.25592-.09763-.35355,0l-1.76777,1.76777c-.09763.09763-.09763.25592,0,.35355Zm-.01031-11.8587l1.76777,1.76777c.09763.09763.25592.09763.35355,0l.91924-.91924c.09763-.09763.09763-.25592,0-.35355l-1.76777-1.76777c-.09763-.09763-.25592-.09763-.35355,0l-.91924.91924c-.09763.09763-.09763.25592,0,.35355Zm10.9902,10.99001l1.76777,1.76777c.09763.09763.25592.09763.35355,0l.91924-.91924c.09763-.09763.09763-.25592,0-.35355l-1.76777-1.76777c-.09763-.09763-.25592-.09763-.35355,0l-.91924.91924c-.09763.09763-.09763.25592,0,.35355Z\" />\n  </svg>\n);\n\nexport const MOON = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Moon</title>\n    <path d=\"M9,1a8,8,0,1,0,8,8A8,8,0,0,0,9,1Zm.5,14.982c-.165.0115-.332.018-.5.018A7,7,0,0,1,9,2c.168,0,.335.0065.5.018A11,11,0,0,0,9.5,15.982Z\" />\n  </svg>\n);\n\nexport const MENU = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Menu</title>\n    <rect height=\"2\" rx=\"0.5\" width=\"14\" x=\"2\" y=\"8\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"14\" x=\"2\" y=\"3\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"14\" x=\"2\" y=\"13\" />\n  </svg>\n);\n\nexport const CLOSE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Close</title>\n    <path d=\"M13.2425,3.343,9,7.586,4.7575,3.343a.5.5,0,0,0-.707,0L3.343,4.05a.5.5,0,0,0,0,.707L7.586,9,3.343,13.2425a.5.5,0,0,0,0,.707l.707.7075a.5.5,0,0,0,.707,0L9,10.414l4.2425,4.243a.5.5,0,0,0,.707,0l.7075-.707a.5.5,0,0,0,0-.707L10.414,9l4.243-4.2425a.5.5,0,0,0,0-.707L13.95,3.343a.5.5,0,0,0-.70711-.00039Z\" />\n  </svg>\n);\n\nexport const FILTER = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Filter</title>\n    <path d=\"M15.473,1H1.527a.5.5,0,0,0-.3935.8085L7,9.2945V16.95a.496.496,0,0,0,.84.412l1.9905-2.0765A.60949.60949,0,0,0,10,14.864V9.2945l5.8665-7.486A.5.5,0,0,0,15.473,1Z\" />\n  </svg>\n);\n\nexport const FILTER_EDIT = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Filter Edit</title>\n    <path d=\"M17.8925,10.8605,16.14,9.1075A.36952.36952,0,0,0,15.8765,9H15.865a.41651.41651,0,0,0-.282.1235l-5.411,5.411a.304.304,0,0,0-.0765.128l-1.0135,3c-.0345.1145.1395.2585.238.2585a.15858.15858,0,0,0,.0185,0c.084-.0195,2.5615-.882,3-1.014a.3.3,0,0,0,.126-.0755l5.412-5.4145A.41749.41749,0,0,0,18,11.15.37152.37152,0,0,0,17.8925,10.8605Zm-5.8,5.4815c-.657.1975-1.65.6145-2.215.784l.78-2.2155Z\" />\n    <path d=\"M15.473,1H1.527a.5.5,0,0,0-.3935.8085L7,9.2945V15a.496.496,0,0,0,.84.4125L9.83,13.336a.61.61,0,0,0,.17-.4225V9.2945l5.8665-7.486A.5.5,0,0,0,15.473,1Z\" />\n  </svg>\n);\n\nexport const FILTER_CLOSE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Filter Close</title>\n    <path d=\"M13.5,9.05a4.45,4.45,0,1,0,4.45,4.45A4.45,4.45,0,0,0,13.5,9.05Zm2.913,6.1335a.25.25,0,0,1,0,.3535l-.876.876a.25.25,0,0,1-.3535,0L13.5,14.7295,11.8165,16.413a.25.25,0,0,1-.3535,0l-.876-.876a.25.25,0,0,1,0-.3535L12.2705,13.5,10.587,11.8165a.25.25,0,0,1,0-.3535l.876-.876a.25.25,0,0,1,.3535,0L13.5,12.2705l1.6835-1.6835a.25.25,0,0,1,.3535,0l.876.876a.25.25,0,0,1,0,.3535L14.7295,13.5Z\" />\n    <path d=\"M7.4,13.5A6.573,6.573,0,0,1,9,9.2945c1.0415-1.347,5.8665-7.486,5.8665-7.486A.5.5,0,0,0,14.473,1H.527a.5.5,0,0,0-.3935.8085L6,9.2945V16.95a.496.496,0,0,0,.84.4125L8.009,16.143A6.06548,6.06548,0,0,1,7.4,13.5Z\" />\n  </svg>\n);\n\nexport const BOOLEAN = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Boolean</title>\n    <path d=\"M12,4.25a4.75,4.75,0,0,1,0,9.5H6a4.75,4.75,0,0,1,0-9.5ZM12,3H6A6,6,0,0,0,6,15h6A6,6,0,0,0,12,3Zm0,3A3,3,0,1,1,9,9,3,3,0,0,1,12,6Z\" />\n  </svg>\n);\n\nexport const DELETE = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Delete</title>\n    <path d=\"M15.75,3H12V2a1,1,0,0,0-1-1H6A1,1,0,0,0,5,2V3H1.25A.25.25,0,0,0,1,3.25v.5A.25.25,0,0,0,1.25,4h1L3.4565,16.55a.5.5,0,0,0,.5.45H13.046a.5.5,0,0,0,.5-.45L14.75,4h1A.25.25,0,0,0,16,3.75v-.5A.25.25,0,0,0,15.75,3ZM5.5325,14.5a.5.5,0,0,1-.53245-.46529L5,14.034l-.5355-8a.50112.50112,0,0,1,1-.067l.5355,8a.5.5,0,0,1-.46486.53283ZM9,14a.5.5,0,0,1-1,0V6A.5.5,0,0,1,9,6ZM11,3H6V2h5Zm1,11.034a.50112.50112,0,0,1-1-.067l.5355-8a.50112.50112,0,1,1,1,.067Z\" />\n  </svg>\n);\n\nexport const DESELECT = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Reset Selection</title>\n    <path d=\"m2,9h1v3h-1v-3Zm1,6v-1h-1v1.5555c0,.24549.19901.4445.4445.4445h1.5555v-1h-1Zm3,1h3v-1h-3v1Zm9-7h1v-3h-1v3Zm.5555-7h-1.5555v1h1v1h1v-1.5555c0-.24549-.19901-.4445-.4445-.4445Zm-6.5555,1h3v-1h-3v1ZM1.10295,1.97065l14.92632,14.92632c.15973.15973.41869.15972.57841,0l.28956-.28956c.15972-.15972.15973-.41869,0-.57841L1.97092,1.10268c-.15972-.15972-.41869-.15972-.57841,0l-.28956.28956c-.15972.15972-.15972.41869,0,.57841Zm14.89705,11.74835v-2.719h-1v1.719l1,1Zm-3.282,1.281h-1.718v1h2.718l-1-1ZM2,4.281v2.719h1v-1.719l-1-1Zm3.281-1.281h1.719v-1h-2.719l1,1Z\" />\n  </svg>\n);\n\nexport const LINKOUT = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Link Out</title>\n    <path d=\"M11.77,1.4265l1.6945,1.695-4.773,4.773a.25.25,0,0,0,0,.3535L9.75,9.3085a.25.25,0,0,0,.3535,0l4.773-4.773L16.571,6.23A.25.25,0,0,0,17,6.0535V1H11.9465a.25.25,0,0,0-.1765.4265Z\" />\n  </svg>\n);\n\nexport const SORT_DOWN = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Sort Down</title>\n    <rect id=\"Canvas\" fill=\"#ff13dc\" opacity=\"0\" width=\"18\" height=\"18\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"6\" x=\"1\" y=\"12\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"8\" x=\"1\" y=\"8\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"10\" x=\"1\" y=\"4\" />\n    <path d=\"M16,12H14.9965V4.5a.494.494,0,0,0-.488-.5L14.503,4h-.496a.5.5,0,0,0-.5.5L13.5035,12H12.5a.25.25,0,0,0-.25.25.245.245,0,0,0,.0735.175l1.7685,2.0165a.25.25,0,0,0,.316,0l1.7685-2.0165a.245.245,0,0,0,.0735-.175A.25.25,0,0,0,16,12Z\" />\n  </svg>\n);\n\nexport const SORT_UP = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Sort Up</title>\n    <rect height=\"2\" rx=\"0.5\" width=\"6\" x=\"1\" y=\"4\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"8\" x=\"1\" y=\"8\" />\n    <rect height=\"2\" rx=\"0.5\" width=\"10\" x=\"1\" y=\"12\" />\n    <path d=\"M15.99951,6H14.99634v7.5a.49378.49378,0,0,1-.49317.5h-.49633a.5.5,0,0,1-.5-.49951L13.50366,6H12.50049A.24984.24984,0,0,1,12.25,5.74823a.24439.24439,0,0,1,.07373-.175L14.0918,3.5564a.25007.25007,0,0,1,.3164,0l1.76807,2.01684a.24439.24439,0,0,1,.07373.175A.24984.24984,0,0,1,15.99951,6Z\" />\n  </svg>\n);\n\nexport const SEARCH = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Search</title>\n    <rect id=\"Canvas\" fill=\"#ff13dc\" opacity=\"0\" width=\"18\" height=\"18\" />\n    <path d=\"M16.5865,15.107,12.7,11.2215A6.413,6.413,0,1,0,11.2215,12.7l3.886,3.886a1.05,1.05,0,0,0,1.479-1.479ZM3,7.5A4.5,4.5,0,1,1,7.5,12,4.5,4.5,0,0,1,3,7.5Z\" />\n  </svg>\n);\n\nexport const LANGUISH = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" class={CSS}>\n    <title>Languish Language Rankings</title>\n    <path d=\"M16.5465,3.0305l-4.07,5.687L10.45,4.6605a.25.25,0,0,0-.4585.0265l-2.725,7.496L5.226,10.1425a.25.25,0,0,0-.337-.0155L1.09,13.2895a.25.25,0,0,0-.09.192v2.094a.25.25,0,0,0,.4145.188l3.524-3.0785,2.854,2.854a.25.25,0,0,0,.4115-.0915l2.274-6.255L12,12.2405a.25.25,0,0,0,.4285.0315L16.955,5.808A.25.25,0,0,0,17,5.665V3.176a.25.25,0,0,0-.4535-.1455Z\" />\n  </svg>\n);\n\n//--------------------------------------------------------------------------------\n// Icons from Font Awesome Free 6.7.1\n// https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.\n\nexport const HOME = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\" class={CSS}>\n    <title>Home</title>\n    <path d=\"M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z\" />\n  </svg>\n);\n\n// GITHUB\nexport const GITHUB = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 16 480 384\" class={CSS}>\n    <title>Github</title>\n    <path d=\"M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z\" />\n  </svg>\n);\n\n// REDDIT\nexport const REDDIT = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 32 512 448\" class={CSS}>\n    <title>Reddit</title>\n    <path d=\"M373 138.6c-25.2 0-46.3-17.5-51.9-41l0 0c-30.6 4.3-54.2 30.7-54.2 62.4l0 .2c47.4 1.8 90.6 15.1 124.9 36.3c12.6-9.7 28.4-15.5 45.5-15.5c41.3 0 74.7 33.4 74.7 74.7c0 29.8-17.4 55.5-42.7 67.5c-2.4 86.8-97 156.6-213.2 156.6S45.5 410.1 43 323.4C17.6 311.5 0 285.7 0 255.7c0-41.3 33.4-74.7 74.7-74.7c17.2 0 33 5.8 45.7 15.6c34-21.1 76.8-34.4 123.7-36.4l0-.3c0-44.3 33.7-80.9 76.8-85.5C325.8 50.2 347.2 32 373 32c29.4 0 53.3 23.9 53.3 53.3s-23.9 53.3-53.3 53.3zM157.5 255.3c-20.9 0-38.9 20.8-40.2 47.9s17.1 38.1 38 38.1s36.6-9.8 37.8-36.9s-14.7-49.1-35.7-49.1zM395 303.1c-1.2-27.1-19.2-47.9-40.2-47.9s-36.9 22-35.7 49.1c1.2 27.1 16.9 36.9 37.8 36.9s39.3-11 38-38.1zm-60.1 70.8c1.5-3.6-1-7.7-4.9-8.1c-23-2.3-47.9-3.6-73.8-3.6s-50.8 1.3-73.8 3.6c-3.9 .4-6.4 4.5-4.9 8.1c12.9 30.8 43.3 52.4 78.7 52.4s65.8-21.6 78.7-52.4z\" />\n  </svg>\n);\n\n// Wikipedia\nexport const WIKIPEDIA = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 413\" class={CSS}>\n    <title>Wikipedia</title>\n    <path d=\"M640 51.2l-.3 12.2c-28.1 .8-45 15.8-55.8 40.3-25 57.8-103.3 240-155.3 358.6H415l-81.9-193.1c-32.5 63.6-68.3 130-99.2 193.1-.3 .3-15 0-15-.3C172 352.3 122.8 243.4 75.8 133.4 64.4 106.7 26.4 63.4 .2 63.7c0-3.1-.3-10-.3-14.2h161.9v13.9c-19.2 1.1-52.8 13.3-43.3 34.2 21.9 49.7 103.6 240.3 125.6 288.6 15-29.7 57.8-109.2 75.3-142.8-13.9-28.3-58.6-133.9-72.8-160-9.7-17.8-36.1-19.4-55.8-19.7V49.8l142.5 .3v13.1c-19.4 .6-38.1 7.8-29.4 26.1 18.9 40 30.6 68.1 48.1 104.7 5.6-10.8 34.7-69.4 48.1-100.8 8.9-20.6-3.9-28.6-38.6-29.4 .3-3.6 0-10.3 .3-13.6 44.4-.3 111.1-.3 123.1-.6v13.6c-22.5 .8-45.8 12.8-58.1 31.7l-59.2 122.8c6.4 16.1 63.3 142.8 69.2 156.7L559.2 91.8c-8.6-23.1-36.4-28.1-47.2-28.3V49.6l127.8 1.1 .2 .5z\" />\n  </svg>\n);\n\n// Stack Overflow\nexport const STACKOV = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"3 32 379 448\" class={CSS}>\n    <title>Stack Overflow</title>\n    <path d=\"M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z\" />\n  </svg>\n);\n\nexport const EXTERN = (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" class={CSS}>\n    <title>External Link</title>\n    <path d=\"M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l82.7 0L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3l0 82.7c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160c0-17.7-14.3-32-32-32L320 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z\" />\n  </svg>\n);\n", "import type { PlangsPage } from \"@plangs/server/components/layout\";\n\nexport type StorageKey =\n  /** Light/Dark mode. */\n  | \"theme\"\n  /** Show/Hide the hamburguer menu. */\n  | \"hamburger-menu\"\n  /** Show/Hide Facets Browser. */\n  | \"facets-browser\"\n  /** Last facets value, saved between page switching. */\n  | \"facet-value\"\n  /** Name of the last open group on the facets browser. */\n  | \"facets-last-group\"\n  /** Last Vertex displayed on a {@link VertexInfo} component. */\n  | \"vertex-detail\"\n  /** Whether the VertexInfo component is open. */\n  | \"vertex-detail-open\";\n\n// Alias to avoid errors if server side rendering is used.\nconst stapi = (typeof localStorage === \"undefined\" ? undefined : localStorage) as Storage | undefined;\nconst doc = (typeof document === \"undefined\" ? undefined : document) as Document;\n\nexport const getStore = (page: PlangsPage) => new Store(page);\nexport const getCurrentPage = () => ((doc ? doc.body.dataset.page : undefined) ?? \"_any_page_\") as PlangsPage;\nexport const getCurrentPageStore = () => getStore(getCurrentPage());\n\n/**\n * Wrapper for localStorage.\n * * Ensures we use different keys per page.\n * * Serializes/deserializes data to/from JSON.\n */\nexport class Store {\n  constructor(readonly page: PlangsPage) {}\n\n  // biome-ignore lint/suspicious/noExplicitAny: JSON can serialize any data.\n  update(key: StorageKey, data: any): void {\n    const fk = this.fullKey(key);\n    stapi?.setItem(fk, JSON.stringify(data));\n  }\n\n  // biome-ignore lint/suspicious/noExplicitAny: JSON can deserialize any data.\n  load(key: StorageKey): any {\n    const fk = this.fullKey(key);\n    const jsonString = stapi?.getItem(fk);\n    if (!jsonString) return undefined;\n    try {\n      return JSON.parse(jsonString);\n    } catch (e) {\n      console.error(\"Failed to load data from localStorage\", { key: fk, jsonString, e });\n      stapi?.removeItem(fk);\n    }\n  }\n\n  private fullKey(key: StorageKey): string {\n    return `plangs-${this.page}-${key}`;\n  }\n}\n", "import type { ComponentChild } from \"preact\";\n\nimport { Dispatchable, useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { data, elem, elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { ABC, BOOLEAN, DESELECT, FILTER_EDIT, MENU, MOON, RANKING, SUN } from \"@plangs/frontend/auxiliar/icons\";\nimport { HOVER_ICON_BG, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { FacetsMainElement } from \"@plangs/frontend/facets/main\";\n\nimport { getCurrentPageStore, getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport type { IconButtonProps } from \"./icon-button\";\n\nexport type IconButtonState = ToggleLights | ToggleHamburguer | ToggleFacetsMenu | ToggleAllAny | ToggleClearFacets | ToggleGridOrder | undefined;\n\nexport function useIconButtonState({ action, disabled, initial }: IconButtonProps): IconButtonState {\n  if (action === \"lights\") return useDispatchable(() => ToggleLights.initial(disabled));\n  if (action === \"hamburger\") return useDispatchable(() => ToggleHamburguer.initial(disabled));\n  if (action === \"facets\") return useDispatchable(() => ToggleFacetsMenu.initial(disabled));\n  if (action === \"allAny\") return useDispatchable(() => ToggleAllAny.initial(initial, disabled));\n  if (action === \"clearFacets\") return useDispatchable(() => ToggleClearFacets.initial(disabled));\n  if (action === \"gridOrder\") return useDispatchable(() => ToggleGridOrder.initial(disabled));\n  console.error(`Unknown action: ${action}`);\n}\n\nabstract class IconButtonBaseState<T> extends Dispatchable<T & { disabled: boolean }> {\n  abstract doAction(): void;\n\n  /** Side effects handler, if any. */\n  abstract runEffects(): void;\n\n  abstract get icon(): ComponentChild;\n\n  get disabled(): boolean {\n    return this.data.disabled;\n  }\n\n  set disabled(value: boolean) {\n    this.data.disabled = value;\n  }\n\n  get value() {\n    const { disabled, ...data } = this.data;\n    return data;\n  }\n\n  get hidden(): boolean {\n    return false;\n  }\n\n  get hilight(): boolean {\n    return false;\n  }\n}\n\nconst STORE = getStore(\"_any_page_\");\n\n/** State for a dark/ligh mode button */\nexport class ToggleLights extends IconButtonBaseState<{ mode: \"dark\" | \"light\" }> {\n  static initial(disabled = false) {\n    const theme = STORE.load(\"theme\");\n    return new ToggleLights({ mode: theme === \"light\" ? \"light\" : \"dark\", disabled });\n  }\n\n  get isDark(): boolean {\n    return this.data.mode === \"dark\";\n  }\n\n  override get icon() {\n    return this.isDark ? SUN : MOON;\n  }\n\n  override doAction() {\n    this.data.mode = this.isDark ? \"light\" : \"dark\";\n  }\n\n  override runEffects() {\n    document.body.classList.toggle(\"dark\", this.isDark);\n    STORE.update(\"theme\", this.data.mode);\n  }\n}\n\n/** State for a \"hamburguer\" menu. */\nexport class ToggleHamburguer extends IconButtonBaseState<{ mode: \"show\" | \"hide\" }> {\n  static initial(disabled = false) {\n    const mode = STORE.load(\"hamburger-menu\");\n    return new ToggleHamburguer({ mode: mode === \"hide\" ? \"hide\" : \"show\", disabled });\n  }\n\n  override get hilight(): boolean {\n    return !this.hide;\n  }\n\n  get hide(): boolean {\n    return this.data.mode === \"hide\";\n  }\n\n  override get icon() {\n    return MENU;\n  }\n\n  override doAction() {\n    this.data.mode = this.hide ? \"show\" : \"hide\";\n  }\n\n  override runEffects() {\n    elem(\"mainNav\")?.classList.toggle(\"hidden\", this.hide);\n    STORE.update(\"hamburger-menu\", this.data.mode);\n  }\n}\n\n/** State for the facets menu. */\nexport class ToggleFacetsMenu extends IconButtonBaseState<{ mode: \"show\" | \"hide\" }> {\n  static initial(disabled = false) {\n    const mode = getCurrentPageStore().load(\"facets-browser\");\n    return new ToggleFacetsMenu({ mode: mode === \"show\" ? \"show\" : \"hide\", disabled });\n  }\n\n  override get hilight(): boolean {\n    return this.show;\n  }\n\n  get show(): boolean {\n    return this.data.mode === \"show\";\n  }\n\n  override get icon() {\n    return FILTER_EDIT;\n  }\n\n  override doAction() {\n    this.data.mode = this.show ? \"hide\" : \"show\";\n  }\n\n  override runEffects() {\n    const fm = elems(\"facetsMain\");\n    if (fm.length > 0) fm[0].classList.toggle(\"hidden\", !this.show);\n    getCurrentPageStore().update(\"facets-browser\", this.data.mode);\n  }\n}\n\n/** State for toggling between \"and\" and \"all\" modes. */\nexport class ToggleAllAny extends IconButtonBaseState<{ mode: \"all\" | \"any\" }> {\n  static initial(initial: string | undefined, disabled = false) {\n    return new ToggleAllAny({ mode: initial === \"all\" ? \"all\" : \"any\", disabled });\n  }\n\n  get mode(): \"all\" | \"any\" {\n    return this.data.mode;\n  }\n\n  override get icon() {\n    const disabled = this.data.disabled;\n\n    const shadeAll = disabled || this.mode === \"any\";\n    const shadeAny = disabled || this.mode === \"all\";\n\n    return (\n      <span class={tw(\"px-1\", \"flex flex-row gap-1\", \"items-center\", \"align-middle\")}>\n        <span class={tw(shadeAll && \"opacity-50\", \"whitespace-nowrap\")}>All</span>\n        <span class={tw(\"inline-block\", \"mt-[1px] px-1\", \"scale-85\", this.mode === \"all\" && \"rotate-180\", !disabled && HOVER_ICON_BG)}>\n          {BOOLEAN}\n        </span>\n        <span class={tw(shadeAny && \"opacity-50\", \"whitespace-nowrap\")}>Any</span>\n      </span>\n    );\n  }\n\n  override doAction() {\n    this.data.mode = this.mode === \"all\" ? \"any\" : \"all\";\n  }\n\n  override runEffects() {\n    // nada.\n  }\n}\n\n/** State for clearing any selection from the facets menu. */\nexport class ToggleClearFacets extends IconButtonBaseState<{ mode: \"clearFacets\" | \"\" }> {\n  static initial(disabled = false) {\n    return new ToggleClearFacets({ disabled, mode: \"\" });\n  }\n\n  override doAction() {\n    this.data.mode = \"\";\n  }\n\n  doToggleMode(mode: \"clearFacets\" | \"\") {\n    this.data.mode = mode;\n    this.dispatch();\n  }\n\n  override get icon() {\n    return DESELECT;\n  }\n\n  get hidden(): boolean {\n    return this.data.mode === \"\";\n  }\n\n  override runEffects() {\n    for (const el of elems<FacetsMainElement>(\"facetsMain\")) el.state?.doResetAll();\n  }\n}\n\n/** State for toggling order of thumbnails between ranking and alphabetical. */\nexport class ToggleGridOrder extends IconButtonBaseState<{ mode: \"alpha\" | \"ranking\" }> {\n  static initial(disabled = false) {\n    return new ToggleGridOrder({ disabled, mode: \"alpha\" });\n  }\n\n  get mode(): \"alpha\" | \"ranking\" {\n    return this.data.mode;\n  }\n\n  override get icon() {\n    return this.mode === \"alpha\" ? ABC : RANKING;\n  }\n\n  override doAction() {\n    this.data.mode = this.mode === \"alpha\" ? \"ranking\" : \"alpha\";\n  }\n\n  /** Reorder the grid on dispatch. */\n  override runEffects() {\n    const grid = elem(\"vertexGrid\");\n    if (!grid) return;\n    const thumbns = [...elems(\"vertexThumbn\")].sort(CMP[this.mode]);\n    for (const thumb of thumbns) {\n      grid.appendChild(thumb); // Re-appending without removing just reorders the element.\n    }\n  }\n}\n\n// Ensure languages without a ranking are placed last.\nconst RANKED_LAST = Number.MAX_SAFE_INTEGER;\n\nconst getRank = (el: HTMLElement) => {\n  const ranking = data(el, \"vertex-ranking\");\n  return ranking ? Number.parseInt(ranking) : RANKED_LAST;\n};\n\nconst getKey = (el: HTMLElement) => el.dataset.vertexKey ?? \"\";\n\n// Ordering criteria for the sort function.\nconst CMP = {\n  ranking: (elA: HTMLElement, elB: HTMLElement) => getRank(elA) - getRank(elB),\n  alpha: (elA: HTMLElement, elB: HTMLElement) => getKey(elA).localeCompare(getKey(elB)),\n} as const;\n", "import type { Ref } from \"preact\";\nimport { useEffect } from \"preact/hooks\";\n\nimport { useRootState } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { customEvent, send } from \"@plangs/frontend/auxiliar/events\";\nimport { HOVER_ICON, tw } from \"@plangs/frontend/auxiliar/styles\";\n\nimport { useIconButtonState } from \"./state\";\n\nexport type IconButtonProps = {\n  action: \"facets\" | \"clearFacets\" | \"hamburger\" | \"lights\" | \"allAny\" | \"gridOrder\";\n  disabled?: boolean;\n  initial?: string;\n};\n\nexport function IconButton({ action, disabled, initial }: IconButtonProps) {\n  const state = useIconButtonState({ action, disabled, initial });\n  const self = useRootState(state);\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: state is not a dependency since it is a dispatchable.\n  useEffect(() => {\n    if (!state) return;\n\n    const newval = disabled === undefined ? false : disabled;\n    if (newval !== state.disabled) {\n      state.disabled = newval;\n      state.dispatch();\n    }\n  }, [disabled]);\n\n  const toggle = () => {\n    if (!state || state.disabled) return;\n\n    state.doAction();\n    state.runEffects();\n    state.dispatch();\n\n    send(self.current, customEvent(\"icon-button\", state.value));\n  };\n\n  return (\n    <div\n      ref={self as Ref<HTMLDivElement>}\n      tabIndex={disabled ? undefined : 0}\n      {...onClickOnEnter(toggle)}\n      class={tw(\n        \"group\",\n        disabled ? \"cursor-auto opacity-50\" : \"cursor-pointer\",\n        \"border-1 border-dotted\",\n        state?.hilight ? \"border-primary\" : \"border-transparent\",\n        action !== \"allAny\" && HOVER_ICON,\n        state?.hidden && \"invisible\",\n      )}>\n      {state?.icon}\n    </div>\n  );\n}\n", "import { render } from \"preact\";\n\nimport { elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { type CLKey, cssClass } from \"@plangs/server/elements\";\n\nimport { IconButton, type IconButtonProps } from \"./icon-button\";\n\nconst CL: CLKey = \"iconButton\";\n\n/** Server side container for the Component. */\nexport function iconButton(action: IconButtonProps[\"action\"]) {\n  return (\n    <div id={`icon-button-${action}`} data-action={action} class={cssClass(\"iconButton\")}>\n      {/* Render the icon server-side to reduce flickering when enabling the icons. */}\n      <IconButton action={action} />\n    </div>\n  );\n}\n\n/** Find all component containers and render them. */\nexport function activateIconButtons() {\n  for (const elem of elems(\"iconButton\")) {\n    if (elem.dataset.action) {\n      const action = elem.dataset.action as IconButtonProps[\"action\"];\n      render(<IconButton action={action} />, elem);\n    } else {\n      console.error(\"Missing prop for IconButton component.\");\n    }\n  }\n}\n", "import { tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { ComponentChildren } from \"preact\";\n\nexport function Pill({ children, title, class: klass }: { title?: string; children: ComponentChildren; class?: string }) {\n  return (\n    <div\n      {...(title ? { title } : {})}\n      class={tw(\n        \"max-w-full\",\n        \"mr-4 mb-3 px-2\",\n        \"outline-1 outline-primary/50\",\n        \"rounded-tl-lg rounded-br-lg\",\n        \"bg-secondary/75 text-foreground/85\",\n        \"truncate\",\n        klass,\n      )}>\n      {children}\n    </div>\n  );\n}\n", "import { h } from \"preact\";\n\nimport { type DataKey, dataKey } from \"@plangs/server/elements\";\n\nexport const script = (src: string) => rawTag(\"script\", src);\nexport const style = (src: string) => rawTag(\"style\", src);\nexport const rawTag = (tag: \"script\" | \"style\", __html: string) => h(tag, { dangerouslySetInnerHTML: { __html } });\n\n/** Generate a record of data attributes to embed in an react component. Skeip falsey values. */\nexport function dataset(data: Record<DataKey, string | number | boolean | undefined>): Record<string, string> {\n  const entries = Object.entries(data)\n    .filter(([, value]) => {\n      if (typeof value === \"boolean\") return value;\n      if (typeof value === \"string\") return !!value;\n      if (typeof value === \"number\") return value;\n      return false;\n    })\n    .map(([key, value]) => [dataKey(key as DataKey), `${value}`]);\n  return Object.fromEntries(entries);\n}\n", "import type { ComponentChildren } from \"preact\";\n\nimport { background, gradLinear, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { iconButton } from \"@plangs/frontend/components/icon-button\";\nimport type { TPlangsVertexName } from \"@plangs/plangs/graph/generated\";\nimport { cssID } from \"@plangs/server/elements\";\nimport { script } from \"@plangs/server/utils/html\";\n\nimport { MainNav } from \"./main-nav\";\n\nexport type PageType = \"grid\" | \"other\";\nexport type PlangsPage =\n  | TPlangsVertexName\n  | \"_any_page_\"\n  | \"about\"\n  | \"apps\"\n  | \"blog\"\n  | \"communities\"\n  | \"edit\"\n  | \"libraries\"\n  | \"licenses\"\n  | \"paradigms\"\n  | \"plangs\"\n  | \"platforms\"\n  | \"subsystem\"\n  | \"subsystems\"\n  | \"tags\"\n  | \"tools\"\n  | \"typesystems\"\n  | \"NA\";\n\nexport const GRID_PAGES: Set<PlangsPage> = new Set([\"plangs\", \"tools\", \"apps\", \"libraries\", \"subsystems\", \"communities\", \"learning\"]);\n\ntype LayoutProps = {\n  page: PlangsPage;\n  pageType?: \"grid\" | \"other\";\n  title?: string;\n  desc?: string;\n  mainClasses?: string;\n  children: ComponentChildren;\n};\n\nexport function Layout({ page, pageType, title, desc, mainClasses, children }: LayoutProps) {\n  return (\n    <html lang=\"en\">\n      <head>\n        <meta charset=\"utf-8\" />\n        <title>{title ? `Plangs! - ${title}` : \"Plangs!\"}</title>\n        <meta name=\"description\" content={desc ?? title} />\n\n        <script src=\"/bundle/app.js\" />\n\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <link rel=\"stylesheet\" href=\"/bundle/app.css\" />\n        <link type=\"image/png\" rel=\"apple-touch-icon\" sizes=\"192x192\" href=\"/icons/icon-192x192.png\" />\n        <link type=\"image/png\" rel=\"icon\" sizes=\"192x192\" href=\"/icons/icon-192x192.png\" />\n        <link type=\"image/png\" rel=\"icon\" sizes=\"72x72\" href=\"/icons/icon-72x72.png\" />\n        <link rel=\"manifest\" href=\"/manifest.json\" />\n\n        <meta property=\"og:title\" content=\"Plangs!\" />\n        <meta property=\"og:description\" content={desc} />\n        <meta property=\"og:image\" content=\"https://plangs.page/images/plangs-light.svg\" />\n        <meta property=\"og:url\" content=\"https://plangs.page\" />\n        <meta property=\"og:type\" content=\"website\" />\n      </head>\n      <body\n        data-page={page}\n        style={background()}\n        class={tw(\"dark\", \"h-dvh w-full\", \"flex flex-col flex-nowrap\", \"bg-background text-foreground\", \"overflow-hidden\")}>\n        {script(\"window.restoreLightMode()\")}\n\n        <noscript class={tw(\"border-primary border-b-1\", \"bg-background\", \"p-2 text-center\")}>\n          <strong>Note!</strong>\n          This site requires JavaScript for the best experience. In particular, the search feature will not work without JavaScript.\n        </noscript>\n\n        <header\n          style={background({ bgs: [gradLinear()], backdrop: \"\" })}\n          class={tw(\"short:hidden\", \"pb-2 sm:pt-4 sm:pb-8\", \"text-center text-primary\")}>\n          <a class=\"inline-block pt-4\" href=\"/\" title=\"Plangs!\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"16 13 218 56\"\n              class=\"inline-block h-[clamp(2.25rem,min(5dvh,5dvw),6rem)] w-auto fill-primary\">\n              <title>Plangs!</title>\n              <path d=\"M214.7 45.51h11.41l-2.94 11.8h-11.41l2.94-11.8Zm7.9-31.7h11.41l-7.06 28.3h-11.41l7.06-28.3ZM41.16 41.91c-.11.46-.39 1.3-.54 1.63-.38.98-1.86 2.22-4.21 2.22h-3.2l2.39-9.59H24.19L15.88 69.5h11.41l2.98-11.94h9c5.09 0 9.89-3.59 11.24-9l3.09-12.39H42.58l-1.43 5.74ZM54.33 22.15c-1.46-1.89-3.75-1.96-4.17-1.97-7.51 0-15.01.01-22.52.02l-.16.7-.21.91-.16.7-.24 1.05-.14.61-.23.99-.13.57-.36 1.55-.06.25-.24 1.05-.08.34-.88 3.78h29.41c.25-.85.49-1.77.71-2.74.19-.84.34-1.65.47-2.42h.02l.1-.7c.06-.42.31-2.84-1.11-4.68ZM53.44 57.57h11.42l5.33-21.4H58.78l-5.34 21.4zM93.37 45.76h-3.33c-2.87 0-3.93-1.5-3.21-4.37l1.3-5.22H76.26L73.19 48.5c-1.35 5.41 1.72 9.07 6.81 9.07h22.3l5.33-21.39H95.76l-2.39 9.59ZM108.69 31l-.25 1.03h.01l-.16.69h-.01v.04H76.72s.06-.69.29-1.76h31.68ZM109.53 27.41l-.04.15-.24 1.05h.01l-.14.6H77.48c.17-.57.38-1.18.63-1.8h31.43ZM110.37 23.82l-.11.46h-.01l-.21.9-.11.44H78.94c.03-.06.06-.13.1-.19.04-.08.08-.14.11-.19.29-.49.61-.97.97-1.42h30.24ZM111.19 20.23h.01l-.16.7h-.01l-.21.9h.01l-.05.19H81.91c1.18-.93 2.64-1.6 4.43-1.79.11-.02.22-.03.33-.04h24.53v.04ZM107.63 57.57h11.41l5.35-21.46h-11.41l-5.35 21.46zM125.5 57.57h11.41l5.35-21.46h-11.41l-5.35 21.46zM142.98 22.02h-26.86l.04-.19.21-.9h-.01l.16-.7h.01v-.04h22.8s.15 0 .4.04c.69.1 2.15.47 3.24 1.79ZM114.04 31h29.59c-.15.55-.33 1.14-.54 1.76h-29.47v-.04l.17-.69.25-1.03ZM144.28 27.41c-.04.56-.12 1.16-.24 1.8h-29.6l.14-.6h.01l.25-1.05h-.01l.03-.15h29.42ZM144.28 25.62h-29l.1-.44h.01l.21-.9h-.01l.11-.46h28.24c.17.52.29 1.12.34 1.8ZM166 40.16c-.39 1.57-2.13 3.07-3.76 3.07h-1.3c-1.83 0-2.79-1.37-2.27-3.46l.93-3.72h-11.41l-2.31 9.26c-1.35 5.41 1.72 9.07 6.8 9.07h5.48c2.54 0 3.77-.72 4.4-2.48.03-.13.19-.26.33-.26.26 0 .13.52.1.65l-.58 2.35c-.41 1.63-2.18 3-4.33 3h-15.26l-2.94 11.8h21.13c5.48 0 10.09-3.85 11.36-8.94l6.1-24.46h-11.41l-1.02 4.11ZM148.84 31h30.64l-.45 1.76h-30.42s.04-.69.23-1.76ZM180.4 27.41c-.16.6-.31 1.2-.46 1.8h-30.7c.15-.57.35-1.18.59-1.8h30.57ZM181.31 23.82c-.15.6-.3 1.2-.46 1.8h-30.21c.34-.62.73-1.23 1.18-1.8h29.49ZM182.24 20.19v.04c-.15.6-.3 1.19-.46 1.79h-28.13c1.25-.95 2.81-1.62 4.75-1.79.13-.02.26-.03.39-.04h23.46ZM202.65 36.17h-15.72l6.62 9.52h-12.19l-2.94 11.81h17.93c6.2 0 10.56-3.65 11.77-8.48.58-2.35.33-4.24-.9-6.07l-4.57-6.78ZM185.43 31h25.35l-.42 1.76h-24.85l-.07-.68h.01c-.02-.33-.03-.69-.02-1.08ZM186 27.41h25.65c-.15.6-.29 1.2-.43 1.8h-25.64c.06-.39.17-1.03.42-1.8ZM187.88 23.82h24.63c-.14.6-.28 1.2-.43 1.8h-25.36c.29-.59.67-1.2 1.16-1.8ZM213.39 20.19s-.01.03-.01.04c-.14.6-.29 1.19-.43 1.79h-23.16a9.99 9.99 0 0 1 4.76-1.79c.21-.02.39-.03.51-.04h18.33ZM59.65 31h11.59l-.44 1.76H59.21l.44-1.76zM72.15 27.41l-.45 1.8H60.11l.45-1.8h11.59zM73.06 23.82l-.46 1.8H61.01l.46-1.8h11.59zM73.96 20.23l-.45 1.79H61.92l.45-1.79h11.59zM74.82 16.82l-.4 1.61H62.83l.4-1.61h11.59zM75.72 13.27l-.44 1.75H63.69l.44-1.75h11.59z\" />\n              <path d=\"M86.67 20.19h24.53v.04H86.34c.11-.02.22-.03.33-.04ZM139.34 20.19s.15 0 .4.04h-23.2v-.04h22.8ZM158.78 20.19h23.46v.04H158.4c.13-.02.26-.03.39-.04ZM213.39 20.19s-.01.03-.01.04h-18.83c.21-.02.39-.03.51-.04h18.33Z\" />\n            </svg>\n          </a>\n        </header>\n\n        <div class=\"h-[1px] bg-primary/25\" />\n\n        <div class={tw(\"flex-1\", \"flex portrait:flex-col landscape:flex-row\", \"overflow-hidden\")}>\n          <div\n            class={tw(\n              \"flex gap-4 p-2 portrait:flex-row landscape:flex-col\",\n              \"overflow-hidden\",\n              \"bg-secondary/25 text-primary\",\n              \"border-secondary border-b-1\",\n              \"shadow-secondary/25 shadow-sm\",\n            )}>\n            {iconButton(\"hamburger\")}\n            {pageType === \"grid\" && iconButton(\"facets\")}\n            {page === \"plangs\" && iconButton(\"gridOrder\")}\n            {pageType === \"grid\" && iconButton(\"clearFacets\")}\n            <div class=\"flex-1\" />\n            {iconButton(\"lights\")}\n          </div>\n          <div class=\"flex flex-1 flex-row overflow-hidden\">\n            <MainNav page={page} class={tw(\"bg-linear-to-r from-secondary/50 to-transparent\")} />\n            <main id={cssID(\"mainContent\")} class={tw(\"flex-1\", \"overflow-hidden\", mainClasses)}>\n              {children}\n            </main>\n          </div>\n        </div>\n      </body>\n    </html>\n  );\n}\n", "import type { JSX } from \"preact/jsx-runtime\";\n\nimport { HOVER, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { VertexDetail } from \"@plangs/plangs/graph/vertex_base\";\nimport { cssClass } from \"@plangs/server/elements\";\nimport { dataset } from \"@plangs/server/utils/html\";\n\nconst PLACEHOLDER = \"/images/placeholder.png\";\n\nexport function VertexThumbn({ detail, onlyImg, class: klass }: { class?: string; onlyImg?: boolean; detail: VertexDetail }): JSX.Element {\n  return (\n    <div\n      vocab=\"https://schema.org/\"\n      typeof={detail.schemaType}\n      {...dataset({ \"vertex-key\": detail.key, \"vertex-name\": detail.vertexName, \"vertex-ranking\": detail.ranking })}\n      class={tw(cssClass(\"vertexThumbn\"), \"group\", !onlyImg && \"cursor-pointer\", klass)}>\n      <meta property=\"identifier\" content={detail.key} />\n      {!onlyImg && (\n        <div class=\"truncate pb-0.5 text-center\">\n          <a property=\"name\" class=\"prefetch text-foreground underline group-hover:text-primary\" href={detail.href}>\n            {detail.name}\n          </a>\n        </div>\n      )}\n      <div\n        class={tw(\n          \"relative\",\n          \"aspect-square overflow-hidden\",\n          \"flex items-center justify-center\",\n          \"bg-thumbnails\",\n          \"ring-1 ring-primary/50\",\n          \"shadow-background shadow-lg group-hover:shadow-md group-hover:shadow-primary\",\n        )}>\n        <img\n          loading=\"lazy\"\n          alt={detail.name}\n          data-src={detail.thumbUrl ?? \"\"}\n          src={onlyImg ? (detail.thumbUrl ?? PLACEHOLDER) : PLACEHOLDER}\n          class={tw(cssClass(\"vertexThumbnImg\"), \"max-h-full max-w-full p-1\")}\n          width={128}\n          height={128}\n        />\n        {\"ranking\" in detail && detail.ranking && (\n          <div\n            title={`Languish Ranking: ${detail.ranking}`}\n            class={tw(\"absolute\", \"-bottom-1 right-0\", \"p-1 text-primary text-xs\", \"rounded opacity-50\", HOVER, \"hover:opacity-100\")}>\n            {detail.ranking}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n", "import type { ComponentChildren, JSX } from \"preact\";\nimport { useEffect, useRef } from \"preact/hooks\";\n\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { EXTERN, GITHUB, LANGUISH, REDDIT, STACKOV, WIKIPEDIA } from \"@plangs/frontend/auxiliar/icons\";\nimport { getCurrentPageStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { HOVER_ICON, PROSE_BASIC, VSCROLL, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { Pill } from \"@plangs/frontend/components/misc/pill\";\nimport type { VertexDetail } from \"@plangs/plangs/graph/vertex_base\";\nimport { GRID_PAGES, type PlangsPage } from \"@plangs/server/components/layout\";\nimport { VertexThumbn } from \"@plangs/server/components/vertex-thumbn\";\nimport { cssClass } from \"@plangs/server/elements\";\n\nexport type VertexInfoProps = {\n  page: PlangsPage;\n  open?: boolean;\n  detail?: VertexDetail;\n};\n\n/** Display Vertex. */\nexport function VertexInfo({ detail, open, page }: VertexInfoProps) {\n  const self = useRef<HTMLDivElement>(null);\n  const forGrid = GRID_PAGES.has(page);\n\n  // Remember the open state.\n  const store = getCurrentPageStore();\n  const updateOpen = () => {\n    const elem = self.current?.querySelector<HTMLDetailsElement>(\"details\");\n    // The event happens before the default action of the element, so we need to invert the value.\n    if (elem) store.update(\"vertex-detail-open\", !elem.open);\n  };\n\n  useEffect(() => {\n    if (!self.current) return;\n\n    // Make sure the title is visible.\n    self.current.querySelector(\"h2\")?.scrollIntoView({ behavior: \"smooth\", block: \"end\" });\n\n    const links = self.current.querySelectorAll(`.${cssClass(\"externalLink\")}`);\n    if (links.length === 0) return;\n    for (const [i, el] of links.entries()) {\n      el.classList.add(\"scale-0\");\n      setTimeout(() => el.classList.remove(\"scale-0\"), 50 + (i + 1) * 50);\n    }\n  });\n\n  const iconLinks = detail && (\n    <div class=\"flex flex-row flex-nowrap items-center gap-2 align-middle\">\n      {ret(detail.urlHome, url => url && <IconLink href={url} icon={EXTERN} />)}\n      {ret(detail.urlLanguish, url => url && <IconLink href={url} icon={LANGUISH} title={`#${detail.ranking} on Languish`} />)}\n      {ret(detail.urlGithub, url => url && <IconLink href={url} icon={GITHUB} />)}\n      {ret(detail.urlWikipedia, url => url && <IconLink href={url} icon={WIKIPEDIA} />)}\n      {ret(detail.urlStackov, url => url && <IconLink href={url} icon={STACKOV} />)}\n      {ret(detail.urlReddit, url => url && <IconLink href={url} icon={REDDIT} />)}\n    </div>\n  );\n\n  const header = (\n    <header class=\"flex flex-wrap\">\n      <h2 class={tw(\"m-0!\", \"truncate\")}>{detail ? <a class=\"prefetch pr-2\" href={detail.href} children={detail.name} /> : \"Information\"}</h2>\n      <div class=\"flex-1\" />\n      {iconLinks}\n    </header>\n  );\n\n  const info = detail ? (\n    <div class={tw(\"hidden py-4 sm:block landscape-short:hidden\")}>\n      {!forGrid && detail.thumbUrl && <VertexThumbn detail={detail} onlyImg={true} class=\"float-right my-2 mr-1 ml-4 size-24\" />}\n      <div class=\"hyphens-auto text-justify\">{forGrid ? detail.shortDesc : detail.description}</div>\n    </div>\n  ) : (\n    <p>\n      <strong class=\"text-primary\">Click</strong> a thumbnail for more info.\n    </p>\n  );\n\n  const relations = detail && detail.relations.length > 0 && (\n    <details class={tw(forGrid && \"hidden sm:block landscape-short:hidden\", \"overflow-hidden\")} open={open}>\n      <summary class=\"cursor-pointer pb-4 text-primary\" {...onClickOnEnter(updateOpen)}>\n        Details\n      </summary>\n      <div class={tw(\"flex flex-col\")}>\n        {detail.general.length > 0 && (\n          <RelationCell title=\"General\">\n            {detail.general.map(item => (\n              <Pill title={item.title} key={item}>\n                {item.kind === \"text\" ? (\n                  <span>{item.value}</span>\n                ) : (\n                  <a href={item.href} class={tw(\"inline-flex\")}>\n                    <span>{item.value}</span>\n                    <span class=\"scale-50\">{EXTERN}</span>\n                  </a>\n                )}\n              </Pill>\n            ))}\n          </RelationCell>\n        )}\n        {detail.relations.map(([title, vertices]) => (\n          <RelationCell key={title} title={title}>\n            {vertices.map(vertex => (\n              <Pill key={vertex.name}>\n                <a href={vertex.href}>{vertex.name}</a>\n              </Pill>\n            ))}\n          </RelationCell>\n        ))}\n      </div>\n    </details>\n  );\n\n  return (\n    <div\n      ref={self}\n      class={tw(\n        VSCROLL,\n        tw(PROSE_BASIC, \"max-w-[unset]\"),\n        forGrid && \"px-2 pt-1 sm:p-4\",\n        forGrid && \"border-primary/50 landscape-narrow:border-t-1\",\n      )}>\n      {header}\n      {info}\n      {relations}\n    </div>\n  );\n}\n\nfunction IconLink({ href, icon, title }: { href: string; icon: JSX.Element; title?: string }) {\n  return (\n    <a {...(title ? { title } : {})} href={href} class={tw(cssClass(\"externalLink\"), \"inline-block aspect-square\", \"transition-transform\", \"p-1\")}>\n      <div class={tw(\"inline-block\", HOVER_ICON)}>{icon}</div>\n    </a>\n  );\n}\n\nfunction RelationCell({ title, children }: { title: string; children: ComponentChildren }) {\n  return (\n    <div class={tw(\"hover:bg-hiliteb/10\")} key={title}>\n      <header class=\"mb-2 p-2 text-foreground text-sm uppercase\">{title}</header>\n      <div class=\"ml-2 flex flex-row flex-wrap\">{children}</div>\n    </div>\n  );\n}\n", "import { render } from \"preact\";\n\nimport { elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { getCurrentPage, getCurrentPageStore } from \"@plangs/frontend/auxiliar/storage\";\nimport type { TPlangsVertex } from \"@plangs/plangs/graph/generated\";\nimport type { VertexDetail } from \"@plangs/plangs/graph/vertex_base\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\nimport { VertexInfo } from \"./vertex-info\";\n\n/** Rendering with undefined vertex attempts to render the last thing displayed (per Page). */\nexport function renderVertexInfo(vertex?: TPlangsVertex) {\n  const page = getCurrentPage();\n  const store = getCurrentPageStore();\n\n  for (const elem of elems<HTMLDivElement>(\"vertexInfo\")) {\n    let detail: VertexDetail | undefined = vertex?.detail;\n    let open = elem.dataset.open === \"true\";\n\n    if (detail) {\n      store.update(\"vertex-detail\", detail);\n      store.update(\"vertex-detail-open\", open);\n    } else {\n      open = store.load(\"vertex-detail-open\") ?? open ?? true;\n      detail = store.load(\"vertex-detail\");\n    }\n\n    render(<VertexInfo detail={detail} page={page} open={open} />, elem);\n  }\n}\n", "import type { Value } from \"./value\";\n\nexport type Predicate<T> = (v: T) => boolean;\n\nexport type EncodedFilter<T> = { mode: \"all\" | \"any\"; values: T[] };\n\n/**\n * A filter that can match any or all of the elements against a predicate.\n */\nexport class Filter<T> implements Value<Filter<T>> {\n  constructor(\n    public mode: \"all\" | \"any\" = \"any\",\n    public readonly values: Set<T> = new Set(),\n  ) {}\n\n  get isEmpty(): boolean {\n    return this.values.size === 0;\n  }\n\n  add(...values: T[]): this {\n    for (const val of values) this.values.add(val);\n    return this;\n  }\n\n  delete(value: T): boolean {\n    return this.values.delete(value);\n  }\n\n  has(value: T): boolean {\n    return this.values.has(value);\n  }\n\n  clear() {\n    this.values.clear();\n  }\n\n  get size(): number {\n    return this.values.size;\n  }\n\n  matches(predicate: Predicate<T>): boolean {\n    return this.mode === \"all\" ? this.all(predicate) : this.any(predicate);\n  }\n\n  all(predicate: Predicate<T>): boolean {\n    for (const v of this.values) if (!predicate(v)) return false;\n    return true;\n  }\n\n  any(predicate: Predicate<T>): boolean {\n    for (const v of this.values) if (predicate(v)) return true;\n    return false;\n  }\n\n  get value() {\n    return this;\n  }\n\n  get isPresent(): boolean {\n    return !this.isEmpty;\n  }\n\n  equalTo(other?: Filter<T>): boolean {\n    if (!other) return false;\n\n    if (!(other instanceof Filter)) return false;\n    if (this.mode !== other.mode) return false;\n    if (this.values.size !== other.values.size) return false;\n    for (const v of this.values) if (!other.values.has(v)) return false;\n    return true;\n  }\n\n  clone(): this {\n    return new Filter(this.mode, new Set(this.values)) as this;\n  }\n\n  toJSON(): EncodedFilter<T> {\n    return { mode: this.mode, values: [...this.values] };\n  }\n\n  serializable() {\n    return this.isEmpty ? undefined : this.toJSON();\n  }\n\n  // biome-ignore lint/suspicious/noExplicitAny: we can't know for sure the type of the values here.\n  static isSerialized(val: unknown): val is { mode: \"all\" | \"any\"; values: any[] } {\n    return (\n      !!val && typeof val === \"object\" && \"mode\" in val && (val.mode === \"all\" || val.mode === \"any\") && \"values\" in val && Array.isArray(val.values)\n    );\n  }\n\n  toString() {\n    return `Filter(${this.mode}: ${JSON.stringify([...this.values]).slice(1, -1)})`;\n  }\n}\n\n// biome-ignore lint/suspicious/noExplicitAny: there's no _precise_ way to know the type of the values here.\nexport function isEncodedFilter(value: unknown): value is EncodedFilter<any> {\n  return typeof value === \"object\" && value !== null && value !== undefined && \"mode\" in value && \"values\" in value && Array.isArray(value.values);\n}\n", "import { Filter } from \"./filters\";\n\n/**\n * The objective of this interface is to simplify checking if a value is present (aka \"non blank\").\n * This avoids the need to sprinkle runtime type checks all over the place.\n *\n * This is useful in places were we don't want to serialize empty values,\n * if we want to check there are any present values on a form, etc.\n *\n * Also we want to avoid serializing values that are not \"present\".\n * This is because for things like URL encoding, we don't want to have a lot of keys pointing to blank values.\n */\nexport interface Value<T> {\n  // biome-ignore lint/suspicious/noExplicitAny: without a generic value type the wrappers are useless.\n  readonly value: any;\n\n  /**\n   * \"Presence\" implies that the value is not blank or empty:\n   * * null, undefined or empty string are considered \"blank\", and hence not present.\n   * * 0 is present, even though JavaScript considers it falsy.\n   * * Containers of any kind (Set, Map, Array) are present if they have at least one element.\n   */\n  get isPresent(): boolean;\n\n  /** Compare values. */\n  equalTo(other?: AnyValue): boolean;\n\n  /**\n   * This is meant to return something that can be easilty serialized.\n   * For instance if the value is a Set, it should return an array (since JSON doesn't support Sets).\n   * * The result should contain enough information to reconstruct the value.\n   * * Blank / non present values should be omitted.\n   */\n  // biome-ignore lint/suspicious/noExplicitAny: we want to be flexible here.\n  serializable(): any;\n}\n\n// biome-ignore lint/suspicious/noExplicitAny: Allow for flexibility in the type of the value.\nexport type AnyValue = Value<any>;\n\nexport abstract class ValBase<T> implements Value<T> {\n  constructor(readonly value: T) {}\n\n  get isNil(): boolean {\n    return this.value === undefined || this.value === null;\n  }\n\n  get isPresent(): boolean {\n    return !this.isNil;\n  }\n\n  abstract equalTo(other?: AnyValue): boolean;\n\n  // biome-ignore lint/suspicious/noExplicitAny: We can't be more specific here.\n  serializable(): any {\n    return this.isPresent ? this.value : undefined;\n  }\n}\n\nexport class ValNil extends ValBase<null | undefined> {\n  constructor(value: null | undefined = undefined) {\n    super(value);\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValNil;\n  }\n}\n\nexport class ValNumber extends ValBase<number> {\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValNumber && this.value === other.value;\n  }\n}\n\nexport class ValBool extends ValBase<boolean> {\n  override get isPresent(): boolean {\n    return !this.isNil && this.value === true;\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValBool && this.value === other.value;\n  }\n}\n\nexport class ValString extends ValBase<string> {\n  override get isPresent(): boolean {\n    return !this.isNil && this.value.length > 0 && !/^\\s*$/.test(this.value);\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValString && this.value === other.value;\n  }\n}\n\nexport class ValSet<T> extends ValBase<Set<T>> {\n  override get isPresent(): boolean {\n    return !this.isNil && this.value.size > 0;\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    if (!(other instanceof ValSet)) return false;\n    if (this.value === other.value) return true;\n    if (this.value.size !== other.value.size) return false;\n    for (const v of this.value) if (!other.value.has(v)) return false;\n    return true;\n  }\n\n  override serializable() {\n    return this.isPresent ? [\"Set\", [...this.value]] : undefined;\n  }\n\n  // biome-ignore lint/suspicious/noExplicitAny: we cannot know for sure the type of the values.\n  static isSerialized(val: unknown): val is [string, any[]] {\n    return Array.isArray(val) && val[0] === \"Set\" && Array.isArray(val[1]);\n  }\n}\n\nconst EMPTY_REGEX = /(?:)/;\n\nexport class ValRegExp extends ValBase<RegExp> {\n  override get isPresent(): boolean {\n    return !this.isNil && this.value.source !== EMPTY_REGEX.source;\n  }\n\n  equalTo(other?: AnyValue): boolean {\n    return other instanceof ValRegExp && this.value.source === other.value.source;\n  }\n\n  override serializable() {\n    const { value } = this;\n    return this.isPresent ? (value.flags ? [\"RegExp\", value.source, value.flags] : [\"RegExp\", value.source]) : undefined;\n  }\n\n  static isSerialized(val: unknown): val is [string, string, string?] {\n    return Array.isArray(val) && val[0] === \"RegExp\" && typeof val[1] === \"string\" && (val[2] === undefined || typeof val[2] === \"string\");\n  }\n}\n\n/** Matches the serialized \"shape\" and returns a deserialized value, or undefined if it can't recognize the shape. */\nexport function deserializeValue(val: unknown): AnyValue | undefined {\n  if (val === undefined || val === null) return new ValNil(val);\n\n  switch (typeof val) {\n    case \"number\":\n      return new ValNumber(val);\n    case \"boolean\":\n      return new ValBool(val);\n    case \"string\":\n      return new ValString(val);\n  }\n\n  if (ValRegExp.isSerialized(val)) return new ValRegExp(new RegExp(val[1], val[2]));\n  if (ValSet.isSerialized(val)) return new ValSet(new Set(val[1]));\n  if (Filter.isSerialized(val)) return new Filter(val.mode, new Set(val.values));\n\n  console.log(\"Attempt to deserialize an unrecognized value shape:\", val);\n}\n", "// biome-ignore lint/suspicious/noExplicitAny: We want to debounce any function.\ntype AnyFunc = (...args: any[]) => any;\n\nexport function debounce<T extends AnyFunc>(callback: T, millies: number): (...args: Parameters<T>) => void {\n  let timeout: Timer | undefined;\n  return (...args: Parameters<AnyFunc>) => {\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(() => callback(...args), millies);\n  };\n}\n", "/** Two dimensional Map. */\nexport class Map2<K1, K2, V> {\n  #map = new Map<K1, Map<K2, V>>();\n\n  has(k1: K1, k2: K2): boolean {\n    return this.#map.get(k1)?.has(k2) ?? false;\n  }\n\n  set(k1: K1, k2: K2, v: V): this {\n    let m2 = this.#map.get(k1);\n    if (!m2) {\n      m2 = new Map();\n      this.#map.set(k1, m2);\n    }\n    m2.set(k2, v);\n    return this;\n  }\n\n  getOrSet(k1: K1, k2: K2, whenMissing: () => V): V {\n    let v = this.get(k1, k2);\n    if (v === undefined) this.set(k1, k2, (v = whenMissing()));\n    return v;\n  }\n\n  delete(k1: K1, k2: K2): boolean {\n    return this.#map.get(k1)?.delete(k2) ?? false;\n  }\n\n  // Delete all keys [k1, *] from the map.\n  delete1(k1: K1): boolean {\n    const map = this.#map.get(k1);\n    if (map) {\n      this.#map.delete(k1);\n      return map.size > 0;\n    }\n    return false;\n  }\n\n  clear() {\n    this.#map.clear();\n  }\n\n  get(k1: K1, k2: K2): V | undefined {\n    return this.#map.get(k1)?.get(k2);\n  }\n\n  getMap(k1: K1): Map<K2, V> | undefined {\n    return this.#map.get(k1);\n  }\n\n  /** Get a consolidated map of all keys in the second dimension. */\n  getMap2(): Map<K2, V> {\n    const res = new Map<K2, V>();\n    for (const [_k1, map2] of this.#map) {\n      for (const [k2, v] of map2) res.set(k2, v);\n    }\n    return res;\n  }\n\n  get size(): number {\n    let size = 0;\n    for (const map of this.#map.values()) size += map.size;\n    return size;\n  }\n\n  get isEmpty(): boolean {\n    for (const map of this.#map.values()) if (map.size > 0) return false;\n    return true;\n  }\n\n  /** Returns the size of the second dimension for a given key in the first dimension. */\n  size2(k1: K1): number {\n    return this.#map.get(k1)?.size ?? 0;\n  }\n\n  /** Returns the keys in the first dimension. */\n  keys(): K1[] {\n    return [...this.#map.keys()].filter(k1 => (this.#map.get(k1)?.size ?? 0) > 0);\n  }\n\n  /** Return all the keys from a first dimension. */\n  keys2(k1: K1): K2[] {\n    const res: K2[] = [];\n    const m = this.#map.get(k1);\n    if (m) for (const k2 of m.keys()) res.push(k2);\n    return res;\n  }\n\n  entries(): [K1, Map<K2, V>][] {\n    return [...this.#map.entries()].filter(([_k1, map2]) => map2.size > 0);\n  }\n\n  flatEntries(): [K1, K2, V][] {\n    const results: [K1, K2, V][] = [];\n    for (const [k1, map2] of this.#map) {\n      for (const [k2, v] of map2) results.push([k1, k2, v]);\n    }\n    return results;\n  }\n\n  /** Return a new Map with filtered entries. */\n  filter(predicate: (k1: K1, k2: K2, v: V) => boolean): Map2<K1, K2, V> {\n    const m = new Map2<K1, K2, V>();\n    for (const [k1, map2] of this.#map) {\n      for (const [k2, v] of map2) if (predicate(k1, k2, v)) m.set(k1, k2, v);\n    }\n    return m;\n  }\n\n  values(): V[] {\n    return [...this.#map.values()].flatMap(map => [...map.values()]);\n  }\n\n  values2(k1: K1): V[] {\n    const m = this.#map.get(k1);\n    return m ? [...m.values()] : [];\n  }\n\n  toString(): string {\n    const entries = [...this.flatEntries()].map(([k1, k2, v]) => `(${k1}, ${k2}) => ${v}`);\n    return `Map2(size: ${this.size})${entries.length > 0 ? ` { ${entries.join(\", \")} }` : \"\"}`;\n  }\n}\n\n// biome-ignore lint/suspicious/noExplicitAny: Any object key is valid.\ntype AnyKey = keyof any;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { StrDate } from \"@plangs/auxiliar/str_date\";\nimport type { AnyValue, ValNumber, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VApp } from \"@plangs/plangs/graph\";\nimport type { VLicenseKey, VPlangKey, VPlatformKey, VTagKey } from \"@plangs/plangs/graph/generated\";\n\ntype Pred<T extends Value<AnyValue>> = (app: VApp, value: T) => boolean;\n\n/** Predicates to filter Apps. */\nexport const APP_FACET_PREDICATES = {\n  createdRecently: ((app, date) => app.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((app, flt) => ret(app.created.strYear, appYear => flt.matches(year => appYear === year))) as Pred<Filter<string>>,\n  ghStars: ((app, num) => app.github.stars > num.value) as Pred<ValNumber>,\n  licenses: ((app, flt) => flt.matches(key => app.relLicenses.has(key))) as Pred<Filter<VLicenseKey>>,\n  name: ((app, str) => app.lcName.includes(str.value)) as Pred<ValString>,\n  platforms: ((app, flt) => flt.matches(key => app.relPlatforms.has(key))) as Pred<Filter<VPlatformKey>>,\n  releasedRecently: ((app, date) => ret(app.releases.last, lastRel => lastRel?.isRecent(date.value as StrDate))) as Pred<ValString>,\n  tags: ((app, flt) => flt.matches(key => app.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  writtenWith: ((app, flt) => flt.matches(key => app.relWrittenWith.has(key))) as Pred<Filter<VPlangKey>>,\n} as const;\n\nexport type AppFacetKey = keyof typeof APP_FACET_PREDICATES;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { StrDate } from \"@plangs/auxiliar/str_date\";\nimport type { AnyValue, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VCommunity } from \"@plangs/plangs/graph\";\nimport type { VAppKey, VLibraryKey, VPlangKey, VTagKey, VToolKey } from \"@plangs/plangs/graph/generated\";\n\ntype Pred<T extends Value<AnyValue>> = (community: VCommunity, value: T) => boolean;\n\n/** Predicates to filter Communities. */\nexport const COMMUNITY_FACET_PREDICATES = {\n  apps: ((comm, flt) => flt.matches(key => comm.relApps.has(key))) as Pred<Filter<VAppKey>>,\n  createdRecently: ((comm, date) => comm.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((comm, flt) => ret(comm.created.strYear, communityYear => flt.matches(year => communityYear === year))) as Pred<Filter<string>>,\n  libraries: ((comm, flt) => flt.matches(key => comm.relLibraries.has(key))) as Pred<Filter<VLibraryKey>>,\n  name: ((comm, str) => comm.lcName.includes(str.value)) as Pred<ValString>,\n  plangs: ((com, flt) => flt.matches(key => com.relPlangs.has(key))) as Pred<Filter<VPlangKey>>,\n  tags: ((comm, flt) => flt.matches(key => comm.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  tools: ((comm, flt) => flt.matches(key => comm.relTools.has(key))) as Pred<Filter<VToolKey>>,\n} as const;\n\nexport type CommunityFacetKey = keyof typeof COMMUNITY_FACET_PREDICATES;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { StrDate } from \"@plangs/auxiliar/str_date\";\nimport type { AnyValue, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VLearning } from \"@plangs/plangs/graph\";\nimport type { VAppKey, VLibraryKey, VPlangKey, VTagKey, VToolKey } from \"@plangs/plangs/graph/generated\";\n\ntype Pred<T extends Value<AnyValue>> = (learning: VLearning, value: T) => boolean;\n\n/** Predicates to filter Learning Resources. */\nexport const LEARNING_FACET_PREDICATES = {\n  apps: ((learn, flt) => flt.matches(key => learn.relApps.has(key))) as Pred<Filter<VAppKey>>,\n  createdRecently: ((learn, date) => learn.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((learn, flt) => ret(learn.created.strYear, learningYear => flt.matches(year => learningYear === year))) as Pred<Filter<string>>,\n  libraries: ((learn, flt) => flt.matches(key => learn.relLibraries.has(key))) as Pred<Filter<VLibraryKey>>,\n  name: ((learn, str) => learn.lcName.includes(str.value)) as Pred<ValString>,\n  plangs: ((learn, flt) => flt.matches(key => learn.relPlangs.has(key))) as Pred<Filter<VPlangKey>>,\n  tags: ((learn, flt) => flt.matches(key => learn.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  tools: ((learn, flt) => flt.matches(key => learn.relTools.has(key))) as Pred<Filter<VToolKey>>,\n} as const;\n\nexport type LearningFacetKey = keyof typeof LEARNING_FACET_PREDICATES;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { StrDate } from \"@plangs/auxiliar/str_date\";\nimport type { AnyValue, ValNumber, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VLibrary } from \"@plangs/plangs/graph\";\nimport type { VLicenseKey, VPlangKey, VPlatformKey, VTagKey } from \"@plangs/plangs/graph/generated\";\n\ntype Pred<T extends Value<AnyValue>> = (library: VLibrary, value: T) => boolean;\n\n/** Predicates to filter Libraries. */\nexport const LIBRARY_FACET_PREDICATES = {\n  createdRecently: ((lib, date) => lib.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((lib, flt) => ret(lib.created.strYear, libraryYear => flt.matches(year => libraryYear === year))) as Pred<Filter<string>>,\n  ghStars: ((lib, num) => lib.github.stars > num.value) as Pred<ValNumber>,\n  licenses: ((lib, flt) => flt.matches(key => lib.relLicenses.has(key))) as Pred<Filter<VLicenseKey>>,\n  name: ((lib, str) => lib.lcName.includes(str.value)) as Pred<ValString>,\n  platforms: ((lib, flt) => flt.matches(key => lib.relPlatforms.has(key))) as Pred<Filter<VPlatformKey>>,\n  releasedRecently: ((lib, date) => ret(lib.releases.last, lastRel => lastRel?.isRecent(date.value as StrDate))) as Pred<ValString>,\n  tags: ((lib, flt) => flt.matches(key => lib.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  writtenFor: ((lib, flt) => flt.matches(key => lib.relPlangs.has(key))) as Pred<Filter<VPlangKey>>,\n  writtenWith: ((lib, flt) => flt.matches(key => lib.relWrittenWith.has(key))) as Pred<Filter<VPlangKey>>,\n} as const;\n\nexport type LibraryFacetKey = keyof typeof LIBRARY_FACET_PREDICATES;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { StrDate } from \"@plangs/auxiliar/str_date\";\nimport type { AnyValue, ValBool, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VPlang } from \"@plangs/plangs/graph\";\nimport type { VLicenseKey, VParadigmKey, VPlangKey, VPlatformKey, VTagKey, VTypeSystemKey } from \"@plangs/plangs/graph/generated\";\n\ntype Pred<T extends Value<AnyValue>> = (pl: VPlang, value: T) => boolean;\n\n/** Predicates to filter Plangs. */\nexport const PLANG_FACET_PREDICATES = {\n  compilesTo: ((pl, flt) => flt.matches(key => pl.relCompilesTo.has(key))) as Pred<Filter<VPlangKey>>,\n  created: ((pl, date) => pl.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((pl, flt) => ret(pl.created.strYear, plYear => flt.matches(year => plYear === year))) as Pred<Filter<string>>,\n  dialectOf: ((pl, flt) => flt.matches(key => pl.key === key || pl.relDialectOf.has(key))) as Pred<Filter<VPlangKey>>,\n  extensions: ((pl, flt) => flt.matches(key => pl.extensions.includes(key))) as Pred<Filter<string>>,\n  hasLogo: ((pl, val) => val.value === pl.images.some(img => img.kind === \"logo\")) as Pred<ValBool>,\n  hasWikipedia: ((pl, val) => val.value === !!pl.data.extWikipediaPath) as Pred<ValBool>,\n  implements: ((pl, flt) => flt.matches(key => key === pl.key || pl.relImplements.has(key))) as Pred<Filter<VPlangKey>>,\n  influenced: ((pl, flt) => flt.matches(key => pl.relInfluenced.has(key))) as Pred<Filter<VPlangKey>>,\n  influencedBy: ((pl, flt) => flt.matches(key => pl.relInfluencedBy.has(key))) as Pred<Filter<VPlangKey>>,\n  isPopular: ((pl, val) => val.value === pl.isPopular) as Pred<ValBool>,\n  isTranspiler: ((pl, val) => val.value === pl.isTranspiler) as Pred<ValBool>,\n  licenses: ((pl, flt) => flt.matches(key => pl.relLicenses.has(key))) as Pred<Filter<VLicenseKey>>,\n  name: ((pl, str) => pl.lcName.includes(str.value)) as Pred<ValString>,\n  paradigms: ((pl, flt) => flt.matches(key => pl.relParadigms.has(key))) as Pred<Filter<VParadigmKey>>,\n  platforms: ((pl, flt) => flt.matches(key => pl.relPlatforms.has(key))) as Pred<Filter<VPlatformKey>>,\n  released: ((pl, date) => ret(pl.releases.last, lastRel => lastRel?.isRecent(date.value as StrDate))) as Pred<ValString>,\n  tags: ((pl, flt) => flt.matches(key => pl.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  typeSystems: ((pl, flt) => flt.matches(key => pl.relTypeSystems.has(key))) as Pred<Filter<VTypeSystemKey>>,\n  writtenWith: ((pl, flt) => flt.matches(key => pl.relWrittenWith.has(key))) as Pred<Filter<VPlangKey>>,\n\n  // These relationships are probably less useful for filtering.\n  // dialects: // \"Dialects\", rel(\"plang\", \"relDialects\")). Ex. Pick \"VisualBasic\" and see \"Basic\".\n  // implementedBy: // \"Implemented By\", rel(\"plang\", \"relImplementedBy\")). Ex. Pick \"CPython\" and see \"Python\".\n  // targetOf: // \"Target of\", rel(\"plang\", \"relTargetOf\")). Ex. Pick \"Haxe\" and see what languages it targets.\n  // usedToWrite: //  \"Used to Write\", rel(\"plang\", \"relUsedToWrite\")). Ex Pick \"C++\" and see \"C\".\n} as const;\n\nexport type PlangFacetKey = keyof typeof PLANG_FACET_PREDICATES;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { StrDate } from \"@plangs/auxiliar/str_date\";\nimport type { AnyValue, ValNumber, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VSubsystem } from \"@plangs/plangs/graph\";\nimport type { VLicenseKey, VPlangKey, VPlatformKey, VTagKey } from \"@plangs/plangs/graph/generated\";\n\ntype Pred<T extends Value<AnyValue>> = (sys: VSubsystem, value: T) => boolean;\n\n/** Predicates to filter Apps. */\nexport const SUBSYSTEM_FACET_PREDICATES = {\n  createdRecently: ((sys, date) => sys.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((sys, flt) => ret(sys.created.strYear, appYear => flt.matches(year => appYear === year))) as Pred<Filter<string>>,\n  ghStars: ((sys, num) => sys.github.stars > num.value) as Pred<ValNumber>,\n  licenses: ((sys, flt) => flt.matches(key => sys.relLicenses.has(key))) as Pred<Filter<VLicenseKey>>,\n  name: ((sys, str) => sys.lcName.includes(str.value)) as Pred<ValString>,\n  platforms: ((sys, flt) => flt.matches(key => sys.relPlatforms.has(key))) as Pred<Filter<VPlatformKey>>,\n  releasedRecently: ((sys, date) => ret(sys.releases.last, lastRel => lastRel?.isRecent(date.value as StrDate))) as Pred<ValString>,\n  tags: ((sys, flt) => flt.matches(key => sys.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  writtenWith: ((sys, flt) => flt.matches(key => sys.relWrittenWith.has(key))) as Pred<Filter<VPlangKey>>,\n} as const;\n\nexport type SubsystemFacetKey = keyof typeof SUBSYSTEM_FACET_PREDICATES;\n", "import type { Filter } from \"@plangs/auxiliar/filters\";\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport type { StrDate } from \"@plangs/auxiliar/str_date\";\nimport type { AnyValue, ValNumber, ValString, Value } from \"@plangs/auxiliar/value\";\nimport type { VTool } from \"@plangs/plangs/graph\";\nimport type { VLicenseKey, VPlangKey, VPlatformKey, VTagKey } from \"@plangs/plangs/graph/generated\";\n\ntype Pred<T extends Value<AnyValue>> = (tool: VTool, value: T) => boolean;\n\n/** Predicates to filter Tools.*/\nexport const TOOL_FACET_PREDICATES = {\n  createdRecently: ((tool, date) => tool.created.isRecent(date.value as StrDate)) as Pred<ValString>,\n  creationYear: ((tool, flt) => ret(tool.created.strYear, toolYear => flt.matches(year => toolYear === year))) as Pred<Filter<string>>,\n  ghStars: ((tool, num) => tool.github.stars > num.value) as Pred<ValNumber>,\n  licenses: ((tool, flt) => flt.matches(key => tool.relLicenses.has(key))) as Pred<Filter<VLicenseKey>>,\n  name: ((tool, str) => tool.lcName.includes(str.value)) as Pred<ValString>,\n  platforms: ((tool, flt) => flt.matches(key => tool.relPlatforms.has(key))) as Pred<Filter<VPlatformKey>>,\n  releasedRecently: ((tool, date) => ret(tool.releases.last, lastRel => lastRel?.isRecent(date.value as StrDate))) as Pred<ValString>,\n  tags: ((tool, flt) => flt.matches(key => tool.relTags.has(key))) as Pred<Filter<VTagKey>>,\n  writtenFor: ((tool, flt) => flt.matches(key => tool.relPlangs.has(key))) as Pred<Filter<VPlangKey>>,\n  writtenWith: ((tool, flt) => flt.matches(key => tool.relWrittenWith.has(key))) as Pred<Filter<VPlangKey>>,\n} as const;\n\nexport type ToolFacetKey = keyof typeof TOOL_FACET_PREDICATES;\n", "import type { Map2 } from \"@plangs/auxiliar/map2\";\nimport type { AnyValue } from \"@plangs/auxiliar/value\";\nimport type { Vertices } from \"@plangs/graphgen/library\";\nimport type { TPlangsVertex, TPlangsVertexName } from \"@plangs/plangs/graph/generated\";\n\nimport { APP_FACET_PREDICATES } from \"./apps\";\nimport { COMMUNITY_FACET_PREDICATES } from \"./communities\";\nimport { LEARNING_FACET_PREDICATES } from \"./learning\";\nimport { LIBRARY_FACET_PREDICATES } from \"./libraries\";\nimport { PLANG_FACET_PREDICATES } from \"./plangs\";\nimport { SUBSYSTEM_FACET_PREDICATES } from \"./subsystems\";\nimport { TOOL_FACET_PREDICATES } from \"./tools\";\n\n/** A Map of predicates from an arbitrary name to a predicate function. */\nexport type Predicates<PredKey extends string> = Record<PredKey, (vertex: TPlangsVertex, value: AnyValue) => boolean>;\n\n/** Match a single Vertex against several predicates. */\nexport function matchVertex<PredKey extends string>(\n  vertex: TPlangsVertex,\n  predicates: Predicates<PredKey>,\n  facetValues: Map<PredKey, AnyValue>,\n  mode: \"all\" | \"any\" = \"any\",\n): boolean {\n  let someFilter = false;\n\n  for (const [key, value] of facetValues) {\n    if (!value.isPresent) continue; // This facet is not set, so we skip it.\n    someFilter = true;\n\n    const pred = predicates[key];\n    if (!pred) {\n      console.error(`No predicate found for key: ${key}`);\n      continue;\n    }\n\n    const predResult = pred(vertex, value);\n    if (mode === \"all\" && !predResult) return false;\n    if (mode === \"any\" && predResult) return true;\n  }\n\n  if (!someFilter) return true; // No filters set, so we can't filter the vertex out.\n\n  // If we get here in mode \"all\", all predicates matched.\n  // If we get here in mode \"any\", no predicates matched.\n  return mode === \"all\";\n}\n\n/**\n * Match all vertices of a container against several predicates.\n * We can match a vertex if it complies with all predicates or any of them.\n */\nexport function matchVertices<T extends TPlangsVertex, PredKey extends string>(\n  vertices: Vertices<T>,\n  facetValues: Map<PredKey, AnyValue>,\n  mode: \"all\" | \"any\" = \"all\",\n): Set<T[\"key\"]> {\n  const predicates = vertexPredicates(vertices.name as TPlangsVertexName) as Predicates<string> | undefined;\n\n  // If we don't have predicates, we can't filter anything out.\n  if (!predicates) {\n    console.warn(`No predicates found for vertex name: ${vertices.name}`);\n    return new Set(vertices.keys);\n  }\n\n  return new Set([...vertices.values].filter(v => matchVertex(v, predicates, facetValues, mode)).map(v => v.key));\n}\n\n/**\n * Match all vertices of a container against several predicates.\n * This function is used to match against filters from different groups.\n * We can unite or intersect the results from the filters of different groups.\n *\n * NOTE: if the facetValues is empty, it will return all vertices, but in a roundabout way.\n * Is more efficient to don't even call this function in that case.\n */\nexport function matchVerticesFromGroups<T extends TPlangsVertex, PredKey extends string>(\n  vertices: Vertices<T>,\n  facetValues: Map2<string, PredKey, AnyValue>,\n  mode: \"all\" | \"any\" = \"any\",\n): Set<T[\"key\"]> {\n  // In \"all\" mode, we start with all vertices and remove (intersect) results.\n  // In \"any\" mode we start with an empty set and add (union) results.\n  let results = mode === \"all\" ? new Set(vertices.keys) : new Set<T[\"key\"]>();\n\n  for (const [_, fkValueMap] of facetValues.entries()) {\n    const groupResult = matchVertices(vertices, fkValueMap, \"all\"); // Per group match all set filters.\n\n    // To match all, we can exit early as soon as one group has no results.\n    if (mode === \"all\") {\n      if (groupResult.size === 0) return new Set(); // Intersection will be empty.\n      results = results.intersection(groupResult);\n      if (results.size === 0) return results; // No vertex matched\n    } else {\n      // For \"any\", we need to test all groups and union the results.\n      results = results.union(groupResult);\n    }\n  }\n\n  return results;\n}\n\n/** Return the available facet predicates for the given Vertex name. */\nexport function vertexPredicates(name: TPlangsVertexName) {\n  switch (name) {\n    case \"app\":\n      return APP_FACET_PREDICATES;\n    case \"community\":\n      return COMMUNITY_FACET_PREDICATES;\n    case \"learning\":\n      return LEARNING_FACET_PREDICATES;\n    case \"library\":\n      return LIBRARY_FACET_PREDICATES;\n    case \"plang\":\n      return PLANG_FACET_PREDICATES;\n    case \"tool\":\n      return TOOL_FACET_PREDICATES;\n    case \"subsystem\":\n      return SUBSYSTEM_FACET_PREDICATES;\n  }\n}\n", "import type { FunctionComponent } from \"preact\";\n\nimport { debounce } from \"@plangs/auxiliar/debounce\";\nimport { Map2 } from \"@plangs/auxiliar/map2\";\nimport { type AnyValue, deserializeValue } from \"@plangs/auxiliar/value\";\nimport { Dispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { $, elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport type { ToggleClearFacets } from \"@plangs/frontend/components/icon-button/state\";\nimport type { Vertices } from \"@plangs/graphgen/library\";\nimport { matchVerticesFromGroups } from \"@plangs/plangs/facets\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { TPlangsVertexName } from \"@plangs/plangs/graph/generated\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n/** State for the facets browser, extended by each specific Facet Browser for each Vertex. */\nexport abstract class FacetsMainState<GroupKey extends string, FacetKey extends string> extends Dispatchable<{\n  pg: PlangsGraph;\n  currentGroupKey: GroupKey;\n  values: Map2<GroupKey, FacetKey, AnyValue>;\n  mode: \"all\" | \"any\";\n}> {\n  /** Attempt to reconstruct the state from a serialized value (ex: a value coming from the URL fragment). */\n  static deserialize<GK extends string, FK extends string>(\n    groupsByFacetKey: Map<FK, GK>,\n    genericData: any,\n  ): [{ mode: \"all\" | \"any\" }, Map2<GK, FK, AnyValue>] {\n    const map2 = new Map2<GK, FK, AnyValue>();\n    const mode: { mode: \"all\" | \"any\" } = { mode: \"any\" };\n    if (!genericData) return [mode, map2];\n    for (const [facetKey, rawValue] of Object.entries(genericData)) {\n      if (facetKey === \"mode\" && (rawValue === \"all\" || rawValue === \"any\")) {\n        mode.mode = rawValue;\n        continue;\n      }\n      const groupKey = groupsByFacetKey.get(facetKey as FK);\n      if (!groupKey) {\n        console.error(\"missing group for facet\", facetKey);\n        continue;\n      }\n      const value = deserializeValue(rawValue);\n      if (value?.isPresent) {\n        map2.set(groupKey, facetKey as FK, value);\n      } else {\n        console.error(\"failed to deserialize value\", facetKey, rawValue);\n      }\n    }\n    return [mode, map2];\n  }\n\n  doSetCurrentGroup(groupKey: GroupKey): void {\n    this.data.currentGroupKey = groupKey;\n    getStore(this.page).update(\"facets-last-group\", groupKey);\n    this.dispatch();\n  }\n\n  /** Removes any and all values for the given group.  */\n  doResetGroup(groupKey: GroupKey): void {\n    this.values.delete1(groupKey);\n    this.dispatch();\n  }\n\n  /** Removes any and all values for the given group.  */\n  // biome-ignore lint/suspicious/noExplicitAny: coming from deserialize we'll have to deal with it.\n  doResetAll(values?: any): void {\n    if (values) {\n      const [{ mode }, map2] = FacetsMainState.deserialize<GroupKey, FacetKey>(this.gkByFk, values);\n      this.data.values = map2;\n      this.data.mode = mode;\n    } else {\n      this.values.clear();\n    }\n    this.doSetCurrentGroup(this.nav.default);\n  }\n\n  /** This dispatches since we want to change the indicator of active state. */\n  doSetValue(groupKey: GroupKey, facetKey: FacetKey, value: AnyValue): \"changed\" | \"unchanged\" {\n    const { values } = this.data;\n    let result: \"changed\" | \"unchanged\";\n    if (value.isPresent) {\n      if (!values.has(groupKey, facetKey) || !value.equalTo(values.get(groupKey, facetKey))) {\n        values.set(groupKey, facetKey, value);\n        result = \"changed\";\n      } else {\n        result = \"unchanged\";\n      }\n    } else {\n      result = values.delete(groupKey, facetKey) ? \"changed\" : \"unchanged\";\n    }\n    this.dispatch();\n    return result;\n  }\n\n  doSetMode(mode: \"all\" | \"any\"): void {\n    this.data.mode = mode;\n    this.dispatch();\n  }\n\n  /** Queries */\n\n  get pg(): PlangsGraph {\n    return this.data.pg;\n  }\n\n  get values() {\n    return this.data.values;\n  }\n\n  get mode() {\n    return this.data.mode;\n  }\n\n  get serialized(): Record<string, any> {\n    const data: Record<string, any> = { mode: this.data.mode };\n    for (const [_, facetKey, value] of this.values.flatEntries()) {\n      if (value.isPresent) data[facetKey] = value.serializable();\n    }\n    return data;\n  }\n\n  get currentGroupKey(): GroupKey {\n    return this.data.currentGroupKey;\n  }\n\n  groupHasValues(groupKey: GroupKey): boolean {\n    for (const v of this.values.getMap(groupKey)?.values() ?? []) {\n      if (v.isPresent) return true;\n    }\n    return false;\n  }\n\n  get anyValues(): boolean {\n    return this.values.values().some(v => v.isPresent);\n  }\n\n  groupTitle(key: GroupKey) {\n    return this.groupsConfig.get(key)?.title ?? key;\n  }\n\n  /** Helpers */\n\n  /** A static thumbnail grid will be render server side, we just need to show or hide each element.  */\n  _updateThumbs() {\n    const selection = this.values.filter((g, f, v) => v.isPresent);\n\n    // Don't bother filtering if there are no values.\n    const vertexKeys = selection.isEmpty\n      ? undefined\n      : // biome-ignore lint/suspicious/noExplicitAny: the loop up next can handle any kind of key returned.\n        matchVerticesFromGroups(this.pg[this.vertexName] as Vertices<any>, selection, this.data.mode);\n\n    for (const div of elems(\"vertexThumbn\")) {\n      const vkey = div.dataset.vertexKey;\n      if (!vkey) continue;\n      const visible = vertexKeys === undefined || vertexKeys.has(vkey);\n      div.classList.toggle(\"hidden\", !visible);\n    }\n  }\n\n  updateThumbns = debounce(this._updateThumbs.bind(this), 30);\n\n  /**\n   * Run any side effects without dispatching.\n   * Useful for instance on start, for instance: where we don't want to dispatch\n   * (hence render twice) but we do want to setup a clean state.\n   */\n  runEffects(persist: \"persist\" | \"\" = \"\"): this {\n    if (persist === \"persist\") {\n      const data = this.serialized;\n      this.pushState(data);\n      getStore(this.page).update(\"facet-value\", data);\n    }\n    this.updateThumbns();\n    this.updateClearFacets();\n    return this;\n  }\n\n  /** Update the clear facets button on the toolbar. */\n  private updateClearFacets(): this {\n    const clearAll = $<HTMLElement & { state?: ToggleClearFacets }>(\"#icon-button-clearFacets\");\n    if (!clearAll?.state) return this;\n    clearAll.state.doToggleMode(this.anyValues ? \"clearFacets\" : \"\");\n    return this;\n  }\n\n  /** Push state to the history, but debounced. */\n  private pushState = debounce(\n    ((data: typeof this.serialized) => {\n      window.fragment.pushState(FragmentTracker.serialize(data));\n    }).bind(this),\n    50,\n  );\n\n  override dispatch(): this {\n    try {\n      super.dispatch();\n      this.runEffects(\"persist\");\n    } catch (err) {\n      console.error(err);\n    }\n    return this;\n  }\n\n  /** Abstract Methods. */\n\n  /** Page displaying the filters. */\n  abstract readonly page: PlangsPage;\n\n  /** Navigation configuration. */\n  abstract readonly nav: { groupKeys: GroupKey[][]; default: GroupKey };\n\n  /** Which group a facet key belongs to. */\n  abstract readonly gkByFk: Map<FacetKey, GroupKey>;\n\n  /** Configuration of the groups. */\n  abstract readonly groupsConfig: Map<GroupKey, { title: string }>;\n\n  /** The component that defines the content of a facet group. */\n  abstract readonly groupsComponent: FunctionComponent<{ currentFacetGroup: string }>;\n\n  abstract readonly vertexName: TPlangsVertexName;\n}\n", "export type year = number;\nexport type month = string; // 0 padded\nexport type day = string; // 0 padded\n\n/** A 0-padded YYYY-MM-DD date. Example: 2024-12-31. */\nexport type StrDate = `${year}-${month}-${day}` | `${year}-${month}` | `${year}`;\n\n// Arbitrary \"valid\" year range.\nexport const validYear = (year: number): boolean => year >= 1940 && year <= 2100;\nexport const validMonth = (month: number): boolean => month >= 1 && month <= 12;\nexport const validDay = (day: number): boolean => day >= 1 && day <= 31;\n\n/** If the string complies with StrDate, returns it formatted and type checked. */\nexport function parseDate(val: string): StrDate | undefined {\n  if (!val || val.length < 4 || val.length > 10) return;\n  const [year, month, day] = val.split(/\\D/, 3);\n  const [y, m, d] = [Number.parseInt(year), Number.parseInt(month), Number.parseInt(day)];\n\n  if (validYear(y)) {\n    if (validMonth(m)) {\n      if (validDay(d)) return `${y}-${`${m}`.padStart(2, \"0\")}-${`${d}`.padStart(2, \"0\")}`;\n      return `${y}-${`${m}`.padStart(2, \"0\")}`;\n    }\n    return `${y}`;\n  }\n}\n\n/** Extract the year from a StrDate. */\nexport function parseYear(val?: StrDate): number | undefined {\n  if (!val || val.length < 4 || val.length > 10) return;\n  const year = Number.parseInt(val.split(/\\D/, 3)[0], 10);\n  if (validYear(year)) return year;\n}\n\nexport function parseMonth(val?: StrDate): number | undefined {\n  if (!val || val.length < 4 || val.length > 10) return;\n  const month = Number.parseInt(val.split(/\\D/, 3)[1], 10);\n  if (validMonth(month)) return month;\n}\n\nexport function strDateCompare(a: StrDate | undefined, b: StrDate | undefined): number {\n  if (a === b) return 0;\n  if (!a) return -1;\n  if (!b) return 1;\n  return a.localeCompare(b);\n}\n\nexport function isRecent(date: StrDate | undefined, referenceDate: StrDate): boolean {\n  if (!date) return false;\n  return date >= referenceDate; // StrDate is a string, so this comparison works.\n}\n\n/** Return the date value units ago (for instance, 3 years ago). */\nexport function dateAgo(value: number, unit: \"y\" | \"m\"): StrDate {\n  const date = new Date();\n  if (unit === \"y\") date.setFullYear(date.getFullYear() - value);\n  else date.setMonth(date.getMonth() - value);\n  return `${date.getFullYear()}-${`${date.getMonth() + 1}`.padStart(2, \"0\")}`;\n}\n", "import { Filter } from \"@plangs/auxiliar/filters\";\nimport { Dispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport type { AnyFacetsMainState } from \"@plangs/frontend/facets/main/use_state\";\n\ntype Val = string | number | boolean;\n\n/** NOTE: we don't need to dispatch when calling actions of the main state. */\nexport class FacetMultiState<GroupKey extends string, FacetKey extends string> extends Dispatchable<{\n  groupKey: GroupKey;\n  facetKey: FacetKey;\n  main: AnyFacetsMainState;\n}> {\n  /** Actions */\n\n  doSetValue(val: Filter<Val>): \"changed\" | \"unchanged\" {\n    const { main, data } = this;\n    return main.doSetValue(data.groupKey, data.facetKey, val);\n  }\n\n  doAdd(val: Val): boolean {\n    if (!val) return false;\n    const { value } = this;\n    if (value.has(val)) return false;\n    value.add(val);\n    return this.doSetValue(value) === \"changed\";\n  }\n\n  doRemove(val: string | undefined): boolean {\n    if (!val) return false;\n    const { value } = this;\n    if (!value.has(val)) return false;\n    value.delete(val);\n    return this.doSetValue(value) === \"changed\";\n  }\n\n  doSetMode(mode: \"all\" | \"any\"): void {\n    const { value } = this;\n    if (value.mode === mode) return;\n    this.value.mode = mode === \"all\" ? \"all\" : \"any\";\n    this.doSetValue(value);\n  }\n\n  /** Queries */\n\n  get main() {\n    return this.data.main;\n  }\n\n  get value() {\n    const { main, groupKey, facetKey } = this.data;\n    return main.values.getOrSet(groupKey, facetKey, () => new Filter(\"any\")) as Filter<Val>;\n  }\n}\n", "import type { Ref } from \"preact\";\nimport { useContext, useEffect, useRef } from \"preact/hooks\";\n\nimport { debounce } from \"@plangs/auxiliar/debounce\";\nimport { useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { handler, on } from \"@plangs/frontend/auxiliar/events\";\nimport { CLOSE } from \"@plangs/frontend/auxiliar/icons\";\nimport { HOVER, INPUT, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { IconButton } from \"@plangs/frontend/components/icon-button/icon-button\";\nimport { type AnyFacetsMainState, FacetsMainContext } from \"@plangs/frontend/facets/main/use_state\";\n\nimport { FacetMultiState } from \"./state\";\n\nexport function FacetMulti<GroupKey extends string, FacetKey extends string>({\n  active,\n  facetKey,\n  groupKey,\n  label,\n}: { active: boolean; facetKey: FacetKey; groupKey: GroupKey; label: string }) {\n  const self = useRef<HTMLDivElement>(); // We perform various queries on the root element.\n  const input = useRef<HTMLInputElement>(); // Used to focus on the input after adding a value.\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n  const state = useDispatchable(() => new FacetMultiState<GroupKey, FacetKey>({ main, groupKey, facetKey }));\n\n  useEffect(() =>\n    on(self?.current, \"icon-button\", (ev: CustomEvent) => {\n      ev.stopPropagation();\n      state.doSetMode(ev.detail.mode);\n    }),\n  );\n\n  /** Scroll the selection so we can see what's been added. */\n  const maybeScroll = (value: string) =>\n    self.current?.querySelector(`button[data-value=\"${value}\"]`)?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\n\n  const add = handler((input: HTMLInputElement, ev: KeyboardEvent) => {\n    ev.stopPropagation();\n    if (ev.key !== \"Enter\") return;\n\n    // NOTE: if we use facet-multi for anything other than extensions, we should make value transform configurable.\n    const val = input.value.startsWith(\".\") ? input.value : `.${input.value}`;\n    if (state.doAdd(val)) setTimeout(() => maybeScroll(val), 100);\n    input.value = \"\";\n  });\n\n  /** Remove all instances of the pulse animation. */\n  const removePulse = debounce(() => {\n    for (const li of self.current?.querySelectorAll(\".quick-pulse\") ?? []) li.classList.remove(\"quick-pulse\");\n  }, 150);\n\n  const nthButton = (n: number) => self.current?.querySelector<HTMLButtonElement>(`li:nth-child(${n})>button`);\n\n  const remover = (idx: number) =>\n    handler((b: HTMLButtonElement, ev) => {\n      ev.stopPropagation();\n      if (state.doRemove(b.dataset.value)) {\n        // Determine next focus an add a lil animation. Timeout: wait till next render.\n        setTimeout(() => {\n          const nb = nthButton(idx + 1) ?? nthButton(idx);\n          (nb ?? input.current)?.focus();\n          if (!nb) return;\n          nb.classList.add(\"quick-pulse\"); // Add a pulsing animation to show what's being focused next.\n          setTimeout(() => removePulse(), 150);\n        }, 10);\n      }\n    });\n\n  // Helper to enumerate the entries, map them, then return an array (instead of an iterator).\n  function mapEntries<T>(mapper: (entry: [number, string | number | boolean]) => T): T[] {\n    return Array.from([...state.value.values].entries()).map(mapper);\n  }\n\n  const body = () => (\n    <>\n      <input\n        type=\"text\"\n        name={facetKey as string}\n        ref={input as Ref<HTMLInputElement>}\n        placeholder={label}\n        class={tw(INPUT, \"m-2\")}\n        onKeyDown={add}\n      />\n\n      <span class={tw(state.value.size === 0 && \"hidden\", state.value.size < 2 ? \"text-foreground/50\" : \"text-foreground\", \"pl-2\")}>\n        <IconButton action=\"allAny\" disabled={state.value.size < 2} initial={\"any\"} />\n      </span>\n\n      <ul>\n        {mapEntries(([idx, value]) => (\n          <li key={value}>\n            <button\n              type=\"button\"\n              data-value={value}\n              class={tw(\"inline-flex flex-row\", \"p-2\", \"w-full text-left\", \"cursor-pointer\", HOVER)}\n              {...onClickOnEnter(remover(idx))}>\n              <div class=\"-mt-[2px] inline-block scale-75 text-red-500\">{CLOSE}</div>\n              {value}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n\n  return (\n    <div ref={self as Ref<HTMLDivElement>} class={tw(\"flex flex-col\")}>\n      {active ? body() : null}\n    </div>\n  );\n}\n", "import type { JSX } from \"preact/jsx-runtime\";\n\nimport { SORT_DOWN, SORT_UP } from \"@plangs/frontend/auxiliar/icons\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { TPlangsEdgeName, TPlangsVertexName } from \"@plangs/plangs/graph/generated\";\n\nexport type Val = string | number | boolean;\nexport type Entry = { value: Val; label: string; count: number };\nexport type FacetTableConfig =\n  | { kind: \"rel\"; edgeName: TPlangsEdgeName; direction: \"direct\" | \"inverse\"; minEntries?: number }\n  | { kind: \"prop\"; vertexName: TPlangsVertexName; vertexProp: string };\n\nexport function generateEntries(pg: PlangsGraph, config: FacetTableConfig): Entry[] {\n  if (config.kind === \"rel\") {\n    const { edgeName, direction, minEntries } = config;\n\n    const edges = pg.edges[edgeName as TPlangsEdgeName];\n    if (!edges) {\n      console.error(\"No edges found for:\", edgeName, direction);\n      return [];\n    }\n\n    const relations = direction === \"direct\" ? edges.entriesBackward : edges.entriesForward;\n    const source = direction === \"direct\" ? edges.toSource : edges.fromSource;\n\n    const entries = [...relations].map(([key, toKeys]) => {\n      const name = source.get(key as any)?.name ?? key;\n      return { value: key, label: name, count: toKeys.size };\n    });\n\n    if (typeof minEntries === \"number\") return entries.filter(entry => entry.count >= minEntries);\n\n    return entries;\n  }\n\n  if (config.kind === \"prop\") {\n    // TODO: actually use the property. The code below assumes the property is 'created'.\n\n    const years: Map<string, number> = new Map(); // year -> count\n    for (const { created } of pg[config.vertexName].values) {\n      if (!created.year) continue;\n      const key = `${created.year}`;\n      years.set(key, (years.get(key) ?? 0) + 1);\n    }\n    return [...years.entries()].map(([year, count]) => {\n      const strYear = `${year}`;\n      return { value: year, label: strYear, count };\n    });\n  }\n\n  console.error(\"Unknown config kind\", config);\n  return [];\n}\n\nexport type Column = \"facet\" | \"count\" | \"sel\";\nexport type Order = \"facet-asc\" | \"facet-desc\" | \"count-asc\" | \"count-desc\" | \"sel-asc\" | \"sel-desc\";\n\nexport function label(col: Column, config: FacetTableConfig): string {\n  if (col === \"facet\" && config.kind === \"rel\") return \"Name\";\n  if (col === \"facet\" && config.kind === \"prop\") return \"Value\";\n  return col;\n}\n\nexport function icon(col: Column, order: Order): JSX.Element | false {\n  if (col === \"facet\") return (order === \"facet-asc\" && SORT_UP) || (order === \"facet-desc\" && SORT_DOWN);\n  if (col === \"count\") return (order === \"count-asc\" && SORT_UP) || (order === \"count-desc\" && SORT_DOWN);\n  return (order === \"sel-asc\" && SORT_UP) || (order === \"sel-desc\" && SORT_DOWN);\n}\n\nexport function opposite(col: Column, order: string): Order {\n  if (col === \"facet\") return order === \"facet-asc\" ? \"facet-desc\" : \"facet-asc\";\n  if (col === \"count\") return order === \"count-desc\" ? \"count-asc\" : \"count-desc\";\n  return order === \"sel-desc\" ? \"sel-asc\" : \"sel-desc\";\n}\n\nexport type IsSel = (entry: Entry) => boolean;\nexport type Cmp = (a: Entry, b: Entry, isSel?: IsSel) => number;\n\nexport const CMP: Record<Order, Cmp> = {\n  \"facet-asc\": (a, b) => a.label.localeCompare(b.label),\n  \"facet-desc\": (a, b) => b.label.localeCompare(a.label),\n  \"count-asc\": (a, b) => a.count - b.count,\n  \"count-desc\": (a, b) => b.count - a.count,\n  \"sel-asc\": (a, b, isSel) => (isSel ? Number(isSel(a)) - Number(isSel(b)) : 0),\n  \"sel-desc\": (a, b, isSel) => (isSel ? Number(isSel(b)) - Number(isSel(a)) : 0),\n} as const;\n\nexport function sortEntries(entries: Entry[], order: Order, isSel?: IsSel): Entry[] {\n  const less = CMP[order];\n  return entries.sort((a, b) => less(a, b, isSel));\n}\n", "import { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { HOVER, tw } from \"@plangs/frontend/auxiliar/styles\";\n\nimport { type Column, type FacetTableConfig, type Order, icon, label } from \"./entries\";\n\nexport function Header({\n  action,\n  class: cssClass,\n  col,\n  config,\n  order,\n}: { action: () => void; class?: string; col: Column; config: FacetTableConfig; order: Order }) {\n  return (\n    <button\n      type=\"button\"\n      class={tw(\n        HOVER,\n        \"flex flex-row gap-1 px-2 py-1\",\n        \"items-center justify-between\",\n        \"italic\",\n        \"underline decoration-1 decoration-dotted\",\n        \"cursor-pointer\",\n        cssClass,\n      )}\n      {...onClickOnEnter(action)}>\n      <span>{label(col, config)}</span>\n      <span class={tw(\"scale-75\")}>{icon(col, order)}</span>\n      <span class=\"flex-1\" />\n    </button>\n  );\n}\n", "import { Filter } from \"@plangs/auxiliar/filters\";\nimport { Dispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport type { AnyFacetsMainState } from \"@plangs/frontend/facets/main/use_state\";\n\nimport { type Column, type Entry, type Order, type Val, opposite, sortEntries } from \"./entries\";\nimport type { FacetTableProps } from \"./facet-table\";\n\ntype StateData<GroupKey extends string, FacetKey extends string> = Pick<FacetTableProps<GroupKey, FacetKey>, \"config\" | \"facetKey\" | \"groupKey\"> & {\n  main: AnyFacetsMainState;\n  entries: Entry[];\n  order: Order;\n  filter: string;\n};\n\nexport class FacetTableState<GroupKey extends string, FacetKey extends string> extends Dispatchable<StateData<GroupKey, FacetKey>> {\n  /** Actions */\n\n  doSetValue(val: Filter<Val>): \"changed\" | \"unchanged\" {\n    const { main, data } = this;\n    return main.doSetValue(data.groupKey, data.facetKey, val);\n  }\n\n  doToggle(val: Val) {\n    const { value } = this;\n    value.has(val) ? value.delete(val) : value.add(val);\n    this.doSetValue(value);\n  }\n\n  doSetMode(mode: \"all\" | \"any\"): void {\n    const { value } = this;\n    if (value.mode === mode) return;\n    this.value.mode = mode === \"all\" ? \"all\" : \"any\";\n    this.doSetValue(value);\n  }\n\n  // Note that this is the only place where we dispatch locally instead of through the main state.\n  doToggleOrder(col: Column) {\n    const { order } = this.data;\n    this.data.order = opposite(col, order);\n    sortEntries(this.data.entries, this.data.order, entry => this.value.has(entry.value));\n    this.dispatch();\n  }\n\n  doResetSelection() {\n    this.value.clear();\n    this.doSetValue(this.value);\n  }\n\n  doSetFilter(value: string): void {\n    this.data.filter = value;\n    this.dispatch();\n  }\n\n  /** Queries */\n\n  get main() {\n    return this.data.main;\n  }\n\n  get filter() {\n    return this.data.filter;\n  }\n\n  /** Selected values. */\n  get value() {\n    const { main, groupKey, facetKey } = this.data;\n    return main.values.getOrSet(groupKey, facetKey, () => new Filter(\"any\")) as Filter<Val>;\n  }\n\n  /** All entries. */\n  get filteredEntries() {\n    if (this.filter === \"\") return this.data.entries;\n    const pattern = this.filter.toLowerCase();\n    return this.data.entries.filter(entry => entry.label.toLowerCase().includes(pattern));\n  }\n\n  get order() {\n    return this.data.order;\n  }\n\n  get hasSelection() {\n    return this.value.size > 0;\n  }\n}\n", "import type { Ref } from \"preact\";\nimport { useContext, useEffect, useRef } from \"preact/hooks\";\n\nimport { ret } from \"@plangs/auxiliar/misc\";\nimport { useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { on } from \"@plangs/frontend/auxiliar/events\";\nimport { HOVER, HOVER_ICON_BG, INPUT, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { IconButton } from \"@plangs/frontend/components/icon-button/icon-button\";\nimport { type AnyFacetsMainState, FacetsMainContext } from \"@plangs/frontend/facets/main/use_state\";\n\nimport { DESELECT } from \"@plangs/frontend/auxiliar/icons\";\nimport { type FacetTableConfig, generateEntries, sortEntries } from \"./entries\";\nimport { Header } from \"./header\";\nimport { FacetTableState } from \"./state\";\n\nexport type FacetTableProps<GroupKey extends string, FacetKey extends string> = {\n  groupKey: GroupKey;\n  facetKey: FacetKey;\n  config: FacetTableConfig;\n  active: boolean;\n};\n\nexport function FacetTable<GroupKey extends string, FacetKey extends string>({\n  groupKey,\n  facetKey,\n  config,\n  active,\n}: FacetTableProps<GroupKey, FacetKey>) {\n  const self = useRef<HTMLDivElement>();\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n\n  const state = useDispatchable(() => {\n    const order = config.kind === \"prop\" ? \"facet-desc\" : \"facet-asc\";\n    const entries = sortEntries(generateEntries(main.pg, config), order);\n    return new FacetTableState({ config, entries, facetKey, groupKey, main, order, filter: \"\" });\n  });\n\n  useEffect(() =>\n    on(self?.current, \"icon-button\", (ev: CustomEvent) => {\n      ev.stopPropagation();\n      state.doSetMode(ev.detail.mode === \"all\" ? \"all\" : \"any\");\n    }),\n  );\n\n  const SUBGRID = tw(\"col-span-3\", \"grid grid-cols-subgrid\");\n  const ROW = tw(SUBGRID, tw(\"border-b-1\", \"border-foreground/25 border-dotted\"));\n\n  const body = () => (\n    <div class={tw(\"grid grid-cols-[1fr_auto_auto]\", \"overflow-hidden\")}>\n      <div class={tw(ROW, \"bg-secondary text-foreground\")}>\n        <div class={tw(\"col-span-3\", \"flex flex-row\", \"items-center justify-between\")}>\n          <input\n            class={tw(INPUT, \"m-1 block h-8 w-[100%]\")}\n            placeholder=\"Filter...\"\n            value={state.filter}\n            onInput={ev => state.doSetFilter(ev.currentTarget.value)}\n          />\n          <IconButton action=\"allAny\" initial={state.value.mode} disabled={state.value.size < 2} />\n          <div\n            class={tw(\"scale-75 p-1\", state.hasSelection ? tw(\"hover:text-hiliteb\", HOVER_ICON_BG) : \"opacity-25\")}\n            {...onClickOnEnter(() => state.doResetSelection())}>\n            {DESELECT}\n          </div>\n        </div>\n\n        <Header class={\"text-left\"} action={() => state.doToggleOrder(\"facet\")} col=\"facet\" config={config} order={state.order} />\n        <Header class={\"text-center\"} action={() => state.doToggleOrder(\"count\")} col=\"count\" config={config} order={state.order} />\n        <Header class={\"text-right\"} action={() => state.doToggleOrder(\"sel\")} col=\"sel\" config={config} order={state.order} />\n      </div>\n\n      <div class={tw(ROW, \"overflow-hidden\", \"overflow-y-scroll\")}>\n        {state.filteredEntries.map(entry =>\n          ret(\n            onClickOnEnter(() => state.doToggle(entry.value)),\n            clickOrEnter => (\n              <div key={entry.value} class={tw(ROW, HOVER, state.value.has(entry.value) && \"bg-secondary/20\")} {...clickOrEnter}>\n                <div class={tw(\"p-2\", \"text-left\", \"overflow-hidden text-ellipsis\", \"line-clamp-3\")}>{entry.label}</div>\n                <div class={tw(\"p-2\", \"text-center\")}>{entry.count}</div>\n                <div class={tw(\"p-2\", \"text-right\")}>\n                  <input type=\"checkbox\" checked={state.value.has(entry.value)} {...clickOrEnter} />\n                </div>\n              </div>\n            ),\n          ),\n        )}\n      </div>\n    </div>\n  );\n\n  return (\n    <div ref={self as Ref<HTMLDivElement>} class={tw(\"flex flex-col\", \"size-full overflow-hidden\")}>\n      {active ? body() : null}\n    </div>\n  );\n}\n", "import type { Ref } from \"preact\";\nimport { useContext, useRef } from \"preact/hooks\";\n\nimport { type AnyValue, ValBool } from \"@plangs/auxiliar/value\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { handler } from \"@plangs/frontend/auxiliar/events\";\nimport { tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { type AnyFacetsMainState, FacetsMainContext } from \"@plangs/frontend/facets/main/use_state\";\n\nexport type FacetBoolMapper = (checked: boolean) => AnyValue;\n\nexport type FacetBoolProps<GroupKey, FacetKey> = {\n  groupKey: GroupKey;\n  facetKey: FacetKey;\n  label: string;\n  valueMapper?: FacetBoolMapper;\n};\n\nexport function FacetBool<GroupKey extends string, FacetKey extends string>({\n  groupKey,\n  facetKey,\n  label,\n  valueMapper = (checked: boolean) => new ValBool(checked),\n}: FacetBoolProps<GroupKey, FacetKey>) {\n  const input = useRef<HTMLInputElement>();\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n\n  const toggle = handler((checkbox: HTMLInputElement) => {\n    main.doSetValue(groupKey, facetKey, valueMapper(checkbox.checked));\n  });\n\n  return (\n    <label for={facetKey} class={tw(\"inline-flex items-center gap-2\", \"mx-2\")}>\n      <input\n        id={facetKey}\n        name={facetKey}\n        type=\"checkbox\"\n        placeholder={label}\n        {...onClickOnEnter(toggle)}\n        checked={!!main.values.get(groupKey, facetKey)?.isPresent}\n        ref={input as Ref<HTMLInputElement>}\n      />\n      {label}\n    </label>\n  );\n}\n", "import { useContext } from \"preact/hooks\";\n\nimport { ValString } from \"@plangs/auxiliar/value\";\nimport { INPUT, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { type AnyFacetsMainState, FacetsMainContext } from \"@plangs/frontend/facets/main/use_state\";\n\nexport function FacetSelect<GroupKey extends string, FacetKey extends string>({\n  groupKey,\n  facetKey,\n  options,\n  label,\n}: { groupKey: GroupKey; facetKey: FacetKey; label: string; options: { label: string; value: string }[] }) {\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n  const current = main.values.get(groupKey, facetKey)?.value ?? \"\";\n  return (\n    <label class={tw(\"m-2\", \"flex\", \"items-center\", \"gap-2\")}>\n      <span class=\"inline-block min-w-[5rem]\">{label}</span>\n      <select\n        class={tw(INPUT, \"flex-1\")}\n        onChange={ev => {\n          const select = ev.target as HTMLSelectElement;\n          main.doSetValue(groupKey, facetKey, new ValString(select.value));\n        }}\n        value={current}>\n        {options.map(({ label, value }) => (\n          <option key={value} value={value} selected={value === current} class=\"text-pink-400\">\n            {label}\n          </option>\n        ))}\n      </select>\n    </label>\n  );\n}\n", "import { useContext } from \"preact/hooks\";\n\nimport { debounce } from \"@plangs/auxiliar/debounce\";\nimport { ValString } from \"@plangs/auxiliar/value\";\nimport { handler } from \"@plangs/frontend/auxiliar/events\";\nimport { INPUT, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { type AnyFacetsMainState, FacetsMainContext } from \"@plangs/frontend/facets/main/use_state\";\n\nexport function FacetText<GroupKey extends string, FacetKey extends string>({\n  groupKey,\n  facetKey,\n  label,\n}: { groupKey: GroupKey; facetKey: FacetKey; label: string }) {\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n  const onInput = debounce(\n    handler((input: HTMLInputElement) => {\n      main.doSetValue(groupKey, facetKey, new ValString(input.value.toLowerCase()));\n    }),\n    50,\n  );\n  const current = main.values.get(groupKey, facetKey)?.value ?? \"\";\n  return <input type=\"search\" onInput={onInput} placeholder={label} class={tw(\"m-2\", INPUT)} value={current} />;\n}\n", "import type { ComponentChildren, FunctionComponent } from \"preact\";\nimport { useContext } from \"preact/hooks\";\n\nimport { tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { FacetConfig } from \"@plangs/frontend/facets/main/types\";\nimport { type AnyFacetsMainState, FacetsMainContext } from \"@plangs/frontend/facets/main/use_state\";\nimport { FacetMulti } from \"@plangs/frontend/facets/multisel/facet-multi\";\nimport { FacetTable } from \"@plangs/frontend/facets/table/facet-table\";\n\nimport { FacetBool } from \"./facet-bool\";\nimport { FacetSelect } from \"./facet-select\";\nimport { FacetText } from \"./facet-text\";\n\n/** Higher order component: Return a component wrapping several FacetGroup components. */\nexport function createFacetGroupsComponent<GK extends string, FK extends string>(\n  groups: Map<GK, { title: string; facets: FacetConfig<FK>[] }>,\n): FunctionComponent<{ currentFacetGroup: GK }> {\n  return ({ currentFacetGroup }) => (\n    <>\n      {[...groups.entries()].map(([groupKey, { title, facets }]) => (\n        <FacetGroup<GK> key={groupKey} groupKey={groupKey} label={title} active={currentFacetGroup === groupKey}>\n          {facets.map(facet => {\n            const { kind, label, facetKey } = facet;\n            const props = { groupKey, facetKey, label, active: currentFacetGroup === groupKey };\n            switch (kind) {\n              case \"bool\":\n                return <FacetBool {...props} valueMapper={facet.valueMapper} />;\n              case \"multi\":\n                return <FacetMulti {...props} />;\n              case \"table\":\n                return <FacetTable {...props} config={facet.config} />;\n              case \"text\":\n                return <FacetText {...props} />;\n              case \"select\":\n                return <FacetSelect {...props} options={facet.options} />;\n              default:\n                console.error(\"Facet not found\", facetKey);\n            }\n          })}\n        </FacetGroup>\n      ))}\n    </>\n  );\n}\n\nexport function FacetGroup<GroupKey extends string>({\n  active,\n  children,\n}: { label: string; groupKey: GroupKey; active: boolean; children: ComponentChildren }) {\n  const main = useContext(FacetsMainContext) as AnyFacetsMainState; // It exists, since it spawned this component.\n  return (\n    <div\n      class={tw(\n        \"relative\",\n        !active && \"hidden\",\n\n        // Self.\n        \"flex-1 pt-1\",\n        \"self-center\",\n        \"size-full overflow-hidden overflow-y-auto\",\n\n        // Children.\n        \"flex flex-col gap-2\",\n      )}>\n      {children}\n    </div>\n  );\n}\n", "import type { FunctionComponent } from \"preact\";\n\nimport { dateAgo } from \"@plangs/auxiliar/str_date\";\nimport type { AnyValue } from \"@plangs/auxiliar/value\";\nimport type { FacetBoolMapper } from \"@plangs/frontend/facets/misc/facet-bool\";\nimport { createFacetGroupsComponent } from \"@plangs/frontend/facets/misc/facet-group\";\nimport type { FacetTableConfig } from \"@plangs/frontend/facets/table/entries\";\n\n////////////////////////////////////////////////////////////////////////////////\n/// Facet Input Configuration\n////////////////////////////////////////////////////////////////////////////////\n\nexport type FacetConfigBase<Kind extends string, FK> = { kind: Kind; label: string; facetKey: FK };\n\nexport type FacetConfigBool<FK> = FacetConfigBase<\"bool\", FK> & { valueMapper?: (checked: boolean) => AnyValue };\nexport type FacetConfigMulti<FK> = FacetConfigBase<\"multi\", FK>;\nexport type FacetConfigTable<FK> = FacetConfigBase<\"table\", FK> & { config: FacetTableConfig };\nexport type FacetConfigText<FK> = FacetConfigBase<\"text\", FK>;\nexport type FacetConfigSelect<FK> = FacetConfigBase<\"select\", FK> & { options: { label: string; value: string }[] };\n\n/** Type for the input for a facet. */\nexport type FacetConfig<FK> = FacetConfigBool<FK> | FacetConfigMulti<FK> | FacetConfigTable<FK> | FacetConfigText<FK> | FacetConfigSelect<FK>;\n\n/** A Map from the facet key to the facet configuration. */\nexport type FacetsMap<FK> = Map<FK, FacetConfig<FK>>;\n\nexport function bool<FK>(facetKey: FK, label: string, valueMapper?: FacetBoolMapper): FacetConfigBool<FK> {\n  return { kind: \"bool\", facetKey, label, valueMapper };\n}\n\nexport function multi<FK>(facetKey: FK, label: string): FacetConfigMulti<FK> {\n  return { kind: \"multi\", facetKey, label };\n}\n\nexport function table<FK>(facetKey: FK, label: string, config: FacetTableConfig): FacetConfigTable<FK> {\n  return { kind: \"table\", facetKey, label, config };\n}\n\nexport function text<FK>(facetKey: FK, label: string): FacetConfigText<FK> {\n  return { kind: \"text\", facetKey, label };\n}\n\nexport function select<FK>(facetKey: FK, label: string, options: { label: string; value: string }[] = dateOptions()): FacetConfigSelect<FK> {\n  return { kind: \"select\", label, facetKey, options };\n}\n\n/** Returns a list of options for date selection. */\nfunction dateOptions() {\n  return [\n    { label: \"Any time\", value: \"\" },\n    { label: \"Past 3 months\", value: dateAgo(3, \"m\") },\n    { label: \"Past 6 months\", value: dateAgo(6, \"m\") },\n    { label: \"Past year\", value: dateAgo(1, \"y\") },\n    { label: \"Past 2 years\", value: dateAgo(2, \"y\") },\n    { label: \"Past 3 years\", value: dateAgo(3, \"y\") },\n    { label: \"Past 4 years\", value: dateAgo(4, \"y\") },\n    { label: \"Past 5 years\", value: dateAgo(5, \"y\") },\n    { label: \"Past 7 years\", value: dateAgo(7, \"y\") },\n    { label: \"Past 10 years\", value: dateAgo(10, \"y\") },\n  ];\n}\n\n////////////////////////////////////////////////////////////////////////////////\n/// Facet Groups Configuration helper.\n////////////////////////////////////////////////////////////////////////////////\n\n/** Returns a map of group config, a map of group key by facet key, and a preact componetn to render the group. */\nexport function defineFacetGroups<GK extends string, FK extends string>(\n  groups: Record<GK, { title: string; facets: FacetConfig<FK>[] }>,\n): [Map<GK, { title: string; facets: FacetConfig<FK>[] }>, Map<FK, GK>, FunctionComponent<{ currentFacetGroup: string }>] {\n  const groupsMap = new Map(Object.entries(groups) as [GK, { title: string; facets: FacetConfig<FK>[] }][]);\n  const gkByFk = new Map<FK, GK>();\n  type GEntry = { title: string; facets: FacetConfig<FK>[] };\n  for (const [groupKey, { facets }] of Object.entries(groups) as [GK, GEntry][]) {\n    for (const facet of facets) gkByFk.set(facet.facetKey, groupKey);\n  }\n  const component = createFacetGroupsComponent(groupsMap);\n\n  return [groupsMap, gkByFk, component as FunctionComponent<{ currentFacetGroup: string }>];\n}\n", "/** Insert elements in the array if they are not already present. */\nexport function arrayMerge<T>(\n  target: T[],\n  newData: T[],\n  similar: (l1: T, l2: T) => boolean = (l1, l2) => l1 === l2,\n  onDuplicate?: (prevElem: T, newElem: T) => void,\n) {\n  for (const newElem of newData) {\n    const prevElem = target.find((elem: T) => similar(elem, newElem));\n    if (prevElem) {\n      onDuplicate?.(prevElem, newElem);\n    } else {\n      target.push(newElem);\n    }\n  }\n}\n\n/** Delete in-place the given indexes of an array. Sorts the array in descending order to delete the proper elements. */\nexport function arrayDelete<T>(array: T[], indexes: Set<number>) {\n  // Delete indexes starting with the last one to avoid shifting elements.\n  for (const idx of [...indexes].sort((a, b) => b - a)) array.splice(idx, 1);\n}\n\n/** In place removal of array elements. */\nexport function removeIf<T>(array: T[], predicate: (value: T) => boolean, onRemove?: (value: T) => void): T[] {\n  for (let i = array.length - 1; i >= 0; i--) {\n    if (predicate(array[i])) {\n      onRemove?.(array[i]);\n      array.splice(i, 1);\n    }\n  }\n  return array;\n}\n", "/**\n * Wrapper to work with potentially empty or undefined iterables.\n */\nexport class IterTap<T> implements Iterable<T> {\n  readonly array: T[] | undefined;\n\n  constructor(iterable: Iterable<T> | undefined) {\n    this.array = Array.isArray(iterable) ? iterable : iterable ? [...iterable] : undefined;\n  }\n\n  filter(callback: (value: T, index: number, array: T[]) => boolean) {\n    return this.array ? this.array.filter(callback) : [];\n  }\n\n  map<R>(callback: (value: T, index: number, array: T[]) => R): IterTap<R> {\n    return new IterTap(this.array ? this.array.map(callback) : []);\n  }\n\n  reduce<R>(callback: (previousValue: R, currentValue: T, currentIndex: number, array: T[]) => R, init: R) {\n    return this.array ? this.array.reduce<R>(callback, init) : init;\n  }\n\n  sort(cmp?: (a: T, b: T) => number): T[] {\n    return this.array ? [...this.array].sort(cmp) : [];\n  }\n\n  join(str: string): string {\n    return this.array ? this.array.join(str) : \"\";\n  }\n\n  includes(val: T): boolean {\n    return this.array ? this.array.includes(val) : false;\n  }\n\n  some(predicate: (value: T, index: number, array: T[]) => boolean): boolean {\n    return this.array ? this.array.some(predicate) : false;\n  }\n\n  find(predicate: (value: T, index?: number, obj?: T[]) => boolean): T | undefined {\n    return this.array?.find(predicate);\n  }\n\n  tap<R>(callback: (array: T[]) => R): R | undefined {\n    if (this.array && this.array.length > 0) return callback(this.array);\n  }\n\n  get(index: number): T | undefined {\n    return this.array ? this.array[index] : undefined;\n  }\n\n  get isEmpty(): boolean {\n    return this.array ? this.array.length === 0 : true;\n  }\n\n  get size(): number {\n    return this.array ? this.array.length : 0;\n  }\n\n  get length(): number {\n    return this.size;\n  }\n\n  /** Return all non-null and non-undefined values (if strings, returns the ones with length > 0). */\n  get existing(): NonNullable<T>[] {\n    return this.filter(v => v !== undefined && v !== null && (typeof v !== \"string\" || v.length > 0)) as NonNullable<T>[];\n  }\n\n  get reverse(): IterTap<T> {\n    return new IterTap(this.array ? [...this.array].reverse() : undefined);\n  }\n\n  get first(): T | undefined {\n    return this.array && this.array.length > 0 ? this.array[0] : undefined;\n  }\n\n  get last(): T | undefined {\n    return this.array && this.array.length > 0 ? this.array[this.array.length - 1] : undefined;\n  }\n\n  [Symbol.iterator](): Iterator<T> {\n    return this.array ? this.array[Symbol.iterator]() : [].values();\n  }\n}\n", "export type VKey<Prefix extends string> = `${Prefix}+${string}`;\n\n/**\n * Vertex object:\n *\n * The string keys use a prefix go help differentiate vertices:\n * \"key+1\", \"another+2\", etc.\n *\n * Serializes to the plain data object without the key.\n */\nexport abstract class Vertex<KeyPrefix extends string, Data> {\n  /** Serializable data. */\n  data: Partial<Data> = {};\n\n  constructor(readonly key: VKey<KeyPrefix>) {}\n\n  /** Shallow merge data. */\n  merge(data: Partial<Data>): this {\n    Object.assign(this.data, data);\n    return this;\n  }\n\n  /** The key without the `${kind}+` prefix. */\n  get plainKey(): string {\n    return this.key.replace(/^[a-z]+\\+/, \"\");\n  }\n\n  /**\n   * Lower-case first letter of the {@link plainKey}, or {@link NON_AZ} if it starts with a non-letter.\n   * Useful when doing things like organizing the data in a folder structure.\n   */\n  get classifier(): string {\n    const pk = this.plainKey;\n    return /^[a-z]/i.test(pk) ? pk[0].toLowerCase() : NON_AZ;\n  }\n\n  /** {@link merge} can be used to load serialized data into an instance. */\n  toJSON() {\n    return this.data;\n  }\n\n  toString() {\n    return this.key;\n  }\n}\n\n/** Type of a Vertex with any key and data, useful for generic containers. */\n// biome-ignore lint/suspicious/noExplicitAny: we want to keep track of vertices with any key and data.\nexport type AnyVertex = Vertex<any, any>;\n\n/* Used to classify vertices whose plain key don't start with a letter. */\nexport const NON_AZ = \"-\";\n\n/**\n * A container for vertices and identity map:\n *\n * - Maintains a map of Vertices by Vertex key.\n * - Creates Vertices as needed using the factory function.\n */\nexport class Vertices<V extends AnyVertex> {\n  readonly map = new Map<V[\"key\"], V>();\n\n  constructor(\n    /** Name of the kind of Vertices. */\n    readonly name: string,\n    /** Kind of Vertices, used as prefix of the Key. */\n    readonly kind: string,\n    private factory: (key: V[\"key\"]) => V,\n  ) {}\n\n  set(key: V[\"key\"], data: V[\"data\"] = {}): V {\n    const vertex = this.factory(key).merge(data);\n    this.map.set(key, vertex);\n    return vertex;\n  }\n\n  get(key: V[\"key\"]): V | undefined {\n    return this.map.get(key);\n  }\n\n  has(key: V[\"key\"]): boolean {\n    return this.map.has(key);\n  }\n\n  delete(key: V[\"key\"]): boolean {\n    return this.map.delete(key);\n  }\n\n  clear(): void {\n    this.map.clear();\n  }\n\n  get keys() {\n    return this.map.keys();\n  }\n\n  get values() {\n    return this.map.values();\n  }\n\n  get entries() {\n    return this.map.entries();\n  }\n\n  toJSON(): Record<V[\"key\"], V[\"data\"]> {\n    return Object.fromEntries([...this.map].map(([key, vertex]) => [key, vertex.toJSON()])) as Record<V[\"key\"], V[\"data\"]>;\n  }\n}\n\n/**\n * Keep track of forward and backward edges between vertices.\n *\n * - Only allows a single edge between vertices.\n * - Tracks vertices keys only. The actual vertices live in the {@link Vertices} containers.\n * - Doesn't keep track of any edge data for now.\n */\nexport class Edges<From extends AnyVertex, To extends AnyVertex> {\n  readonly #forward = new Map<From[\"key\"], Set<To[\"key\"]>>();\n  readonly #backward = new Map<To[\"key\"], Set<From[\"key\"]>>();\n\n  /**\n   * We keep track of the from and to sources {@link Vertices} containers,\n   * so we can easily retrieve the actual vertex from its key when needed.\n   */\n  constructor(\n    readonly fromSource: Vertices<From>,\n    readonly toSource: Vertices<To>,\n    /** Description of the direct relationship from -> to. */\n    readonly descDirect: string,\n    /** Description of the inverse relationship to -> from. */\n    readonly descInverse: string,\n  ) {}\n\n  /**\n   * Track a relationship between two vertices.\n   * **Note**: the user is responsible of ensuring the vertices exist.\n   */\n  add(fromKey: From[\"key\"], ...toKeys: To[\"key\"][]): this {\n    let forward = this.#forward.get(fromKey);\n    if (!forward) this.#forward.set(fromKey, (forward = new Set()));\n\n    for (const toKey of toKeys) {\n      forward.add(toKey);\n\n      let backward = this.#backward.get(toKey);\n      if (!backward) this.#backward.set(toKey, (backward = new Set()));\n\n      backward.add(fromKey);\n    }\n\n    return this;\n  }\n\n  /** Get the vertices from the keys. */\n  get(fromKey: From[\"key\"], toKey: To[\"key\"]): [From | undefined, To | undefined] {\n    return [this.fromSource.get(fromKey), this.toSource.get(toKey)];\n  }\n\n  /** Shortcut: add a relationship and return the target vertices. */\n  addGet(fromKey: From[\"key\"], toKey: To[\"key\"]): [From | undefined, To | undefined] {\n    return this.add(fromKey, toKey).get(fromKey, toKey);\n  }\n\n  delete(fromKey: From[\"key\"], toKey: To[\"key\"]): boolean {\n    const f = this.#forward.get(fromKey)?.delete(toKey) ?? false;\n    const b = this.#backward.get(toKey)?.delete(fromKey) ?? false;\n    return f || b;\n  }\n\n  forward(fromKey: From[\"key\"]): Set<To[\"key\"]> {\n    return this.#forward.get(fromKey) ?? new Set();\n  }\n\n  backward(toKey: To[\"key\"]): Set<From[\"key\"]> {\n    return this.#backward.get(toKey) ?? new Set();\n  }\n\n  has(fromKey: From[\"key\"], toKey: To[\"key\"]): boolean {\n    return this.#forward.get(fromKey)?.has(toKey) ?? false;\n  }\n\n  /** Return all keys `[fromKey, Set<toKey>]`. */\n  get entriesForward(): [From[\"key\"], Set<To[\"key\"]>][] {\n    return [...this.#forward].map(([key, set]) => [key, set]);\n  }\n\n  /** Return all keys `[toKey, Set<fromKey>]`. */\n  get entriesBackward(): [From[\"key\"], Set<To[\"key\"]>][] {\n    return [...this.#backward].map(([key, set]) => [key, set]);\n  }\n\n  /** Map all Vertex keys to their respective Vertices or undefined if missing. */\n  get vertices(): [From[\"key\"], From | undefined, To[\"key\"], To | undefined][] {\n    const result: [From[\"key\"], From | undefined, To[\"key\"], To | undefined][] = [];\n    for (const [fromKey, toKeys] of this.entriesForward) {\n      const from = this.fromSource.get(fromKey);\n      for (const toKey of toKeys) result.push([fromKey, from, toKey, this.toSource.get(toKey)]);\n    }\n    return result;\n  }\n\n  /* Number of relationships. */\n  get size() {\n    let size = 0; // Both #forward and #backward should have the same size.\n    for (const set of this.#forward.values()) size += set.size;\n    return size;\n  }\n\n  /* {@link addMany} can be used to load back the result of the serialization. */\n  toJSON(): Record<From[\"key\"], To[\"key\"][]> {\n    return Object.fromEntries(this.entriesForward.map(([fromKey, setToKeys]) => [fromKey, [...setToKeys]])) as Record<From[\"key\"], To[\"key\"][]>;\n  }\n}\n\nexport type SerializedGraph = {\n  vertices: Record<string, Record<string, AnyVertex[\"data\"]>>;\n  edges: Record<string, Record<string, string[]>>;\n};\n\n/** This class provides shrotcuts to work with relationship between vertices directly **from** the vertex. */\nexport class RelFrom<FromVertex extends AnyVertex, ToVertex extends AnyVertex> {\n  constructor(\n    readonly from: FromVertex,\n    readonly edges: Edges<FromVertex, ToVertex>,\n  ) {}\n\n  get edgeDesc(): string {\n    return this.edges.descDirect;\n  }\n\n  get targetVertices() {\n    return this.edges.toSource;\n  }\n\n  add(...toKeys: ToVertex[\"key\"][]): FromVertex {\n    this.edges.add(this.from.key, ...toKeys);\n    return this.from;\n  }\n\n  /** Add keys if they match existing vertices only. */\n  maybeAdd(toKeys: string[]): FromVertex {\n    const existing = (toKeys as ToVertex[\"key\"][]).filter(k => this.edges.toSource.has(k));\n    return this.add(...existing);\n  }\n\n  remove(...toKeys: ToVertex[\"key\"][]): FromVertex {\n    for (const toKey of toKeys) this.edges.delete(this.from.key, toKey);\n    return this.from;\n  }\n\n  has(toKey: ToVertex[\"key\"]): boolean {\n    return this.edges.has(this.from.key, toKey);\n  }\n\n  get keys(): Set<ToVertex[\"key\"]> {\n    return this.edges.forward(this.from.key);\n  }\n\n  get values(): ToVertex[] {\n    return [...this.keys].map(k => this.edges.toSource.get(k)).filter(v => v) as ToVertex[];\n  }\n\n  get size() {\n    return this.keys.size;\n  }\n\n  toString() {\n    return `RelFrom(${this.from}, ${this.edgeDesc})`;\n  }\n}\n\n/** This class provides shrotcuts to work with relationship between vertices directly **to** the vertex. */\nexport class RelTo<FromVertex extends AnyVertex, ToVertex extends AnyVertex> {\n  constructor(\n    readonly to: ToVertex,\n    readonly edges: Edges<FromVertex, ToVertex>,\n  ) {}\n\n  get edgeDesc(): string {\n    return this.edges.descInverse;\n  }\n\n  get targetVertices() {\n    return this.edges.fromSource;\n  }\n\n  add(...fromKeys: FromVertex[\"key\"][]): ToVertex {\n    for (const fromKey of fromKeys) this.edges.add(fromKey, this.to.key);\n    return this.to;\n  }\n\n  /** Add keys if they match existing vertices only. */\n  maybeAdd(fromKeys: string[]): ToVertex {\n    const existing = (fromKeys as FromVertex[\"key\"][]).filter(k => this.edges.fromSource.has(k));\n    return this.add(...existing);\n  }\n\n  remove(...fromKeys: FromVertex[\"key\"][]): ToVertex {\n    for (const fromKey of fromKeys) this.edges.delete(fromKey, this.to.key);\n    return this.to;\n  }\n\n  has(fromKey: FromVertex[\"key\"]): boolean {\n    return this.edges.has(fromKey, this.to.key);\n  }\n\n  get keys(): Set<FromVertex[\"key\"]> {\n    return this.edges.backward(this.to.key);\n  }\n\n  get values(): FromVertex[] {\n    return [...this.keys].map(k => this.edges.fromSource.get(k)).filter(v => v) as FromVertex[];\n  }\n\n  get size() {\n    return this.keys.size;\n  }\n\n  toString() {\n    return `RelTo(${this.to}, ${this.edgeDesc})`;\n  }\n}\n", "/**\n * Methods to work with vertex data fields.\n *\n * - Having these wrappers helps avoid duplication of methods that do the same thing accross different vertices.\n * - Wrappers are passed the vertex object instead of the data directly since eventually we will have setters that should modify the data in the vertex.\n */\n\nimport { IterTap } from \"@plangs/auxiliar/iter_tap\";\nimport { type StrDate, isRecent, parseMonth, parseYear, strDateCompare } from \"@plangs/auxiliar/str_date\";\n\nimport type { GithubRepo, Release } from \"./vertex_data_schemas\";\n\n/** Wraps a single release. */\nexport class ReleaseWrapper {\n  constructor(private readonly release: Release) {}\n\n  get version(): string | undefined {\n    return this.release.version;\n  }\n\n  get date(): StrDate | undefined {\n    return this.release.date;\n  }\n\n  get year(): number | undefined {\n    return parseYear(this.release.date);\n  }\n\n  get month(): number | undefined {\n    return parseMonth(this.release.date);\n  }\n\n  get yearMonth() {\n    const { year, month } = this;\n    return year && month ? `${month.toString().padStart(2, \"0\")}/${year}` : year;\n  }\n\n  isRecent(referenceDate: StrDate): boolean {\n    return isRecent(this.date, referenceDate);\n  }\n\n  compareDate(other: ReleaseWrapper): number {\n    return strDateCompare(this.date, other.date);\n  }\n}\n\n/** Wraps a list of releases. */\nexport class FieldReleases {\n  constructor(private readonly vertex: { data: { releases?: Release[] } }) {}\n\n  get all(): IterTap<ReleaseWrapper> {\n    return new IterTap(this.vertex.data.releases).map(rel => new ReleaseWrapper(rel));\n  }\n\n  get last(): ReleaseWrapper | undefined {\n    const all = this.all;\n    if (all.size === 0) return undefined;\n    if (all.size === 1) return all.get(0);\n    return all.sort((r1, r2) => r1.compareDate(r2))[0];\n  }\n}\n\n/** Wraps a StrDate field. */\nexport class FieldStrDate<Key extends string> {\n  constructor(\n    private readonly key: Key,\n    private readonly vertex: { data: Partial<Record<Key, StrDate | undefined>> },\n  ) {}\n\n  get value(): StrDate | undefined {\n    return this.vertex.data[this.key];\n  }\n\n  get year(): number | undefined {\n    return parseYear(this.value);\n  }\n\n  get strYear(): string | undefined {\n    return this.value?.slice(0, 4);\n  }\n\n  get month(): number | undefined {\n    return parseMonth(this.value);\n  }\n\n  isRecent(referenceDate: StrDate): boolean {\n    return isRecent(this.value, referenceDate);\n  }\n}\n\n/**\n * Wraps Github fields: repo stars and repo path\n * The releases field is present in Github but wrapped by FieldReleases.\n */\nexport class FieldGithub {\n  constructor(private readonly vertex: { data: Partial<GithubRepo> }) {}\n\n  /** Returns -1 if the number of stars is unknown. */\n  get stars(): number {\n    return this.vertex.data.githubStars ?? -1;\n  }\n\n  get path(): string | undefined {\n    return this.vertex.data.extGithubPath;\n  }\n\n  get url(): string | undefined {\n    return this.path ? `https://github.com/${this.path}` : undefined;\n  }\n}\n", "import { arrayMerge } from \"@plangs/auxiliar/array\";\nimport { IterTap } from \"@plangs/auxiliar/iter_tap\";\nimport { tap } from \"@plangs/auxiliar/misc\";\nimport { Vertex } from \"@plangs/graphgen/library\";\n\nimport { VPlang } from \".\";\nimport type { PlangsGraphBase, TPlangsVertex, TPlangsVertexName } from \"./generated\";\nimport { type FieldGithub, FieldStrDate } from \"./vertex_data_fields\";\nimport type { Image, Link, VertexBaseData } from \"./vertex_data_schemas\";\n\n/**\n * Vertex detail to display in an information box.\n * Having a stand-alone structure is useful for storing the info on localStorage.\n */\nexport type VertexDetail = {\n  description: string;\n  href: string;\n  key: string;\n  name: string;\n  ranking?: number;\n  shortDesc: string;\n  thumbUrl?: string;\n  urlGithub?: string;\n  urlHome?: string;\n  urlReddit?: string;\n  urlStackov?: string;\n  urlWikipedia?: string;\n  urlLanguish?: string;\n  vertexDesc: string;\n  vertexKind: string;\n  vertexName: string;\n\n  /** Schema.org type */\n  schemaType: string;\n\n  /** Arbitrary \"pill\" data. */\n  general: ({ kind: \"text\"; value: string; title?: string } | { kind: \"link\"; value: string; href: string; title?: string })[];\n\n  /** Related vertex by relationship name. */\n  relations: [string, { name: string; href: string }[]][];\n};\n\n// https://schema.org/Thing\nconst SCHEMA_TYPES: Record<TPlangsVertexName, string> = {\n  app: \"SoftwareApplication\",\n  author: \"Person\",\n  bundle: \"Collection\",\n  community: \"Organization\",\n  learning: \"CreativeWork\",\n  library: \"SoftwareLibrary\",\n  license: \"CreativeWork\",\n  paradigm: \"CreativeWork\",\n  plang: \"ComputerLanguage\",\n  platform: \"CreativeWork\",\n  post: \"BlogPosting\",\n  subsystem: \"SoftwareApplication\",\n  tag: \"DefinedTerm\",\n  tool: \"SoftwareApplication\",\n  typeSystem: \"CreativeWork\",\n};\n\nexport abstract class PlangsVertex<KeyPrefix extends string, Data extends VertexBaseData> extends Vertex<KeyPrefix, Data> {\n  constructor(\n    public readonly graph: PlangsGraphBase,\n    key: `${KeyPrefix}+${string}`,\n  ) {\n    super(key);\n  }\n\n  /** Matches the key prefix of vertices, ex: name: \"pl\", for \"plang\" nodes (\"pl+java\").  */\n  abstract readonly vertexKind: string;\n\n  /** Matches the Vertex collection accessor on the Graph instance. */\n  abstract readonly vertexDesc: string;\n\n  /** General description of Vertices of this kind. */\n  abstract readonly vertexName: TPlangsVertexName;\n\n  get schemaType(): string {\n    return SCHEMA_TYPES[this.vertexName];\n  }\n\n  /** Generate a detail of the vertex, used to render thumbnails and info boxes. */\n  get detail(): VertexDetail {\n    const relations: VertexDetail[\"relations\"] = [];\n    const vertex = this as unknown as TPlangsVertex;\n\n    for (const rel of vertex.relations.values()) {\n      const relValues = rel.values.filter(related => related.key !== vertex.key);\n      if (relValues.length === 0) continue;\n      relations.push([rel.edgeDesc, relValues.map(({ name, href }) => ({ name, href }))]);\n    }\n\n    const general: VertexDetail[\"general\"] = [];\n    if (vertex instanceof VPlang) {\n      tap(vertex.created.year, year => year && general.push({ kind: \"text\", value: `Appeared ${vertex.created.year}` }));\n      tap(vertex.isPopular, pop => pop && general.push({ kind: \"text\", value: \"Popular\", title: \"Languish's Rank <= #25 or popular on Github.\" }));\n      tap(vertex.isTranspiler, tsp => tsp && general.push({ kind: \"text\", value: \"Transpiler\", title: \"a.k.a. Source-to-Source Compiler.\" }));\n      tap(\n        vertex.releases.last,\n        rel => rel && general.push({ kind: \"text\", value: `Released ${rel.yearMonth ?? rel.version}`, title: \"Last Release we know about.\" }),\n      );\n      tap(\n        [vertex.urlLanguish, vertex.ranking && `#${vertex.ranking} on Languish`],\n        ([href, value]) => href && value && general.push({ kind: \"link\", href, value, title: value }),\n      );\n    }\n\n    for (const link of vertex.links ?? []) {\n      general.push({ kind: \"link\", href: link.url, value: link.title ?? \"Link\" });\n    }\n\n    return {\n      description: vertex.description,\n      href: vertex.href,\n      key: vertex.key,\n      name: vertex.name,\n      ranking: vertex.ranking,\n      shortDesc: vertex.shortDesc,\n      thumbUrl: vertex.thumbUrl,\n      urlGithub: vertex.urlGithub,\n      urlHome: vertex.urlHome,\n      urlReddit: vertex.urlReddit,\n      urlStackov: vertex.urlStackov,\n      urlWikipedia: vertex.urlWikipedia,\n      urlLanguish: vertex.urlLanguish,\n      vertexDesc: vertex.vertexDesc,\n      vertexKind: vertex.vertexKind,\n      vertexName: vertex.vertexName,\n      schemaType: vertex.schemaType,\n\n      general,\n      relations,\n    };\n  }\n\n  /** Internal path name for rendering the vertex in the web UI.  */\n  get href(): string {\n    if (this.vertexName === \"plang\") return `/${this.plainKey}`;\n    if (this.vertexName === \"post\") return `/blog/${this.plainKey}`;\n    return `/${this.vertexName.toLowerCase()}/${this.plainKey}`;\n  }\n\n  /** Node ranking, if the nodes are ranked. For instance, Plangs use Linguist data for ranking popularity. */\n  get ranking(): number | undefined {\n    return undefined;\n  }\n\n  get name(): string {\n    return this.data.name ? this.data.name : this.plainKey;\n  }\n\n  #lcName: string | undefined;\n\n  /** Lower case Name, used to compare agasint user search string. */\n  get lcName(): string {\n    if (!this.#lcName) this.#lcName = this.name.toLowerCase();\n    return this.#lcName;\n  }\n\n  get created(): FieldStrDate<\"created\"> {\n    return new FieldStrDate(\"created\", this);\n  }\n\n  get description(): string {\n    return this.data.description || this.name;\n  }\n\n  get shortDesc(): string {\n    if (this.data.shortDesc) return this.data.shortDesc;\n    const desc = this.description;\n    return desc.length > 100 ? `${desc.slice(0, 80)} ...` : desc;\n  }\n\n  get urlHome(): string | undefined {\n    return this.data.extHomeURL;\n  }\n\n  get urlGithub(): string | undefined {\n    return \"github\" in this ? (this.github as FieldGithub).url : undefined;\n  }\n\n  get urlStackov(): string | undefined {\n    return this.data.stackovTags ? `https://stackoverflow.com/questions/tagged/${this.data.stackovTags.join(\"+\")}` : undefined;\n  }\n\n  get urlReddit(): string | undefined {\n    return this.data.extRedditPath ? `https://reddit.com/r/${this.data.extRedditPath}` : undefined;\n  }\n\n  get urlWikipedia(): string | undefined {\n    return this.data.extWikipediaPath ? `https://en.wikipedia.org/wiki/${this.data.extWikipediaPath}` : undefined;\n  }\n\n  get urlLanguish(): string | undefined {\n    if (!(this instanceof VPlang) || !this.data.languishRanking) return undefined;\n    return `https://tjpalmer.github.io/languish/#names=${encodeURIComponent(this.name.toLowerCase())}`;\n  }\n\n  get links(): IterTap<Link> {\n    return new IterTap(this.data.links);\n  }\n\n  get images() {\n    return new IterTap(this.data.images);\n  }\n\n  get keywords(): IterTap<string> {\n    return new IterTap(this.data.keywords);\n  }\n\n  get keywordsRegexp(): RegExp | undefined {\n    const { keywords } = this.data;\n    if (!keywords) return undefined;\n    const lenient = keywords.map(k => k.replaceAll(/[- ]/g, \"\\\\s*.?\\\\s*\"));\n    return new RegExp(`\\\\b(${lenient.join(\"|\")})\\\\b`, \"i\");\n  }\n\n  get thumbUrl(): string | undefined {\n    return (this.images.find(({ kind }) => kind === \"logo\") ?? this.images.first)?.url;\n  }\n\n  addImages(images: Image[]): this {\n    arrayMerge((this.data.images ??= []), images, (i1, i2) => i1.url === i2.url);\n    return this;\n  }\n\n  addKeywords(keywords: string[]): this {\n    arrayMerge((this.data.keywords ??= []), keywords);\n    return this;\n  }\n\n  addLinks(links: Link[]): this {\n    arrayMerge((this.data.links ??= []), links, (l1, l2) => l1.url === l2.url);\n    return this;\n  }\n\n  addStackovTags(stackovTags: string[]): this {\n    arrayMerge((this.data.stackovTags ??= []), stackovTags);\n    return this;\n  }\n\n  /** Override merge to handle some array fields better. */\n  override merge(data: Partial<Data>): this {\n    const { keywords, images, links, stackovTags, ...rest } = data;\n\n    if (images) this.addImages(images);\n    if (keywords) this.addKeywords(keywords);\n    if (links) this.addLinks(links);\n    if (stackovTags) this.addStackovTags(stackovTags);\n\n    return super.merge(rest as Data);\n  }\n}\n", "/**  Do not modify manually! Generated by graphgen on 2024-12-27T06:53:53.098Z. */\n\nimport { Edges, RelFrom, RelTo, type SerializedGraph, Vertices } from \"@plangs/graphgen/library\";\n\n/** Import user defined classes and types. */\nimport * as VC from \".\";\nimport { PlangsVertex } from \"./vertex_base\";\nimport type * as VD from \"./vertex_data_schemas\";\n\n/** Used for better autocomplete. */\nexport type TPlangsClasses = {\n  app: VC.VApp;\n  author: VC.VAuthor;\n  bundle: VC.VBundle;\n  community: VC.VCommunity;\n  learning: VC.VLearning;\n  library: VC.VLibrary;\n  license: VC.VLicense;\n  paradigm: VC.VParadigm;\n  plang: VC.VPlang;\n  platform: VC.VPlatform;\n  post: VC.VPost;\n  subsystem: VC.VSubsystem;\n  tag: VC.VTag;\n  tool: VC.VTool;\n  typeSystem: VC.VTypeSystem;\n};\n\n/** Every Vertex Name. */\nexport type TPlangsVertexName = keyof TPlangsClasses;\n\n/** Every Generated Vertex Class. */\nexport type TPlangsVertex = TPlangsClasses[TPlangsVertexName];\n\n/** Supported relations of each class. */\nexport type TPlangsRelations = {\n  app: VAppRelName;\n  author: VAuthorRelName;\n  bundle: VBundleRelName;\n  community: VCommunityRelName;\n  learning: VLearningRelName;\n  library: VLibraryRelName;\n  license: VLicenseRelName;\n  paradigm: VParadigmRelName;\n  plang: VPlangRelName;\n  platform: VPlatformRelName;\n  post: VPostRelName;\n  subsystem: VSubsystemRelName;\n  tag: VTagRelName;\n  tool: VToolRelName;\n  typeSystem: VTypeSystemRelName;\n};\n\n/** Supported edges of the graph. */\nexport type TPlangsEdgeName = keyof PlangsGraphBase[\"edges\"];\n\n/** Base class for the Plangs graph, generated from its specification. */\nexport class PlangsGraphBase {\n  /** Return a type checked object identifying a relationship of a specific kind of Vertex. */\n  static relConfig<T extends TPlangsVertexName>(vertexName: T, vertexRel: TPlangsRelations[T]) {\n    // biome-ignore lint/style/noNonNullAssertion: correct by construction.\n    const klass = PlangsGraphBase.vertexClass(vertexName)!;\n    // @ts-ignore correct by construction.\n    const { edgeName, direction }: { edgeName: TPlangsEdgeName; direction: \"direct\" | \"inverse\" } = klass.relConfig[vertexRel];\n    return { kind: \"rel\", edgeName, direction } as const;\n  }\n\n  /** Return a type checked object identifying a property of the class that is \"readable\" (a prop returning a String, Boolean or Nunber). */\n  static propConfig<T extends TPlangsVertexName>(vertexName: T, vertexProp: keyof TPlangsClasses[T]) {\n    return { kind: \"prop\", vertexName, vertexProp } as const;\n  }\n\n  /** Get a Vertex class by its Vertex name. */\n  static vertexClass<T extends TPlangsVertexName>(vertexName: T) {\n    // We cannot use a Map here because each of the classes will not be initialized yet.\n    if (vertexName === \"app\") return VC.VApp;\n    if (vertexName === \"author\") return VC.VAuthor;\n    if (vertexName === \"bundle\") return VC.VBundle;\n    if (vertexName === \"community\") return VC.VCommunity;\n    if (vertexName === \"learning\") return VC.VLearning;\n    if (vertexName === \"library\") return VC.VLibrary;\n    if (vertexName === \"license\") return VC.VLicense;\n    if (vertexName === \"paradigm\") return VC.VParadigm;\n    if (vertexName === \"plang\") return VC.VPlang;\n    if (vertexName === \"platform\") return VC.VPlatform;\n    if (vertexName === \"post\") return VC.VPost;\n    if (vertexName === \"subsystem\") return VC.VSubsystem;\n    if (vertexName === \"tag\") return VC.VTag;\n    if (vertexName === \"tool\") return VC.VTool;\n    if (vertexName === \"typeSystem\") return VC.VTypeSystem;\n  }\n\n  /** Vertex kinds per Vertex Name. The kind is the prefix of a Vertex Key. */\n  static readonly vertexKind = new Map<TPlangsVertexName, string>([\n    [\"app\", \"app\"],\n    [\"author\", \"author\"],\n    [\"bundle\", \"bun\"],\n    [\"community\", \"comm\"],\n    [\"learning\", \"learn\"],\n    [\"library\", \"lib\"],\n    [\"license\", \"lic\"],\n    [\"paradigm\", \"para\"],\n    [\"plang\", \"pl\"],\n    [\"platform\", \"plat\"],\n    [\"post\", \"post\"],\n    [\"subsystem\", \"sys\"],\n    [\"tag\", \"tag\"],\n    [\"tool\", \"tool\"],\n    [\"typeSystem\", \"tsys\"],\n  ]);\n\n  /** Reverse map of vertexKind. */\n  static readonly vertexNameByKind = new Map<string, TPlangsVertexName>(Array.from(PlangsGraphBase.vertexKind.entries()).map(([k, v]) => [v, k]));\n\n  /** Get a vertex by key, if the kind of vertex is known. */\n  getVertex(vertexKey: string): TPlangsVertex | undefined {\n    const kind = vertexKey.split(\"+\", 2)[0] as TPlangsVertexName;\n    const vertexName = PlangsGraphBase.vertexNameByKind.get(kind);\n    if (!vertexName) return;\n    return this.vertices[vertexName]?.get(vertexKey as any);\n  }\n\n  // Create a Vertices instances for each vertex.\n\n  readonly app = new Vertices<VC.VApp>(\"app\", \"app\", key => new VC.VApp(this, key));\n  readonly author = new Vertices<VC.VAuthor>(\"author\", \"author\", key => new VC.VAuthor(this, key));\n  readonly bundle = new Vertices<VC.VBundle>(\"bundle\", \"bun\", key => new VC.VBundle(this, key));\n  readonly community = new Vertices<VC.VCommunity>(\"community\", \"comm\", key => new VC.VCommunity(this, key));\n  readonly learning = new Vertices<VC.VLearning>(\"learning\", \"learn\", key => new VC.VLearning(this, key));\n  readonly library = new Vertices<VC.VLibrary>(\"library\", \"lib\", key => new VC.VLibrary(this, key));\n  readonly license = new Vertices<VC.VLicense>(\"license\", \"lic\", key => new VC.VLicense(this, key));\n  readonly paradigm = new Vertices<VC.VParadigm>(\"paradigm\", \"para\", key => new VC.VParadigm(this, key));\n  readonly plang = new Vertices<VC.VPlang>(\"plang\", \"pl\", key => new VC.VPlang(this, key));\n  readonly platform = new Vertices<VC.VPlatform>(\"platform\", \"plat\", key => new VC.VPlatform(this, key));\n  readonly post = new Vertices<VC.VPost>(\"post\", \"post\", key => new VC.VPost(this, key));\n  readonly subsystem = new Vertices<VC.VSubsystem>(\"subsystem\", \"sys\", key => new VC.VSubsystem(this, key));\n  readonly tag = new Vertices<VC.VTag>(\"tag\", \"tag\", key => new VC.VTag(this, key));\n  readonly tool = new Vertices<VC.VTool>(\"tool\", \"tool\", key => new VC.VTool(this, key));\n  readonly typeSystem = new Vertices<VC.VTypeSystem>(\"typeSystem\", \"tsys\", key => new VC.VTypeSystem(this, key));\n\n  /** All vertex collections. */\n  readonly vertices = {\n    app: this.app,\n    author: this.author,\n    bundle: this.bundle,\n    community: this.community,\n    learning: this.learning,\n    library: this.library,\n    license: this.license,\n    paradigm: this.paradigm,\n    plang: this.plang,\n    platform: this.platform,\n    post: this.post,\n    subsystem: this.subsystem,\n    tag: this.tag,\n    tool: this.tool,\n    typeSystem: this.typeSystem,\n  } as const;\n\n  /** All edge collections. */\n  readonly edges = {\n    appRelPlatforms: new Edges(this.app, this.platform, \"Platforms\", \"Apps\"),\n    appRelWrittenWith: new Edges(this.app, this.plang, \"Plangs\", \"Apps\"),\n    authorRelCommunites: new Edges(this.author, this.community, \"Communites\", \"Members\"),\n    bundleRelPlangs: new Edges(this.bundle, this.plang, \"Plangs\", \"Bundles\"),\n    bundleRelTools: new Edges(this.bundle, this.tool, \"Tools\", \"Bundles\"),\n    communityRelApps: new Edges(this.community, this.app, \"Apps\", \"Communities\"),\n    communityRelLibraries: new Edges(this.community, this.library, \"Libraries\", \"Communities\"),\n    communityRelPlangs: new Edges(this.community, this.plang, \"Plangs\", \"Communities\"),\n    communityRelSubsystems: new Edges(this.community, this.subsystem, \"Subsystems\", \"Communities\"),\n    communityRelTools: new Edges(this.community, this.tool, \"Tools\", \"Communities\"),\n    learningRelApps: new Edges(this.learning, this.app, \"Apps\", \"Learning Resources\"),\n    learningRelCommunities: new Edges(this.learning, this.community, \"Communities\", \"Learning Resources\"),\n    learningRelLibraries: new Edges(this.learning, this.library, \"Libraries\", \"Learning Resources\"),\n    learningRelPlangs: new Edges(this.learning, this.plang, \"Plangs\", \"Learning Resources\"),\n    learningRelSubsystems: new Edges(this.learning, this.subsystem, \"Subsystems\", \"Learning Resources\"),\n    learningRelTools: new Edges(this.learning, this.tool, \"Tools\", \"Learning Resources\"),\n    libraryRelPlangs: new Edges(this.library, this.plang, \"Plangs\", \"Libraries\"),\n    libraryRelPlatforms: new Edges(this.library, this.platform, \"Platforms\", \"Libraries\"),\n    libraryRelWrittenWith: new Edges(this.library, this.plang, \"Written With\", \"Used for Libraries\"),\n    licenseRelApps: new Edges(this.license, this.app, \"Apps\", \"Licenses\"),\n    licenseRelLibraries: new Edges(this.license, this.library, \"Libraries\", \"Licenses\"),\n    licenseRelPlangs: new Edges(this.license, this.plang, \"Plangs\", \"Licenses\"),\n    licenseRelSubsystems: new Edges(this.license, this.subsystem, \"Subsystems\", \"Licenses\"),\n    licenseRelTools: new Edges(this.license, this.tool, \"Tools\", \"Licenses\"),\n    plangRelCompilesTo: new Edges(this.plang, this.plang, \"Compiles To\", \"Target Of\"),\n    plangRelDialectOf: new Edges(this.plang, this.plang, \"Dialect of\", \"Dialects\"),\n    plangRelImplements: new Edges(this.plang, this.plang, \"Implements\", \"Implemented By\"),\n    plangRelInfluencedBy: new Edges(this.plang, this.plang, \"Influenced By\", \"Influenced\"),\n    plangRelParadigms: new Edges(this.plang, this.paradigm, \"Paradigms\", \"Plangs\"),\n    plangRelPlatforms: new Edges(this.plang, this.platform, \"Platforms\", \"Plangs\"),\n    plangRelTools: new Edges(this.plang, this.tool, \"Tools\", \"Plangs\"),\n    plangRelTypeSystems: new Edges(this.plang, this.typeSystem, \"Type Systems\", \"Plangs\"),\n    plangRelWrittenWith: new Edges(this.plang, this.plang, \"Written With\", \"Used to Write\"),\n    postRelApps: new Edges(this.post, this.app, \"Apps\", \"Posts\"),\n    postRelAuthors: new Edges(this.post, this.author, \"Authors\", \"Posts\"),\n    postRelCommunities: new Edges(this.post, this.community, \"Communities\", \"Posts\"),\n    postRelLearning: new Edges(this.post, this.learning, \"Learning Resources\", \"Posts\"),\n    postRelLibraries: new Edges(this.post, this.library, \"Libraries\", \"Posts\"),\n    postRelPlangs: new Edges(this.post, this.plang, \"Plangs\", \"Posts\"),\n    postRelSubsystems: new Edges(this.post, this.subsystem, \"Subsystems\", \"Posts\"),\n    postRelTools: new Edges(this.post, this.tool, \"Tools\", \"Posts\"),\n    subsystemRelPlatforms: new Edges(this.subsystem, this.platform, \"Platforms\", \"Subsystems\"),\n    subsystemRelWrittenWith: new Edges(this.subsystem, this.plang, \"Plangs\", \"Subsystems\"),\n    tagRelApps: new Edges(this.tag, this.app, \"Apps tagged\", \"Tags\"),\n    tagRelCommunities: new Edges(this.tag, this.community, \"Communities\", \"Tags\"),\n    tagRelLearning: new Edges(this.tag, this.learning, \"Learning Resources\", \"Tags\"),\n    tagRelLibraries: new Edges(this.tag, this.library, \"Libraries\", \"Tags\"),\n    tagRelPlangs: new Edges(this.tag, this.plang, \"Plangs\", \"Tags\"),\n    tagRelSubsystems: new Edges(this.tag, this.subsystem, \"Subsystems\", \"Tags\"),\n    tagRelTools: new Edges(this.tag, this.tool, \"Tools\", \"Tags\"),\n    toolRelPlatforms: new Edges(this.tool, this.platform, \"Platforms\", \"Tools\"),\n    toolRelWrittenWith: new Edges(this.tool, this.plang, \"Implemented With\", \"Tool Plang\"),\n  } as const;\n\n  toJSON(): SerializedGraph {\n    return {\n      vertices: Object.fromEntries(Object.entries(this.vertices).map(([k, v]) => [k, v.toJSON()])),\n      edges: Object.fromEntries(Object.entries(this.edges).map(([k, e]) => [k, e.toJSON()])),\n    };\n  }\n\n  loadJSON(data: SerializedGraph): this {\n    for (const [vertexName, vertices] of Object.entries(data.vertices)) {\n      const map = this.vertices[vertexName as TPlangsVertexName];\n      for (const [vertexKey, vertexData] of Object.entries(vertices)) {\n        map.set(vertexKey as any, vertexData as any);\n      }\n    }\n    for (const [edgeName, edges] of Object.entries(data.edges)) {\n      const map = this.edges[edgeName as keyof typeof this.edges];\n      for (const [fromKey, toKeys] of Object.entries(edges)) {\n        map.add(fromKey as any, ...(toKeys as any[]));\n      }\n    }\n    return this;\n  }\n}\n\n/** Type of the key of an instance of {@link VApp}. */\nexport type VAppKey = `app+${string}`;\n\nexport type VAppRelName = keyof (typeof VAppBase)[\"relConfig\"];\n\n/** Software Application */\nexport abstract class VAppBase extends PlangsVertex<\"app\", VD.VAppData> {\n  static readonly vertexKind = \"app\" as const;\n  static readonly vertexName = \"app\" as const;\n  static readonly vertexDesc = \"Software Application\";\n  static readonly relConfig = {\n    relCommunities: { edgeName: \"communityRelApps\", direction: \"inverse\", gen: false },\n    relLearning: { edgeName: \"learningRelApps\", direction: \"inverse\", gen: false },\n    relLicenses: { edgeName: \"licenseRelApps\", direction: \"inverse\", gen: true },\n    relPlatforms: { edgeName: \"appRelPlatforms\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelApps\", direction: \"inverse\", gen: false },\n    relTags: { edgeName: \"tagRelApps\", direction: \"inverse\", gen: true },\n    relWrittenWith: { edgeName: \"appRelWrittenWith\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VAppBase.vertexKind;\n  override readonly vertexDesc = VAppBase.vertexDesc;\n  override readonly vertexName = VAppBase.vertexName;\n  readonly relConfig = VAppBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VAppBase.relConfig) as VAppRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Communities `VCommunity-[communityRelApps]->(this:VApp)`. Inverse: {@link VC.VCommunity.relApps}. */\n  get relCommunities() {\n    return new RelTo(this as unknown as VC.VApp, this.graph.edges.communityRelApps);\n  }\n\n  /** Learning Resources `VLearning-[learningRelApps]->(this:VApp)`. Inverse: {@link VC.VLearning.relApps}. */\n  get relLearning() {\n    return new RelTo(this as unknown as VC.VApp, this.graph.edges.learningRelApps);\n  }\n\n  /** Licenses `VLicense-[licenseRelApps]->(this:VApp)`. Inverse: {@link VC.VLicense.relApps}. */\n  get relLicenses() {\n    return new RelTo(this as unknown as VC.VApp, this.graph.edges.licenseRelApps);\n  }\n\n  /** Platforms `(this:VApp)-[appRelPlatforms]->VPlatform`. Inverse: {@link VC.VPlatform.relApps}. */\n  get relPlatforms() {\n    return new RelFrom(this as unknown as VC.VApp, this.graph.edges.appRelPlatforms);\n  }\n\n  /** Posts `VPost-[postRelApps]->(this:VApp)`. Inverse: {@link VC.VPost.relApps}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VApp, this.graph.edges.postRelApps);\n  }\n\n  /** Tags `VTag-[tagRelApps]->(this:VApp)`. Inverse: {@link VC.VTag.relApps}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VApp, this.graph.edges.tagRelApps);\n  }\n\n  /** Plangs `(this:VApp)-[appRelWrittenWith]->VPlang`. Inverse: {@link VC.VPlang.relApps}. */\n  get relWrittenWith() {\n    return new RelFrom(this as unknown as VC.VApp, this.graph.edges.appRelWrittenWith);\n  }\n}\n\n/** Type of the key of an instance of {@link VAuthor}. */\nexport type VAuthorKey = `author+${string}`;\n\nexport type VAuthorRelName = keyof (typeof VAuthorBase)[\"relConfig\"];\n\n/** Author */\nexport abstract class VAuthorBase extends PlangsVertex<\"author\", VD.VAuthorData> {\n  static readonly vertexKind = \"author\" as const;\n  static readonly vertexName = \"author\" as const;\n  static readonly vertexDesc = \"Author\";\n  static readonly relConfig = {\n    relCommunites: { edgeName: \"authorRelCommunites\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelAuthors\", direction: \"inverse\", gen: false },\n  } as const;\n\n  override readonly vertexKind = VAuthorBase.vertexKind;\n  override readonly vertexDesc = VAuthorBase.vertexDesc;\n  override readonly vertexName = VAuthorBase.vertexName;\n  readonly relConfig = VAuthorBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VAuthorBase.relConfig) as VAuthorRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Communites `(this:VAuthor)-[authorRelCommunites]->VCommunity`. Inverse: {@link VC.VCommunity.relMembers}. */\n  get relCommunites() {\n    return new RelFrom(this as unknown as VC.VAuthor, this.graph.edges.authorRelCommunites);\n  }\n\n  /** Posts `VPost-[postRelAuthors]->(this:VAuthor)`. Inverse: {@link VC.VPost.relAuthors}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VAuthor, this.graph.edges.postRelAuthors);\n  }\n}\n\n/** Type of the key of an instance of {@link VBundle}. */\nexport type VBundleKey = `bun+${string}`;\n\nexport type VBundleRelName = keyof (typeof VBundleBase)[\"relConfig\"];\n\n/** Bundle of Tools */\nexport abstract class VBundleBase extends PlangsVertex<\"bun\", VD.VBundleData> {\n  static readonly vertexKind = \"bun\" as const;\n  static readonly vertexName = \"bundle\" as const;\n  static readonly vertexDesc = \"Bundle of Tools\";\n  static readonly relConfig = {\n    relPlangs: { edgeName: \"bundleRelPlangs\", direction: \"direct\", gen: false },\n    relTools: { edgeName: \"bundleRelTools\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VBundleBase.vertexKind;\n  override readonly vertexDesc = VBundleBase.vertexDesc;\n  override readonly vertexName = VBundleBase.vertexName;\n  readonly relConfig = VBundleBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VBundleBase.relConfig) as VBundleRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Plangs `(this:VBundle)-[bundleRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relBundles}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VBundle, this.graph.edges.bundleRelPlangs);\n  }\n\n  /** Tools `(this:VBundle)-[bundleRelTools]->VTool`. Inverse: {@link VC.VTool.relBundles}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VBundle, this.graph.edges.bundleRelTools);\n  }\n}\n\n/** Type of the key of an instance of {@link VCommunity}. */\nexport type VCommunityKey = `comm+${string}`;\n\nexport type VCommunityRelName = keyof (typeof VCommunityBase)[\"relConfig\"];\n\n/** Community */\nexport abstract class VCommunityBase extends PlangsVertex<\"comm\", VD.VCommunityData> {\n  static readonly vertexKind = \"comm\" as const;\n  static readonly vertexName = \"community\" as const;\n  static readonly vertexDesc = \"Community\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"communityRelApps\", direction: \"direct\", gen: true },\n    relLearning: { edgeName: \"learningRelCommunities\", direction: \"inverse\", gen: false },\n    relLibraries: { edgeName: \"communityRelLibraries\", direction: \"direct\", gen: true },\n    relMembers: { edgeName: \"authorRelCommunites\", direction: \"inverse\", gen: false },\n    relPlangs: { edgeName: \"communityRelPlangs\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelCommunities\", direction: \"inverse\", gen: false },\n    relSubsystems: { edgeName: \"communityRelSubsystems\", direction: \"direct\", gen: true },\n    relTags: { edgeName: \"tagRelCommunities\", direction: \"inverse\", gen: true },\n    relTools: { edgeName: \"communityRelTools\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VCommunityBase.vertexKind;\n  override readonly vertexDesc = VCommunityBase.vertexDesc;\n  override readonly vertexName = VCommunityBase.vertexName;\n  readonly relConfig = VCommunityBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VCommunityBase.relConfig) as VCommunityRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps `(this:VCommunity)-[communityRelApps]->VApp`. Inverse: {@link VC.VApp.relCommunities}. */\n  get relApps() {\n    return new RelFrom(this as unknown as VC.VCommunity, this.graph.edges.communityRelApps);\n  }\n\n  /** Learning Resources `VLearning-[learningRelCommunities]->(this:VCommunity)`. Inverse: {@link VC.VLearning.relCommunities}. */\n  get relLearning() {\n    return new RelTo(this as unknown as VC.VCommunity, this.graph.edges.learningRelCommunities);\n  }\n\n  /** Libraries `(this:VCommunity)-[communityRelLibraries]->VLibrary`. Inverse: {@link VC.VLibrary.relCommunities}. */\n  get relLibraries() {\n    return new RelFrom(this as unknown as VC.VCommunity, this.graph.edges.communityRelLibraries);\n  }\n\n  /** Members `VAuthor-[authorRelCommunites]->(this:VCommunity)`. Inverse: {@link VC.VAuthor.relCommunites}. */\n  get relMembers() {\n    return new RelTo(this as unknown as VC.VCommunity, this.graph.edges.authorRelCommunites);\n  }\n\n  /** Plangs `(this:VCommunity)-[communityRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relCommunities}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VCommunity, this.graph.edges.communityRelPlangs);\n  }\n\n  /** Posts `VPost-[postRelCommunities]->(this:VCommunity)`. Inverse: {@link VC.VPost.relCommunities}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VCommunity, this.graph.edges.postRelCommunities);\n  }\n\n  /** Subsystems `(this:VCommunity)-[communityRelSubsystems]->VSubsystem`. Inverse: {@link VC.VSubsystem.relCommunities}. */\n  get relSubsystems() {\n    return new RelFrom(this as unknown as VC.VCommunity, this.graph.edges.communityRelSubsystems);\n  }\n\n  /** Tags `VTag-[tagRelCommunities]->(this:VCommunity)`. Inverse: {@link VC.VTag.relCommunities}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VCommunity, this.graph.edges.tagRelCommunities);\n  }\n\n  /** Tools `(this:VCommunity)-[communityRelTools]->VTool`. Inverse: {@link VC.VTool.relCommunities}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VCommunity, this.graph.edges.communityRelTools);\n  }\n}\n\n/** Type of the key of an instance of {@link VLearning}. */\nexport type VLearningKey = `learn+${string}`;\n\nexport type VLearningRelName = keyof (typeof VLearningBase)[\"relConfig\"];\n\n/** Learning Resource */\nexport abstract class VLearningBase extends PlangsVertex<\"learn\", VD.VLearningData> {\n  static readonly vertexKind = \"learn\" as const;\n  static readonly vertexName = \"learning\" as const;\n  static readonly vertexDesc = \"Learning Resource\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"learningRelApps\", direction: \"direct\", gen: true },\n    relCommunities: { edgeName: \"learningRelCommunities\", direction: \"direct\", gen: true },\n    relLibraries: { edgeName: \"learningRelLibraries\", direction: \"direct\", gen: true },\n    relPlangs: { edgeName: \"learningRelPlangs\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelLearning\", direction: \"inverse\", gen: false },\n    relSubsystems: { edgeName: \"learningRelSubsystems\", direction: \"direct\", gen: true },\n    relTags: { edgeName: \"tagRelLearning\", direction: \"inverse\", gen: true },\n    relTools: { edgeName: \"learningRelTools\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VLearningBase.vertexKind;\n  override readonly vertexDesc = VLearningBase.vertexDesc;\n  override readonly vertexName = VLearningBase.vertexName;\n  readonly relConfig = VLearningBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VLearningBase.relConfig) as VLearningRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps `(this:VLearning)-[learningRelApps]->VApp`. Inverse: {@link VC.VApp.relLearning}. */\n  get relApps() {\n    return new RelFrom(this as unknown as VC.VLearning, this.graph.edges.learningRelApps);\n  }\n\n  /** Communities `(this:VLearning)-[learningRelCommunities]->VCommunity`. Inverse: {@link VC.VCommunity.relLearning}. */\n  get relCommunities() {\n    return new RelFrom(this as unknown as VC.VLearning, this.graph.edges.learningRelCommunities);\n  }\n\n  /** Libraries `(this:VLearning)-[learningRelLibraries]->VLibrary`. Inverse: {@link VC.VLibrary.relLearning}. */\n  get relLibraries() {\n    return new RelFrom(this as unknown as VC.VLearning, this.graph.edges.learningRelLibraries);\n  }\n\n  /** Plangs `(this:VLearning)-[learningRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relLearning}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VLearning, this.graph.edges.learningRelPlangs);\n  }\n\n  /** Posts `VPost-[postRelLearning]->(this:VLearning)`. Inverse: {@link VC.VPost.relLearning}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VLearning, this.graph.edges.postRelLearning);\n  }\n\n  /** Subsystems `(this:VLearning)-[learningRelSubsystems]->VSubsystem`. Inverse: {@link VC.VSubsystem.relLearning}. */\n  get relSubsystems() {\n    return new RelFrom(this as unknown as VC.VLearning, this.graph.edges.learningRelSubsystems);\n  }\n\n  /** Tags `VTag-[tagRelLearning]->(this:VLearning)`. Inverse: {@link VC.VTag.relLearning}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VLearning, this.graph.edges.tagRelLearning);\n  }\n\n  /** Tools `(this:VLearning)-[learningRelTools]->VTool`. Inverse: {@link VC.VTool.relLearning}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VLearning, this.graph.edges.learningRelTools);\n  }\n}\n\n/** Type of the key of an instance of {@link VLibrary}. */\nexport type VLibraryKey = `lib+${string}`;\n\nexport type VLibraryRelName = keyof (typeof VLibraryBase)[\"relConfig\"];\n\n/** Software Library */\nexport abstract class VLibraryBase extends PlangsVertex<\"lib\", VD.VLibraryData> {\n  static readonly vertexKind = \"lib\" as const;\n  static readonly vertexName = \"library\" as const;\n  static readonly vertexDesc = \"Software Library\";\n  static readonly relConfig = {\n    relCommunities: { edgeName: \"communityRelLibraries\", direction: \"inverse\", gen: false },\n    relLearning: { edgeName: \"learningRelLibraries\", direction: \"inverse\", gen: false },\n    relLicenses: { edgeName: \"licenseRelLibraries\", direction: \"inverse\", gen: true },\n    relPlangs: { edgeName: \"libraryRelPlangs\", direction: \"direct\", gen: true },\n    relPlatforms: { edgeName: \"libraryRelPlatforms\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelLibraries\", direction: \"inverse\", gen: false },\n    relTags: { edgeName: \"tagRelLibraries\", direction: \"inverse\", gen: true },\n    relWrittenWith: { edgeName: \"libraryRelWrittenWith\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VLibraryBase.vertexKind;\n  override readonly vertexDesc = VLibraryBase.vertexDesc;\n  override readonly vertexName = VLibraryBase.vertexName;\n  readonly relConfig = VLibraryBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VLibraryBase.relConfig) as VLibraryRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Communities `VCommunity-[communityRelLibraries]->(this:VLibrary)`. Inverse: {@link VC.VCommunity.relLibraries}. */\n  get relCommunities() {\n    return new RelTo(this as unknown as VC.VLibrary, this.graph.edges.communityRelLibraries);\n  }\n\n  /** Learning Resources `VLearning-[learningRelLibraries]->(this:VLibrary)`. Inverse: {@link VC.VLearning.relLibraries}. */\n  get relLearning() {\n    return new RelTo(this as unknown as VC.VLibrary, this.graph.edges.learningRelLibraries);\n  }\n\n  /** Licenses `VLicense-[licenseRelLibraries]->(this:VLibrary)`. Inverse: {@link VC.VLicense.relLibraries}. */\n  get relLicenses() {\n    return new RelTo(this as unknown as VC.VLibrary, this.graph.edges.licenseRelLibraries);\n  }\n\n  /** Plangs `(this:VLibrary)-[libraryRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relLibraries}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VLibrary, this.graph.edges.libraryRelPlangs);\n  }\n\n  /** Platforms `(this:VLibrary)-[libraryRelPlatforms]->VPlatform`. Inverse: {@link VC.VPlatform.relLibraries}. */\n  get relPlatforms() {\n    return new RelFrom(this as unknown as VC.VLibrary, this.graph.edges.libraryRelPlatforms);\n  }\n\n  /** Posts `VPost-[postRelLibraries]->(this:VLibrary)`. Inverse: {@link VC.VPost.relLibraries}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VLibrary, this.graph.edges.postRelLibraries);\n  }\n\n  /** Tags `VTag-[tagRelLibraries]->(this:VLibrary)`. Inverse: {@link VC.VTag.relLibraries}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VLibrary, this.graph.edges.tagRelLibraries);\n  }\n\n  /** Written With `(this:VLibrary)-[libraryRelWrittenWith]->VPlang`. Inverse: {@link VC.VPlang.relUsedInLibrary}. */\n  get relWrittenWith() {\n    return new RelFrom(this as unknown as VC.VLibrary, this.graph.edges.libraryRelWrittenWith);\n  }\n}\n\n/** Type of the key of an instance of {@link VLicense}. */\nexport type VLicenseKey = `lic+${string}`;\n\nexport type VLicenseRelName = keyof (typeof VLicenseBase)[\"relConfig\"];\n\n/** Software License */\nexport abstract class VLicenseBase extends PlangsVertex<\"lic\", VD.VLicenseData> {\n  static readonly vertexKind = \"lic\" as const;\n  static readonly vertexName = \"license\" as const;\n  static readonly vertexDesc = \"Software License\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"licenseRelApps\", direction: \"direct\", gen: false },\n    relLibraries: { edgeName: \"licenseRelLibraries\", direction: \"direct\", gen: false },\n    relPlangs: { edgeName: \"licenseRelPlangs\", direction: \"direct\", gen: false },\n    relSubsystems: { edgeName: \"licenseRelSubsystems\", direction: \"direct\", gen: false },\n    relTools: { edgeName: \"licenseRelTools\", direction: \"direct\", gen: false },\n  } as const;\n\n  override readonly vertexKind = VLicenseBase.vertexKind;\n  override readonly vertexDesc = VLicenseBase.vertexDesc;\n  override readonly vertexName = VLicenseBase.vertexName;\n  readonly relConfig = VLicenseBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VLicenseBase.relConfig) as VLicenseRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps `(this:VLicense)-[licenseRelApps]->VApp`. Inverse: {@link VC.VApp.relLicenses}. */\n  get relApps() {\n    return new RelFrom(this as unknown as VC.VLicense, this.graph.edges.licenseRelApps);\n  }\n\n  /** Libraries `(this:VLicense)-[licenseRelLibraries]->VLibrary`. Inverse: {@link VC.VLibrary.relLicenses}. */\n  get relLibraries() {\n    return new RelFrom(this as unknown as VC.VLicense, this.graph.edges.licenseRelLibraries);\n  }\n\n  /** Plangs `(this:VLicense)-[licenseRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relLicenses}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VLicense, this.graph.edges.licenseRelPlangs);\n  }\n\n  /** Subsystems `(this:VLicense)-[licenseRelSubsystems]->VSubsystem`. Inverse: {@link VC.VSubsystem.relLicenses}. */\n  get relSubsystems() {\n    return new RelFrom(this as unknown as VC.VLicense, this.graph.edges.licenseRelSubsystems);\n  }\n\n  /** Tools `(this:VLicense)-[licenseRelTools]->VTool`. Inverse: {@link VC.VTool.relLicenses}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VLicense, this.graph.edges.licenseRelTools);\n  }\n}\n\n/** Type of the key of an instance of {@link VParadigm}. */\nexport type VParadigmKey = `para+${string}`;\n\nexport type VParadigmRelName = keyof (typeof VParadigmBase)[\"relConfig\"];\n\n/** Programming Language Paradigm */\nexport abstract class VParadigmBase extends PlangsVertex<\"para\", VD.VParadigmData> {\n  static readonly vertexKind = \"para\" as const;\n  static readonly vertexName = \"paradigm\" as const;\n  static readonly vertexDesc = \"Programming Language Paradigm\";\n  static readonly relConfig = { relPlangs: { edgeName: \"plangRelParadigms\", direction: \"inverse\", gen: false } } as const;\n\n  override readonly vertexKind = VParadigmBase.vertexKind;\n  override readonly vertexDesc = VParadigmBase.vertexDesc;\n  override readonly vertexName = VParadigmBase.vertexName;\n  readonly relConfig = VParadigmBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VParadigmBase.relConfig) as VParadigmRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Plangs `VPlang-[plangRelParadigms]->(this:VParadigm)`. Inverse: {@link VC.VPlang.relParadigms}. */\n  get relPlangs() {\n    return new RelTo(this as unknown as VC.VParadigm, this.graph.edges.plangRelParadigms);\n  }\n}\n\n/** Type of the key of an instance of {@link VPlang}. */\nexport type VPlangKey = `pl+${string}`;\n\nexport type VPlangRelName = keyof (typeof VPlangBase)[\"relConfig\"];\n\n/** Programming Language */\nexport abstract class VPlangBase extends PlangsVertex<\"pl\", VD.VPlangData> {\n  static readonly vertexKind = \"pl\" as const;\n  static readonly vertexName = \"plang\" as const;\n  static readonly vertexDesc = \"Programming Language\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"appRelWrittenWith\", direction: \"inverse\", gen: false },\n    relBundles: { edgeName: \"bundleRelPlangs\", direction: \"inverse\", gen: false },\n    relCommunities: { edgeName: \"communityRelPlangs\", direction: \"inverse\", gen: false },\n    relCompilesTo: { edgeName: \"plangRelCompilesTo\", direction: \"direct\", gen: true },\n    relDialectOf: { edgeName: \"plangRelDialectOf\", direction: \"direct\", gen: true },\n    relDialects: { edgeName: \"plangRelDialectOf\", direction: \"inverse\", gen: false },\n    relImplementedBy: { edgeName: \"plangRelImplements\", direction: \"inverse\", gen: false },\n    relImplements: { edgeName: \"plangRelImplements\", direction: \"direct\", gen: true },\n    relInfluenced: { edgeName: \"plangRelInfluencedBy\", direction: \"inverse\", gen: false },\n    relInfluencedBy: { edgeName: \"plangRelInfluencedBy\", direction: \"direct\", gen: true },\n    relLearning: { edgeName: \"learningRelPlangs\", direction: \"inverse\", gen: false },\n    relLibraries: { edgeName: \"libraryRelPlangs\", direction: \"inverse\", gen: false },\n    relLicenses: { edgeName: \"licenseRelPlangs\", direction: \"inverse\", gen: true },\n    relParadigms: { edgeName: \"plangRelParadigms\", direction: \"direct\", gen: true },\n    relPlatforms: { edgeName: \"plangRelPlatforms\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelPlangs\", direction: \"inverse\", gen: false },\n    relSubsystems: { edgeName: \"subsystemRelWrittenWith\", direction: \"inverse\", gen: false },\n    relTags: { edgeName: \"tagRelPlangs\", direction: \"inverse\", gen: true },\n    relTargetOf: { edgeName: \"plangRelCompilesTo\", direction: \"inverse\", gen: false },\n    relTools: { edgeName: \"plangRelTools\", direction: \"direct\", gen: false },\n    relToolsUsing: { edgeName: \"toolRelWrittenWith\", direction: \"inverse\", gen: false },\n    relTypeSystems: { edgeName: \"plangRelTypeSystems\", direction: \"direct\", gen: true },\n    relUsedInLibrary: { edgeName: \"libraryRelWrittenWith\", direction: \"inverse\", gen: false },\n    relUsedToWrite: { edgeName: \"plangRelWrittenWith\", direction: \"inverse\", gen: false },\n    relWrittenWith: { edgeName: \"plangRelWrittenWith\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VPlangBase.vertexKind;\n  override readonly vertexDesc = VPlangBase.vertexDesc;\n  override readonly vertexName = VPlangBase.vertexName;\n  readonly relConfig = VPlangBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VPlangBase.relConfig) as VPlangRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps `VApp-[appRelWrittenWith]->(this:VPlang)`. Inverse: {@link VC.VApp.relWrittenWith}. */\n  get relApps() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.appRelWrittenWith);\n  }\n\n  /** Bundles `VBundle-[bundleRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VBundle.relPlangs}. */\n  get relBundles() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.bundleRelPlangs);\n  }\n\n  /** Communities `VCommunity-[communityRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VCommunity.relPlangs}. */\n  get relCommunities() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.communityRelPlangs);\n  }\n\n  /** Compiles To `(this:VPlang)-[plangRelCompilesTo]->VPlang`. Inverse: {@link VC.VPlang.relTargetOf}. */\n  get relCompilesTo() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelCompilesTo);\n  }\n\n  /** Dialect of `(this:VPlang)-[plangRelDialectOf]->VPlang`. Inverse: {@link VC.VPlang.relDialects}. */\n  get relDialectOf() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelDialectOf);\n  }\n\n  /** Dialects `VPlang-[plangRelDialectOf]->(this:VPlang)`. Inverse: {@link VC.VPlang.relDialectOf}. */\n  get relDialects() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.plangRelDialectOf);\n  }\n\n  /** Implemented By `VPlang-[plangRelImplements]->(this:VPlang)`. Inverse: {@link VC.VPlang.relImplements}. */\n  get relImplementedBy() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.plangRelImplements);\n  }\n\n  /** Implements `(this:VPlang)-[plangRelImplements]->VPlang`. Inverse: {@link VC.VPlang.relImplementedBy}. */\n  get relImplements() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelImplements);\n  }\n\n  /** Influenced `VPlang-[plangRelInfluencedBy]->(this:VPlang)`. Inverse: {@link VC.VPlang.relInfluencedBy}. */\n  get relInfluenced() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.plangRelInfluencedBy);\n  }\n\n  /** Influenced By `(this:VPlang)-[plangRelInfluencedBy]->VPlang`. Inverse: {@link VC.VPlang.relInfluenced}. */\n  get relInfluencedBy() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelInfluencedBy);\n  }\n\n  /** Learning Resources `VLearning-[learningRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VLearning.relPlangs}. */\n  get relLearning() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.learningRelPlangs);\n  }\n\n  /** Libraries `VLibrary-[libraryRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VLibrary.relPlangs}. */\n  get relLibraries() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.libraryRelPlangs);\n  }\n\n  /** Licenses `VLicense-[licenseRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VLicense.relPlangs}. */\n  get relLicenses() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.licenseRelPlangs);\n  }\n\n  /** Paradigms `(this:VPlang)-[plangRelParadigms]->VParadigm`. Inverse: {@link VC.VParadigm.relPlangs}. */\n  get relParadigms() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelParadigms);\n  }\n\n  /** Platforms `(this:VPlang)-[plangRelPlatforms]->VPlatform`. Inverse: {@link VC.VPlatform.relPlangs}. */\n  get relPlatforms() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelPlatforms);\n  }\n\n  /** Posts `VPost-[postRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VPost.relPlangs}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.postRelPlangs);\n  }\n\n  /** Subsystems `VSubsystem-[subsystemRelWrittenWith]->(this:VPlang)`. Inverse: {@link VC.VSubsystem.relWrittenWith}. */\n  get relSubsystems() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.subsystemRelWrittenWith);\n  }\n\n  /** Tags `VTag-[tagRelPlangs]->(this:VPlang)`. Inverse: {@link VC.VTag.relPlangs}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.tagRelPlangs);\n  }\n\n  /** Target Of `VPlang-[plangRelCompilesTo]->(this:VPlang)`. Inverse: {@link VC.VPlang.relCompilesTo}. */\n  get relTargetOf() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.plangRelCompilesTo);\n  }\n\n  /** Tools `(this:VPlang)-[plangRelTools]->VTool`. Inverse: {@link VC.VTool.relPlangs}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelTools);\n  }\n\n  /** Tool Plang `VTool-[toolRelWrittenWith]->(this:VPlang)`. Inverse: {@link VC.VTool.relWrittenWith}. */\n  get relToolsUsing() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.toolRelWrittenWith);\n  }\n\n  /** Type Systems `(this:VPlang)-[plangRelTypeSystems]->VTypeSystem`. Inverse: {@link VC.VTypeSystem.relPlangs}. */\n  get relTypeSystems() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelTypeSystems);\n  }\n\n  /** Used for Libraries `VLibrary-[libraryRelWrittenWith]->(this:VPlang)`. Inverse: {@link VC.VLibrary.relWrittenWith}. */\n  get relUsedInLibrary() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.libraryRelWrittenWith);\n  }\n\n  /** Used to Write `VPlang-[plangRelWrittenWith]->(this:VPlang)`. Inverse: {@link VC.VPlang.relWrittenWith}. */\n  get relUsedToWrite() {\n    return new RelTo(this as unknown as VC.VPlang, this.graph.edges.plangRelWrittenWith);\n  }\n\n  /** Written With `(this:VPlang)-[plangRelWrittenWith]->VPlang`. Inverse: {@link VC.VPlang.relUsedToWrite}. */\n  get relWrittenWith() {\n    return new RelFrom(this as unknown as VC.VPlang, this.graph.edges.plangRelWrittenWith);\n  }\n}\n\n/** Type of the key of an instance of {@link VPlatform}. */\nexport type VPlatformKey = `plat+${string}`;\n\nexport type VPlatformRelName = keyof (typeof VPlatformBase)[\"relConfig\"];\n\n/** Platform where Software runs */\nexport abstract class VPlatformBase extends PlangsVertex<\"plat\", VD.VPlatformData> {\n  static readonly vertexKind = \"plat\" as const;\n  static readonly vertexName = \"platform\" as const;\n  static readonly vertexDesc = \"Platform where Software runs\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"appRelPlatforms\", direction: \"inverse\", gen: false },\n    relLibraries: { edgeName: \"libraryRelPlatforms\", direction: \"inverse\", gen: false },\n    relPlangs: { edgeName: \"plangRelPlatforms\", direction: \"inverse\", gen: false },\n    relSubsystems: { edgeName: \"subsystemRelPlatforms\", direction: \"inverse\", gen: false },\n    relTools: { edgeName: \"toolRelPlatforms\", direction: \"inverse\", gen: false },\n  } as const;\n\n  override readonly vertexKind = VPlatformBase.vertexKind;\n  override readonly vertexDesc = VPlatformBase.vertexDesc;\n  override readonly vertexName = VPlatformBase.vertexName;\n  readonly relConfig = VPlatformBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VPlatformBase.relConfig) as VPlatformRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps `VApp-[appRelPlatforms]->(this:VPlatform)`. Inverse: {@link VC.VApp.relPlatforms}. */\n  get relApps() {\n    return new RelTo(this as unknown as VC.VPlatform, this.graph.edges.appRelPlatforms);\n  }\n\n  /** Libraries `VLibrary-[libraryRelPlatforms]->(this:VPlatform)`. Inverse: {@link VC.VLibrary.relPlatforms}. */\n  get relLibraries() {\n    return new RelTo(this as unknown as VC.VPlatform, this.graph.edges.libraryRelPlatforms);\n  }\n\n  /** Plangs `VPlang-[plangRelPlatforms]->(this:VPlatform)`. Inverse: {@link VC.VPlang.relPlatforms}. */\n  get relPlangs() {\n    return new RelTo(this as unknown as VC.VPlatform, this.graph.edges.plangRelPlatforms);\n  }\n\n  /** Subsystems `VSubsystem-[subsystemRelPlatforms]->(this:VPlatform)`. Inverse: {@link VC.VSubsystem.relPlatforms}. */\n  get relSubsystems() {\n    return new RelTo(this as unknown as VC.VPlatform, this.graph.edges.subsystemRelPlatforms);\n  }\n\n  /** Tools `VTool-[toolRelPlatforms]->(this:VPlatform)`. Inverse: {@link VC.VTool.relPlatforms}. */\n  get relTools() {\n    return new RelTo(this as unknown as VC.VPlatform, this.graph.edges.toolRelPlatforms);\n  }\n}\n\n/** Type of the key of an instance of {@link VPost}. */\nexport type VPostKey = `post+${string}`;\n\nexport type VPostRelName = keyof (typeof VPostBase)[\"relConfig\"];\n\n/** Blog Post */\nexport abstract class VPostBase extends PlangsVertex<\"post\", VD.VPostData> {\n  static readonly vertexKind = \"post\" as const;\n  static readonly vertexName = \"post\" as const;\n  static readonly vertexDesc = \"Blog Post\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"postRelApps\", direction: \"direct\", gen: false },\n    relAuthors: { edgeName: \"postRelAuthors\", direction: \"direct\", gen: false },\n    relCommunities: { edgeName: \"postRelCommunities\", direction: \"direct\", gen: false },\n    relLearning: { edgeName: \"postRelLearning\", direction: \"direct\", gen: false },\n    relLibraries: { edgeName: \"postRelLibraries\", direction: \"direct\", gen: false },\n    relPlangs: { edgeName: \"postRelPlangs\", direction: \"direct\", gen: false },\n    relSubsystems: { edgeName: \"postRelSubsystems\", direction: \"direct\", gen: false },\n    relTools: { edgeName: \"postRelTools\", direction: \"direct\", gen: false },\n  } as const;\n\n  override readonly vertexKind = VPostBase.vertexKind;\n  override readonly vertexDesc = VPostBase.vertexDesc;\n  override readonly vertexName = VPostBase.vertexName;\n  readonly relConfig = VPostBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VPostBase.relConfig) as VPostRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps `(this:VPost)-[postRelApps]->VApp`. Inverse: {@link VC.VApp.relPosts}. */\n  get relApps() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelApps);\n  }\n\n  /** Authors `(this:VPost)-[postRelAuthors]->VAuthor`. Inverse: {@link VC.VAuthor.relPosts}. */\n  get relAuthors() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelAuthors);\n  }\n\n  /** Communities `(this:VPost)-[postRelCommunities]->VCommunity`. Inverse: {@link VC.VCommunity.relPosts}. */\n  get relCommunities() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelCommunities);\n  }\n\n  /** Learning Resources `(this:VPost)-[postRelLearning]->VLearning`. Inverse: {@link VC.VLearning.relPosts}. */\n  get relLearning() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelLearning);\n  }\n\n  /** Libraries `(this:VPost)-[postRelLibraries]->VLibrary`. Inverse: {@link VC.VLibrary.relPosts}. */\n  get relLibraries() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelLibraries);\n  }\n\n  /** Plangs `(this:VPost)-[postRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relPosts}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelPlangs);\n  }\n\n  /** Subsystems `(this:VPost)-[postRelSubsystems]->VSubsystem`. Inverse: {@link VC.VSubsystem.relPosts}. */\n  get relSubsystems() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelSubsystems);\n  }\n\n  /** Tools `(this:VPost)-[postRelTools]->VTool`. Inverse: {@link VC.VTool.relPosts}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VPost, this.graph.edges.postRelTools);\n  }\n}\n\n/** Type of the key of an instance of {@link VSubsystem}. */\nexport type VSubsystemKey = `sys+${string}`;\n\nexport type VSubsystemRelName = keyof (typeof VSubsystemBase)[\"relConfig\"];\n\n/** Subsystem */\nexport abstract class VSubsystemBase extends PlangsVertex<\"sys\", VD.VSubsystemData> {\n  static readonly vertexKind = \"sys\" as const;\n  static readonly vertexName = \"subsystem\" as const;\n  static readonly vertexDesc = \"Subsystem\";\n  static readonly relConfig = {\n    relCommunities: { edgeName: \"communityRelSubsystems\", direction: \"inverse\", gen: false },\n    relLearning: { edgeName: \"learningRelSubsystems\", direction: \"inverse\", gen: false },\n    relLicenses: { edgeName: \"licenseRelSubsystems\", direction: \"inverse\", gen: true },\n    relPlatforms: { edgeName: \"subsystemRelPlatforms\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelSubsystems\", direction: \"inverse\", gen: false },\n    relTags: { edgeName: \"tagRelSubsystems\", direction: \"inverse\", gen: true },\n    relWrittenWith: { edgeName: \"subsystemRelWrittenWith\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VSubsystemBase.vertexKind;\n  override readonly vertexDesc = VSubsystemBase.vertexDesc;\n  override readonly vertexName = VSubsystemBase.vertexName;\n  readonly relConfig = VSubsystemBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VSubsystemBase.relConfig) as VSubsystemRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Communities `VCommunity-[communityRelSubsystems]->(this:VSubsystem)`. Inverse: {@link VC.VCommunity.relSubsystems}. */\n  get relCommunities() {\n    return new RelTo(this as unknown as VC.VSubsystem, this.graph.edges.communityRelSubsystems);\n  }\n\n  /** Learning Resources `VLearning-[learningRelSubsystems]->(this:VSubsystem)`. Inverse: {@link VC.VLearning.relSubsystems}. */\n  get relLearning() {\n    return new RelTo(this as unknown as VC.VSubsystem, this.graph.edges.learningRelSubsystems);\n  }\n\n  /** Licenses `VLicense-[licenseRelSubsystems]->(this:VSubsystem)`. Inverse: {@link VC.VLicense.relSubsystems}. */\n  get relLicenses() {\n    return new RelTo(this as unknown as VC.VSubsystem, this.graph.edges.licenseRelSubsystems);\n  }\n\n  /** Platforms `(this:VSubsystem)-[subsystemRelPlatforms]->VPlatform`. Inverse: {@link VC.VPlatform.relSubsystems}. */\n  get relPlatforms() {\n    return new RelFrom(this as unknown as VC.VSubsystem, this.graph.edges.subsystemRelPlatforms);\n  }\n\n  /** Posts `VPost-[postRelSubsystems]->(this:VSubsystem)`. Inverse: {@link VC.VPost.relSubsystems}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VSubsystem, this.graph.edges.postRelSubsystems);\n  }\n\n  /** Tags `VTag-[tagRelSubsystems]->(this:VSubsystem)`. Inverse: {@link VC.VTag.relSubsystems}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VSubsystem, this.graph.edges.tagRelSubsystems);\n  }\n\n  /** Plangs `(this:VSubsystem)-[subsystemRelWrittenWith]->VPlang`. Inverse: {@link VC.VPlang.relSubsystems}. */\n  get relWrittenWith() {\n    return new RelFrom(this as unknown as VC.VSubsystem, this.graph.edges.subsystemRelWrittenWith);\n  }\n}\n\n/** Type of the key of an instance of {@link VTag}. */\nexport type VTagKey = `tag+${string}`;\n\nexport type VTagRelName = keyof (typeof VTagBase)[\"relConfig\"];\n\n/** Tag */\nexport abstract class VTagBase extends PlangsVertex<\"tag\", VD.VTagData> {\n  static readonly vertexKind = \"tag\" as const;\n  static readonly vertexName = \"tag\" as const;\n  static readonly vertexDesc = \"Tag\";\n  static readonly relConfig = {\n    relApps: { edgeName: \"tagRelApps\", direction: \"direct\", gen: false },\n    relCommunities: { edgeName: \"tagRelCommunities\", direction: \"direct\", gen: false },\n    relLearning: { edgeName: \"tagRelLearning\", direction: \"direct\", gen: false },\n    relLibraries: { edgeName: \"tagRelLibraries\", direction: \"direct\", gen: false },\n    relPlangs: { edgeName: \"tagRelPlangs\", direction: \"direct\", gen: false },\n    relSubsystems: { edgeName: \"tagRelSubsystems\", direction: \"direct\", gen: false },\n    relTools: { edgeName: \"tagRelTools\", direction: \"direct\", gen: false },\n  } as const;\n\n  override readonly vertexKind = VTagBase.vertexKind;\n  override readonly vertexDesc = VTagBase.vertexDesc;\n  override readonly vertexName = VTagBase.vertexName;\n  readonly relConfig = VTagBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VTagBase.relConfig) as VTagRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Apps tagged `(this:VTag)-[tagRelApps]->VApp`. Inverse: {@link VC.VApp.relTags}. */\n  get relApps() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelApps);\n  }\n\n  /** Communities `(this:VTag)-[tagRelCommunities]->VCommunity`. Inverse: {@link VC.VCommunity.relTags}. */\n  get relCommunities() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelCommunities);\n  }\n\n  /** Learning Resources `(this:VTag)-[tagRelLearning]->VLearning`. Inverse: {@link VC.VLearning.relTags}. */\n  get relLearning() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelLearning);\n  }\n\n  /** Libraries `(this:VTag)-[tagRelLibraries]->VLibrary`. Inverse: {@link VC.VLibrary.relTags}. */\n  get relLibraries() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelLibraries);\n  }\n\n  /** Plangs `(this:VTag)-[tagRelPlangs]->VPlang`. Inverse: {@link VC.VPlang.relTags}. */\n  get relPlangs() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelPlangs);\n  }\n\n  /** Subsystems `(this:VTag)-[tagRelSubsystems]->VSubsystem`. Inverse: {@link VC.VSubsystem.relTags}. */\n  get relSubsystems() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelSubsystems);\n  }\n\n  /** Tools `(this:VTag)-[tagRelTools]->VTool`. Inverse: {@link VC.VTool.relTags}. */\n  get relTools() {\n    return new RelFrom(this as unknown as VC.VTag, this.graph.edges.tagRelTools);\n  }\n}\n\n/** Type of the key of an instance of {@link VTool}. */\nexport type VToolKey = `tool+${string}`;\n\nexport type VToolRelName = keyof (typeof VToolBase)[\"relConfig\"];\n\n/** Programming Tool */\nexport abstract class VToolBase extends PlangsVertex<\"tool\", VD.VToolData> {\n  static readonly vertexKind = \"tool\" as const;\n  static readonly vertexName = \"tool\" as const;\n  static readonly vertexDesc = \"Programming Tool\";\n  static readonly relConfig = {\n    relBundles: { edgeName: \"bundleRelTools\", direction: \"inverse\", gen: false },\n    relCommunities: { edgeName: \"communityRelTools\", direction: \"inverse\", gen: false },\n    relLearning: { edgeName: \"learningRelTools\", direction: \"inverse\", gen: false },\n    relLicenses: { edgeName: \"licenseRelTools\", direction: \"inverse\", gen: true },\n    relPlangs: { edgeName: \"plangRelTools\", direction: \"inverse\", gen: true },\n    relPlatforms: { edgeName: \"toolRelPlatforms\", direction: \"direct\", gen: true },\n    relPosts: { edgeName: \"postRelTools\", direction: \"inverse\", gen: false },\n    relTags: { edgeName: \"tagRelTools\", direction: \"inverse\", gen: true },\n    relWrittenWith: { edgeName: \"toolRelWrittenWith\", direction: \"direct\", gen: true },\n  } as const;\n\n  override readonly vertexKind = VToolBase.vertexKind;\n  override readonly vertexDesc = VToolBase.vertexDesc;\n  override readonly vertexName = VToolBase.vertexName;\n  readonly relConfig = VToolBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VToolBase.relConfig) as VToolRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Bundles `VBundle-[bundleRelTools]->(this:VTool)`. Inverse: {@link VC.VBundle.relTools}. */\n  get relBundles() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.bundleRelTools);\n  }\n\n  /** Communities `VCommunity-[communityRelTools]->(this:VTool)`. Inverse: {@link VC.VCommunity.relTools}. */\n  get relCommunities() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.communityRelTools);\n  }\n\n  /** Learning Resources `VLearning-[learningRelTools]->(this:VTool)`. Inverse: {@link VC.VLearning.relTools}. */\n  get relLearning() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.learningRelTools);\n  }\n\n  /** Licenses `VLicense-[licenseRelTools]->(this:VTool)`. Inverse: {@link VC.VLicense.relTools}. */\n  get relLicenses() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.licenseRelTools);\n  }\n\n  /** Plangs `VPlang-[plangRelTools]->(this:VTool)`. Inverse: {@link VC.VPlang.relTools}. */\n  get relPlangs() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.plangRelTools);\n  }\n\n  /** Platforms `(this:VTool)-[toolRelPlatforms]->VPlatform`. Inverse: {@link VC.VPlatform.relTools}. */\n  get relPlatforms() {\n    return new RelFrom(this as unknown as VC.VTool, this.graph.edges.toolRelPlatforms);\n  }\n\n  /** Posts `VPost-[postRelTools]->(this:VTool)`. Inverse: {@link VC.VPost.relTools}. */\n  get relPosts() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.postRelTools);\n  }\n\n  /** Tags `VTag-[tagRelTools]->(this:VTool)`. Inverse: {@link VC.VTag.relTools}. */\n  get relTags() {\n    return new RelTo(this as unknown as VC.VTool, this.graph.edges.tagRelTools);\n  }\n\n  /** Implemented With `(this:VTool)-[toolRelWrittenWith]->VPlang`. Inverse: {@link VC.VPlang.relToolsUsing}. */\n  get relWrittenWith() {\n    return new RelFrom(this as unknown as VC.VTool, this.graph.edges.toolRelWrittenWith);\n  }\n}\n\n/** Type of the key of an instance of {@link VTypeSystem}. */\nexport type VTypeSystemKey = `tsys+${string}`;\n\nexport type VTypeSystemRelName = keyof (typeof VTypeSystemBase)[\"relConfig\"];\n\n/** Type System */\nexport abstract class VTypeSystemBase extends PlangsVertex<\"tsys\", VD.VTypeSystemData> {\n  static readonly vertexKind = \"tsys\" as const;\n  static readonly vertexName = \"typeSystem\" as const;\n  static readonly vertexDesc = \"Type System\";\n  static readonly relConfig = { relPlangs: { edgeName: \"plangRelTypeSystems\", direction: \"inverse\", gen: false } } as const;\n\n  override readonly vertexKind = VTypeSystemBase.vertexKind;\n  override readonly vertexDesc = VTypeSystemBase.vertexDesc;\n  override readonly vertexName = VTypeSystemBase.vertexName;\n  readonly relConfig = VTypeSystemBase.relConfig;\n\n  /** All the relations, keyed by rel name. */\n  get relations() {\n    return new Map((Object.keys(VTypeSystemBase.relConfig) as VTypeSystemRelName[]).map(rel => [rel, this[rel]]));\n  }\n\n  /** Plangs `VPlang-[plangRelTypeSystems]->(this:VTypeSystem)`. Inverse: {@link VC.VPlang.relTypeSystems}. */\n  get relPlangs() {\n    return new RelTo(this as unknown as VC.VTypeSystem, this.graph.edges.plangRelTypeSystems);\n  }\n}\n", "import { arrayMerge } from \"@plangs/auxiliar/array\";\nimport { IterTap } from \"@plangs/auxiliar/iter_tap\";\nimport type { StrDate } from \"@plangs/auxiliar/str_date\";\n\nimport * as Gen from \"./generated\";\nimport { FieldGithub, FieldReleases } from \"./vertex_data_fields\";\nimport type { Release, VPlangData } from \"./vertex_data_schemas\";\n\n// Shortcuts to the configuration objects.\nexport const rel = Gen.PlangsGraphBase.relConfig;\nexport const prop = Gen.PlangsGraphBase.propConfig;\n\nexport class PlangsGraph extends Gen.PlangsGraphBase {\n  /** We can derive / infer some data from the existing data. */\n  materialize(): this {\n    // Bundle -> Tool -> Plang is transitive: a bundle supports all the languages supported by its tools.\n    for (const bundle of this.bundle.values) {\n      for (const tool of bundle.relTools.values) {\n        bundle.relPlangs.add(...tool.relPlangs.keys);\n      }\n    }\n\n    // Data can say a langauge is a transpiler, but we can also infer it.\n    // If a language compiles to another, then it is a transpiler.\n    for (const plang of this.plang.values) {\n      if (!plang.isTranspiler && plang.relCompilesTo.size > 0) {\n        plang.data.isTranspiler = true;\n      }\n    }\n\n    return this;\n  }\n}\n\nexport class VApp extends Gen.VAppBase {\n  get github(): FieldGithub {\n    return new FieldGithub(this);\n  }\n\n  get releases(): FieldReleases {\n    return new FieldReleases(this);\n  }\n}\n\nexport class VAuthor extends Gen.VAuthorBase {}\n\nexport class VBundle extends Gen.VBundleBase {}\n\nexport class VCommunity extends Gen.VCommunityBase {}\n\nexport class VLearning extends Gen.VLearningBase {}\n\nexport class VLibrary extends Gen.VLibraryBase {\n  get github(): FieldGithub {\n    return new FieldGithub(this);\n  }\n\n  get releases(): FieldReleases {\n    return new FieldReleases(this);\n  }\n}\n\nexport class VLicense extends Gen.VLicenseBase {\n  get spdx(): string | undefined {\n    return this.data.spdx;\n  }\n\n  get isFSFLibre(): boolean {\n    return this.data.isFSFLibre === true;\n  }\n\n  get isOSIApproved(): boolean {\n    return this.data.isOSIApproved === true;\n  }\n}\n\nexport class VParadigm extends Gen.VParadigmBase {}\n\nexport class VPlang extends Gen.VPlangBase {\n  addExtensions(exts: string[]): this {\n    arrayMerge((this.data.extensions ??= []), exts);\n    return this;\n  }\n\n  addFilenames(filenames: string[]): this {\n    arrayMerge((this.data.filenames ??= []), filenames);\n    return this;\n  }\n\n  addReleases(releases: Release[]): this {\n    arrayMerge((this.data.releases ??= []), releases, (r1, r2) => r1.version === r2.version);\n    return this;\n  }\n\n  /** Override merge to handle some array fields better. */\n  override merge(data: Partial<VPlangData>): this {\n    const { extensions, filenames, releases, ...rest } = data;\n\n    if (extensions) this.addExtensions(extensions);\n    if (filenames) this.addFilenames(filenames);\n    if (releases) this.addReleases(releases);\n\n    return super.merge(rest as VPlangData);\n  }\n\n  get extensions(): IterTap<string> {\n    return new IterTap(this.data.extensions);\n  }\n\n  get filenames(): IterTap<string> {\n    return new IterTap(this.data.filenames);\n  }\n\n  get github(): FieldGithub {\n    return new FieldGithub(this);\n  }\n\n  get isPopular(): boolean {\n    const { githubPopular, languishRanking } = this.data;\n    return !!githubPopular || (typeof languishRanking === \"number\" && languishRanking <= 25);\n  }\n\n  get isTranspiler(): boolean {\n    return this.data.isTranspiler === true;\n  }\n\n  override get ranking(): number | undefined {\n    return this.data.languishRanking;\n  }\n\n  get releases(): FieldReleases {\n    return new FieldReleases(this);\n  }\n\n  get stackovTags(): IterTap<string> {\n    return new IterTap(this.data.stackovTags);\n  }\n\n  /**\n   * Builds (non-recursively) a set of all languages that this language is related to, not including self.\n   * A language is related if it is compiled to, is a dialect of, or implements this language.\n   */\n  family(opt = { compilesTo: true, dialectOf: true, implements: true }): Set<VPlang> {\n    const set = new Set<VPlang>([]);\n    if (opt.compilesTo) for (const pl of this.relCompilesTo.values) set.add(pl);\n    if (opt.dialectOf) for (const pl of this.relDialectOf.values) set.add(pl);\n    if (opt.implements) for (const pl of this.relImplements.values) set.add(pl);\n    return set;\n  }\n}\n\nexport class VPlatform extends Gen.VPlatformBase {}\n\nexport class VTag extends Gen.VTagBase {}\n\nexport class VTool extends Gen.VToolBase {\n  get github(): FieldGithub {\n    return new FieldGithub(this);\n  }\n\n  get releases(): FieldReleases {\n    return new FieldReleases(this);\n  }\n}\n\nexport class VTypeSystem extends Gen.VTypeSystemBase {}\n\nexport class VSubsystem extends Gen.VSubsystemBase {\n  get github(): FieldGithub {\n    return new FieldGithub(this);\n  }\n\n  get releases(): FieldReleases {\n    return new FieldReleases(this);\n  }\n}\n\nexport class VPost extends Gen.VPostBase {\n  set path(path: string) {\n    this.data.path = path;\n  }\n\n  get author(): string | undefined {\n    return this.data.author;\n  }\n\n  get date(): StrDate | undefined {\n    return this.data.date;\n  }\n\n  get path(): string | undefined {\n    return this.data.path;\n  }\n\n  get title(): string | undefined {\n    return this.name;\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { AppFacetKey } from \"@plangs/plangs/facets/apps\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"general\" | \"licenses\" | \"platforms\" | \"tags\" | \"writtenWith\";\ntype FK = AppFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"app\", \"created\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"App Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n      bool(\"releasedRecently\", \"Released Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 1) : new ValNil())),\n      text(\"ghStars\", \"GitHub Stars\"),\n    ],\n  },\n  licenses: { title: \"Licenses\", facets: [table(\"licenses\", \"Licenses\", rel(\"app\", \"relLicenses\"))] },\n  platforms: { title: \"Platforms\", facets: [table(\"platforms\", \"Platforms\", rel(\"app\", \"relPlatforms\"))] },\n  tags: { title: \"Tags\", facets: [table(\"tags\", \"Tags\", rel(\"app\", \"relTags\"))] },\n  writtenWith: { title: \"Written With\", facets: [table(\"writtenWith\", \"Written With\", rel(\"app\", \"relWrittenWith\"))] },\n});\n\nconst PAGE: PlangsPage = \"apps\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [[\"general\"], [\"writtenWith\"], [\"tags\", \"creationYear\", \"licenses\"], [\"platforms\"]],\n  default: \"general\",\n};\n\nexport class AppsFacetsState extends FacetsMainState<GK, AppFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"app\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): AppsFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const [{ mode }, values] = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new AppsFacetsState({ pg, currentGroupKey, values, mode });\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { CommunityFacetKey } from \"@plangs/plangs/facets/communities\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"general\" | \"plangs\" | \"libraries\" | \"apps\" | \"tools\" | \"tags\";\ntype FK = CommunityFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"community\", \"created\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"Community Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n    ],\n  },\n  apps: { title: \"Licenses\", facets: [table(\"apps\", \"Apps\", rel(\"community\", \"relApps\"))] },\n  libraries: { title: \"Platforms\", facets: [table(\"libraries\", \"libraries\", rel(\"community\", \"relLibraries\"))] },\n  tags: { title: \"Tags\", facets: [table(\"tags\", \"Tags\", rel(\"community\", \"relTags\"))] },\n  plangs: { title: \"Written For\", facets: [table(\"plangs\", \"Plangs\", rel(\"community\", \"relPlangs\"))] },\n  tools: { title: \"Written With\", facets: [table(\"tools\", \"Tools\", rel(\"community\", \"relTools\"))] },\n});\n\nconst PAGE: PlangsPage = \"communities\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [[\"general\"], [\"plangs\", \"libraries\"], [\"apps\", \"tools\"], [\"tags\"]],\n  default: \"general\",\n};\n\nexport class CommunitiesFacetsState extends FacetsMainState<GK, CommunityFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"community\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): CommunitiesFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const [{ mode }, values] = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new CommunitiesFacetsState({ pg, currentGroupKey, values, mode });\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { LearningFacetKey } from \"@plangs/plangs/facets/learning\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"general\" | \"plangs\" | \"libraries\" | \"apps\" | \"tools\" | \"tags\";\ntype FK = LearningFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"learning\", \"created\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"Learning Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n    ],\n  },\n  apps: { title: \"Apps\", facets: [table(\"apps\", \"Apps\", rel(\"learning\", \"relApps\"))] },\n  libraries: { title: \"Libraries\", facets: [table(\"libraries\", \"libraries\", rel(\"learning\", \"relLibraries\"))] },\n  tags: { title: \"Tags\", facets: [table(\"tags\", \"Tags\", rel(\"learning\", \"relTags\"))] },\n  plangs: { title: \"Plangs\", facets: [table(\"plangs\", \"Plangs\", rel(\"learning\", \"relPlangs\"))] },\n  tools: { title: \"Tools\", facets: [table(\"tools\", \"Tools\", rel(\"learning\", \"relTools\"))] },\n});\n\nconst PAGE: PlangsPage = \"learning\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [[\"general\"], [\"plangs\", \"libraries\"], [\"apps\", \"tools\"], [\"tags\"]],\n  default: \"general\",\n};\n\nexport class LearningFacetsState extends FacetsMainState<GK, LearningFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"learning\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): LearningFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const [{ mode }, values] = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new LearningFacetsState({ pg, currentGroupKey, values, mode });\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { LibraryFacetKey } from \"@plangs/plangs/facets/libraries\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"general\" | \"licenses\" | \"platforms\" | \"tags\" | \"writtenWith\" | \"writtenFor\";\ntype FK = LibraryFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"library\", \"created\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"Library Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n      bool(\"releasedRecently\", \"Released Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 1) : new ValNil())),\n      text(\"ghStars\", \"GitHub Stars\"),\n    ],\n  },\n  licenses: {\n    title: \"Licenses\",\n    facets: [table(\"licenses\", \"Licenses\", rel(\"library\", \"relLicenses\"))],\n  },\n  platforms: {\n    title: \"Platforms\",\n    facets: [table(\"platforms\", \"Platforms\", rel(\"library\", \"relPlatforms\"))],\n  },\n  tags: {\n    title: \"Tags\",\n    facets: [table(\"tags\", \"Tags\", rel(\"library\", \"relTags\"))],\n  },\n  writtenWith: { title: \"Written With \", facets: [table(\"writtenWith\", \"Written With\", rel(\"library\", \"relWrittenWith\"))] },\n  writtenFor: { title: \"Written For\", facets: [table(\"writtenFor\", \"Written For\", rel(\"tool\", \"relPlangs\"))] },\n});\n\nconst PAGE: PlangsPage = \"libraries\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [[\"general\"], [\"writtenWith\", \"writtenFor\"], [\"tags\", \"creationYear\", \"licenses\"], [\"platforms\"]],\n  default: \"general\",\n};\n\nexport class LibrariesFacetsState extends FacetsMainState<GK, LibraryFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"library\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): LibrariesFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const [{ mode }, values] = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new LibrariesFacetsState({ pg, currentGroupKey, values, mode });\n  }\n}\n", "import { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, multi, select, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { PlangFacetKey } from \"@plangs/plangs/facets/plangs\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"dialectOf\" | \"general\" | \"implements\" | \"influenced\" | \"influencedBy\" | \"licenses\" | \"paradigms\" | \"platforms\" | \"tags\" | \"transpiler\" | \"typeSystems\" | \"writtenWith\";\ntype FK = PlangFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"plang\", \"created\"))] },\n  dialectOf: { title: \"Dialect Of\", facets: [table(\"dialectOf\", \"Dialect Of\", rel(\"plang\", \"relDialectOf\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"Plang Name\"),\n      multi(\"extensions\", \"Extensions\"),\n      select(\"created\", \"Created\"),\n      select(\"released\", \"Released\"),\n      bool(\"isPopular\", \"Is Popular\"),\n      bool(\"hasLogo\", \"Has Logo\"),\n      bool(\"hasWikipedia\", \"Has Wikipedia\"),\n    ],\n  },\n  implements: {\n    title: \"Implements\",\n    facets: [\n      table(\"implements\", \"Implements\", { ...rel(\"plang\", \"relImplements\"), minEntries: 2 }), // All plangs implement themselves.\n    ],\n  },\n  influenced: { title: \"Influenced\", facets: [table(\"influenced\", \"Influenced\", rel(\"plang\", \"relInfluenced\"))] },\n  influencedBy: { title: \"Influenced By\", facets: [table(\"influencedBy\", \"Influenced By\", rel(\"plang\", \"relInfluencedBy\"))] },\n  licenses: { title: \"Licenses\", facets: [table(\"licenses\", \"Licenses\", rel(\"plang\", \"relLicenses\"))] },\n  paradigms: { title: \"Paradigms\", facets: [table(\"paradigms\", \"Paradigms\", rel(\"plang\", \"relParadigms\"))] },\n  platforms: { title: \"Platforms\", facets: [table(\"platforms\", \"Platforms\", rel(\"plang\", \"relPlatforms\"))] },\n  tags: { title: \"Tags\", facets: [table(\"tags\", \"Tags\", rel(\"plang\", \"relTags\"))] },\n  transpiler: {\n    title: \"Transpiler\",\n    facets: [bool(\"isTranspiler\", \"Transpiler to Anything\"), table(\"compilesTo\", \"Compiles To\", rel(\"plang\", \"relCompilesTo\"))],\n  },\n  typeSystems: { title: \"Type Systems\", facets: [table(\"typeSystems\", \"Type Systems\", rel(\"plang\", \"relTypeSystems\"))] },\n  writtenWith: { title: \"Written With\", facets: [table(\"writtenWith\", \"Written With\", rel(\"plang\", \"relWrittenWith\"))] },\n});\n\nconst PAGE: PlangsPage = \"plangs\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [\n    [\"general\"],\n    [\"platforms\", \"paradigms\", \"typeSystems\"],\n    [\"writtenWith\", \"transpiler\", \"dialectOf\", \"implements\", \"influencedBy\", \"influenced\"],\n    [\"tags\", \"creationYear\", \"licenses\"],\n  ],\n  default: \"general\",\n};\n\nexport class PlangsFacetsState extends FacetsMainState<GK, PlangFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"plang\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): PlangsFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const [{ mode }, values] = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new PlangsFacetsState({ pg, currentGroupKey, values, mode });\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { SubsystemFacetKey } from \"@plangs/plangs/facets/subsystems\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"general\" | \"licenses\" | \"platforms\" | \"tags\" | \"writtenWith\";\ntype FK = SubsystemFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"subsystem\", \"created\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"Subsystem Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n      bool(\"releasedRecently\", \"Released Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 1) : new ValNil())),\n      text(\"ghStars\", \"GitHub Stars\"),\n    ],\n  },\n  licenses: { title: \"Licenses\", facets: [table(\"licenses\", \"Licenses\", rel(\"subsystem\", \"relLicenses\"))] },\n  platforms: { title: \"Platforms\", facets: [table(\"platforms\", \"Platforms\", rel(\"subsystem\", \"relPlatforms\"))] },\n  tags: { title: \"Tags\", facets: [table(\"tags\", \"Tags\", rel(\"subsystem\", \"relTags\"))] },\n  writtenWith: { title: \"Written With\", facets: [table(\"writtenWith\", \"Written With\", rel(\"subsystem\", \"relWrittenWith\"))] },\n});\n\nconst PAGE: PlangsPage = \"subsystems\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [[\"general\"], [\"writtenWith\"], [\"tags\", \"creationYear\", \"licenses\"], [\"platforms\"]],\n  default: \"general\",\n};\n\nexport class SubsystemsFacetsState extends FacetsMainState<GK, SubsystemFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"subsystem\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): SubsystemsFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const [{ mode }, values] = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new SubsystemsFacetsState({ pg, currentGroupKey, values, mode });\n  }\n}\n", "import { ValNil, ValNumber } from \"@plangs/auxiliar/value\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { getStore } from \"@plangs/frontend/auxiliar/storage\";\nimport { FacetsMainState } from \"@plangs/frontend/facets/main/state\";\nimport { bool, defineFacetGroups, table, text } from \"@plangs/frontend/facets/main/types\";\nimport type { ToolFacetKey } from \"@plangs/plangs/facets/tools\";\nimport { type PlangsGraph, prop, rel } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\n// biome-ignore format: Keep it in one line.\ntype GK = \"creationYear\" | \"general\" | \"licenses\" | \"platforms\" | \"tags\" | \"writtenFor\" | \"writtenWith\";\ntype FK = ToolFacetKey;\n\nconst [GROUPS, GK_BY_FK, COMPONENT] = defineFacetGroups<GK, FK>({\n  creationYear: { title: \"Creation Year\", facets: [table(\"creationYear\", \"Creation Year\", prop(\"tool\", \"created\"))] },\n  general: {\n    title: \"General\",\n    facets: [\n      text(\"name\", \"Tool Name\"),\n      bool(\"createdRecently\", \"Created Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 5) : new ValNil())),\n      bool(\"releasedRecently\", \"Released Recently\", (checked: boolean) => (checked ? new ValNumber(new Date().getFullYear() - 1) : new ValNil())),\n      text(\"ghStars\", \"GitHub Stars\"),\n    ],\n  },\n  licenses: { title: \"Licenses\", facets: [table(\"licenses\", \"Licenses\", rel(\"tool\", \"relLicenses\"))] },\n  platforms: { title: \"Platforms\", facets: [table(\"platforms\", \"Platforms\", rel(\"tool\", \"relPlatforms\"))] },\n  tags: { title: \"Tags\", facets: [table(\"tags\", \"Tags\", rel(\"tool\", \"relTags\"))] },\n  writtenFor: { title: \"Written For\", facets: [table(\"writtenFor\", \"Written For\", rel(\"tool\", \"relPlangs\"))] },\n  writtenWith: { title: \"Written With\", facets: [table(\"writtenWith\", \"Written With\", rel(\"tool\", \"relWrittenWith\"))] },\n});\n\nconst PAGE: PlangsPage = \"tools\";\nconst NAV: { groupKeys: GK[][]; default: GK } = {\n  groupKeys: [[\"general\"], [\"writtenWith\", \"writtenFor\"], [\"tags\", \"creationYear\", \"licenses\"], [\"platforms\"]],\n  default: \"general\",\n};\n\nexport class ToolsFacetsState extends FacetsMainState<GK, ToolFacetKey> {\n  override readonly nav = NAV;\n  override readonly page = PAGE;\n  override readonly vertexName = \"tool\";\n  override readonly gkByFk = GK_BY_FK;\n  override readonly groupsConfig = GROUPS;\n  override readonly groupsComponent = COMPONENT;\n\n  static initial(pg: PlangsGraph): ToolsFacetsState {\n    const store = getStore(PAGE);\n    const currentGroupKey = store.load(\"facets-last-group\") ?? NAV.default;\n    const [{ mode }, values] = FacetsMainState.deserialize(GK_BY_FK, FragmentTracker.deserialize() ?? store.load(\"facet-value\"));\n    return new ToolsFacetsState({ pg, currentGroupKey, values, mode });\n  }\n}\n", "import { createContext } from \"preact\";\n\nimport { useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\nimport { AppsFacetsState } from \"@plangs/frontend/facets/kind/apps\";\nimport { CommunitiesFacetsState } from \"@plangs/frontend/facets/kind/communities\";\nimport { LearningFacetsState } from \"@plangs/frontend/facets/kind/learning\";\nimport { LibrariesFacetsState } from \"@plangs/frontend/facets/kind/libraries\";\nimport { PlangsFacetsState } from \"@plangs/frontend/facets/kind/plangs\";\nimport { SubsystemsFacetsState } from \"@plangs/frontend/facets/kind/subsystem\";\nimport { ToolsFacetsState } from \"@plangs/frontend/facets/kind/tools\";\n\nimport type { FacetsMainState } from \"./state\";\n\n/** Share the main component state across all other children components that may need it. */\nexport const FacetsMainContext = createContext<AnyFacetsMainState | undefined>(undefined);\n\n/** Generic state so components can work with any group and facet key. */\nexport type AnyFacetsMainState = FacetsMainState<string, string>;\n\nexport function useFacetState(page: PlangsPage, pg: PlangsGraph): AnyFacetsMainState | undefined {\n  let state: AnyFacetsMainState | undefined;\n\n  if (page === \"apps\") state = useDispatchable(() => AppsFacetsState.initial(pg) as AnyFacetsMainState);\n  if (page === \"communities\") state = useDispatchable(() => CommunitiesFacetsState.initial(pg) as AnyFacetsMainState);\n  if (page === \"learning\") state = useDispatchable(() => LearningFacetsState.initial(pg) as AnyFacetsMainState);\n  if (page === \"libraries\") state = useDispatchable(() => LibrariesFacetsState.initial(pg) as AnyFacetsMainState);\n  if (page === \"plangs\") state = useDispatchable(() => PlangsFacetsState.initial(pg) as AnyFacetsMainState);\n  if (page === \"subsystems\") state = useDispatchable(() => SubsystemsFacetsState.initial(pg) as AnyFacetsMainState);\n  if (page === \"tools\") state = useDispatchable(() => ToolsFacetsState.initial(pg) as AnyFacetsMainState);\n\n  if (!state) {\n    console.error(\"Unknown page\", page);\n    return;\n  }\n\n  // Ensures the initial side effects are enforced: for instance filtering thumbs according to state fragment/localStorage.\n  return state.runEffects();\n}\n", "import type { JSX, Ref } from \"preact\";\nimport { useEffect } from \"preact/hooks\";\n\nimport { useRootState } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { onClickOnEnter } from \"@plangs/frontend/auxiliar/dom\";\nimport { on } from \"@plangs/frontend/auxiliar/events\";\nimport { DESELECT } from \"@plangs/frontend/auxiliar/icons\";\nimport { HOVER_ICON_BG, INPUT, VSCROLL, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { IconButton } from \"@plangs/frontend/components/icon-button/icon-button\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\nimport { cssClass } from \"@plangs/server/elements\";\n\nimport { type AnyFacetsMainState, FacetsMainContext, useFacetState } from \"./use_state\";\n\nconst SUBGRID = tw(\"col-span-2\", \"grid grid-cols-subgrid\", \"items-center\", \"grow-0\");\n\nexport function FacetsMain({ page, pg }: { page: PlangsPage; pg: PlangsGraph }) {\n  const state = useFacetState(page, pg);\n  const self = useRootState(state);\n\n  // Subscribe to user changes to reset the form when the user changes URL fragment.\n  useEffect(() => window.fragment.onUserChange(ev => state?.doResetAll(ev.deserFrag)));\n\n  useEffect(() =>\n    on(self?.current, \"icon-button\", (ev: CustomEvent) => {\n      ev.stopPropagation();\n      state?.doSetMode(ev.detail.mode === \"all\" ? \"all\" : \"any\");\n    }),\n  );\n\n  const body = (state: AnyFacetsMainState) => (\n    <FacetsMainContext.Provider value={state}>\n      <FacetsAsideMenu page={page} state={state} class={cssClass(\"facetsBar\")} />\n\n      <div class={tw(cssClass(\"facetsSelect\"), \"flex-row items-center gap-2 bg-primary/85 p-2\")}>\n        <select class={tw(INPUT, \"block h-8 w-full flex-1 py-0 text-black/85\")} onChange={ev => state.doSetCurrentGroup(ev.currentTarget.value)}>\n          {state.nav.groupKeys.map(group => (\n            <optgroup key={group.join(\"-\")}>\n              {group.map(gk => (\n                <option key={gk} value={gk} selected={state.currentGroupKey === gk}>\n                  {state.groupTitle(gk)}\n                  {state.groupHasValues(gk) ? \" \u2611\" : \"\"}\n                </option>\n              ))}\n            </optgroup>\n          ))}\n        </select>\n        <span class=\"text-background\" title=\"Match either All or Any of the categories.\">\n          <IconButton key={state.mode} action=\"allAny\" initial={state.mode} />\n        </span>\n      </div>\n\n      <div class={tw(\"w-full \", \"flex flex-col\", \"overflow-hidden\", \"bg-linear-to-b to-secondary/50\", \"relative\")}>\n        <state.groupsComponent currentFacetGroup={state.currentGroupKey} />\n      </div>\n    </FacetsMainContext.Provider>\n  );\n\n  return (\n    <aside\n      ref={self as Ref<HTMLElement>}\n      class={tw(\n        //\n        cssClass(\"facetsWrapper\"),\n        \"flex\",\n        \"size-full overflow-hidden\",\n        \"border-1 border-primary/25 border-t-0\",\n      )}>\n      {state && body(state)}\n    </aside>\n  );\n}\n\nfunction FacetsAsideMenu({ state, page, class: klass }: { state: AnyFacetsMainState; page: PlangsPage; class?: string }) {\n  const mapGroups = (state: AnyFacetsMainState, group: string[], callback: (key: string, isCurrent: boolean, hasValues: boolean) => JSX.Element) =>\n    group.map(groupKey => callback(groupKey, state.currentGroupKey === groupKey, state.groupHasValues(groupKey)));\n\n  return (\n    <aside class={tw(\"h-full min-w-[12rem] sm:pt-2\", VSCROLL, \"bg-linear-to-r from-secondary/50 to-transparent\", klass)}>\n      <div class={tw(\"grid grid-cols-[1fr_auto]\", \"ml-2\")}>\n        <header class={tw(\"text-primary uppercase\", \"col-span-2 pt-2\")}>Filter {page}</header>\n\n        <div class=\"flex flex-row px-3 pt-1 pb-4\" title=\"Match either All or Any of the categories.\">\n          <IconButton key={state.mode} action=\"allAny\" initial={state.mode} />\n        </div>\n\n        {state.nav.groupKeys.map(group => (\n          <nav key={group.join(\"-\")} class={tw(\"md:mb-6\", SUBGRID)}>\n            {mapGroups(state, group, (groupKey, isCurrent, hasValues) => (\n              <div\n                key={groupKey}\n                class={tw(\n                  SUBGRID,\n                  isCurrent ? tw(tw(\"border-secondary border-dotted\", \"border-l-1\"), \"bg-primary/85 text-background\") : \"hover:bg-primary/25\",\n                )}\n                style={`${hasValues ? \"font-weight: bold\" : \"\"}`}>\n                <button\n                  {...onClickOnEnter(() => state.doSetCurrentGroup(groupKey))}\n                  class={tw(\"block w-full\", \"truncate text-left\", \"px-4 py-1.5\", \"cursor-pointer\", isCurrent && \"text-background/85\")}>\n                  {state.groupTitle(groupKey)}\n                </button>\n                <div\n                  {...onClickOnEnter(() => state.doResetGroup(groupKey))}\n                  class={tw(\n                    \"p-1\",\n                    \"scale-75\",\n                    \"cursor-pointer\",\n                    state.groupHasValues(groupKey) ? tw(\"hover:text-hiliteb\", HOVER_ICON_BG) : \"hidden\",\n                  )}>\n                  {DESELECT}\n                </div>\n              </div>\n            ))}\n          </nav>\n        ))}\n      </div>\n    </aside>\n  );\n}\n", "import { render } from \"preact\";\n\nimport { elems } from \"@plangs/frontend/auxiliar/dom\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { PlangsPage } from \"@plangs/server/components/layout\";\n\nimport { FacetsMain } from \"./main\";\nimport type { AnyFacetsMainState } from \"./use_state\";\n\nexport type FacetsMainElement = HTMLDivElement & { state?: AnyFacetsMainState };\n\n/** Find {@link FacetsMain} component/s in the DOM and render them. */\nexport function activateFacetsMain(pg: PlangsGraph) {\n  for (const elem of elems(\"facetsMain\")) {\n    if (pg && elem.dataset.page) {\n      try {\n        render(<FacetsMain pg={pg} page={elem.dataset.page as PlangsPage} />, elem);\n      } catch (e) {\n        console.error(\"Error rendering FacetsMain component:\", e);\n      }\n    } else {\n      console.error(\"Missing prop for FacetsMain component.\");\n    }\n  }\n}\n", "/**\n * Validators for form fields.\n */\n\nimport { parseDate } from \"@plangs/auxiliar/str_date\";\n\nexport function isNonEmptyStr(val: string | undefined): string | undefined {\n  if (!val) return \"Cannot be empty.\";\n}\n\nexport function isStrDate(val: string | undefined): string | undefined {\n  if (!parseDate(val ?? \"\")) return \"Invalid date format. Use YYYY-MM-DD.\";\n}\n\nexport function isCSV(val: string | undefined, each: RegExp): string | undefined {\n  if (!val) return;\n  const parts = val.split(\",\");\n  if (!parts.every(v => each.test(v))) return `Invalid format. Should match RegExp: ${each.source}`;\n}\n\nexport function isURL(val: string | undefined): string | undefined {\n  let url: URL | undefined;\n  try {\n    url = new URL(`${val ?? \"\"}`);\n  } catch {}\n  if (!url || !url.hostname || !url.protocol) return \"Invalid URL format.\";\n}\n\nexport function matchesRegex(val: string | undefined, rx: RegExp): string | undefined {\n  if (!val) return;\n  if (!rx.test(val ? val : \"\")) return `Invalid format. Should match RegExp: ${rx.source}`;\n}\n\nexport function isNumber(val: string | undefined, valid: (n: number) => boolean): string | undefined {\n  if (!val) return;\n  const num = Number.parseInt(`${val ?? \"\"}`);\n  if (Number.isNaN(num) || !valid(num)) return \"Invalid number.\";\n}\n", "import { Dispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { VLicense, VPlang } from \"@plangs/plangs/graph\";\nimport type { TPlangsVertex } from \"@plangs/plangs/graph/generated\";\n\nimport type { StrDate } from \"@plangs/auxiliar/str_date\";\nimport { isCSV, isNonEmptyStr, isNumber, isStrDate, isURL, matchesRegex } from \"./validators\";\n\nexport type FormField = {\n  kind: \"bool\" | \"string\" | \"text\";\n  label: string;\n  desc?: string;\n  validator: (val: any) => string | undefined;\n  saver: (val: any) => void;\n};\n\nconst REGEXP_ANUMPLUS = /[a-zA-Z0-9\\-\\_]+/;\nconst REGEXP_EXTENSION = /^\\.[a-zA-Z0-9\\-\\_]+/;\nconst REGEXP_GITHUB_PATH = /[a-zA-Z0-9\\-\\_]+\\/[a-zA-Z0-9\\-\\_]+/;\nconst REGEXP_WIKIPEDIA_PATH = /[a-zA-Z0-9\\_\\(\\)\\-]+$/;\n\nexport class VertexFormState extends Dispatchable<{\n  vertex: TPlangsVertex;\n  fields: Record<string, FormField>;\n  values: Record<string, number | string | boolean | undefined>;\n  status?: string;\n}> {\n  static create(vertex: TPlangsVertex) {\n    return new VertexFormState({ vertex, fields: VertexFormState.fields(vertex), values: VertexFormState.values(vertex) });\n  }\n\n  static fields(vertex: TPlangsVertex): Record<string, FormField> {\n    const fields: Record<string, FormField> = {\n      name: { kind: \"string\", label: \"Name\", validator: isNonEmptyStr, saver: val => (vertex.data.name = val) },\n      description: { kind: \"text\", label: \"Description\", validator: isNonEmptyStr, saver: val => (vertex.data.description = val) },\n      shortDesc: { kind: \"text\", label: \"Short Description\", validator: isNonEmptyStr, saver: val => (vertex.data.shortDesc = val) },\n      created: { kind: \"string\", label: \"Created\", validator: isStrDate, saver: val => (vertex.data.created = val as StrDate) },\n      keywords: {\n        kind: \"string\",\n        label: \"Keywords\",\n        desc: \"Comma-separated list of keywords.\",\n        validator: v => isCSV(v, REGEXP_ANUMPLUS),\n        saver: val => vertex.addKeywords(val.split(\",\")),\n      },\n      urlHome: {\n        kind: \"string\",\n        label: \"Home URL\",\n        desc: \"URL including protocol (http, https).\",\n        validator: isURL,\n        saver: val => (vertex.data.extHomeURL = val),\n      },\n      extRedditPath: {\n        kind: \"string\",\n        label: \"Reddit Path\",\n        desc: \"Path to subreddit. Example: Python for https://www.reddit.com/r/Python/\",\n        validator: v => matchesRegex(v, REGEXP_ANUMPLUS),\n        saver: val => (vertex.data.extRedditPath = val),\n      },\n      extWikipediaPath: {\n        kind: \"string\",\n        label: \"Wikipedia Path\",\n        desc: \"Path to wikipedia. Example: Python_(programming_language) for https://en.wikipedia.org/wiki/Python_(programming_language)\",\n        validator: v => matchesRegex(v, REGEXP_WIKIPEDIA_PATH),\n        saver: val => (vertex.data.extWikipediaPath = val),\n      },\n      stackovTags: {\n        kind: \"string\",\n        label: \"Stack Overflow Tags\",\n        desc: \"Comma-separated list of tags.\",\n        validator: v => isCSV(v, REGEXP_ANUMPLUS),\n        saver: val => vertex.addStackovTags(val.split(\",\")),\n      },\n    };\n\n    if (vertex instanceof VPlang) {\n      fields.extensions = {\n        kind: \"string\",\n        label: \"Extensions\",\n        desc: \"Comma-separated list of extensions. Example: .py,.pyc\",\n        validator: v => isCSV(v, REGEXP_EXTENSION),\n        saver: val => vertex.addExtensions(val.split(\",\")),\n      };\n      fields.filenames = {\n        kind: \"string\",\n        label: \"Filenames\",\n        desc: \"Comma-separated list of files associated. Example: Makefile\",\n        validator: v => isCSV(v, REGEXP_ANUMPLUS),\n        saver: val => vertex.addFilenames(val.split(\",\")),\n      };\n      fields.isTranspiler = {\n        kind: \"bool\",\n        label: \"Is Transpiler\",\n        desc: \"Compiles to any other language.\",\n        validator: () => undefined,\n        saver: val => (vertex.data.isTranspiler = val),\n      };\n    }\n\n    if (vertex instanceof VLicense) {\n      fields.spdx = { kind: \"string\", label: \"SPDX\", validator: isNonEmptyStr, saver: val => (vertex.data.spdx = val) };\n      fields.isFSFLibre = { kind: \"bool\", label: \"FSF Libre?\", validator: () => undefined, saver: val => (vertex.data.isFSFLibre = val) };\n      fields.isOSIApproved = { kind: \"bool\", label: \"OSI Approved?\", validator: () => undefined, saver: val => (vertex.data.isOSIApproved = val) };\n    }\n\n    if (\"github\" in vertex) {\n      fields.extGithubPath = {\n        kind: \"string\",\n        label: \"Github Path\",\n        desc: \"Example: EmmanuelOga/plangs2 for github.com/emmanueloga/plangs2\",\n        validator: v => matchesRegex(v, REGEXP_GITHUB_PATH),\n        saver: val => (vertex.data.extGithubPath = val),\n      };\n      fields.githubStars = {\n        kind: \"string\",\n        label: \"Github Stars\",\n        validator: v => isNumber(v, num => num > 0),\n        saver: val => (vertex.data.githubStars = Number.parseInt(val)),\n      };\n    }\n\n    return fields;\n  }\n\n  static values(vertex: TPlangsVertex) {\n    const values: Record<string, string | number | boolean | undefined> = {\n      description: vertex.description,\n      name: vertex.name,\n      shortDesc: vertex.data.shortDesc,\n      created: vertex.created.value,\n      keywords: vertex.keywords.join(\",\"),\n      urlHome: vertex.urlHome,\n      extRedditPath: vertex.data.extRedditPath,\n      extWikipediaPath: vertex.data.extWikipediaPath,\n      stackovTags: vertex.data.stackovTags?.join(\",\"),\n    };\n\n    if (vertex instanceof VPlang) {\n      values.extensions = vertex.extensions.join(\",\");\n      values.filenames = vertex.filenames.join(\",\");\n      values.isTranspiler = vertex.isTranspiler;\n    }\n\n    if (vertex instanceof VLicense) {\n      values.spdx = vertex.spdx;\n      values.isFSFLibre = vertex.isFSFLibre;\n      values.isOSIApproved = vertex.isOSIApproved;\n    }\n\n    if (\"github\" in vertex) {\n      values.extGithubPath = vertex.data.extGithubPath;\n      values.githubStars = vertex.data.githubStars;\n    }\n\n    return values;\n  }\n\n  get values() {\n    return this.data.values;\n  }\n\n  get fields() {\n    return this.data.fields;\n  }\n\n  get status() {\n    return this.data.status;\n  }\n\n  set status(status: string | undefined) {\n    this.data.status = status;\n    this.dispatch();\n  }\n\n  doUpdate(attr: string, value: any) {\n    this.values[attr] = value;\n    this.dispatch();\n  }\n\n  doReload() {\n    this.data.values = VertexFormState.values(this.data.vertex);\n    this.dispatch();\n  }\n\n  doSave() {\n    const errors = [];\n\n    for (const [attr, value] of Object.entries(this.values)) {\n      const { validator } = this.fields[attr];\n      if (validator?.(value)) errors.push(attr);\n    }\n\n    if (errors.length) {\n      this.status = `Cannot save. Errors in fields: ${errors.join(\", \")}`;\n      this.dispatch();\n      return;\n    }\n\n    for (const [attr, value] of Object.entries(this.values)) {\n      const { saver } = this.fields[attr];\n      saver?.(value);\n    }\n\n    this.status = `Last succesful save: ${new Date().toLocaleTimeString()}`;\n    this.dispatch();\n  }\n\n  validate(attr: string): string | undefined {\n    const field = this.fields[attr];\n    return field?.validator?.(this.values[attr]);\n  }\n}\n", "import type { ComponentChildren } from \"preact\";\n\nimport { useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { INPUT, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { TPlangsVertex } from \"@plangs/plangs/graph/generated\";\nimport { type FormField, VertexFormState } from \"./vertex-form-state\";\n\nimport { EditorButton } from \"./vertices-editor\";\n\n/** Form to edit the _data_ of the Vertex. */\nexport function VertexForm({ vertex }: { vertex: TPlangsVertex }) {\n  const state = useDispatchable(() => VertexFormState.create(vertex));\n\n  return (\n    <div class={tw(\"flex flex-col gap-4 justify-self-center\", \"min-w-[50%] max-w-[160ch]\", \"bg-secondary/25\")}>\n      <header class={tw(\"px-4 py-2\", \"flex flex-row gap-4\", \"justify-end\", \"bg-secondary/50\", \"text-center text-xl\")}>\n        {EditorButton({ label: \"Reload\", onClick: () => state.doReload() })}\n        {EditorButton({ label: \"Save\", onClick: () => state.doSave() })}\n      </header>\n      <div class=\"text-center\">{state.status}</div>\n      <div class=\"overflow-hidden overflow-y-auto\">{[...Object.entries(state.fields)].map(([key, field]) => formField(state, key, field))}</div>\n    </div>\n  );\n}\n\nfunction formField(state: VertexFormState, key: string, field: FormField): ComponentChildren {\n  const { label, kind, desc, validator } = field;\n\n  const cssid = `field-${label}`;\n  const value = state.values[key];\n  const error = validator(value);\n\n  return (\n    <div class=\"px-4\">\n      <label class=\"block\" for={cssid}>\n        {label}\n      </label>\n      {desc && <div class=\"text-foreground/80 text-sm italic\">{desc}</div>}\n      <div class=\"py-2\">\n        {kind === \"bool\" && (\n          <input id={cssid} type=\"checkbox\" checked={!!value} onInput={({ target }) => state.doUpdate(key, (target as HTMLInputElement).checked)} />\n        )}\n        {kind === \"string\" && (\n          <input\n            id={cssid}\n            type=\"text\"\n            class={tw(INPUT, \"w-full\")}\n            value={(value as string) ?? \"\"}\n            onInput={({ target }) => state.doUpdate(key, (target as HTMLInputElement).value)}\n          />\n        )}\n        {kind === \"text\" && (\n          <textarea\n            id={cssid}\n            value={value ? `${value}` : \"\"}\n            class={tw(INPUT, \"text-xl\", \"w-full\", \"min-h-[10rem]\")}\n            style={\"font-family: monospace;\"}\n            onInput={({ target }) => state.doUpdate(key, (target as HTMLTextAreaElement).value)}\n          />\n        )}\n      </div>\n      <div class={tw(\"mb-4 p-1\", \"text-gray-800\", error && \"bg-linear-to-b from-red-200 to-red-300\")}>{error ?? \"\"}</div>\n    </div>\n  );\n}\n", "import { Dispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport type { RelFrom, RelTo } from \"@plangs/graphgen/library\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { TPlangsVertex, TPlangsVertexName } from \"@plangs/plangs/graph/generated\";\n\nexport type AnyRel = RelFrom<TPlangsVertex, TPlangsVertex> | RelTo<TPlangsVertex, TPlangsVertex>;\n\nexport class VerticesEditorState extends Dispatchable<{\n  pg: PlangsGraph;\n  currentKind: TPlangsVertexName;\n  currentVertex?: TPlangsVertex;\n  currentRel?: [key: string, rel: AnyRel];\n  filter: string;\n  tab: \"form\" | \"relations\" | \"json\";\n}> {\n  doSetCurrentKind(name: TPlangsVertexName) {\n    this.data.currentKind = name;\n    this.dispatch();\n  }\n\n  doSetCurrentVertex(v: TPlangsVertex) {\n    this.data.currentVertex = v;\n    // If the new vertex has a relation of the same name as the current relation, update the current relation.\n    // Otherwise clear the current relation.\n    if (this.currentRel?.[0]) {\n      const [lastRelKey] = this.currentRel;\n      const newRels = v.relations as Map<string, AnyRel>;\n      if (newRels.has(lastRelKey)) {\n        const newRel = newRels.get(lastRelKey) as AnyRel;\n        this.data.currentRel = [lastRelKey, newRel];\n      } else {\n        this.data.currentRel = undefined;\n      }\n    }\n    this.dispatch();\n  }\n\n  doSetFilter(filter: string) {\n    this.data.filter = filter;\n    this.dispatch();\n  }\n\n  doSetTab(tab: \"form\" | \"relations\" | \"json\"): void {\n    this.data.tab = tab;\n    this.dispatch();\n  }\n\n  doSetRel(rel: [string, AnyRel]): void {\n    this.data.currentRel = rel;\n    this.dispatch();\n  }\n\n  get currentKind() {\n    return this.data.currentKind;\n  }\n\n  get currentVertices() {\n    const vertices = [...this.data.pg.vertices[this.data.currentKind].values];\n    return this.data.filter ? vertices.filter(v => v.key.includes(this.data.filter)) : vertices;\n  }\n\n  get currentVertex() {\n    return this.data.currentVertex;\n  }\n\n  get currentRel() {\n    return this.data.currentRel;\n  }\n\n  get filter() {\n    return this.data.filter;\n  }\n\n  get tab() {\n    return this.data.tab;\n  }\n\n  get vertexNames() {\n    return Object.keys(this.data.pg.vertices).filter(vn => vn !== \"post\") as TPlangsVertexName[];\n  }\n}\n", "import type { ComponentChildren } from \"preact\";\nimport { useEffect, useRef, useState } from \"preact/hooks\";\n\nimport { useDispatchable } from \"@plangs/frontend/auxiliar/dispatchable\";\nimport { ADD, CLOSE } from \"@plangs/frontend/auxiliar/icons\";\nimport { INPUT, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport { Pill } from \"@plangs/frontend/components/misc/pill\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { TPlangsVertex } from \"@plangs/plangs/graph/generated\";\n\nimport { VertexForm } from \"./vertex-form\";\nimport { type AnyRel, VerticesEditorState } from \"./vertices-editor-state\";\n\n/**\n * Editor component which includes 3 sections:\n * * A form for the data of the Vertex.\n * * An editor for relationships (edges) of the Vertex.\n * * A JSON editor for the raw data of the Vertex.\n */\nexport function VerticesEditor({ pg }: { pg: PlangsGraph }) {\n  const self = useRef<HTMLDivElement>(null);\n  const state = useDispatchable(() => new VerticesEditorState({ pg, currentKind: \"plang\", filter: \"\", tab: \"relations\" }));\n\n  useEffect(() => {\n    self.current?.querySelectorAll(\"button.current\")[1]?.scrollIntoView({ block: \"nearest\" });\n  });\n\n  return (\n    <div ref={self} class={tw(\"p-4\", \"flex-1\", \"flex flex-row gap-8\", \"overflow-hidden\")}>\n      <div class=\"flex flex-col gap-4\">\n        {state.vertexNames.map(vn =>\n          EditorButton({ label: vn, isCurrent: () => state.currentKind === vn, onClick: () => state.doSetCurrentKind(vn) }),\n        )}\n      </div>\n      <div class=\"flex max-h-full flex-col overflow-hidden\">\n        <input\n          aria-label=\"Filter Key\"\n          placeholder=\"Filter\"\n          value={state.filter}\n          onInput={ev => state.doSetFilter((ev.target as HTMLInputElement).value)}\n          class={tw(INPUT, \"mb-4 px-2 py-1\")}\n        />\n        <div class=\"flex flex-1 flex-col gap-4 overflow-y-scroll pr-4\">\n          {state.currentVertices.map(v =>\n            EditorButton({ label: v.key, isCurrent: () => state.currentVertex?.key === v.key, onClick: () => state.doSetCurrentVertex(v) }),\n          )}\n        </div>\n      </div>\n      {state.currentVertex ? (\n        <div class={tw(\"flex-1\", \"flex flex-col gap-4\", \"bg-secondary/10\", \"overflow-hidden\")}>\n          <header class=\"border-1 border-primary bg-secondary/75 py-2 text-center text-xl\">\n            {state.currentVertex.vertexName}: {state.currentVertex.key}: {state.currentVertex.name}\n          </header>\n          <div class=\"flex flex-row gap-4\">\n            <EditorButton label=\"FORM\" isCurrent={() => state.tab === \"form\"} onClick={() => state.doSetTab(\"form\")} />\n            <EditorButton label=\"RELATIONS\" isCurrent={() => state.tab === \"relations\"} onClick={() => state.doSetTab(\"relations\")} />\n            <EditorButton label=\"JSON\" isCurrent={() => state.tab === \"json\"} onClick={() => state.doSetTab(\"json\")} />\n          </div>\n          <div class=\"flex flex-1 justify-center overflow-hidden\">\n            {state.tab === \"form\" ? (\n              <VertexForm key={state.currentVertex.key} vertex={state.currentVertex} />\n            ) : state.tab === \"relations\" ? (\n              <Relations key={state.currentVertex.key} state={state} />\n            ) : (\n              <JsonEditor key={state.currentVertex.key} vertex={state.currentVertex} />\n            )}\n          </div>\n        </div>\n      ) : (\n        <div class=\"flex-1 bg-secondary/25 p-2 text-2xl\">Select a vertex to edit.</div>\n      )}\n    </div>\n  );\n}\n\nexport function EditorButton({ label, isCurrent, onClick }: { label: string; isCurrent?: () => boolean; onClick: () => void }) {\n  return (\n    <button\n      type=\"button\"\n      class={tw(\n        \"block\",\n        \"px-4 py-1\",\n        \"border-1 border-primary\",\n        \"cursor-pointer\",\n        \"hover:bg-hiliteb hover:text-hilitef\",\n        isCurrent?.() && \"current bg-secondary\",\n      )}\n      onClick={onClick}>\n      {label}\n    </button>\n  );\n}\n\nfunction JsonEditor({ vertex }: { vertex: TPlangsVertex }): ComponentChildren {\n  const vertexJson = () => JSON.stringify(vertex.data, null, 2);\n\n  const textarea = useRef<HTMLTextAreaElement>(null);\n  const [status, setStatus] = useState(\"\");\n\n  const reload = () => {\n    if (textarea.current) textarea.current.value = vertexJson();\n    setStatus(`Reloadad at ${new Date().toLocaleTimeString()}`);\n  };\n\n  const save = () => {\n    try {\n      vertex.merge(JSON.parse(textarea.current?.value ?? \"\"));\n      setStatus(`Saved at ${new Date().toLocaleTimeString()}`);\n    } catch (e) {\n      setStatus(`Error: ${e}`);\n    }\n  };\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies: This effect should only run once.\n  useEffect(() => {\n    if (textarea.current) textarea.current.value = vertexJson();\n  }, []);\n\n  return (\n    <div class={tw(\"w-full\", \"flex flex-col gap-4 justify-self-center\", \"bg-secondary/25\")}>\n      <header class={tw(\"px-4 py-2\", \"flex flex-row gap-4\", \"justify-end\", \"bg-secondary/50\", \"text-center text-xl\")}>\n        <EditorButton label=\"Reload\" onClick={reload} />\n        <EditorButton label=\"Save\" onClick={save} />\n      </header>\n      <div class=\"text-center\">{status}</div>\n      <textarea ref={textarea} class={tw(INPUT, \"text-xl\", \"flex-1 overflow-hidden overflow-y-auto\")} style={\"font-family: monospace;\"} />\n    </div>\n  );\n}\n// <div class=\"grid grid-cols-[auto_1fr] items-start gap-4 pt-4\">{textArea(\"Raw JSON Data\", JSON.stringify(vertex.data, null, 2), 80)}</div>\n\nfunction Relations({ state }: { state: VerticesEditorState }): ComponentChildren {\n  const vertex = state.currentVertex as TPlangsVertex;\n  return (\n    <div key={vertex.key} class=\"flex flex-1 flex-row gap-4 overflow-hidden\">\n      <div class=\"flex flex-col gap-4 overflow-hidden overflow-y-scroll\">\n        {[...vertex.relations.entries()]\n          .filter(([key]) => key !== \"relPosts\" && key !== \"relAuthors\")\n          .map(([key, vertices]) => (\n            <EditorButton\n              key={`${vertex.key}-${key}`}\n              label={vertices.edgeDesc}\n              isCurrent={() => state.currentRel?.[0] === key}\n              onClick={() => state.doSetRel([key, vertices as AnyRel])}\n            />\n          ))}\n      </div>\n      <div class=\"flex flex-1 flex-col gap-4\">\n        <header class=\"border-1 border-primary bg-secondary/75 p-2 text-center text-xl\">\n          {vertex.vertexName}: {vertex.key}: {vertex.name} - Relation: {state.currentRel?.[1].edgeDesc}\n        </header>\n        {state.currentRel ? (\n          <Partition\n            key={`${vertex.key}-${state.currentRel[1]}`}\n            state={state}\n            vertex={vertex}\n            relKey={state.currentRel[0]}\n            rel={state.currentRel[1]}\n          />\n        ) : (\n          <div class=\"p-4\">Select a Relation.</div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/** Partition vertices from a relationship: those with an edge and those without. */\nfunction Partition({ state, vertex, relKey, rel }: { state: VerticesEditorState; vertex: TPlangsVertex; relKey: string; rel: AnyRel }) {\n  const related: TPlangsVertex[] = [];\n  const unrelated: TPlangsVertex[] = [];\n\n  for (const vertex of rel.targetVertices.values) {\n    if (rel.has(vertex.key)) {\n      related.push(vertex);\n    } else {\n      unrelated.push(vertex);\n    }\n  }\n\n  function disconnect(v: TPlangsVertex): void {\n    rel.remove(v.key);\n    state.dispatch();\n  }\n\n  function connect(v: TPlangsVertex): void {\n    rel.add(v.key);\n    state.dispatch();\n  }\n\n  return (\n    <div class={tw(\"p-4\", \"flex-1\", \"flex flex-col gap-4\", \"bg-primary/10\")}>\n      <div class=\"flex flex-row flex-wrap gap-1\">\n        <h2 class=\"w-full pb-2\">Connected</h2>\n        {related.map(other => (\n          <Pill key={`${vertex.key}-${relKey}-${other.key}`} class=\"group cursor-pointer hover:bg-primary/25\">\n            <button type=\"button\" class=\"inline-flex items-center gap-1\" onClick={() => disconnect(other)}>\n              {other.name}\n              <div class={tw(\"inline-block\", \"group-hover:text-hiliteb\")}>{CLOSE}</div>\n            </button>\n          </Pill>\n        ))}\n      </div>\n      <div class=\"flex flex-row flex-wrap gap-1\">\n        <h2 class=\"w-full pb-2\">Unconnected</h2>\n        {unrelated.map(other => (\n          <Pill key={`${vertex.key}-${relKey}-${other.key}`} class=\"group hover:bg-primary/25\">\n            <button type=\"button\" class=\"inline-flex cursor-pointer items-center gap-1\" onClick={() => connect(other)}>\n              {other.name}\n              <div class={tw(\"inline-block\", \"group-hover:text-hiliteb\")}>{ADD}</div>\n            </button>\n          </Pill>\n        ))}\n      </div>\n    </div>\n  );\n}\n", "import { useState } from \"preact/hooks\";\n\nimport { PROSE, PROSE_BASIC, tw } from \"@plangs/frontend/auxiliar/styles\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport { EditorButton, VerticesEditor } from \"./vertices-editor\";\n\n/** Top level of the editor: information, editing and exporting. */\nexport function EditorMain({ pg }: { pg: PlangsGraph }) {\n  const [tab, setTab] = useState<\"status\" | \"edit\">(\"status\");\n\n  return (\n    <div class={tw(\"p-4\", \"flex-1\", \"flex flex-col gap-4\", \"overflow-hidden\")}>\n      <div class=\"flex flex-row gap-4\">\n        <div>{EditorButton({ label: \"STATUS\", isCurrent: () => tab === \"status\", onClick: () => setTab(\"status\") })}</div>\n        <div>{EditorButton({ label: \"EDIT\", isCurrent: () => tab === \"edit\", onClick: () => setTab(\"edit\") })}</div>\n      </div>\n      <div class=\"flex-1 justify-center overflow-hidden overflow-y-auto\">\n        {tab === \"status\" && <Status pg={pg} />}\n        {tab === \"edit\" && <VerticesEditor pg={pg} />}\n      </div>\n    </div>\n  );\n}\n\nfunction Status({ pg }: { pg: PlangsGraph }) {\n  return (\n    <div class={tw(PROSE_BASIC, \"p-4\")}>\n      <h2 class=\"m-0! pb-8\">Plangs Graph Editor</h2>\n      <h3>Site Wide Mode</h3>\n      <p>When you edit the data, it gets saved to localStorage. You can choose to use the local storage data site-wide for testing your changes.</p>\n      <label>\n        <input type=\"checkbox\" checked={true} />\n        <span class=\"ml-2\">Use localStorage data site-wide.</span>\n      </label>\n      <h3>Reset</h3>\n      <p>To go back to a clean slate, use the following button, which resets any local changes (you will lose your edits).</p>\n      {EditorButton({ label: \"Reset and Erase Edits\", onClick: () => console.log(\"TODO\") })}\n      <h3>Exports and Contributions</h3>\n      <p>\n        To contribute your edits back to the project, you will need to generate a pull request. We may automate this at some point, but for now this\n        process involves a few steps:\n        <ol>\n          <li>{EditorButton({ label: \"Export Local Data\", onClick: () => console.log(\"TODO\") })}</li>\n          <li>\n            Fork <a href=\"https://github.com/emmanueloga/plangs2\">Plangs! source repository</a>.\n          </li>\n          <li>\n            Regenerate the TypeScript definitions through the command:\n            <br />\n            <code>$ bun regenerate path/to/plangs.json</code>\n            <br />\n            Now you should be ready to send a pull request (thanks in advance!).\n          </li>\n        </ol>\n      </p>\n    </div>\n  );\n}\n", "import { render } from \"preact\";\n\nimport { elem } from \"@plangs/frontend/auxiliar/dom\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\n\nimport { EditorMain } from \"./editor-main\";\nimport { VerticesEditor } from \"./vertices-editor\";\n\n/** Locate and render all {@link VerticesEditor} component instances. */\nexport function activatePlangsEditor(pg: PlangsGraph) {\n  const el = elem(\"plangsEditor\");\n  if (el) render(<EditorMain pg={pg} />, el);\n}\n", "import { data } from \"@plangs/frontend/auxiliar/dom\";\nimport type { PlangsGraph } from \"@plangs/plangs/graph\";\nimport type { TPlangsVertex, TPlangsVertexName } from \"@plangs/plangs/graph/generated\";\nimport { dataKey } from \"@plangs/server/elements\";\n\n/** Attempt to load a vertex using the nearest data-key attribute. */\nexport function getClosestVertex(pg: PlangsGraph, target: EventTarget | null): TPlangsVertex | undefined {\n  const elem = (target as Element).closest(`[${dataKey(\"vertex-key\")}]`);\n  const key = data(elem, \"vertex-key\");\n  const vertexName = data(elem, \"vertex-name\");\n  const vertices = key && vertexName && pg[vertexName as TPlangsVertexName];\n  if (!vertices) return;\n  return vertices.get(key as any);\n}\n", "import \"preact/debug\";\n\nimport { debugAspectRatio } from \"@plangs/frontend/auxiliar/aspect\";\nimport { elem, elems } from \"@plangs/frontend/auxiliar/dom\";\nimport { on } from \"@plangs/frontend/auxiliar/events\";\nimport { FragmentTracker } from \"@plangs/frontend/auxiliar/fragment\";\nimport { connectLivereload } from \"@plangs/frontend/auxiliar/livereload\";\nimport { activateIconButtons } from \"@plangs/frontend/components/icon-button\";\nimport { ToggleFacetsMenu, ToggleHamburguer, ToggleLights } from \"@plangs/frontend/components/icon-button/state\";\nimport { renderVertexInfo } from \"@plangs/frontend/components/vertex-info\";\nimport { activateFacetsMain } from \"@plangs/frontend/facets/main\";\nimport { PlangsGraph } from \"@plangs/plangs/graph\";\n\nimport { activatePlangsEditor } from \"../editor\";\nimport { getClosestVertex } from \"./vertices\";\n\n// Declare some globals that are called as the page is being loaded\n// to avoid flashing the wrong content.\n//\n// This causes some layout shift during the page load, which may\n// add a few ms to the page load time, but it's worth it to avoid\n// the flicker.\ndeclare global {\n  interface Window {\n    fragment: FragmentTracker;\n    restoreFilters: () => void;\n    restoreHamburguer: () => void;\n    restoreLightMode: () => void;\n    restoreVertexInfo: () => void;\n  }\n}\n\nwindow.fragment = new FragmentTracker().bind();\n\nwindow.restoreFilters = () => ToggleFacetsMenu.initial().runEffects();\nwindow.restoreHamburguer = () => ToggleHamburguer.initial().runEffects();\nwindow.restoreLightMode = () => ToggleLights.initial().runEffects();\nwindow.restoreVertexInfo = () => renderVertexInfo();\n\n// Setup prefetching of links on hover.\ndocument.addEventListener(\"mouseover\", event => {\n  const link = event.target as HTMLElement;\n  const url = link.getAttribute(\"href\");\n  if (!url || link?.tagName !== \"A\" || !link.classList.contains(\"prefetch\")) return;\n\n  link.classList.remove(\"prefetch\");\n\n  const linkElement = document.createElement(\"link\");\n  linkElement.rel = \"prefetch\";\n  linkElement.href = url;\n  document.head.appendChild(linkElement);\n});\n\nasync function start() {\n  const pg = new PlangsGraph();\n  const loadData = fetch(\"/plangs.json\")\n    .then(async r => pg.loadJSON(await r.json()))\n    .then(g => g.materialize());\n\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    activateIconButtons();\n\n    loadData.then(() => {\n      activateFacetsMain(pg);\n      activatePlangsEditor(pg);\n\n      const grid = elem(\"vertexGrid\");\n      if (!grid) return;\n\n      // On click display the vertex info.\n      on(grid, \"pointerdown\", ({ target }: MouseEvent) => {\n        const vertex = getClosestVertex(pg, target);\n        renderVertexInfo(vertex);\n      });\n\n      // Replace placeholders with the actual images, if any.\n      for (const img of elems(\"vertexThumbnImg\")) {\n        const src = img.dataset.src;\n        if (src) img.setAttribute(\"src\", src);\n      }\n    });\n  });\n}\n\ntry {\n  start();\n} catch (err) {\n  console.error(err);\n}\n\n// This is a global variable that is set by the build system.\ndeclare const PLANGS_ENV: \"dev\" | \"prod\";\nif (PLANGS_ENV === \"dev\") {\n  try {\n    connectLivereload();\n  } catch (err) {\n    console.error(err);\n  }\n  debugAspectRatio();\n}\n"],
  "mappings": "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",
  "names": ["slice", "options", "vnodeId", "isValidElement", "rerenderQueue", "prevDebounce", "defer", "depthSort", "CAPTURE_REGEX", "eventClock", "eventProxy", "eventProxyCapture", "i", "EMPTY_OBJ", "EMPTY_ARR", "IS_NON_DIMENSIONAL", "isArray", "Array", "assign", "obj", "props", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "Fragment", "props", "children", "BaseComponent", "context", "this", "getDomSibling", "vnode", "childIndex", "__", "__i", "sibling", "__k", "length", "__e", "type", "updateParentDomPointers", "i", "child", "__c", "base", "enqueueRender", "c", "__d", "rerenderQueue", "push", "process", "__r", "prevDebounce", "options", "debounceRendering", "defer", "renderQueueLength", "component", "newVNode", "oldVNode", "oldDom", "commitQueue", "refQueue", "sort", "depthSort", "shift", "__v", "__P", "assign", "diff", "__n", "namespaceURI", "__u", "commitRoot", "diffChildren", "parentDom", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "namespace", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "result", "oldChildren", "EMPTY_ARR", "newChildrenLength", "constructNewChildrenArray", "EMPTY_OBJ", "ref", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "Array", "constructor", "String", "createVNode", "isArray", "__b", "key", "findMatchingIndex", "unmount", "parentVNode", "contains", "insertBefore", "nodeType", "findMatchingIndex", "childVNode", "oldChildren", "skewedIndex", "remainingOldChildren", "x", "y", "key", "type", "oldVNode", "__u", "length", "setStyle", "style", "value", "setProperty", "IS_NON_DIMENSIONAL", "test", "dom", "name", "oldValue", "namespace", "useCapture", "o", "cssText", "replace", "CAPTURE_REGEX", "toLowerCase", "slice", "l", "_attached", "eventClock", "addEventListener", "eventProxyCapture", "eventProxy", "removeEventListener", "e", "removeAttribute", "setAttribute", "createEventProxy", "this", "eventHandler", "_dispatched", "options", "event", "diff", "parentDom", "newVNode", "globalContext", "excessDomChildren", "commitQueue", "oldDom", "isHydrating", "refQueue", "tmp", "c", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "isClassComponent", "provider", "componentContext", "i", "renderHook", "count", "renderResult", "newType", "constructor", "__e", "__b", "outer", "props", "prototype", "render", "contextType", "__c", "__", "__E", "BaseComponent", "doRender", "sub", "state", "context", "__n", "__d", "__h", "_sb", "__s", "getDerivedStateFromProps", "assign", "__v", "componentWillMount", "componentDidMount", "push", "componentWillReceiveProps", "shouldComponentUpdate", "__k", "some", "vnode", "componentWillUpdate", "componentDidUpdate", "__P", "__r", "getChildContext", "getSnapshotBeforeUpdate", "diffChildren", "isArray", "Fragment", "children", "base", "then", "MODE_HYDRATE", "nodeType", "nextSibling", "indexOf", "removeNode", "diffElementNodes", "diffed", "commitRoot", "root", "applyRef", "cb", "call", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "localName", "document", "createTextNode", "createElementNS", "is", "__m", "data", "childNodes", "EMPTY_OBJ", "attributes", "__html", "innerHTML", "getDomSibling", "ref", "hasRefUnmount", "current", "unmount", "parentVNode", "skipRemove", "r", "componentWillUnmount", "replaceNode", "documentElement", "createElement", "namespaceURI", "firstChild", "createContext", "defaultValue", "contextId", "context", "__c", "i", "__", "Consumer", "props", "contextValue", "children", "Provider", "subs", "ctx", "this", "getChildContext", "Set", "componentWillUnmount", "shouldComponentUpdate", "_props", "value", "forEach", "c", "__e", "enqueueRender", "sub", "add", "old", "delete", "call", "contextType", "slice", "EMPTY_ARR", "options", "error", "vnode", "oldVNode", "errorInfo", "component", "ctor", "handled", "constructor", "getDerivedStateFromError", "setState", "__d", "componentDidCatch", "__E", "e", "vnodeId", "isValidElement", "undefined", "BaseComponent", "prototype", "update", "callback", "s", "__s", "state", "assign", "__v", "_sb", "push", "forceUpdate", "__h", "render", "Fragment", "rerenderQueue", "defer", "Promise", "then", "bind", "resolve", "setTimeout", "depthSort", "a", "b", "__b", "process", "__r", "CAPTURE_REGEX", "eventClock", "eventProxy", "createEventProxy", "eventProxyCapture", "globalVar", "globalVar", "globalThis", "window", "__PREACT_DEVTOOLS__", "attachPreact", "options", "Fragment", "Component", "loggedTypeFailures", "getDisplayName", "vnode", "type", "Fragment", "displayName", "name", "renderStack", "ownerStack", "getCurrentVNode", "length", "showJsxSourcePluginWarning", "isPossibleOwner", "getOwnerStack", "stack", "next", "__o", "push", "reduce", "acc", "owner", "source", "__source", "fileName", "lineNumber", "console", "warn", "isWeakMapSupported", "WeakMap", "getDomChildren", "domChildren", "__k", "forEach", "child", "apply", "getClosestDomNodeParentName", "parent", "__", "__e", "parentNode", "localName", "setState", "Component", "prototype", "isTableElement", "update", "callback", "this", "__v", "state", "call", "ILLEGAL_PARAGRAPH_CHILD_ELEMENTS", "forceUpdate", "serializeVNode", "props", "attrs", "prop", "hasOwnProperty", "value", "Object", "toString", "JSON", "stringify", "children", "__P", "options", "__m", "newVNode", "excessDomChildren", "availableTypes", "map", "filter", "Boolean", "error", "join", "oldDiff", "__b", "oldDiffed", "diffed", "oldRoot", "oldVNode", "oldRender", "__r", "pop", "setupComponentStack", "hooksAllowed", "oldBeforeDiff", "oldVnode", "oldCatchError", "oldHook", "__h", "warnedComponents", "useEffect", "useLayoutEffect", "lazyPropTypes", "deprecations", "errorInfo", "__c", "then", "promise", "Error", "componentStack", "setTimeout", "e", "isValid", "nodeType", "componentName", "Array", "isArray", "ref", "key", "propTypes", "has", "m", "lazyVNode", "set", "values", "__f", "obj", "i", "typeSpecs", "location", "getStack", "keys", "typeSpecName", "message", "loggedTypeFailures", "currentComponent", "renderCount", "nextComponent", "comp", "index", "property", "get", "indexOf", "deprecatedAttributes", "nodeName", "attributes", "deprecatedProto", "create", "newProps", "v", "__self", "__proto__", "domParentName", "log", "illegalDomChildrenTypes", "childType", "test", "__H", "hooks", "hook", "j", "initDebug", "cssID", "key", "cssClass", "dataKey", "doc", "$", "$$", "elem", "key", "cssID", "elems", "cssClass", "data", "el", "dataKey", "onClickOnEnter", "action", "ev", "on", "target", "type", "listener", "opt", "off", "send", "ev", "customEvent", "detail", "options", "handler", "action", "NULL", "TRUE", "FALSE", "OBJECT_START", "ARRAY_START", "OBJECT_ARRAY_END", "COLON", "COMMA", "STRING", "NUMBER", "rules", "source", "pos", "i", "STRING", "kind", "reg", "match", "RULES", "OBJECT_START", "ARRAY_START", "OBJECT_ARRAY_END", "NULL", "TRUE", "FALSE", "COLON", "COMMA", "NUMBER", "Lexer", "rule", "token", "Parser", "lexer", "val", "token", "NULL", "TRUE", "FALSE", "STRING", "NUMBER", "OBJECT_START", "ARRAY_START", "c", "obj", "OBJECT_ARRAY_END", "key", "COLON", "COMMA", "arr", "kind", "ID_REGEXP", "Stringifier", "value", "NULL", "ARRAY_START", "OBJECT_ARRAY_END", "OBJECT_START", "prev", "key", "str", "pair", "COLON", "COMMA", "TRUE", "FALSE", "c", "RISON", "text", "lexer", "Lexer", "Parser", "value", "Stringifier", "ESCAPE_NO_REQUIRED", "escape", "str", "unescape", "RISON", "text", "rison.RISON", "value", "parse", "RISON", "stringify", "parse", "RISON", "stringify", "ret", "item", "action", "tap", "isEmpty", "obj", "prop", "win", "getFragment", "fragmentOrURL", "hashIndex", "FragmentTracker", "#fragment", "#previous", "#boundedHandler", "fragment", "data", "RISON", "e", "isEmpty", "#hashChangeHandler", "newURL", "oldURL", "newFragment", "#createEvent", "FRAGMENT_USER_CHANGE", "FRAGMENT_CHANGE", "callback", "on", "type", "FragmentChangeEvent", "detail", "options", "previous", "currentIndex", "currentComponent", "previousComponent", "prevRaf", "currentHook", "afterPaintEffects", "options", "_options", "oldBeforeDiff", "__b", "oldBeforeRender", "__r", "oldAfterDiff", "diffed", "oldCommit", "__c", "oldBeforeUnmount", "unmount", "oldRoot", "__", "getHookState", "index", "type", "__h", "hooks", "__H", "length", "push", "useState", "initialState", "useReducer", "invokeOrReturn", "reducer", "init", "hookState", "_reducer", "action", "currentValue", "__N", "nextValue", "setState", "_hasScuFromHooks", "updateHookState", "p", "s", "c", "stateHooks", "filter", "x", "every", "prevScu", "call", "this", "shouldUpdate", "props", "forEach", "hookItem", "shouldComponentUpdate", "prevCWU", "componentWillUpdate", "__e", "tmp", "useEffect", "callback", "args", "state", "__s", "argsChanged", "_pendingArgs", "useRef", "initialValue", "currentHook", "useMemo", "current", "useMemo", "factory", "args", "state", "getHookState", "currentIndex", "argsChanged", "__H", "__", "__h", "useContext", "context", "provider", "currentComponent", "__c", "state", "getHookState", "currentIndex", "c", "__", "sub", "props", "value", "flushAfterPaintEffects", "component", "afterPaintEffects", "shift", "__P", "__H", "__h", "forEach", "invokeCleanup", "invokeEffect", "e", "options", "__e", "__v", "__b", "vnode", "currentComponent", "oldBeforeDiff", "__", "parentDom", "__k", "__m", "oldRoot", "__r", "oldBeforeRender", "currentIndex", "hooks", "__c", "previousComponent", "hookItem", "__N", "_pendingArgs", "diffed", "oldAfterDiff", "c", "length", "push", "prevRaf", "requestAnimationFrame", "afterNextFrame", "commitQueue", "some", "filter", "cb", "oldCommit", "unmount", "oldBeforeUnmount", "hasErrored", "s", "HAS_RAF", "callback", "raf", "done", "clearTimeout", "timeout", "cancelAnimationFrame", "setTimeout", "hook", "comp", "cleanup", "argsChanged", "oldArgs", "newArgs", "arg", "index", "invokeOrReturn", "f", "Dispatchable", "data", "Ctor", "clone", "useDispatchable", "factory", "state", "dispatcher", "h", "useRootState", "ref", "A", "y", "root", "HOVER", "HOVER_ICON", "HOVER_ICON_BG", "INPUT", "PROSE_BASIC", "PROSE", "VSCROLL", "tw", "classes", "s", "vnodeId", "isArray", "Array", "createVNode", "type", "props", "key", "isStaticChildren", "__source", "__self", "ref", "i", "normalizedProps", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "defaultProps", "options", "CSS", "ABC", "u", "ADD", "RANKING", "SUN", "u", "CSS", "MOON", "MENU", "CLOSE", "FILTER_EDIT", "u", "CSS", "BOOLEAN", "u", "CSS", "DESELECT", "u", "CSS", "SORT_DOWN", "u", "CSS", "SORT_UP", "LANGUISH", "u", "CSS", "GITHUB", "u", "CSS", "REDDIT", "WIKIPEDIA", "STACKOV", "EXTERN", "stapi", "doc", "getStore", "page", "Store", "getCurrentPage", "getCurrentPageStore", "key", "data", "fk", "jsonString", "e", "useIconButtonState", "action", "disabled", "initial", "useDispatchable", "ToggleLights", "ToggleHamburguer", "ToggleFacetsMenu", "ToggleAllAny", "ToggleClearFacets", "ToggleGridOrder", "IconButtonBaseState", "Dispatchable", "value", "data", "STORE", "getStore", "_ToggleLights", "theme", "SUN", "MOON", "_ToggleHamburguer", "mode", "MENU", "elem", "_ToggleFacetsMenu", "getCurrentPageStore", "FILTER_EDIT", "fm", "elems", "_ToggleAllAny", "shadeAll", "shadeAny", "u", "tw", "HOVER_ICON_BG", "BOOLEAN", "_ToggleClearFacets", "DESELECT", "el", "_ToggleGridOrder", "ABC", "RANKING", "grid", "thumbns", "CMP", "thumb", "RANKED_LAST", "getRank", "ranking", "getKey", "elA", "elB", "IconButton", "action", "disabled", "initial", "state", "useIconButtonState", "self", "useRootState", "y", "newval", "u", "onClickOnEnter", "send", "customEvent", "tw", "HOVER_ICON", "activateIconButtons", "elem", "elems", "action", "D", "u", "IconButton", "Pill", "children", "title", "klass", "u", "tw", "dataset", "data", "entries", "value", "key", "dataKey", "GRID_PAGES", "PLACEHOLDER", "VertexThumbn", "detail", "onlyImg", "klass", "u", "dataset", "tw", "cssClass", "HOVER", "VertexInfo", "detail", "open", "page", "self", "A", "forGrid", "GRID_PAGES", "store", "getCurrentPageStore", "updateOpen", "elem", "y", "links", "cssClass", "i", "el", "iconLinks", "u", "ret", "url", "IconLink", "EXTERN", "LANGUISH", "GITHUB", "WIKIPEDIA", "STACKOV", "REDDIT", "header", "tw", "info", "VertexThumbn", "relations", "onClickOnEnter", "RelationCell", "item", "Pill", "title", "vertices", "vertex", "VSCROLL", "PROSE_BASIC", "href", "icon", "HOVER_ICON", "children", "renderVertexInfo", "vertex", "page", "getCurrentPage", "store", "getCurrentPageStore", "elem", "elems", "detail", "open", "D", "u", "VertexInfo", "Filter", "_Filter", "mode", "values", "val", "value", "predicate", "v", "other", "ValBase", "value", "ValNil", "_ValNil", "other", "ValNumber", "_ValNumber", "ValBool", "_ValBool", "ValString", "_ValString", "ValSet", "_ValSet", "v", "val", "EMPTY_REGEX", "ValRegExp", "_ValRegExp", "deserializeValue", "Filter", "debounce", "callback", "millies", "timeout", "args", "Map2", "_Map2", "#map", "k1", "k2", "v", "m2", "whenMissing", "map", "res", "_k1", "map2", "size", "m", "results", "predicate", "entries", "APP_FACET_PREDICATES", "app", "date", "flt", "ret", "appYear", "year", "num", "key", "str", "lastRel", "COMMUNITY_FACET_PREDICATES", "comm", "flt", "key", "date", "ret", "communityYear", "year", "str", "com", "LEARNING_FACET_PREDICATES", "learn", "flt", "key", "date", "ret", "learningYear", "year", "str", "LIBRARY_FACET_PREDICATES", "lib", "date", "flt", "ret", "libraryYear", "year", "num", "key", "str", "lastRel", "PLANG_FACET_PREDICATES", "pl", "flt", "key", "date", "ret", "plYear", "year", "val", "img", "str", "lastRel", "SUBSYSTEM_FACET_PREDICATES", "sys", "date", "flt", "ret", "appYear", "year", "num", "key", "str", "lastRel", "TOOL_FACET_PREDICATES", "tool", "date", "flt", "ret", "toolYear", "year", "num", "key", "str", "lastRel", "matchVertex", "vertex", "predicates", "facetValues", "mode", "someFilter", "key", "value", "pred", "predResult", "matchVertices", "vertices", "vertexPredicates", "v", "matchVerticesFromGroups", "results", "_", "fkValueMap", "groupResult", "name", "APP_FACET_PREDICATES", "COMMUNITY_FACET_PREDICATES", "LEARNING_FACET_PREDICATES", "LIBRARY_FACET_PREDICATES", "PLANG_FACET_PREDICATES", "TOOL_FACET_PREDICATES", "SUBSYSTEM_FACET_PREDICATES", "FacetsMainState", "_FacetsMainState", "Dispatchable", "debounce", "data", "FragmentTracker", "groupsByFacetKey", "genericData", "map2", "Map2", "mode", "facetKey", "rawValue", "groupKey", "value", "deserializeValue", "getStore", "values", "result", "_", "v", "key", "selection", "g", "f", "vertexKeys", "matchVerticesFromGroups", "div", "elems", "vkey", "visible", "persist", "clearAll", "$", "err", "validYear", "year", "validMonth", "month", "validDay", "day", "parseDate", "val", "y", "m", "d", "parseYear", "parseMonth", "strDateCompare", "a", "b", "isRecent", "date", "referenceDate", "dateAgo", "value", "unit", "FacetMultiState", "Dispatchable", "val", "main", "data", "value", "mode", "groupKey", "facetKey", "Filter", "FacetMulti", "active", "facetKey", "groupKey", "label", "self", "A", "input", "main", "x", "FacetsMainContext", "state", "useDispatchable", "FacetMultiState", "y", "on", "ev", "maybeScroll", "value", "add", "handler", "val", "removePulse", "debounce", "li", "nthButton", "n", "remover", "idx", "b", "nb", "mapEntries", "mapper", "body", "u", "k", "tw", "INPUT", "IconButton", "HOVER", "onClickOnEnter", "CLOSE", "generateEntries", "pg", "config", "edgeName", "direction", "minEntries", "edges", "relations", "source", "entries", "key", "toKeys", "name", "entry", "years", "created", "year", "count", "strYear", "label", "col", "icon", "order", "SORT_UP", "SORT_DOWN", "opposite", "CMP", "a", "b", "isSel", "sortEntries", "less", "Header", "action", "cssClass", "col", "config", "order", "u", "tw", "HOVER", "onClickOnEnter", "label", "icon", "FacetTableState", "Dispatchable", "val", "main", "data", "value", "mode", "col", "order", "opposite", "sortEntries", "entry", "groupKey", "facetKey", "Filter", "pattern", "FacetTable", "groupKey", "facetKey", "config", "active", "self", "A", "main", "x", "FacetsMainContext", "state", "useDispatchable", "order", "entries", "sortEntries", "generateEntries", "FacetTableState", "y", "on", "ev", "SUBGRID", "tw", "ROW", "body", "u", "INPUT", "IconButton", "HOVER_ICON_BG", "onClickOnEnter", "DESELECT", "Header", "entry", "ret", "clickOrEnter", "HOVER", "FacetBool", "groupKey", "facetKey", "label", "valueMapper", "checked", "ValBool", "input", "A", "main", "x", "FacetsMainContext", "toggle", "handler", "checkbox", "u", "tw", "onClickOnEnter", "FacetSelect", "groupKey", "facetKey", "options", "label", "main", "x", "FacetsMainContext", "current", "u", "tw", "INPUT", "ev", "select", "ValString", "value", "FacetText", "groupKey", "facetKey", "label", "main", "x", "FacetsMainContext", "onInput", "debounce", "handler", "input", "ValString", "current", "u", "tw", "INPUT", "createFacetGroupsComponent", "groups", "currentFacetGroup", "u", "k", "groupKey", "title", "facets", "FacetGroup", "facet", "kind", "label", "facetKey", "props", "FacetBool", "FacetMulti", "FacetTable", "FacetText", "FacetSelect", "active", "children", "main", "x", "FacetsMainContext", "tw", "bool", "facetKey", "label", "valueMapper", "multi", "table", "config", "text", "select", "options", "dateOptions", "dateAgo", "defineFacetGroups", "groups", "groupsMap", "gkByFk", "groupKey", "facets", "facet", "component", "createFacetGroupsComponent", "arrayMerge", "target", "newData", "similar", "l1", "l2", "onDuplicate", "newElem", "prevElem", "elem", "IterTap", "_IterTap", "iterable", "callback", "init", "cmp", "str", "val", "predicate", "index", "v", "Vertex", "key", "data", "pk", "NON_AZ", "Vertices", "name", "kind", "factory", "vertex", "Edges", "fromSource", "toSource", "descDirect", "descInverse", "#forward", "#backward", "fromKey", "toKeys", "forward", "toKey", "backward", "f", "b", "set", "result", "from", "size", "setToKeys", "RelFrom", "edges", "existing", "k", "v", "RelTo", "to", "fromKeys", "ReleaseWrapper", "release", "parseYear", "parseMonth", "year", "month", "referenceDate", "isRecent", "other", "strDateCompare", "FieldReleases", "vertex", "IterTap", "rel", "all", "r1", "r2", "FieldStrDate", "key", "FieldGithub", "SCHEMA_TYPES", "PlangsVertex", "Vertex", "graph", "key", "relations", "vertex", "rel", "relValues", "related", "name", "href", "general", "VPlang", "tap", "year", "pop", "tsp", "value", "link", "#lcName", "FieldStrDate", "desc", "IterTap", "keywords", "lenient", "k", "kind", "images", "arrayMerge", "i1", "i2", "links", "l1", "l2", "stackovTags", "data", "rest", "PlangsGraphBase", "_PlangsGraphBase", "Vertices", "key", "VApp", "VAuthor", "VBundle", "VCommunity", "VLearning", "VLibrary", "VLicense", "VParadigm", "VPlang", "VPlatform", "VPost", "VSubsystem", "VTag", "VTool", "VTypeSystem", "Edges", "vertexName", "vertexRel", "klass", "edgeName", "direction", "vertexProp", "k", "v", "vertexKey", "kind", "e", "data", "vertices", "map", "vertexData", "edges", "fromKey", "toKeys", "VAppBase", "_VAppBase", "PlangsVertex", "rel", "RelTo", "RelFrom", "VAuthorBase", "_VAuthorBase", "VBundleBase", "_VBundleBase", "VCommunityBase", "_VCommunityBase", "VLearningBase", "_VLearningBase", "VLibraryBase", "_VLibraryBase", "VLicenseBase", "_VLicenseBase", "VParadigmBase", "_VParadigmBase", "VPlangBase", "_VPlangBase", "VPlatformBase", "_VPlatformBase", "VPostBase", "_VPostBase", "VSubsystemBase", "_VSubsystemBase", "VTagBase", "_VTagBase", "VToolBase", "_VToolBase", "VTypeSystemBase", "_VTypeSystemBase", "rel", "PlangsGraphBase", "prop", "PlangsGraph", "bundle", "tool", "plang", "VApp", "VAppBase", "FieldGithub", "FieldReleases", "VAuthor", "VAuthorBase", "VBundle", "VBundleBase", "VCommunity", "VCommunityBase", "VLearning", "VLearningBase", "VLibrary", "VLibraryBase", "VLicense", "VLicenseBase", "VParadigm", "VParadigmBase", "VPlang", "VPlangBase", "exts", "arrayMerge", "filenames", "releases", "r1", "r2", "data", "extensions", "rest", "IterTap", "githubPopular", "languishRanking", "opt", "set", "pl", "VPlatform", "VPlatformBase", "VTag", "VTagBase", "VTool", "VToolBase", "VTypeSystem", "VTypeSystemBase", "VSubsystem", "VSubsystemBase", "VPost", "VPostBase", "path", "GROUPS", "GK_BY_FK", "COMPONENT", "defineFacetGroups", "table", "prop", "text", "bool", "checked", "ValNumber", "ValNil", "rel", "PAGE", "NAV", "AppsFacetsState", "_AppsFacetsState", "FacetsMainState", "pg", "store", "getStore", "currentGroupKey", "mode", "values", "FragmentTracker", "GROUPS", "GK_BY_FK", "COMPONENT", "defineFacetGroups", "table", "prop", "text", "bool", "checked", "ValNumber", "ValNil", "rel", "PAGE", "NAV", "CommunitiesFacetsState", "_CommunitiesFacetsState", "FacetsMainState", "pg", "store", "getStore", "currentGroupKey", "mode", "values", "FragmentTracker", "GROUPS", "GK_BY_FK", "COMPONENT", "defineFacetGroups", "table", "prop", "text", "bool", "checked", "ValNumber", "ValNil", "rel", "PAGE", "NAV", "LearningFacetsState", "_LearningFacetsState", "FacetsMainState", "pg", "store", "getStore", "currentGroupKey", "mode", "values", "FragmentTracker", "GROUPS", "GK_BY_FK", "COMPONENT", "defineFacetGroups", "table", "prop", "text", "bool", "checked", "ValNumber", "ValNil", "rel", "PAGE", "NAV", "LibrariesFacetsState", "_LibrariesFacetsState", "FacetsMainState", "pg", "store", "getStore", "currentGroupKey", "mode", "values", "FragmentTracker", "GROUPS", "GK_BY_FK", "COMPONENT", "defineFacetGroups", "table", "prop", "rel", "text", "multi", "select", "bool", "PAGE", "NAV", "PlangsFacetsState", "_PlangsFacetsState", "FacetsMainState", "pg", "store", "getStore", "currentGroupKey", "mode", "values", "FragmentTracker", "GROUPS", "GK_BY_FK", "COMPONENT", "defineFacetGroups", "table", "prop", "text", "bool", "checked", "ValNumber", "ValNil", "rel", "PAGE", "NAV", "SubsystemsFacetsState", "_SubsystemsFacetsState", "FacetsMainState", "pg", "store", "getStore", "currentGroupKey", "mode", "values", "FragmentTracker", "GROUPS", "GK_BY_FK", "COMPONENT", "defineFacetGroups", "table", "prop", "text", "bool", "checked", "ValNumber", "ValNil", "rel", "PAGE", "NAV", "ToolsFacetsState", "_ToolsFacetsState", "FacetsMainState", "pg", "store", "getStore", "currentGroupKey", "mode", "values", "FragmentTracker", "FacetsMainContext", "J", "useFacetState", "page", "pg", "state", "useDispatchable", "AppsFacetsState", "CommunitiesFacetsState", "LearningFacetsState", "LibrariesFacetsState", "PlangsFacetsState", "SubsystemsFacetsState", "ToolsFacetsState", "SUBGRID", "tw", "FacetsMain", "page", "pg", "state", "useFacetState", "self", "useRootState", "y", "ev", "on", "body", "u", "FacetsMainContext", "FacetsAsideMenu", "cssClass", "INPUT", "group", "gk", "IconButton", "klass", "mapGroups", "callback", "groupKey", "VSCROLL", "isCurrent", "hasValues", "onClickOnEnter", "HOVER_ICON_BG", "DESELECT", "activateFacetsMain", "pg", "elem", "elems", "D", "u", "FacetsMain", "e", "isNonEmptyStr", "val", "isStrDate", "parseDate", "isCSV", "each", "v", "isURL", "url", "matchesRegex", "rx", "isNumber", "valid", "num", "REGEXP_ANUMPLUS", "REGEXP_EXTENSION", "REGEXP_GITHUB_PATH", "REGEXP_WIKIPEDIA_PATH", "VertexFormState", "_VertexFormState", "Dispatchable", "vertex", "fields", "isNonEmptyStr", "val", "isStrDate", "v", "isCSV", "isURL", "matchesRegex", "VPlang", "VLicense", "isNumber", "num", "values", "status", "attr", "value", "errors", "validator", "saver", "VertexForm", "vertex", "state", "useDispatchable", "VertexFormState", "u", "tw", "EditorButton", "key", "field", "formField", "label", "kind", "desc", "validator", "cssid", "value", "error", "target", "INPUT", "VerticesEditorState", "Dispatchable", "name", "v", "lastRelKey", "newRels", "newRel", "filter", "tab", "rel", "vertices", "vn", "VerticesEditor", "pg", "self", "A", "state", "useDispatchable", "VerticesEditorState", "y", "u", "tw", "vn", "EditorButton", "ev", "INPUT", "v", "VertexForm", "Relations", "JsonEditor", "label", "isCurrent", "onClick", "vertex", "vertexJson", "textarea", "status", "setStatus", "h", "reload", "save", "e", "key", "vertices", "Partition", "relKey", "rel", "related", "unrelated", "disconnect", "connect", "other", "Pill", "CLOSE", "ADD", "EditorMain", "pg", "tab", "setTab", "h", "u", "tw", "EditorButton", "Status", "VerticesEditor", "PROSE_BASIC", "activatePlangsEditor", "pg", "el", "elem", "D", "u", "EditorMain", "getClosestVertex", "pg", "target", "elem", "dataKey", "key", "data", "vertexName", "vertices", "FragmentTracker", "ToggleFacetsMenu", "ToggleHamburguer", "ToggleLights", "renderVertexInfo", "event", "link", "url", "linkElement", "start", "pg", "PlangsGraph", "loadData", "g", "activateIconButtons", "activateFacetsMain", "activatePlangsEditor", "grid", "elem", "on", "target", "vertex", "getClosestVertex", "img", "elems", "src", "err"]
}
